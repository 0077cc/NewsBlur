{% extends 'base.html' %}

{% block bodyclass %}NB-static NB-static-iphone{% endblock %}

{% block title %}The NewsBlur iPhone App{% endblock %}

{% block content %}

  <div class="NB-static-title">
    The NewsBlur iPhone App
  </div>

  <div class="NB-iphone-mockup">
    <ul class="NB-iphone-features">
        
    </ul>
  </div>
  
  <div class="NB-iphone-main">
    
    <a href="http://itunes.apple.com/us/app/newsblur/id463981119">
    <button class="NB-iphone-download">
        <img src="{{ MEDIA_URL }}img/reader/download.png" />
      Download the free NewsBlur iPhone app on the<br /><span class="NB-big">iTunes App Store</span>
    </button></a>
    
    <ul class="NB-iphone-features">
        <li class="NB-iphone-feature NB-first" data-screenshot="1">
            <img src="{{ MEDIA_URL }}img/iphone/v1.1 - Screenshot 1.png" />
            <div class="NB-iphone-feature-title">All your sites</div>
            <div class="NB-iphone-feature-subtitle">Read</div>
        </li>
        <li class="NB-iphone-feature" data-screenshot="2">
            <img src="{{ MEDIA_URL }}img/iphone/v1.2 - iPhone Screenshot 2.png" />
            <div class="NB-iphone-feature-title">All your sites</div>
            <div class="NB-iphone-feature-subtitle">Read</div>
        </li>
        <li class="NB-iphone-feature NB-last" data-screenshot="3">
            <img src="{{ MEDIA_URL }}img/iphone/v1.2 - iPhone Screenshot 3.png" />
            <div class="NB-iphone-feature-title">All your sites</div>
            <div class="NB-iphone-feature-subtitle">Read</div>
        </li>
    </ul>
    <ul class="NB-iphone-features">
        <li class="NB-iphone-feature NB-first" data-screenshot="4">
            <img src="{{ MEDIA_URL }}img/iphone/v1.2 - iPhone Screenshot 4.png" />
            <div class="NB-iphone-feature-title">All your sites</div>
            <div class="NB-iphone-feature-subtitle">Read</div>
        </li>
        <li class="NB-iphone-feature" data-screenshot="5">
            <img src="{{ MEDIA_URL }}img/iphone/v1.2 - iPhone Screenshot 5.png" />
            <div class="NB-iphone-feature-title">All your sites</div>
            <div class="NB-iphone-feature-subtitle">Read</div>
        </li>
        <li class="NB-iphone-feature NB-last" data-screenshot="6">
            <img src="{{ MEDIA_URL }}img/iphone/Default.png" />
            <div class="NB-iphone-feature-title">All your sites</div>
            <div class="NB-iphone-feature-subtitle">Read</div>
        </li>
    </ul>

  </div>

<script>
$(document).ready(function() {
    var $features = $('.NB-iphone-main .NB-iphone-feature');
    
    var setup_features = function() {
        var $mockup = $('.NB-iphone-mockup .NB-iphone-features');
        $mockup.append($features.clone());
        $mockup.find('.NB-iphone-feature-title, .NB-iphone-feature-subtitle').remove();
    };
    
    var hover_features = function() {
        var $mockup = $('.NB-iphone-mockup .NB-iphone-feature');
        $features.bind('mouseenter', function() {
            var $other_features = $features.not(this);
            var screenshots = $other_features.map(function() { return $(this).data('screenshot'); });
            $mockup.each(function() {
                var $this = $(this);
                var screenshot_filtered = _.contains(screenshots, $this.data('screenshot'));
                if (screenshot_filtered) {                    
                    $this.animate({'left': -384}, {'duration': 300, 'queue': false, 'easing': 'easeInOutQuad'});
                } else if (!screenshot_filtered) {
                    if (parseInt($this.css('left'), 10) == -384) {
                        $this.css({
                            'opacity': 1,
                            'z-index': 1,
                            'left': 384
                        });
                    }
                    $this.animate({'left': 0}, {'duration': 300, 'queue': false, 'easing': 'easeInOutQuad'});
                }
            });
        });
    };
    
    setup_features();
    hover_features();
    
});
</script>
{% endblock content %}