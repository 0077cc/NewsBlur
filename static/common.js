/*
 jquery.layout 1.3.0 - Release Candidate 29.14
 $Date: 2011-02-13 08:00:00 (Sun, 13 Feb 2011) $
 $Rev: 302914 $

 Copyright (c) 2010 
 Fabrizio Balliano (http://www.fabrizioballiano.net)
 Kevin Dalman (http://allpro.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 Changelog: http://layout.jquery-dev.net/changelog.cfm#1.3.0.rc29.13

 Docs: http://layout.jquery-dev.net/documentation.html
 Tips: http://layout.jquery-dev.net/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
*/
(function(b,a){function c(a){var b=r[a]={},c,d,a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}function d(b,c,d){if(d===a&&b.nodeType===1)if(d="data-"+c.replace(X,"-$1").toLowerCase(),d=b.getAttribute(d),typeof d==="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:h.isNumeric(d)?parseFloat(d):ka.test(d)?h.parseJSON(d):d}catch(e){}h.data(b,c,d)}else d=a;return d}function e(a){for(var b in a)if(!(b==="data"&&h.isEmptyObject(a[b]))&&b!=="toJSON")return!1;return!0}function f(a,
b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=h._data(a,d);g&&(c==="queue"||!h._data(a,e))&&(c==="mark"||!h._data(a,f))&&setTimeout(function(){!h._data(a,e)&&!h._data(a,f)&&(h.removeData(a,d,!0),g.fire())},0)}function g(){return!1}function j(){return!0}function k(a,b,c){b=b||0;if(h.isFunction(b))return h.grep(a,function(a,d){return!!b.call(a,d,a)===c});else if(b.nodeType)return h.grep(a,function(a){return a===b===c});else if(typeof b==="string"){var d=h.grep(a,function(a){return a.nodeType===1});
if(Aa.test(b))return h.filter(b,d,!c);else b=h.filter(b,d)}return h.grep(a,function(a){return h.inArray(a,b)>=0===c})}function l(a){var b=eb.split(" "),a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function m(a,b){if(b.nodeType===1&&h.hasData(a)){var c,d,e;d=h._data(a);var f=h._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)h.event.add(b,c+(g[c][d].namespace?".":"")+g[c][d].namespace,g[c][d],g[c][d].data);
if(f.data)f.data=h.extend({},f.data)}}function u(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c==="input"&&(a.type==="checkbox"||a.type==="radio")){if(a.checked)b.defaultChecked=b.checked=a.checked;if(b.value!==a.value)b.value=a.value}else if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue;b.removeAttribute(h.expando)}}
function n(a){return typeof a.getElementsByTagName!=="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!=="undefined"?a.querySelectorAll("*"):[]}function F(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function E(a){var b=(a.nodeName||"").toLowerCase();b==="input"?F(a):b!=="script"&&typeof a.getElementsByTagName!=="undefined"&&h.grep(a.getElementsByTagName("input"),F)}function aa(a,b){b.src?h.ajax({url:b.src,async:!1,dataType:"script"}):h.globalEval((b.text||
b.textContent||b.innerHTML||"").replace(pb,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)}function N(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?Ca:Ya;if(d>0)return c!=="border"&&h.each(e,function(){c||(d-=parseFloat(h.css(a,"padding"+this))||0);c==="margin"?d+=parseFloat(h.css(a,c+this))||0:d-=parseFloat(h.css(a,"border"+this+"Width"))||0}),d+"px";d=ua(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;c&&h.each(e,function(){d+=parseFloat(h.css(a,"padding"+this))||
0;c!=="padding"&&(d+=parseFloat(h.css(a,"border"+this+"Width"))||0);c==="margin"&&(d+=parseFloat(h.css(a,c+this))||0)});return d+"px"}function T(a){return function(b,c){var L;typeof b!=="string"&&(c=b,b="*");if(h.isFunction(c))for(var d=b.toLowerCase().split(Fa),e=0,f=d.length,g,j;e<f;e++)g=d[e],(j=/^\+/.test(g))&&(g=g.substr(1)||"*"),L=a[g]=a[g]||[],g=L,g[j?"unshift":"push"](c)}}function y(b,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=!0;for(var f=b[f],h=0,j=f?f.length:0,t=b===ma,k;h<j&&(t||!k);h++)k=
f[h](c,d,e),typeof k==="string"&&(!t||g[k]?k=a:(c.dataTypes.unshift(k),k=y(b,c,d,e,k,g)));if((t||!k)&&!g["*"])k=y(b,c,d,e,"*",g);return k}function P(b,c){var d,e,f=h.ajaxSettings.flatOptions||{};for(d in c)c[d]!==a&&((f[d]?b:e||(e={}))[d]=c[d]);e&&h.extend(!0,b,e)}function K(a,b,c,d){if(h.isArray(b))h.each(b,function(b,e){c||La.test(a)?d(a,e):K(a+"["+(typeof e==="object"||h.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b==="object")for(var e in b)K(a+"["+e+"]",b[e],c,d);else d(a,b)}function q(){try{return new b.XMLHttpRequest}catch(a){}}
function V(){setTimeout(I,0);return fb=h.now()}function I(){fb=a}function ea(a,b){var c={};h.each(ub.concat.apply([],ub.slice(0,b)),function(){c[this]=a});return c}function na(a){if(!qb[a]){var b=v.body,c=h("<"+a+">").appendTo(b),d=c.css("display");c.remove();if(d==="none"||d===""){if(!Da)Da=v.createElement("iframe"),Da.frameBorder=Da.width=Da.height=0;b.appendChild(Da);if(!Sa||!Da.createElement)Sa=(Da.contentWindow||Da.contentDocument).document,Sa.write((v.compatMode==="CSS1Compat"?"<!doctype html>":
"")+"<html><body>"),Sa.close();c=Sa.createElement(a);Sa.body.appendChild(c);d=h.css(c,"display");b.removeChild(Da)}qb[a]=d}return qb[a]}function Z(a){return h.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var v=b.document,x=b.navigator,p=b.location,h=function(){function c(){if(!d.isReady){try{v.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=b.jQuery,f=b.$,g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
j=/\S/,k=/^\s+/,t=/\s+$/,l=/\d/,B=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,z=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ma=/(?:^|:|,)(?:\s*\[)+/g,M=/(webkit)[ \/]([\w.]+)/,xa=/(opera)(?:.*version)?[ \/]([\w.]+)/,r=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,ga=/-([a-z]|[0-9])/ig,n=/^-ms-/,ya=function(a,b){return(b+"").toUpperCase()},Za=x.userAgent,gb,ba,u=Object.prototype.toString,J=Object.prototype.hasOwnProperty,da=Array.prototype.push,
E=Array.prototype.slice,Ja=String.prototype.trim,q=Array.prototype.indexOf,ta={};d.fn=d.prototype={constructor:d,init:function(b,c,e){var f;if(!b)return this;if(b.nodeType)return this.context=this[0]=b,this.length=1,this;if(b==="body"&&!c&&v.body)return this.context=v,this[0]=v.body,this.selector=b,this.length=1,this;if(typeof b==="string")if((f=b.charAt(0)==="<"&&b.charAt(b.length-1)===">"&&b.length>=3?[null,b,null]:h.exec(b))&&(f[1]||!c))if(f[1])return e=(c=c instanceof d?c[0]:c)?c.ownerDocument||
c:v,(b=B.exec(b))?d.isPlainObject(c)?(b=[v.createElement(b[1])],d.fn.attr.call(b,c,!0)):b=[e.createElement(b[1])]:(b=d.buildFragment([f[1]],[e]),b=(b.cacheable?d.clone(b.fragment):b.fragment).childNodes),d.merge(this,b);else{if((c=v.getElementById(f[2]))&&c.parentNode){if(c.id!==f[2])return e.find(b);this.length=1;this[0]=c}this.context=v;this.selector=b;return this}else return!c||c.jquery?(c||e).find(b):this.constructor(c).find(b);else if(d.isFunction(b))return e.ready(b);if(b.selector!==a)this.selector=
b.selector,this.context=b.context;return d.makeArray(b,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?da.apply(e,a):d.merge(e,a);e.prevObject=this;e.context=this.context;if(b==="find")e.selector=this.selector+(this.selector?" ":"")+c;else if(b)e.selector=this.selector+"."+b+"("+c+")";return e},
each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady();gb.add(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:da,sort:[].sort,
splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var b,c,e,f,g,R=arguments[0]||{},h=1,j=arguments.length,k=!1;typeof R==="boolean"&&(k=R,R=arguments[1]||{},h=2);typeof R!=="object"&&!d.isFunction(R)&&(R={});j===h&&(R=this,--h);for(;h<j;h++)if((b=arguments[h])!=null)for(c in b)e=R[c],f=b[c],R!==f&&(k&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,e=e&&d.isArray(e)?e:[]):e=e&&d.isPlainObject(e)?e:{},R[c]=d.extend(k,e,f)):f!==a&&(R[c]=f));return R};d.extend({noConflict:function(a){if(b.$===
d)b.$=f;if(a&&b.jQuery===d)b.jQuery=e;return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!v.body)return setTimeout(d.ready,1);d.isReady=!0;a!==!0&&--d.readyWait>0||(gb.fireWith(v,[d]),d.fn.trigger&&d(v).trigger("ready").unbind("ready"))}},bindReady:function(){if(!gb){gb=d.Callbacks("once memory");if(v.readyState==="complete")return setTimeout(d.ready,1);if(v.addEventListener)v.addEventListener("DOMContentLoaded",
ba,!1),b.addEventListener("load",d.ready,!1);else if(v.attachEvent){v.attachEvent("onreadystatechange",ba);b.attachEvent("onload",d.ready);var a=!1;try{a=b.frameElement==null}catch(e){}v.documentElement.doScroll&&a&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a==="object"&&"setInterval"in a},isNumeric:function(a){return a!=null&&l.test(a)&&!isNaN(a)},type:function(a){return a==null?
String(a):ta[u.call(a)]||"object"},isPlainObject:function(b){if(!b||d.type(b)!=="object"||b.nodeType||d.isWindow(b))return!1;try{if(b.constructor&&!J.call(b,"constructor")&&!J.call(b.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var e in b);return e===a||J.call(b,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=d.trim(a);if(b.JSON&&b.JSON.parse)return b.JSON.parse(a);if(z.test(a.replace(m,
"@").replace(p,"]").replace(ma,"")))return(new Function("return "+a))();d.error("Invalid JSON: "+a)},parseXML:function(c){var e,f;try{b.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=a}(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+c);return e},noop:function(){},globalEval:function(a){a&&j.test(a)&&(b.execScript||function(a){b.eval.call(b,a)})(a)},camelCase:function(a){return a.replace(n,
"ms-").replace(ga,ya)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(b,c,e){var f,g=0,R=b.length,h=R===a||d.isFunction(b);if(e)if(h)for(f in b){if(c.apply(b[f],e)===!1)break}else for(;g<R;){if(c.apply(b[g++],e)===!1)break}else if(h)for(f in b){if(c.call(b[f],f,b[f])===!1)break}else for(;g<R;)if(c.call(b[g],g,b[g++])===!1)break;return b},trim:Ja?function(a){return a==null?"":Ja.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(t,
"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?da.call(c,a):d.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(q)return q.call(b,a,c);d=b.length;for(c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(b,c){var d=b.length,e=0;if(typeof c.length==="number")for(var f=c.length;e<f;e++)b[d++]=c[e];else for(;c[e]!==a;)b[d++]=c[e++];b.length=d;return b},grep:function(a,
b,c){for(var d=[],e,c=!!c,f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(b,c,e){var f,g,R=[],h=0,j=b.length;if(b instanceof d||j!==a&&typeof j==="number"&&(j>0&&b[0]&&b[j-1]||j===0||d.isArray(b)))for(;h<j;h++)f=c(b[h],h,e),f!=null&&(R[R.length]=f);else for(g in b)f=c(b[g],g,e),f!=null&&(R[R.length]=f);return R.concat.apply([],R)},guid:1,proxy:function(b,c){if(typeof c==="string")var e=b[c],c=b,b=e;if(!d.isFunction(b))return a;var f=E.call(arguments,2),e=function(){return b.apply(c,
f.concat(E.call(arguments)))};e.guid=b.guid=b.guid||e.guid||d.guid++;return e},access:function(b,c,e,f,g,R){var h=b.length;if(typeof c==="object"){for(var j in c)d.access(b,j,c[j],f,g,e);return b}if(e!==a){f=!R&&f&&d.isFunction(e);for(j=0;j<h;j++)g(b[j],c,f?e.call(b[j],j,g(b[j],c)):e,R);return b}return h?g(b[0],c):a},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();a=M.exec(a)||xa.exec(a)||r.exec(a)||a.indexOf("compatible")<0&&w.exec(a)||[];return{browser:a[1]||"",
version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,e){e&&e instanceof d&&!(e instanceof a)&&(e=a(e));return d.fn.init.call(this,c,e,b)};a.fn.init.prototype=a.fn;var b=a(v);return a},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){ta["[object "+b+"]"]=b.toLowerCase()});Za=d.uaMatch(Za);if(Za.browser)d.browser[Za.browser]=
!0,d.browser.version=Za.version;if(d.browser.webkit)d.browser.safari=!0;j.test("\u00a0")&&(k=/^[\s\xA0]+/,t=/[\s\xA0]+$/);g=d(v);v.addEventListener?ba=function(){v.removeEventListener("DOMContentLoaded",ba,!1);d.ready()}:v.attachEvent&&(ba=function(){v.readyState==="complete"&&(v.detachEvent("onreadystatechange",ba),d.ready())});typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return d});return d}(),r={};h.Callbacks=function(b){var b=b?r[b]||c(b):{},d=[],e=
[],f,g,j,k,t,l=function(a){var c,e,f,g;for(c=0,e=a.length;c<e;c++)f=a[c],g=h.type(f),g==="array"?l(f):g==="function"&&(!b.unique||!z.has(f))&&d.push(f)},B=function(a,c){c=c||[];f=!b.memory||[a,c];g=!0;t=j||0;j=0;for(k=d.length;d&&t<k;t++)if(d[t].apply(a,c)===!1&&b.stopOnFalse){f=!0;break}g=!1;d&&(b.once?f===!0?z.disable():d=[]:e&&e.length&&(f=e.shift(),z.fireWith(f[0],f[1])))},z={add:function(){if(d){var a=d.length;l(arguments);g?k=d.length:f&&f!==!0&&(j=a,B(f[0],f[1]))}return this},remove:function(){if(d)for(var a=
arguments,c=0,e=a.length;c<e;c++)for(var f=0;f<d.length;f++)if(a[c]===d[f]&&(g&&f<=k&&(k--,f<=t&&t--),d.splice(f--,1),b.unique))break;return this},has:function(a){if(d)for(var b=0,c=d.length;b<c;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=e=f=a;return this},disabled:function(){return!d},lock:function(){e=a;(!f||f===!0)&&z.disable();return this},locked:function(){return!e},fireWith:function(a,c){e&&(g?b.once||e.push([a,c]):(!b.once||!f)&&B(a,c));return this},
fire:function(){z.fireWith(this,arguments);return this},fired:function(){return!!f}};return z};var Q=[].slice;h.extend({Deferred:function(a){var b=h.Callbacks("once memory"),c=h.Callbacks("once memory"),d=h.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){j.done(a).fail(b).progress(c);return this},always:function(){return j.done.apply(j,arguments).fail.apply(j,
arguments)},pipe:function(a,b,c){return h.Deferred(function(d){h.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;if(h.isFunction(c))j[a](function(){if((f=c.apply(this,arguments))&&h.isFunction(f.promise))f.promise().then(d.resolve,d.reject,d.notify);else d[e+"With"](this===j?d:this,[f])});else j[a](d[e])})}).promise()},promise:function(a){if(a==null)a=g;else for(var b in g)a[b]=g[b];return a}},j=g.promise({}),k;for(k in f)j[k]=f[k].fire,j[k+"With"]=
f[k].fireWith;j.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock);a&&a.call(j,j);return j},when:function(a){function b(a){return function(b){d[a]=arguments.length>1?Q.call(arguments,0):b;--j||k.resolveWith(k,d)}}function c(a){return function(b){g[a]=arguments.length>1?Q.call(arguments,0):b;k.notifyWith(t,g)}}var d=Q.call(arguments,0),e=0,f=d.length,g=Array(f),j=f,k=f<=1&&a&&h.isFunction(a.promise)?a:h.Deferred(),t=k.promise();if(f>1){for(;e<f;e++)d[e]&&
d[e].promise&&h.isFunction(d[e].promise)?d[e].promise().then(b(e),k.reject,c(e)):--j;j||k.resolveWith(k,d)}else k!==a&&k.resolveWith(k,f?[a]:[]);return t}});h.support=function(){var a=v.createElement("div"),b=v.documentElement,c,d,e,f,g,j,k,t;a.setAttribute("className","t");a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>";c=a.getElementsByTagName("*");d=a.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};
e=v.createElement("select");f=e.appendChild(v.createElement("option"));c=a.getElementsByTagName("input")[0];g={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,unknownElems:!!a.getElementsByTagName("nav").length,checkOn:c.value==="on",optSelected:f.selected,
getSetAttribute:a.className!=="t",enctype:!!v.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0};c.checked=!0;g.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;g.optDisabled=!f.disabled;try{delete a.test}catch(l){g.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){g.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick"));
c=v.createElement("input");c.value="t";c.setAttribute("type","radio");g.radioValue=c.value==="t";c.setAttribute("checked","checked");a.appendChild(c);d=v.createDocumentFragment();d.appendChild(a.lastChild);g.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="";a.style.width=a.style.paddingLeft="1px";j=v.getElementsByTagName("body")[0];k=v.createElement(j?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};j&&h.extend(d,{position:"absolute",
left:"-999px",top:"-999px"});for(t in d)k.style[t]=d[t];k.appendChild(a);b=j||b;b.insertBefore(k,b.firstChild);g.appendChecked=c.checked;g.boxModel=a.offsetWidth===2;if("zoom"in a.style)a.style.display="inline",a.style.zoom=1,g.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",g.shrinkWrapBlocks=a.offsetWidth!==2;a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";d=a.getElementsByTagName("td");c=
d[0].offsetHeight===0;d[0].style.display="";d[1].style.display="none";g.reliableHiddenOffsets=c&&d[0].offsetHeight===0;a.innerHTML="";if(v.defaultView&&v.defaultView.getComputedStyle)c=v.createElement("div"),c.style.width="0",c.style.marginRight="0",a.appendChild(c),g.reliableMarginRight=(parseInt((v.defaultView.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)===0;if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})d="on"+t,c=d in a,c||(a.setAttribute(d,"return;"),c=typeof a[d]===
"function"),g[t+"Bubbles"]=c;h(function(){var a,b,c,d;if(j=v.getElementsByTagName("body")[0])a=v.createElement("div"),a.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",j.insertBefore(a,j.firstChild),k=v.createElement("div"),k.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;visibility:hidden;border:0;",k.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;'><div></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
a.appendChild(k),b=k.firstChild,c=b.firstChild,d={doesNotAddBorder:c.offsetTop!==5,doesAddBorderForTableAndCells:b.nextSibling.firstChild.firstChild.offsetTop===5},c.style.position="fixed",c.style.top="20px",d.fixedPosition=c.offsetTop===20||c.offsetTop===15,c.style.position=c.style.top="",b.style.overflow="hidden",b.style.position="relative",d.subtractsBorderForOverflowNotVisible=c.offsetTop===-5,d.doesNotIncludeMarginInBodyOffset=j.offsetTop!==1,j.removeChild(a),k=null,h.extend(g,d)});k.innerHTML=
"";b.removeChild(k);k=d=e=f=j=c=a=c=null;return g}();h.boxModel=h.support.boxModel;var ka=/^(?:\{.*\}|\[.*\])$/,X=/([A-Z])/g;h.extend({cache:{},uuid:0,expando:"jQuery"+(h.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?h.cache[a[h.expando]]:a[h.expando];return!!a&&!e(a)},data:function(b,c,d,e){if(h.acceptData(b)){var f,g=typeof c==="string",j=(f=b.nodeType)?h.cache:b,k=f?b[h.expando]:b[h.expando]&&
h.expando,t=c==="events";if(k&&j[k]&&(t||e||j[k].data)||!(g&&d===a)){if(!k)f?b[h.expando]=k=++h.uuid:k=h.expando;if(!j[k]&&(j[k]={},!f))j[k].toJSON=h.noop;if(typeof c==="object"||typeof c==="function")e?j[k]=h.extend(j[k],c):j[k].data=h.extend(j[k].data,c);f=b=j[k];if(!e){if(!b.data)b.data={};b=b.data}d!==a&&(b[h.camelCase(c)]=d);if(t&&!b[c])return f.events;g?(d=b[c],d==null&&(d=b[h.camelCase(c)])):d=b;return d}}},removeData:function(a,b,c){if(h.acceptData(a)){var d,f,g,j=a.nodeType,k=j?h.cache:a,
t=j?a[h.expando]:h.expando;if(k[t]){if(b&&(d=c?k[t]:k[t].data)){h.isArray(b)||(b in d?b=[b]:(b=h.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;f<g;f++)delete d[b[f]];if(!(c?e:h.isEmptyObject)(d))return}if(!c&&(delete k[t].data,!e(k[t])))return;h.support.deleteExpando||!k.setInterval?delete k[t]:k[t]=null;j&&(h.support.deleteExpando?delete a[h.expando]:a.removeAttribute?a.removeAttribute(h.expando):a[h.expando]=null)}}},_data:function(a,b,c){return h.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=
h.noData[a.nodeName.toLowerCase()];if(b)return!(b===!0||a.getAttribute("classid")!==b)}return!0}});h.fn.extend({data:function(b,c){var e,f,g,j=null;if(typeof b==="undefined"){if(this.length&&(j=h.data(this[0]),this[0].nodeType===1&&!h._data(this[0],"parsedAttrs"))){f=this[0].attributes;for(var k=0,t=f.length;k<t;k++)g=f[k].name,g.indexOf("data-")===0&&(g=h.camelCase(g.substring(5)),d(this[0],g,j[g]));h._data(this[0],"parsedAttrs",!0)}return j}else if(typeof b==="object")return this.each(function(){h.data(this,
b)});e=b.split(".");e[1]=e[1]?"."+e[1]:"";return c===a?(j=this.triggerHandler("getData"+e[1]+"!",[e[0]]),j===a&&this.length&&(j=h.data(this[0],b),j=d(this[0],b,j)),j===a&&e[1]?this.data(e[0]):j):this.each(function(){var a=h(this),d=[e[0],c];a.triggerHandler("setData"+e[1]+"!",d);h.data(this,b,c);a.triggerHandler("changeData"+e[1]+"!",d)})},removeData:function(a){return this.each(function(){h.removeData(this,a)})}});h.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",h._data(a,b,(h._data(a,b)||0)+
1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){var c=c||"fx",d=c+"mark";(a=a?0:(h._data(b,d)||1)-1)?h._data(b,d,a):(h.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=h._data(a,b),c&&(!d||h.isArray(c)?d=h._data(a,b,h.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){var b=b||"fx",c=h.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift());d&&(b==="fx"&&c.unshift("inprogress"),h._data(a,b+".run",e),d.call(a,function(){h.dequeue(a,
b)},e));c.length||(h.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}});h.fn.extend({queue:function(b,c){typeof b!=="string"&&(c=b,b="fx");return c===a?h.queue(this[0],b):this.each(function(){var a=h.queue(this,b,c);b==="fx"&&a[0]!=="inprogress"&&h.dequeue(this,b)})},dequeue:function(a){return this.each(function(){h.dequeue(this,a)})},delay:function(a,b){a=h.fx?h.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||
"fx",[])},promise:function(b){function c(){--g||d.resolveWith(e,[e])}typeof b!=="string"&&(b=a);var b=b||"fx",d=h.Deferred(),e=this,f=e.length,g=1,j=b+"defer",k=b+"queue";b+="mark";for(var t;f--;)if(t=h.data(e[f],j,a,!0)||(h.data(e[f],k,a,!0)||h.data(e[f],b,a,!0))&&h.data(e[f],j,h.Callbacks("once memory"),!0))g++,t.add(c);c();return d.promise()}});var S=/[\n\t\r]/g,A=/\s+/,wa=/\r/g,U=/^(?:button|input)$/i,G=/^(?:button|input|object|select|textarea)$/i,w=/^a(?:rea)?$/i,W=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
C=h.support.getSetAttribute,D,fa,qa;h.fn.extend({attr:function(a,b){return h.access(this,a,b,!0,h.attr)},removeAttr:function(a){return this.each(function(){h.removeAttr(this,a)})},prop:function(a,b){return h.access(this,a,b,!0,h.prop)},removeProp:function(b){b=h.propFix[b]||b;return this.each(function(){try{this[b]=a,delete this[b]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,j;if(h.isFunction(a))return this.each(function(b){h(this).addClass(a.call(this,b,this.className))});if(a&&typeof a===
"string"){b=a.split(A);for(c=0,d=this.length;c<d;c++)if(e=this[c],e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,j=b.length;g<j;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=h.trim(f)}}return this},removeClass:function(b){var c,d,e,f,g,j,k;if(h.isFunction(b))return this.each(function(a){h(this).removeClass(b.call(this,a,this.className))});if(b&&typeof b==="string"||b===a){c=(b||"").split(A);for(d=0,e=this.length;d<e;d++)if(f=this[d],f.nodeType===
1&&f.className)if(b){g=(" "+f.className+" ").replace(S," ");for(j=0,k=c.length;j<k;j++)g=g.replace(" "+c[j]+" "," ");f.className=h.trim(g)}else f.className=""}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==="boolean";return h.isFunction(a)?this.each(function(c){h(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string")for(var e,f=0,g=h(this),j=b,k=a.split(A);e=k[f++];)j=d?j:!g.hasClass(e),g[j?"addClass":"removeClass"](e);else if(c==="undefined"||
c==="boolean")this.className&&h._data(this,"__className__",this.className),this.className=this.className||a===!1?"":h._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(this[b].nodeType===1&&(" "+this[b].className+" ").replace(S," ").indexOf(a)>-1)return!0;return!1},val:function(b){var c,d,e,f=this[0];if(!arguments.length){if(f){if((c=h.valHooks[f.nodeName.toLowerCase()]||h.valHooks[f.type])&&"get"in c&&(d=c.get(f,"value"))!==a)return d;d=f.value;
return typeof d==="string"?d.replace(wa,""):d==null?"":d}return a}e=h.isFunction(b);return this.each(function(d){var f=h(this);if(this.nodeType===1&&(d=e?b.call(this,d,f.val()):b,d==null?d="":typeof d==="number"?d+="":h.isArray(d)&&(d=h.map(d,function(a){return a==null?"":a+""})),c=h.valHooks[this.nodeName.toLowerCase()]||h.valHooks[this.type],!c||!("set"in c)||c.set(this,d,"value")===a))this.value=d})}});h.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:
a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],f=a.options,g=a.type==="select-one";if(d<0)return null;a=g?d:0;for(c=g?d+1:f.length;a<c;a++)if(b=f[a],b.selected&&(h.support.optDisabled?!b.disabled:b.getAttribute("disabled")===null)&&(!b.parentNode.disabled||!h.nodeName(b.parentNode,"optgroup"))){b=h(b).val();if(g)return b;e.push(b)}return g&&!e.length&&f.length?h(f[d]).val():e},set:function(a,b){var c=h.makeArray(b);h(a).find("option").each(function(){this.selected=h.inArray(h(this).val(),
c)>=0});if(!c.length)a.selectedIndex=-1;return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(b,c,d,e){var f,g,j=b.nodeType;if(!b||j===3||j===8||j===2)return a;if(e&&c in h.attrFn)return h(b)[c](d);if(!("getAttribute"in b))return h.prop(b,c,d);if(e=j!==1||!h.isXMLDoc(b))c=c.toLowerCase(),g=h.attrHooks[c]||(W.test(c)?fa:D);return d!==a?d===null?(h.removeAttr(b,c),a):g&&"set"in g&&e&&(f=g.set(b,d,c))!==a?f:(b.setAttribute(c,""+d),d):g&&"get"in g&&e&&(f=
g.get(b,c))!==null?f:(f=b.getAttribute(c),f===null?a:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(a.nodeType===1){d=(b||"").split(A);for(f=d.length;g<f;g++)e=d[g].toLowerCase(),c=h.propFix[e]||e,h.attr(a,e,""),a.removeAttribute(C?e:c),W.test(e)&&c in a&&(a[c]=!1)}},attrHooks:{type:{set:function(a,b){if(U.test(a.nodeName)&&a.parentNode)h.error("type property can't be changed");else if(!h.support.radioValue&&b==="radio"&&h.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);if(c)a.value=
c;return b}}},value:{get:function(a,b){return D&&h.nodeName(a,"button")?D.get(a,b):b in a?a.value:null},set:function(a,b,c){if(D&&h.nodeName(a,"button"))return D.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b,c,d){var e,f,g=b.nodeType;if(!b||
g===3||g===8||g===2)return a;if(g!==1||!h.isXMLDoc(b))c=h.propFix[c]||c,f=h.propHooks[c];return d!==a?f&&"set"in f&&(e=f.set(b,d,c))!==a?e:b[c]=d:f&&"get"in f&&(e=f.get(b,c))!==null?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):G.test(b.nodeName)||w.test(b.nodeName)&&b.href?0:a}}}});h.attrHooks.tabindex=h.propHooks.tabIndex;fa={get:function(b,c){var d,e=h.prop(b,c);return e===!0||typeof e!=="boolean"&&(d=b.getAttributeNode(c))&&
d.nodeValue!==!1?c.toLowerCase():a},set:function(a,b,c){b===!1?h.removeAttr(a,c):(b=h.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};if(!C)qa={name:!0,id:!0},D=h.valHooks.button={get:function(b,c){var d;return(d=b.getAttributeNode(c))&&(qa[c]?d.nodeValue!=="":d.specified)?d.nodeValue:a},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=v.createAttribute(c),a.setAttributeNode(d));return d.nodeValue=b+""}},h.attrHooks.tabindex.set=D.set,h.each(["width","height"],function(a,
b){h.attrHooks[b]=h.extend(h.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),h.attrHooks.contenteditable={get:D.get,set:function(a,b,c){b===""&&(b="false");D.set(a,b,c)}};h.support.hrefNormalized||h.each(["href","src","width","height"],function(b,c){h.attrHooks[c]=h.extend(h.attrHooks[c],{get:function(b){b=b.getAttribute(c,2);return b===null?a:b}})});if(!h.support.style)h.attrHooks.style={get:function(b){return b.style.cssText.toLowerCase()||a},set:function(a,b){return a.style.cssText=
""+b}};if(!h.support.optSelected)h.propHooks.selected=h.extend(h.propHooks.selected,{get:function(){return null}});if(!h.support.enctype)h.propFix.enctype="encoding";h.support.checkOn||h.each(["radio","checkbox"],function(){h.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}});h.each(["radio","checkbox"],function(){h.valHooks[this]=h.extend(h.valHooks[this],{set:function(a,b){if(h.isArray(b))return a.checked=h.inArray(h(a).val(),b)>=0}})});var ra=/^(?:textarea|input|select)$/i,
ja=/^([^\.]*)?(?:\.(.+))?$/,la=/\bhover(\.\S+)?/,Y=/^key/,oa=/^(?:mouse|contextmenu)|click/,Ea=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,M=function(a){if(a=Ea.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)");return a},J=function(a){return h.event.special.hover?a:a.replace(la,"mouseenter$1 mouseleave$1")};h.event={add:function(b,c,d,e,f){var g,j,k,t,l,B,z,m,p;if(!(b.nodeType===3||b.nodeType===8||!c||!d||!(g=h._data(b)))){if(d.handler)z=d,d=z.handler;if(!d.guid)d.guid=
h.guid++;k=g.events;if(!k)g.events=k={};j=g.handle;if(!j)g.handle=j=function(b){return typeof h!=="undefined"&&(!b||h.event.triggered!==b.type)?h.event.dispatch.apply(j.elem,arguments):a},j.elem=b;c=J(c).split(" ");for(g=0;g<c.length;g++){t=ja.exec(c[g])||[];l=t[1];B=(t[2]||"").split(".").sort();p=h.event.special[l]||{};l=(f?p.delegateType:p.bindType)||l;p=h.event.special[l]||{};t=h.extend({type:l,origType:t[1],data:e,handler:d,guid:d.guid,selector:f,namespace:B.join(".")},z);if(f&&(t.quick=M(f),
!t.quick&&h.expr.match.POS.test(f)))t.isPositional=!0;m=k[l];if(!m&&(m=k[l]=[],m.delegateCount=0,!p.setup||p.setup.call(b,e,B,j)===!1))b.addEventListener?b.addEventListener(l,j,!1):b.attachEvent&&b.attachEvent("on"+l,j);if(p.add&&(p.add.call(b,t),!t.handler.guid))t.handler.guid=d.guid;f?m.splice(m.delegateCount++,0,t):m.push(t);h.event.global[l]=!0}b=null}},global:{},remove:function(a,b,c,d){var e=h.hasData(a)&&h._data(a),f,g,j,k,t,l,B,z,m;if(e&&(l=e.events)){b=J(b||"").split(" ");for(f=0;f<b.length;f++){g=
ja.exec(b[f])||[];j=g[1];g=g[2];if(!j){g=g?"."+g:"";for(t in l)h.event.remove(a,t+g,c,d);return}B=h.event.special[j]||{};j=(d?B.delegateType:B.bindType)||j;z=l[j]||[];k=z.length;g=g?RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(c||g||d||B.remove)for(t=0;t<z.length;t++){if(m=z[t],!c||c.guid===m.guid)if(!g||g.test(m.namespace))if(!d||d===m.selector||d==="**"&&m.selector)z.splice(t--,1),m.selector&&z.delegateCount--,B.remove&&B.remove.call(a,m)}else z.length=0;z.length===
0&&k!==z.length&&((!B.teardown||B.teardown.call(a,g)===!1)&&h.removeEvent(a,j,e.handle),delete l[j])}if(h.isEmptyObject(l)){if(b=e.handle)b.elem=null;h.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||!(e.nodeType===3||e.nodeType===8)){var g=c.type||c,j=[],k,t,l,B;g.indexOf("!")>=0&&(g=g.slice(0,-1),k=!0);g.indexOf(".")>=0&&(j=g.split("."),g=j.shift(),j.sort());if(e&&!h.event.customEvent[g]||h.event.global[g])if(c=typeof c===
"object"?c[h.expando]?c:new h.Event(g,c):new h.Event(g),c.type=g,c.isTrigger=!0,c.exclusive=k,c.namespace=j.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+j.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=g.indexOf(":")<0?"on"+g:"",(f||!e)&&c.preventDefault(),e){c.result=a;if(!c.target)c.target=e;d=d!=null?h.makeArray(d):[];d.unshift(c);k=h.event.special[g]||{};if(!(k.trigger&&k.trigger.apply(e,d)===!1)){B=[[e,k.bindType||g]];if(!f&&!k.noBubble&&!h.isWindow(e)){l=k.delegateType||g;t=null;for(f=e.parentNode;f;f=
f.parentNode)B.push([f,l]),t=f;t&&t===e.ownerDocument&&B.push([t.defaultView||t.parentWindow||b,l])}for(t=0;t<B.length;t++)if(f=B[t][0],c.type=B[t][1],(l=(h._data(f,"events")||{})[c.type]&&h._data(f,"handle"))&&l.apply(f,d),(l=j&&f[j])&&h.acceptData(f)&&l.apply(f,d),c.isPropagationStopped())break;c.type=g;if(!c.isDefaultPrevented()&&(!k._default||k._default.apply(e.ownerDocument,d)===!1)&&!(g==="click"&&h.nodeName(e,"a"))&&h.acceptData(e))if(j&&e[g]&&(g!=="focus"&&g!=="blur"||c.target.offsetWidth!==
0)&&!h.isWindow(e))(t=e[j])&&(e[j]=null),h.event.triggered=g,e[g](),h.event.triggered=a,t&&(e[j]=t);return c.result}}else for(t in e=h.cache,e)e[t].events&&e[t].events[g]&&h.event.trigger(c,d,e[t].handle.elem,!0)}},dispatch:function(c){var c=h.event.fix(c||b.event),d=(h._data(this,"events")||{})[c.type]||[],e=d.delegateCount,f=[].slice.call(arguments,0),g=!c.exclusive&&!c.namespace,j=(h.event.special[c.type]||{}).handle,k=[],t,l,B,z,m,p,ma;f[0]=c;c.delegateTarget=this;if(e&&!c.target.disabled&&!(c.button&&
c.type==="click"))for(l=c.target;l!=this;l=l.parentNode||this){z={};m=[];for(t=0;t<e;t++)B=d[t],p=B.selector,ma=z[p],B.isPositional?ma=(ma||(z[p]=h(p))).index(l)>=0:ma===a&&(ma=z[p]=B.quick?(!B.quick[1]||l.nodeName.toLowerCase()===B.quick[1])&&(!B.quick[2]||l.id===B.quick[2])&&(!B.quick[3]||B.quick[3].test(l.className)):h(l).is(p)),ma&&m.push(B);m.length&&k.push({elem:l,matches:m})}d.length>e&&k.push({elem:this,matches:d.slice(e)});for(t=0;t<k.length&&!c.isPropagationStopped();t++){e=k[t];c.currentTarget=
e.elem;for(d=0;d<e.matches.length&&!c.isImmediatePropagationStopped();d++)if(B=e.matches[d],g||!c.namespace&&!B.namespace||c.namespace_re&&c.namespace_re.test(B.namespace))if(c.data=B.data,c.handleObj=B,B=(j||B.handler).apply(e.elem,f),B!==a)c.result=B,B===!1&&(c.preventDefault(),c.stopPropagation())}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},
keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){if(a.which==null)a.which=b.charCode!=null?b.charCode:b.keyCode;return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(b,c){var d,e,f=c.button,g=c.fromElement;if(b.pageX==null&&c.clientX!=null)d=b.target.ownerDocument||v,e=d.documentElement,d=d.body,b.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||
d&&d.clientLeft||0),b.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0);if(!b.relatedTarget&&g)b.relatedTarget=g===b.target?c.toElement:g;if(!b.which&&f!==a)b.which=f&1?1:f&2?3:f&4?2:0;return b}},fix:function(b){if(b[h.expando])return b;var c,d,e=b,f=h.event.fixHooks[b.type]||{},g=f.props?this.props.concat(f.props):this.props,b=h.Event(e);for(c=g.length;c;)d=g[--c],b[d]=e[d];if(!b.target)b.target=e.srcElement||v;if(b.target.nodeType===3)b.target=b.target.parentNode;
if(b.metaKey===a)b.metaKey=b.ctrlKey;return f.filter?f.filter(b,e):b},special:{ready:{setup:h.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(a,b,c){if(h.isWindow(this))this.onbeforeunload=c},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}},simulate:function(a,b,c,d){a=h.extend(new h.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?h.event.trigger(a,null,b):h.event.dispatch.call(b,a);a.isDefaultPrevented()&&
c.preventDefault()}};h.event.handle=h.event.dispatch;h.removeEvent=v.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};h.Event=function(a,b){if(!(this instanceof h.Event))return new h.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?j:g):this.type=a;b&&h.extend(this,b);this.timeStamp=a&&
a.timeStamp||h.now();this[h.expando]=!0};h.Event.prototype={preventDefault:function(){this.isDefaultPrevented=j;var a=this.originalEvent;if(a)a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=j;var a=this.originalEvent;if(a)a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j;this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g};
h.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){h.event.special[a]=h.event.special[b]={delegateType:b,bindType:b,handle:function(a){var b=a.relatedTarget,c=a.handleObj,d;if(!b||c.origType===a.type||b!==this&&!h.contains(this,b))b=a.type,a.type=c.origType,d=c.handler.apply(this,arguments),a.type=b;return d}}});if(!h.support.submitBubbles)h.event.special.submit={setup:function(){if(h.nodeName(this,"form"))return!1;h.event.add(this,"click._submit keypress._submit",function(b){b=b.target;
if((b=h.nodeName(b,"input")||h.nodeName(b,"button")?b.form:a)&&!b._submit_attached)h.event.add(b,"submit._submit",function(a){this.parentNode&&h.event.simulate("submit",this.parentNode,a,!0)}),b._submit_attached=!0})},teardown:function(){if(h.nodeName(this,"form"))return!1;h.event.remove(this,"._submit")}};if(!h.support.changeBubbles)h.event.special.change={setup:function(){if(ra.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")h.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName===
"checked")this._just_changed=!0}),h.event.add(this,"click._change",function(a){if(this._just_changed)this._just_changed=!1,h.event.simulate("change",this,a,!0)});return!1}h.event.add(this,"beforeactivate._change",function(a){a=a.target;if(ra.test(a.nodeName)&&!a._change_attached)h.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&h.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||
b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){h.event.remove(this,"._change");return ra.test(this.nodeName)}};h.support.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){h.event.simulate(b,a.target,h.event.fix(a),!0)};h.event.special[b]={setup:function(){c++===0&&v.addEventListener(a,d,!0)},teardown:function(){--c===0&&v.removeEventListener(a,d,!0)}}});h.fn.extend({on:function(b,c,d,e,f){var j,
k;if(typeof b==="object"){typeof c!=="string"&&(d=c,c=a);for(k in b)this.on(k,c,d,b[k],f);return this}d==null&&e==null?(e=c,d=c=a):e==null&&(typeof c==="string"?(e=d,d=a):(e=d,d=c,c=a));if(e===!1)e=g;else if(!e)return this;if(f===1)j=e,e=function(a){h().off(a);return j.apply(this,arguments)},e.guid=j.guid||(j.guid=h.guid++);return this.each(function(){h.event.add(this,b,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(b,c,d){if(b&&b.preventDefault&&b.handleObj){var e=
b.handleObj;h(b.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof b==="object"){for(e in b)this.off(e,c,b[e]);return this}if(c===!1||typeof c==="function")d=c,c=a;d===!1&&(d=g);return this.each(function(){h.event.remove(this,b,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){h(this.context).on(a,this.selector,b,c);return this},die:function(a,b){h(this.context).off(a,
this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){h.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return h.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||h.guid++,d=0,e=function(c){var e=(h._data(this,"lastToggle"+a.guid)||0)%d;h._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();
return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){h.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)};
h.attrFn&&(h.attrFn[b]=!0);if(Y.test(b))h.event.fixHooks[b]=h.event.keyHooks;if(oa.test(b))h.event.fixHooks[b]=h.event.mouseHooks});(function(){function b(a,c,d,f,g,h){for(var g=0,j=f.length;g<j;g++){var k=f[g];if(k){for(var t=!1,k=k[a];k;){if(k[e]===d){t=f[k.sizset];break}if(k.nodeType===1&&!h)k[e]=d,k.sizset=g;if(k.nodeName.toLowerCase()===c){t=k;break}k=k[a]}f[g]=t}}}function c(a,b,d,f,g,h){for(var g=0,j=f.length;g<j;g++){var k=f[g];if(k){for(var t=!1,k=k[a];k;){if(k[e]===d){t=f[k.sizset];break}if(k.nodeType===
1){if(!h)k[e]=d,k.sizset=g;if(typeof b!=="string"){if(k===b){t=!0;break}}else if(z.filter(b,[k]).length>0){t=k;break}}k=k[a]}f[g]=t}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,j=!1,k=!0,t=/\\/g,l=/\r\n/g,B=/\W/;[0,0].sort(function(){k=!1;return 0});var z=function(a,b,c,e){var c=c||[],f=b=b||v;if(b.nodeType!==1&&b.nodeType!==
9)return[];if(!a||typeof a!=="string")return c;var h,j,k,t,R,l=!0,B=z.isXML(b),L=[],m=a;do if(d.exec(""),h=d.exec(m))if(m=h[3],L.push(h[1]),h[2]){t=h[3];break}while(h);if(L.length>1&&ma.exec(a))if(L.length===2&&p.relative[L[0]])j=ba(L[0]+L[1],b,e);else for(j=p.relative[L[0]]?[b]:z(L.shift(),b);L.length;)a=L.shift(),p.relative[a]&&(a+=L.shift()),j=ba(a,j,e);else if(!e&&L.length>1&&b.nodeType===9&&!B&&p.match.ID.test(L[0])&&!p.match.ID.test(L[L.length-1])&&(h=z.find(L.shift(),b,B),b=h.expr?z.filter(h.expr,
h.set)[0]:h.set[0]),b){h=e?{expr:L.pop(),set:r(e)}:z.find(L.pop(),L.length===1&&(L[0]==="~"||L[0]==="+")&&b.parentNode?b.parentNode:b,B);j=h.expr?z.filter(h.expr,h.set):h.set;for(L.length>0?k=r(j):l=!1;L.length;)h=R=L.pop(),p.relative[R]?h=L.pop():R="",h==null&&(h=b),p.relative[R](k,h,B)}else k=[];k||(k=j);k||z.error(R||a);if(g.call(k)==="[object Array]")if(l)if(b&&b.nodeType===1)for(a=0;k[a]!=null;a++)k[a]&&(k[a]===!0||k[a].nodeType===1&&z.contains(b,k[a]))&&c.push(j[a]);else for(a=0;k[a]!=null;a++)k[a]&&
k[a].nodeType===1&&c.push(j[a]);else c.push.apply(c,k);else r(k,c);t&&(z(t,f,c,e),z.uniqueSort(c));return c};z.uniqueSort=function(a){if(ga&&(j=k,a.sort(ga),j))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};z.matches=function(a,b){return z(a,null,null,b)};z.matchesSelector=function(a,b){return z(b,null,null,[a]).length>0};z.find=function(a,b,c){var d,e,f,g,h,j;if(!a)return[];for(e=0,f=p.order.length;e<f;e++)if(h=p.order[e],g=p.leftMatch[h].exec(a))if(j=g[1],g.splice(1,1),j.substr(j.length-
1)!=="\\"&&(g[1]=(g[1]||"").replace(t,""),d=p.find[h](g,b,c),d!=null)){a=a.replace(p.match[h],"");break}d||(d=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};z.filter=function(b,c,d,e){for(var f,g,h,j,k,t,R,l,B=b,L=[],m=c,ma=c&&c[0]&&z.isXML(c[0]);b&&c.length;){for(h in p.filter)if((f=p.leftMatch[h].exec(b))!=null&&f[2])if(t=p.filter[h],k=f[1],g=!1,f.splice(1,1),k.substr(k.length-1)!=="\\"){m===L&&(L=[]);if(p.preFilter[h])if(f=p.preFilter[h](f,m,d,
L,e,ma)){if(f===!0)continue}else g=j=!0;if(f)for(R=0;(k=m[R])!=null;R++)k&&(j=t(k,f,R,m),l=e^j,d&&j!=null?l?g=!0:m[R]=!1:l&&(L.push(k),g=!0));if(j!==a){d||(m=L);b=b.replace(p.match[h],"");if(!g)return[];break}}if(b===B)if(g==null)z.error(b);else break;B=b}return m};z.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var m=z.getText=function(a){var b,c;b=a.nodeType;var d="";if(b)if(b===1)if(typeof a.textContent==="string")return a.textContent;else if(typeof a.innerText==="string")return a.innerText.replace(l,
"");else for(a=a.firstChild;a;a=a.nextSibling)d+=m(a);else{if(b===3||b===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(d+=m(c));return d},p=z.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b==="string",d=c&&!B.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&f.nodeType!==
1;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&z.filter(b,a,!0)},">":function(a,b){var c,d=typeof b==="string",e=0,f=a.length;if(d&&!B.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&z.filter(b,a,!0)}},"":function(a,d,e){var g,h=f++,j=c;typeof d==="string"&&!B.test(d)&&(g=d=d.toLowerCase(),j=b);j("parentNode",d,h,a,g,e)},"~":function(a,d,e){var g,h=f++,j=c;typeof d===
"string"&&!B.test(d)&&(g=d=d.toLowerCase(),j=b);j("previousSibling",d,h,a,g,e)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a[1])}},
preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(t,"")+" ";if(f)return a;for(var f=0,g;(g=b[f])!=null;f++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(t,"")},TAG:function(a){return a[1].replace(t,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||z.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||
!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&z.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(t,"");!f&&p.attrMap[b]&&(a[1]=p.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(t,"");a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=z(a[3],null,null,b);else return a=z.filter(a[3],b,c,1^f),c||e.push.apply(e,a),!1;else if(p.match.POS.test(a[0])||p.match.CHILD.test(a[0]))return!0;
return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!z(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()===
"input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()===
"input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,
b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=p.filters[e];if(f)return f(a,c,b,d);else if(e==="contains")return(a.textContent||a.innerText||m([a])||"").indexOf(b[3])>=0;else if(e==="not"){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}else z.error(e)},CHILD:function(a,b){var c,d,f,g,h,j;c=b[1];j=a;switch(c){case "only":case "first":for(;j=
j.previousSibling;)if(j.nodeType===1)return!1;if(c==="first")return!0;j=a;case "last":for(;j=j.nextSibling;)if(j.nodeType===1)return!1;return!0;case "nth":c=b[2];d=b[3];if(c===1&&d===0)return!0;f=b[0];if((g=a.parentNode)&&(g[e]!==f||!a.nodeIndex)){h=0;for(j=g.firstChild;j;j=j.nextSibling)if(j.nodeType===1)j.nodeIndex=++h;g[e]=f}j=a.nodeIndex-d;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&
a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],c=z.attr?z.attr(a,c):p.attrHandle[c]?p.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return c==null?e==="!=":!e&&z.attr?c!=null:e==="="?d===f:e==="*="?d.indexOf(f)>=0:e==="~="?(" "+d+" ").indexOf(f)>=0:!f?d&&c!==!1:e==="!="?d!==f:e==="^="?d.indexOf(f)===0:e==="$="?d.substr(d.length-f.length)===f:e==="|="?d===f||d.substr(0,f.length+
1)===f+"-":!1},POS:function(a,b,c,d){var e=p.setFilters[b[2]];if(e)return e(a,c,b,d)}}},ma=p.match.POS,M=function(a,b){return"\\"+(b-0+1)},xa;for(xa in p.match)p.match[xa]=RegExp(p.match[xa].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[xa]=RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[xa].source.replace(/\\(\d+)/g,M));var r=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(v.documentElement.childNodes,0)}catch(w){r=function(a,b){var c=
0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length==="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var ga,n;v.documentElement.compareDocumentPosition?ga=function(a,b){return a===b?(j=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(ga=function(a,b){if(a===b)return j=!0,0;else if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-
b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return n(a,b);else if(c){if(!d)return 1}else return-1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return n(e[g],f[g]);return g===c?n(a,f[g],-1):n(e[g],b,1)},n=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var b=v.createElement("div"),c="script"+(new Date).getTime(),
d=v.documentElement;b.innerHTML="<a name='"+c+"'/>";d.insertBefore(b,d.firstChild);if(v.getElementById(c))p.find.ID=function(b,c,d){if(typeof c.getElementById!=="undefined"&&!d)return(c=c.getElementById(b[1]))?c.id===b[1]||typeof c.getAttributeNode!=="undefined"&&c.getAttributeNode("id").nodeValue===b[1]?[c]:a:[]},p.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b};d.removeChild(b);d=b=null})();(function(){var a=
v.createElement("div");a.appendChild(v.createComment(""));if(a.getElementsByTagName("*").length>0)p.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var d=[],e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#")p.attrHandle.href=function(a){return a.getAttribute("href",2)};a=null})();v.querySelectorAll&&function(){var a=z,b=v.createElement("div");
b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){z=function(b,c,d,e){c=c||v;if(!e&&!z.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(c.nodeType===1||c.nodeType===9))if(f[1])return r(c.getElementsByTagName(b),d);else if(f[2]&&p.find.CLASS&&c.getElementsByClassName)return r(c.getElementsByClassName(f[2]),d);if(c.nodeType===9){if(b==="body"&&c.body)return r([c.body],d);else if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===
f[3])return r([g],d)}else return r([],d)}try{return r(c.querySelectorAll(b),d)}catch(h){}}else if(c.nodeType===1&&c.nodeName.toLowerCase()!=="object"){var f=c,j=(g=c.getAttribute("id"))||"__sizzle__",k=c.parentNode,t=/^\s*[+~]/.test(b);g?j=j.replace(/'/g,"\\$&"):c.setAttribute("id",j);if(t&&k)c=c.parentNode;try{if(!t||k)return r(c.querySelectorAll("[id='"+j+"'] "+b),d)}catch(R){}finally{g||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)z[c]=a[c];b=null}}();(function(){var a=v.documentElement,
b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(v.createElement("div"),"div"),d=!1;try{b.call(v.documentElement,"[test!='']:sizzle")}catch(e){d=!0}z.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!z.isXML(a))try{if(d||!p.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return z(e,null,null,[a]).length>0}}})();(function(){var a=v.createElement("div");
a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0&&(a.lastChild.className="e",a.getElementsByClassName("e").length!==1))p.order.splice(1,0,"CLASS"),p.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null})();z.contains=v.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:v.documentElement.compareDocumentPosition?
function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};z.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":!1};var ba=function(a,b,c){for(var d,e=[],f="",b=b.nodeType?[b]:b;d=p.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(p.match.PSEUDO,"");a=p.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)z(a,b[d],e,c);return z.filter(f,e)};z.attr=h.attr;z.selectors.attrMap={};h.find=z;h.expr=z.selectors;h.expr[":"]=h.expr.filters;h.unique=z.uniqueSort;
h.text=z.getText;h.isXMLDoc=z.isXML;h.contains=z.contains})();var ga=/Until$/,ya=/^(?:parents|prevUntil|prevAll)/,ba=/,/,Aa=/^.[^:#\[\.,]*$/,hb=Array.prototype.slice,Pa=h.expr.match.POS,ib={children:!0,contents:!0,next:!0,prev:!0};h.fn.extend({find:function(a){var b=this,c,d;if(typeof a!=="string")return h(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(h.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,j;for(c=0,d=this.length;c<d;c++)if(f=e.length,h.find(a,this[c],e),c>0)for(g=
f;g<e.length;g++)for(j=0;j<f;j++)if(e[j]===e[g]){e.splice(g--,1);break}return e},has:function(a){var b=h(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(h.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(k(this,a,!1),"not",a)},filter:function(a){return this.pushStack(k(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?Pa.test(a)?h(a,this.context).index(this[0])>=0:h.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=
[],d,e,f=this[0];if(h.isArray(a)){for(e=1;f&&f.ownerDocument&&f!==b;){for(d=0;d<a.length;d++)h(f).is(a[d])&&c.push({selector:a[d],elem:f,level:e});f=f.parentNode;e++}return c}var g=Pa.test(a)||typeof a!=="string"?h(a,b||this.context):0;for(d=0,e=this.length;d<e;d++)for(f=this[d];f;)if(g?g.index(f)>-1:h.find.matchesSelector(f,a)){c.push(f);break}else if(f=f.parentNode,!f||!f.ownerDocument||f===b||f.nodeType===11)break;c=c.length>1?h.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return!a?
this[0]&&this[0].parentNode?this.prevAll().length:-1:typeof a==="string"?h.inArray(this[0],h(a)):h.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==="string"?h(a,b):h.makeArray(a&&a.nodeType?[a]:a),d=h.merge(this.get(),c);return this.pushStack(!c[0]||!c[0].parentNode||c[0].parentNode.nodeType===11||!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11?d:h.unique(d))},andSelf:function(){return this.add(this.prevObject)}});h.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==
11?a:null},parents:function(a){return h.dir(a,"parentNode")},parentsUntil:function(a,b,c){return h.dir(a,"parentNode",c)},next:function(a){return h.nth(a,2,"nextSibling")},prev:function(a){return h.nth(a,2,"previousSibling")},nextAll:function(a){return h.dir(a,"nextSibling")},prevAll:function(a){return h.dir(a,"previousSibling")},nextUntil:function(a,b,c){return h.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return h.dir(a,"previousSibling",c)},siblings:function(a){return h.sibling(a.parentNode.firstChild,
a)},children:function(a){return h.sibling(a.firstChild)},contents:function(a){return h.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:h.makeArray(a.childNodes)}},function(a,b){h.fn[a]=function(c,d){var e=h.map(this,b,c),f=hb.call(arguments);ga.test(a)||(d=c);d&&typeof d==="string"&&(e=h.filter(d,e));e=this.length>1&&!ib[a]?h.unique(e):e;if((this.length>1||ba.test(d))&&ya.test(a))e=e.reverse();return this.pushStack(e,a,f.join(","))}});h.extend({filter:function(a,b,c){c&&(a=":not("+
a+")");return b.length===1?h.find.matchesSelector(b[0],a)?[b[0]]:[]:h.find.matches(a,b)},dir:function(b,c,d){for(var e=[],b=b[c];b&&b.nodeType!==9&&(d===a||b.nodeType!==1||!h(b).is(d));)b.nodeType===1&&e.push(b),b=b[c];return e},nth:function(a,b,c){for(var b=b||1,d=0;a;a=a[c])if(a.nodeType===1&&++d===b)break;return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var eb="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",
jb=/ jQuery\d+="(?:\d+|null)"/g,$a=/^\s+/,ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ta=/<([\w:]+)/,kb=/<tbody/i,rb=/<|&#?\w+;/,sb=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,Ua=RegExp("<(?:"+eb.replace(" ","|")+")","i"),Ma=/checked\s*(?:[^=]|=\s*.checked.)/i,Na=/\/(java|ecma)script/i,pb=/^\s*<!(?:\[CDATA\[|\-\-)/,ha={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,
"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},cb=l(v);ha.optgroup=ha.option;ha.tbody=ha.tfoot=ha.colgroup=ha.caption=ha.thead;ha.th=ha.td;if(!h.support.htmlSerialize)ha._default=[1,"div<div>","</div>"];h.fn.extend({text:function(b){return h.isFunction(b)?this.each(function(a){var c=h(this);c.text(b.call(this,a,c.text()))}):typeof b!=="object"&&b!==
a?this.empty().append((this[0]&&this[0].ownerDocument||v).createTextNode(b)):h.text(this)},wrapAll:function(a){if(h.isFunction(a))return this.each(function(b){h(this).wrapAll(a.call(this,b))});if(this[0]){var b=h(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&a.firstChild.nodeType===1;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return h.isFunction(a)?this.each(function(b){h(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=h(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){h(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},
before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});else if(arguments.length){var a=h(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,h(arguments[0]).toArray());
return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||h.filter(a,[d]).length)!b&&d.nodeType===1&&(h.cleanData(d.getElementsByTagName("*")),h.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&h.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=a==null?!1:a;b=b==null?a:b;return this.map(function(){return h.clone(this,a,b)})},
html:function(b){if(b===a)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(jb,""):null;else if(typeof b==="string"&&!sb.test(b)&&(h.support.leadingWhitespace||!$a.test(b))&&!ha[(Ta.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(ab,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)if(this[c].nodeType===1)h.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=b}catch(e){this.empty().append(b)}}else h.isFunction(b)?this.each(function(a){var c=h(this);c.html(b.call(this,a,c.html()))}):
this.empty().append(b);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(h.isFunction(a))return this.each(function(b){var c=h(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!=="string"&&(a=h(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;h(this).remove();b?h(b).before(a):h(c).append(a)})}else return this.length?this.pushStack(h(h.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(b,
c,d){var e,f,g,j=b[0],k=[];if(!h.support.checkClone&&arguments.length===3&&typeof j==="string"&&Ma.test(j))return this.each(function(){h(this).domManip(b,c,d,!0)});if(h.isFunction(j))return this.each(function(e){var f=h(this);b[0]=j.call(this,e,c?f.html():a);f.domManip(b,c,d)});if(this[0]){e=j&&j.parentNode;e=h.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:h.buildFragment(b,this,k);g=e.fragment;if(f=g.childNodes.length===1?g=g.firstChild:g.firstChild){c=c&&
h.nodeName(f,"tr");f=0;for(var t=this.length,l=t-1;f<t;f++)d.call(c?h.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):this[f]:this[f],e.cacheable||t>1&&f<l?h.clone(g,!0,!0):g)}k.length&&h.each(k,aa)}return this}});h.buildFragment=function(a,b,c){var d,e,f,g,j=a[0];b&&b[0]&&(g=b[0].ownerDocument||b[0]);g.createDocumentFragment||(g=v);if(a.length===1&&typeof j==="string"&&j.length<512&&g===v&&j.charAt(0)==="<"&&!bb.test(j)&&
(h.support.checkClone||!Ma.test(j))&&!h.support.unknownElems&&Ua.test(j))e=!0,(f=h.fragments[j])&&f!==1&&(d=f);d||(d=g.createDocumentFragment(),h.clean(a,g,d,c));e&&(h.fragments[j]=f?d:1);return{fragment:d,cacheable:e}};h.fragments={};h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){h.fn[a]=function(c){var d=[],c=h(c),e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&c.length===1)return c[b](this[0]),
this;else{for(var e=0,f=c.length;e<f;e++){var g=(e>0?this.clone(!0):this).get();h(c[e])[b](g);d=d.concat(g)}return this.pushStack(d,a,c.selector)}}});h.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,f,g;if((!h.support.noCloneEvent||!h.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!h.isXMLDoc(a)){u(a,d);e=n(a);f=n(d);for(g=0;e[g];++g)f[g]&&u(e[g],f[g])}if(b&&(m(a,d),c)){e=n(a);f=n(d);for(g=0;e[g];++g)m(e[g],f[g])}return d},clean:function(a,b,c,d){b=b||v;typeof b.createElement===
"undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||v);for(var e=[],f,g=0,j;(j=a[g])!=null;g++)if(typeof j==="number"&&(j+=""),j){if(typeof j==="string")if(rb.test(j)){j=j.replace(ab,"<$1></$2>");f=(Ta.exec(j)||["",""])[1].toLowerCase();var k=ha[f]||ha._default,t=k[0],B=b.createElement("div");b===v?cb.appendChild(B):l(b).appendChild(B);for(B.innerHTML=k[1]+j+k[2];t--;)B=B.lastChild;if(!h.support.tbody){t=kb.test(j);k=f==="table"&&!t?B.firstChild&&B.firstChild.childNodes:k[1]==="<table>"&&!t?
B.childNodes:[];for(f=k.length-1;f>=0;--f)h.nodeName(k[f],"tbody")&&!k[f].childNodes.length&&k[f].parentNode.removeChild(k[f])}!h.support.leadingWhitespace&&$a.test(j)&&B.insertBefore(b.createTextNode($a.exec(j)[0]),B.firstChild);j=B.childNodes}else j=b.createTextNode(j);var z;if(!h.support.appendChecked)if(j[0]&&typeof(z=j.length)==="number")for(f=0;f<z;f++)E(j[f]);else E(j);j.nodeType?e.push(j):e=h.merge(e,j)}if(c){a=function(a){return!a.type||Na.test(a.type)};for(g=0;e[g];g++)d&&h.nodeName(e[g],
"script")&&(!e[g].type||e[g].type.toLowerCase()==="text/javascript")?d.push(e[g].parentNode?e[g].parentNode.removeChild(e[g]):e[g]):(e[g].nodeType===1&&(b=h.grep(e[g].getElementsByTagName("script"),a),e.splice.apply(e,[g+1,0].concat(b))),c.appendChild(e[g]))}return e},cleanData:function(a){for(var b,c,d=h.cache,e=h.event.special,f=h.support.deleteExpando,g=0,j;(j=a[g])!=null;g++)if(!j.nodeName||!h.noData[j.nodeName.toLowerCase()])if(c=j[h.expando]){if((b=d[c])&&b.events){for(var k in b.events)e[k]?
h.event.remove(j,k):h.removeEvent(j,k,b.handle);if(b.handle)b.handle.elem=null}f?delete j[h.expando]:j.removeAttribute&&j.removeAttribute(h.expando);delete d[c]}}});var va=/alpha\([^)]*\)/i,db=/opacity=([^)]*)/,lb=/([A-Z]|^ms)/g,Va=/^-?\d+(?:px)?$/i,Wa=/^-?\d/,Ga=/^([\-+])=([\-+.\de]+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ca=["Left","Right"],Ya=["Top","Bottom"],ua,Ba,Ha;h.fn.css=function(b,c){return arguments.length===2&&c===a?this:h.access(this,b,c,!0,function(b,c,d){return d!==
a?h.style(b,c,d):h.css(b,c)})};h.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=ua(a,"opacity","opacity");return c===""?"1":c}else return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":h.support.cssFloat?"cssFloat":"styleFloat"},style:function(b,c,d,e){if(b&&!(b.nodeType===3||b.nodeType===8||!b.style)){var f,g=h.camelCase(c),j=b.style,k=h.cssHooks[g],c=h.cssProps[g]||g;if(d!==a){e=typeof d;if(e===
"string"&&(f=Ga.exec(d)))d=+(f[1]+1)*+f[2]+parseFloat(h.css(b,c)),e="number";if(!(d==null||e==="number"&&isNaN(d)))if(e==="number"&&!h.cssNumber[g]&&(d+="px"),!k||!("set"in k)||(d=k.set(b,d))!==a)try{j[c]=d}catch(t){}}else return k&&"get"in k&&(f=k.get(b,!1,e))!==a?f:j[c]}},css:function(b,c,d){var e,f,c=h.camelCase(c);f=h.cssHooks[c];c=h.cssProps[c]||c;c==="cssFloat"&&(c="float");if(f&&"get"in f&&(e=f.get(b,!0,d))!==a)return e;else if(ua)return ua(b,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=
a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}});h.curCSS=h.css;h.each(["height","width"],function(a,b){h.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return N(a,b,d);else h.swap(a,Qa,function(){e=N(a,b,d)});return e}},set:function(a,b){if(Va.test(b)){if(b=parseFloat(b),b>=0)return b+"px"}else return b}}});if(!h.support.opacity)h.cssHooks.opacity={get:function(a,b){return db.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/
100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=h.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&h.trim(f.replace(va,""))===""&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=va.test(f)?f.replace(va,e):f+" "+e}};h(function(){if(!h.support.reliableMarginRight)h.cssHooks.marginRight={get:function(a,b){var c;h.swap(a,{display:"inline-block"},function(){c=b?ua(a,"margin-right","marginRight"):a.style.marginRight});return c}}});v.defaultView&&
v.defaultView.getComputedStyle&&(Ba=function(b,c){var d,e,c=c.replace(lb,"-$1").toLowerCase();if(!(e=b.ownerDocument.defaultView))return a;if(e=e.getComputedStyle(b,null))d=e.getPropertyValue(c),d===""&&!h.contains(b.ownerDocument.documentElement,b)&&(d=h.style(b,c));return d});v.documentElement.currentStyle&&(Ha=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;if(e===null&&f&&(c=f[b]))e=c;if(!Va.test(e)&&Wa.test(e)){c=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=
a.currentStyle.left;f.left=b==="fontSize"?"1em":e||0;e=f.pixelLeft+"px";f.left=c;if(d)a.runtimeStyle.left=d}return e===""?"auto":e});ua=Ba||Ha;if(h.expr&&h.expr.filters)h.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!h.support.reliableHiddenOffsets&&(a.style&&a.style.display||h.css(a,"display"))==="none"},h.expr.filters.visible=function(a){return!h.expr.filters.hidden(a)};var Ia=/%20/g,La=/\[\]$/,Oa=/\r?\n/g,mb=/#.*$/,sa=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,H=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
za=/^(?:GET|HEAD)$/,ca=/^\/\//,pa=/\?/,O=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ia=/^(?:select|textarea)/i,Fa=/\s+/,t=/([?&])_=[^&]*/,B=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,z=h.fn.load,ma={},xa={},ta,da,Ja=["*/"]+["*"];try{ta=p.href}catch(Ka){ta=v.createElement("a"),ta.href="",ta=ta.href}da=B.exec(ta.toLowerCase())||[];h.fn.extend({load:function(b,c,d){if(typeof b!=="string"&&z)return z.apply(this,arguments);else if(!this.length)return this;var e=b.indexOf(" ");if(e>=0)var f=
b.slice(e,b.length),b=b.slice(0,e);e="GET";c&&(h.isFunction(c)?(d=c,c=a):typeof c==="object"&&(c=h.param(c,h.ajaxSettings.traditional),e="POST"));var g=this;h.ajax({url:b,type:e,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),g.html(f?h("<div>").append(c.replace(O,"")).find(f):c));d&&g.each(d,[c,b,a])}});return this},serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
h.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ia.test(this.nodeName)||H.test(this.type))}).map(function(a,b){var c=h(this).val();return c==null?null:h.isArray(c)?h.map(c,function(a){return{name:b.name,value:a.replace(Oa,"\r\n")}}):{name:b.name,value:c.replace(Oa,"\r\n")}}).get()}});h.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){h.fn[b]=function(a){return this.bind(b,a)}});h.each(["get","post"],
function(b,c){h[c]=function(b,d,e,f){h.isFunction(d)&&(f=f||e,e=d,d=a);return h.ajax({type:c,url:b,data:d,success:e,dataType:f})}});h.extend({getScript:function(b,c){return h.get(b,a,c,"script")},getJSON:function(a,b,c){return h.get(a,b,c,"json")},ajaxSetup:function(a,b){b?P(a,h.ajaxSettings):(b=a,a=h.ajaxSettings);P(a,b);return a},ajaxSettings:{url:ta,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(da[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",
processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ja},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":b.String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(ma),ajaxTransport:T(xa),ajax:function(b,c){function d(b,c,t,B){if(ba!==2){ba=2;w&&clearTimeout(w);ga=a;r=B||"";
J.readyState=b>0?4:0;var p,m,ma,B=c;if(t){var M=e,xa=J,R=M.contents,n=M.dataTypes,u=M.responseFields,da,L,E,q;for(L in u)L in t&&(xa[u[L]]=t[L]);for(;n[0]==="*";)n.shift(),da===a&&(da=M.mimeType||xa.getResponseHeader("content-type"));if(da)for(L in R)if(R[L]&&R[L].test(da)){n.unshift(L);break}if(n[0]in t)E=n[0];else{for(L in t){if(!n[0]||M.converters[L+" "+n[0]]){E=L;break}q||(q=L)}E=E||q}E?(E!==n[0]&&n.unshift(E),t=t[E]):t=void 0}else t=a;if(b>=200&&b<300||b===304){if(e.ifModified){if(da=J.getResponseHeader("Last-Modified"))h.lastModified[z]=
da;if(da=J.getResponseHeader("Etag"))h.etag[z]=da}if(b===304)B="notmodified",p=!0;else try{da=e;da.dataFilter&&(t=da.dataFilter(t,da.dataType));var Ja=da.dataTypes;L={};var ta,C,Q=Ja.length,F,Ka=Ja[0],W,v,D,Aa,Ra;for(ta=1;ta<Q;ta++){if(ta===1)for(C in da.converters)typeof C==="string"&&(L[C.toLowerCase()]=da.converters[C]);W=Ka;Ka=Ja[ta];if(Ka==="*")Ka=W;else if(W!=="*"&&W!==Ka){v=W+" "+Ka;D=L[v]||L["* "+Ka];if(!D)for(Aa in Ra=a,L)if(F=Aa.split(" "),F[0]===W||F[0]==="*")if(Ra=L[F[1]+" "+Ka]){Aa=L[Aa];
Aa===!0?D=Ra:Ra===!0&&(D=Aa);break}!D&&!Ra&&h.error("No conversion from "+v.replace(" "," to "));D!==!0&&(t=D?D(t):Ra(Aa(t)))}}m=t;B="success";p=!0}catch(Pa){B="parsererror",ma=Pa}}else if(ma=B,!B||b)B="error",b<0&&(b=0);J.status=b;J.statusText=""+(c||B);p?j.resolveWith(f,[m,B,J]):j.rejectWith(f,[J,B,ma]);J.statusCode(l);l=a;ya&&g.trigger("ajax"+(p?"Success":"Error"),[J,e,p?m:ma]);k.fireWith(f,[J,B]);ya&&(g.trigger("ajaxComplete",[J,e]),--h.active||h.event.trigger("ajaxStop"))}}typeof b==="object"&&
(c=b,b=a);var c=c||{},e=h.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof h)?h(f):h.event,j=h.Deferred(),k=h.Callbacks("once memory"),l=e.statusCode||{},z,p={},m={},r,M,ga,w,n,ba=0,ya,u,J={readyState:0,setRequestHeader:function(a,b){if(!ba){var c=a.toLowerCase(),a=m[c]=m[c]||a;p[a]=b}return this},getAllResponseHeaders:function(){return ba===2?r:null},getResponseHeader:function(b){var c;if(ba===2){if(!M)for(M={};c=sa.exec(r);)M[c[1].toLowerCase()]=c[2];c=M[b.toLowerCase()]}return c===
a?null:c},overrideMimeType:function(a){if(!ba)e.mimeType=a;return this},abort:function(a){a=a||"abort";ga&&ga.abort(a);d(0,a);return this}};j.promise(J);J.success=J.done;J.error=J.fail;J.complete=k.add;J.statusCode=function(a){if(a){var b;if(ba<2)for(b in a)l[b]=[l[b],a[b]];else b=a[J.status],J.then(b,b)}return this};e.url=((b||e.url)+"").replace(mb,"").replace(ca,da[1]+"//");e.dataTypes=h.trim(e.dataType||"*").toLowerCase().split(Fa);if(e.crossDomain==null)n=B.exec(e.url.toLowerCase()),e.crossDomain=
!(!n||!(n[1]!=da[1]||n[2]!=da[2]||(n[3]||(n[1]==="http:"?80:443))!=(da[3]||(da[1]==="http:"?80:443))));if(e.data&&e.processData&&typeof e.data!=="string")e.data=h.param(e.data,e.traditional);y(ma,e,c,J);if(ba===2)return!1;ya=e.global;e.type=e.type.toUpperCase();e.hasContent=!za.test(e.type);ya&&h.active++===0&&h.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(pa.test(e.url)?"&":"?")+e.data,delete e.data),z=e.url,e.cache===!1)){n=h.now();var E=e.url.replace(t,"$1_="+n);e.url=E+(E===
e.url?(pa.test(e.url)?"&":"?")+"_="+n:"")}(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)&&J.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(z=z||e.url,h.lastModified[z]&&J.setRequestHeader("If-Modified-Since",h.lastModified[z]),h.etag[z]&&J.setRequestHeader("If-None-Match",h.etag[z]));J.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", "+Ja+"; q=0.01":""):e.accepts["*"]);for(u in e.headers)J.setRequestHeader(u,
e.headers[u]);if(e.beforeSend&&(e.beforeSend.call(f,J,e)===!1||ba===2))return J.abort(),!1;for(u in{success:1,error:1,complete:1})J[u](e[u]);if(ga=y(xa,e,c,J)){J.readyState=1;ya&&g.trigger("ajaxSend",[J,e]);e.async&&e.timeout>0&&(w=setTimeout(function(){J.abort("timeout")},e.timeout));try{ba=1,ga.send(p,d)}catch(q){ba<2?d(-1,q):h.error(q)}}else d(-1,"No Transport");return J},param:function(b,c){var d=[],e=function(a,b){b=h.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};
if(c===a)c=h.ajaxSettings.traditional;if(h.isArray(b)||b.jquery&&!h.isPlainObject(b))h.each(b,function(){e(this.name,this.value)});else for(var f in b)K(f,b[f],c,e);return d.join("&").replace(Ia,"+")}});h.extend({active:0,lastModified:{},etag:{}});var wb=h.now(),nb=/(\=)\?(&|$)|\?\?/i;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return h.expando+"_"+wb++}});h.ajaxPrefilter("json jsonp",function(a,c,d){c=a.contentType==="application/x-www-form-urlencoded"&&typeof a.data==="string";if(a.dataTypes[0]===
"jsonp"||a.jsonp!==!1&&(nb.test(a.url)||c&&nb.test(a.data))){var e,f=a.jsonpCallback=h.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g=b[f],j=a.url,k=a.data,t="$1"+f+"$2";a.jsonp!==!1&&(j=j.replace(nb,t),a.url===j&&(c&&(k=k.replace(nb,t)),a.data===k&&(j+=(/\?/.test(j)?"&":"?")+a.jsonp+"="+f)));a.url=j;a.data=k;b[f]=function(a){e=[a]};d.always(function(){b[f]=g;if(e&&h.isFunction(g))b[f](e[0])});a.converters["script json"]=function(){e||h.error(f+" was not called");return e[0]};a.dataTypes[0]=
"json";return"script"}});h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){h.globalEval(a);return a}}});h.ajaxPrefilter("script",function(b){if(b.cache===a)b.cache=!1;if(b.crossDomain)b.type="GET",b.global=!1});h.ajaxTransport("script",function(b){if(b.crossDomain){var c,d=v.head||v.getElementsByTagName("head")[0]||v.documentElement;return{send:function(e,
f){c=v.createElement("script");c.async="async";if(b.scriptCharset)c.charset=b.scriptCharset;c.src=b.url;c.onload=c.onreadystatechange=function(b,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=a,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var tb=b.ActiveXObject?function(){for(var a in Xa)Xa[a](0,1)}:!1,xb=0,Xa;h.ajaxSettings.xhr=b.ActiveXObject?function(){var a;if(!(a=
!this.isLocal&&q()))a:{try{a=new b.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}a=void 0}return a}:q;(function(a){h.extend(h.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(h.ajaxSettings.xhr());h.support.ajax&&h.ajaxTransport(function(c){if(!c.crossDomain||h.support.cors){var d;return{send:function(e,f){var g=c.xhr(),j,k;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(k in c.xhrFields)g[k]=c.xhrFields[k];c.mimeType&&g.overrideMimeType&&
g.overrideMimeType(c.mimeType);!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(k in e)g.setRequestHeader(k,e[k])}catch(t){}g.send(c.hasContent&&c.data||null);d=function(b,e){var k,t,l,B,z;try{if(d&&(e||g.readyState===4)){d=a;if(j)g.onreadystatechange=h.noop,tb&&delete Xa[j];if(e)g.readyState!==4&&g.abort();else{k=g.status;l=g.getAllResponseHeaders();B={};if((z=g.responseXML)&&z.documentElement)B.xml=z;B.text=g.responseText;try{t=g.statusText}catch(p){t=""}!k&&
c.isLocal&&!c.crossDomain?k=B.text?200:404:k===1223&&(k=204)}}}catch(m){e||f(-1,m)}B&&f(k,t,B,l)};!c.async||g.readyState===4?d():(j=++xb,tb&&(Xa||(Xa={},h(b).unload(tb)),Xa[j]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var qb={},Da,Sa,yb=/^(?:toggle|show|hide)$/,zb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ob,ub=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fb;h.fn.extend({show:function(a,
b,c){if(a||a===0)return this.animate(ea("show",3),a,b,c);else{for(var c=0,d=this.length;c<d;c++)if(a=this[c],a.style){b=a.style.display;if(!h._data(a,"olddisplay")&&b==="none")b=a.style.display="";b===""&&h.css(a,"display")==="none"&&h._data(a,"olddisplay",na(a.nodeName))}for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,b===""||b==="none"))a.style.display=h._data(a,"olddisplay")||"";return this}},hide:function(a,b,c){if(a||a===0)return this.animate(ea("hide",3),a,b,c);else{for(var c=0,d=this.length;c<
d;c++)a=this[c],a.style&&(b=h.css(a,"display"),b!=="none"&&!h._data(a,"olddisplay")&&h._data(a,"olddisplay",b));for(c=0;c<d;c++)if(this[c].style)this[c].style.display="none";return this}},_toggle:h.fn.toggle,toggle:function(a,b,c){var d=typeof a==="boolean";h.isFunction(a)&&h.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:h(this).is(":hidden");h(this)[b?"show":"hide"]()}):this.animate(ea("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",
0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){var L;f.queue===!1&&h._mark(this);var b=h.extend({},f),c=this.nodeType===1,d=c&&h(this).is(":hidden"),g,j,k,t,l;b.animatedProperties={};for(k in a){g=h.camelCase(k);k!==g&&(a[g]=a[k],delete a[k]);j=a[g];h.isArray(j)?(b.animatedProperties[g]=j[1],L=a[g]=j[0],j=L):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(j==="hide"&&d||j==="show"&&!d)return b.complete.call(this);if(c&&(g==="height"||
g==="width"))if(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],h.css(this,"display")==="inline"&&h.css(this,"float")==="none")!h.support.inlineBlockNeedsLayout||na(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1}if(b.overflow!=null)this.style.overflow="hidden";for(k in a)if(c=new h.fx(this,b,k),j=a[k],yb.test(j))if(g=h._data(this,"toggle"+k)||(j==="toggle"?d?"show":"hide":0))h._data(this,"toggle"+k,g==="show"?"hide":"show"),c[g]();else c[j]();
else g=zb.exec(j),t=c.cur(),g?(j=parseFloat(g[2]),l=g[3]||(h.cssNumber[k]?"":"px"),l!=="px"&&(h.style(this,k,(j||1)+l),t*=(j||1)/c.cur(),h.style(this,k,t+l)),g[1]&&(j=(g[1]==="-="?-1:1)*j+t),c.custom(t,j,l)):c.custom(t,j,"");return!0}var f=h.speed(b,c,d);if(h.isEmptyObject(a))return this.each(f.complete,[!1]);a=h.extend({},a);return f.queue===!1?this.each(e):this.queue(f.queue,e)},stop:function(b,c,d){typeof b!=="string"&&(d=c,c=b,b=a);c&&b!==!1&&this.queue(b||"fx",[]);return this.each(function(){function a(b,
c,e){c=c[e];h.removeData(b,e,!0);c.stop(d)}var c,e=!1,f=h.timers,g=h._data(this);d||h._unmark(!0,this);if(b==null)for(c in g)g[c].stop&&c.indexOf(".run")===c.length-4&&a(this,g,c);else g[c=b+".run"]&&g[c].stop&&a(this,g,c);for(c=f.length;c--;)if(f[c].elem===this&&(b==null||f[c].queue===b)){if(d)f[c](!0);else f[c].saveState();e=!0;f.splice(c,1)}(!d||!e)&&h.dequeue(this,b)})}});h.each({slideDown:ea("show",1),slideUp:ea("hide",1),slideToggle:ea("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}},function(a,b){h.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});h.extend({speed:function(a,b,c){var d=a&&typeof a==="object"?h.extend({},a):{complete:c||!c&&b||h.isFunction(a)&&a,duration:a,easing:c&&b||b&&!h.isFunction(b)&&b};d.duration=h.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in h.fx.speeds?h.fx.speeds[d.duration]:h.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete;d.complete=function(a){h.isFunction(d.old)&&
d.old.call(this);d.queue?h.dequeue(this,d.queue):a!==!1&&h._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});h.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(h.fx.step[this.prop]||h.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||
this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=h.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(b,c,d){function e(a){return f.step(a)}var f=this,g=h.fx;this.startTime=fb||V();this.end=c;this.now=this.start=b;this.pos=this.state=0;this.unit=d||this.unit||(h.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=function(){f.options.hide&&h._data(f.elem,"fxshow"+f.prop)===a&&h._data(f.elem,"fxshow"+f.prop,
f.start)};e()&&h.timers.push(e)&&!ob&&(ob=setInterval(g.tick,g.interval))},show:function(){var b=h._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=b||h.style(this.elem,this.prop);this.options.show=!0;b!==a?this.custom(this.cur(),b):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());h(this.elem).show()},hide:function(){this.options.orig[this.prop]=h._data(this.elem,"fxshow"+this.prop)||h.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},
step:function(a){var b,c=fb||V(),d=!0,e=this.elem,f=this.options;if(a||c>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(b in f.animatedProperties)f.animatedProperties[b]!==!0&&(d=!1);if(d){f.overflow!=null&&!h.support.shrinkWrapBlocks&&h.each(["","X","Y"],function(a,b){e.style["overflow"+b]=f.overflow[a]});f.hide&&h(e).hide();if(f.hide||f.show)for(b in f.animatedProperties)h.style(e,b,f.orig[b]),h.removeData(e,"fxshow"+b,!0),
h.removeData(e,"toggle"+b,!0);if(a=f.complete)f.complete=!1,a.call(e)}return!1}else f.duration==Infinity?this.now=c:(a=c-this.startTime,this.state=a/f.duration,this.pos=h.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}};h.extend(h.fx,{tick:function(){for(var a,b=h.timers,c=0;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||h.fx.stop()},interval:13,stop:function(){clearInterval(ob);ob=null},
speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){h.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});h.each(["width","height"],function(a,b){h.fx.step[b]=function(a){h.style(a.elem,b,Math.max(0,a.now))}});if(h.expr&&h.expr.filters)h.expr.filters.animated=function(a){return h.grep(h.timers,function(b){return a===b.elem}).length};var Ab=/^t(?:able|d|h)$/i,vb=/^(?:body|html)$/i;h.fn.offset=
"getBoundingClientRect"in v.documentElement?function(a){var b=this[0],c;if(a)return this.each(function(b){h.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return h.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,f=e.documentElement;if(!c||!h.contains(f,b))return c?{top:c.top,left:c.left}:{top:0,left:0};b=e.body;e=Z(e);return{top:c.top+(e.pageYOffset||h.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||
0),left:c.left+(e.pageXOffset||h.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(b){h.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return h.offset.bodyOffset(b);var c,d=b.offsetParent,e=b.ownerDocument,f=e.documentElement,g=e.body;c=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;for(var j=b.offsetTop,k=b.offsetLeft;(b=b.parentNode)&&b!==g&&b!==f;){if(h.support.fixedPosition&&
c.position==="fixed")break;c=e?e.getComputedStyle(b,null):b.currentStyle;j-=b.scrollTop;k-=b.scrollLeft;if(b===d){j+=b.offsetTop;k+=b.offsetLeft;if(h.support.doesNotAddBorder&&(!h.support.doesAddBorderForTableAndCells||!Ab.test(b.nodeName)))j+=parseFloat(c.borderTopWidth)||0,k+=parseFloat(c.borderLeftWidth)||0;d=b.offsetParent}h.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(j+=parseFloat(c.borderTopWidth)||0,k+=parseFloat(c.borderLeftWidth)||0)}if(c.position==="relative"||
c.position==="static")j+=g.offsetTop,k+=g.offsetLeft;h.support.fixedPosition&&c.position==="fixed"&&(j+=Math.max(f.scrollTop,g.scrollTop),k+=Math.max(f.scrollLeft,g.scrollLeft));return{top:j,left:k}};h.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;h.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(h.css(a,"marginTop"))||0,c+=parseFloat(h.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=h.css(a,"position");if(d==="static")a.style.position="relative";
var e=h(a),f=e.offset(),g=h.css(a,"top"),j=h.css(a,"left"),k={},t={};(d==="absolute"||d==="fixed")&&h.inArray("auto",[g,j])>-1?(t=e.position(),d=t.top,j=t.left):(d=parseFloat(g)||0,j=parseFloat(j)||0);h.isFunction(b)&&(b=b.call(a,c,f));if(b.top!=null)k.top=b.top-f.top+d;if(b.left!=null)k.left=b.left-f.left+j;"using"in b?b.using.call(a,k):e.css(k)}};h.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=vb.test(b[0].nodeName)?{top:0,left:0}:b.offset();
c.top-=parseFloat(h.css(a,"marginTop"))||0;c.left-=parseFloat(h.css(a,"marginLeft"))||0;d.top+=parseFloat(h.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(h.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||v.body;a&&!vb.test(a.nodeName)&&h.css(a,"position")==="static";)a=a.offsetParent;return a})}});h.each(["Left","Top"],function(b,c){var d="scroll"+c;h.fn[d]=function(c){var e,f;if(c===a){e=
this[0];return!e?null:(f=Z(e))?"pageXOffset"in f?f[b?"pageYOffset":"pageXOffset"]:h.support.boxModel&&f.document.documentElement[d]||f.document.body[d]:e[d]}return this.each(function(){(f=Z(this))?f.scrollTo(!b?c:h(f).scrollLeft(),b?c:h(f).scrollTop()):this[d]=c})}});h.each(["Height","Width"],function(b,c){var d=c.toLowerCase();h.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(h.css(a,d,"padding")):this[d]():null};h.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(h.css(b,
d,a?"margin":"border")):this[d]():null};h.fn[d]=function(b){var e=this[0];if(!e)return b==null?null:this;if(h.isFunction(b))return this.each(function(a){var c=h(this);c[d](b.call(this,a,c[d]()))});if(h.isWindow(e)){var f=e.document.documentElement["client"+c],g=e.document.body;return e.document.compatMode==="CSS1Compat"&&f||g&&g["client"+c]||f}else return e.nodeType===9?Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+
c]):b===a?(e=h.css(e,d),f=parseFloat(e),h.isNumeric(f)?f:e):this.css(d,typeof b==="string"?b:b+"px")}});b.jQuery=b.$=h})(window);
(function(b){b.toJSON=function(a){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(a);var c=typeof a;if(a===null)return"null";if(c!="undefined"){if(c=="number"||c=="boolean")return a+"";if(c=="string")return b.quoteString(a);if(c=="object"){if(typeof a.toJSON=="function")return b.toJSON(a.toJSON());if(a.constructor===Date){var f=a.getUTCMonth()+1;f<10&&(f="0"+f);var g=a.getUTCDate();g<10&&(g="0"+g);var c=a.getUTCFullYear(),j=a.getUTCHours();j<10&&(j="0"+j);var k=a.getUTCMinutes();k<
10&&(k="0"+k);var l=a.getUTCSeconds();l<10&&(l="0"+l);a=a.getUTCMilliseconds();a<100&&(a="0"+a);a<10&&(a="0"+a);return'"'+c+"-"+f+"-"+g+"T"+j+":"+k+":"+l+"."+a+'Z"'}if(a.constructor===Array){f=[];for(g=0;g<a.length;g++)f.push(b.toJSON(a[g])||"null");return"["+f.join(",")+"]"}f=[];for(g in a){c=typeof g;if(c=="number")c='"'+g+'"';else if(c=="string")c=b.quoteString(g);else continue;typeof a[g]!="function"&&(j=b.toJSON(a[g]),f.push(c+":"+j))}return"{"+f.join(", ")+"}"}}};b.evalJSON=function(a){return typeof JSON==
"object"&&JSON.parse?JSON.parse(a):eval("("+a+")")};b.secureEvalJSON=function(a){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(a);var b;b=a.replace(/\\["\\\/bfnrtu]/g,"@");b=b.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");b=b.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(b))return eval("("+a+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");};b.quoteString=function(b){return b.match(a)?'"'+b.replace(a,function(a){var b=
c[a];if(typeof b==="string")return b;b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+b+'"'};var a=/["\\\x00-\x1f\x7f-\x9f]/g,c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(b,a,c,d,e){return jQuery.easing[jQuery.easing.def](b,a,c,d,e)},easeInQuad:function(b,a,c,d,e){return d*(a/=e)*a+c},easeOutQuad:function(b,a,c,d,e){return-d*(a/=e)*(a-2)+c},easeInOutQuad:function(b,a,c,d,e){return(a/=e/2)<1?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,e){return d*(a/=e)*a*a+c},easeOutCubic:function(b,a,c,d,e){return d*((a=a/e-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,e){return(a/=e/2)<1?d/2*a*a*a+c:d/
2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,e){return d*(a/=e)*a*a*a+c},easeOutQuart:function(b,a,c,d,e){return-d*((a=a/e-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,e){return(a/=e/2)<1?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,e){return d*(a/=e)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,e){return d*((a=a/e-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,e){return(a/=e/2)<1?d/2*a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,e){return-d*Math.cos(a/
e*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,e){return d*Math.sin(a/e*(Math.PI/2))+c},easeInOutSine:function(b,a,c,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+c},easeInExpo:function(b,a,c,d,e){return a==0?c:d*Math.pow(2,10*(a/e-1))+c},easeOutExpo:function(b,a,c,d,e){return a==e?c+d:d*(-Math.pow(2,-10*a/e)+1)+c},easeInOutExpo:function(b,a,c,d,e){return a==0?c:a==e?c+d:(a/=e/2)<1?d/2*Math.pow(2,10*(a-1))+c:d/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,e){return-d*(Math.sqrt(1-(a/=e)*
a)-1)+c},easeOutCirc:function(b,a,c,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+c},easeInOutCirc:function(b,a,c,d,e){return(a/=e/2)<1?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,e){var b=1.70158,f=0,g=d;if(a==0)return c;if((a/=e)==1)return c+d;f||(f=e*0.3);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f))+c},easeOutElastic:function(b,a,c,d,e){var b=1.70158,f=0,g=d;if(a==0)return c;if((a/=
e)==1)return c+d;f||(f=e*0.3);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin((a*e-b)*2*Math.PI/f)+d+c},easeInOutElastic:function(b,a,c,d,e){var b=1.70158,f=0,g=d;if(a==0)return c;if((a/=e/2)==2)return c+d;f||(f=e*0.3*1.5);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return a<1?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f)+c:g*Math.pow(2,-10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f)*0.5+d+c},easeInBack:function(b,a,c,d,e,f){f==void 0&&
(f=1.70158);return d*(a/=e)*a*((f+1)*a-f)+c},easeOutBack:function(b,a,c,d,e,f){f==void 0&&(f=1.70158);return d*((a=a/e-1)*a*((f+1)*a+f)+1)+c},easeInOutBack:function(b,a,c,d,e,f){f==void 0&&(f=1.70158);return(a/=e/2)<1?d/2*a*a*(((f*=1.525)+1)*a-f)+c:d/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+c},easeInBounce:function(b,a,c,d,e){return d-jQuery.easing.easeOutBounce(b,e-a,0,d,e)+c},easeOutBounce:function(b,a,c,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*
(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,a,c,d,e){return a<e/2?jQuery.easing.easeInBounce(b,a*2,0,d,e)*0.5+c:jQuery.easing.easeOutBounce(b,a*2-e,0,d,e)*0.5+d*0.5+c}});typeof NEWSBLUR=="undefined"&&(NEWSBLUR={});if(typeof NEWSBLUR.Globals=="undefined")NEWSBLUR.Globals={};var URL_REGEX=/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi;
NEWSBLUR.log=function(b){try{if(typeof o=="object"){for(var a=[],c=0;c<b.length;c++)c!=0&&a.push(b[c]);console.debug(b[0],a)}else console.log(b)}catch(d){console={log:function(){}}}};
(function(b){b.fn.extend({autolink:function(){return this.each(function(){b(this).textNodes().each(function(){var a=b(this);a&&a.parent()&&a.parent()[0]&&a.parent()[0].nodeName!="A"&&a.replaceWith(this.data.replace(URL_REGEX,function(a){return'<a href="'+a+'">'+a+"</a>"}))})})},textNodes:function(){var a=[];(function(b){if(b)if(b.nodeType==3)a.push(b);else for(var d=0;d<b.childNodes.length;++d)arguments.callee(b.childNodes[d])})(this[0]);return b(a)},isScrollVisible:function(a){var c=0+b(this).height(),
d=b(this).offset().top,d=a.offset().top-d,a=d+a.outerHeight();return d>=0&&a<=c},align:function(a,c,d){var e,f,g,j,c=c||"",d=d||{},k=document.documentElement.scrollTop||document.body.scrollTop||0,l=document.documentElement.scrollLeft||document.body.scrollLeft||0,m=document.documentElement.clientWidth,u=document.documentElement.clientHeight;if(a==window)e=l,f=k,g=b(window).width(),j=b(window).height();else{var a=b(a),n=a.offset();e=n.left;f=n.top;g=a.innerWidth();j=a.innerHeight()}a=this.innerWidth();
n=this.innerHeight();e=c.indexOf("-left")>=0?e:c.indexOf("left")>=0?e-a:c.indexOf("-right")>=0?e+g-a:c.indexOf("right")>=0?e+g:e+(g-a)/2;f=c.indexOf("-top")>=0?f:c.indexOf("top")>=0?f-n:c.indexOf("-bottom")>=0?f+j-n:c.indexOf("bottom")>=0?f+j:f+(j-n)/2;c=c.indexOf("no-constraint")>=0?!1:!0;e+=d.left||0;f+=d.top||0;c&&(e=Math.max(l,Math.min(e,l+m-a)),f=Math.max(k,Math.min(f,k+u-n)));b(this).css({position:"absolute",left:e+"px",top:f+"px"});return this}});b.extend({textColor:function(a){var b=function(a,
b){var c=d(a),j=d(b);return c>j?(c+0.05)/(j+0.05):(j+0.05)/(c+0.05)},d=function(a){var b=a.r,c=a.g,a=a.b,b=b<=0.03928?b/12.92:Math.pow((b+0.055)/1.055,2.4),c=c<=0.03928?c/12.92:Math.pow((c+0.055)/1.055,2.4),a=a<=0.03928?a/12.92:Math.pow((a+0.055)/1.055,2.4);return 0.2126*b+0.7152*c+0.0722*a};return b(a,{r:1,g:1,b:1})>b(a,{r:0.5,g:0.5,b:0.5})?"white":"black"},favicon:function(a,b){if(a&&a.indexOf("data:image/png;base64,")!=-1)return a;else if(a)return"data:image/png;base64,"+a;else if(b)return"data:image/png;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
return NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/world.png"},deepCopy:function(a){switch(b.typeOf(a)){case "object":var c={};for(key in a)c[key]=b.deepCopy(a[key]);return c;case "array":for(var c=[],d=0;d<a.length;d++)c.push(b.deepCopy(a[d]));return c;default:return a}},typeOf:function(a){var b=typeof a;b=="object"&&(a?typeof a.length=="number"&&!a.propertyIsEnumerable("length")&&typeof a.splice=="function"&&(b="array"):b="null");return b},targetIs:function(a,c,d){if(!a||!c)return!1;var c={childOf:c.childOf||
null,tagSelector:c.tagSelector||null,cancelBubbling:c.cancelBubbling||!1},a=b(a.target),e=null,f=!1;c.childOf&&(e=a.closest(c.childOf),e.length||(f=!0));if(c.tagSelector){var g=c.tagSelector;a.is(g)||(c.cancelBubbling?f=!0:($tp=a.closest(g),$tp.length?a=$tp:f=!0))}return f?!1:(d&&typeof d=="function"&&d(a,e),!0)},entity:function(a){var b=document.createElement("div");b.innerHTML=String(a);return b.innerHTML},make:function(){var a,c,d,e;a=arguments;var f=a[0];if(a[1])if(typeof a[1]=="string"||typeof a[1]==
"number")c=a[1];else if(typeof a[1]=="object"&&a[1].push)d=a[1];else if(e=a[1],e.className)e["class"]=e.className,delete e.className;a[2]&&(typeof a[2]=="string"||typeof a[2]=="number"?c=a[2]:typeof a[1]=="object"&&a[2].push&&(d=a[2]));a=b(document.createElement(f));if(e)for(var g in e)e.hasOwnProperty(g)&&(a.is(":input")&&g=="value"?a.val(e[g]):a.attr(g,e[g]));if(d)for(e=0;e<d.length;e++)d[e]&&a.append(d[e]);c&&a.html(c);return a},rescope:function(a,b){return function(d,e,f,g,j,k){a.call(b,this,
d,e,f,g,j,k)}},closest:function(a,b){var d=0,e=Math.abs(b[d]-a),f;for(f in b){var g=b[f]-a;if(g<=0&&Math.abs(g)<e)d=parseInt(f,10),e=Math.abs(b[d]-a);else if(g>0)break}return d},getQueryString:function(a){function b(){for(var a={},c,f=/\+/g,g=/([^&=]+)=?([^&]*)/g,j=window.location.search.substring(1);c=g.exec(j);)a[decodeURIComponent(c[1].replace(f," "))]=decodeURIComponent(c[2].replace(f," "));return a}if(!this.queryStringParams)this.queryStringParams=b();return this.queryStringParams[a]}})})(jQuery);
(function(b){var a;b.extend({iedebug:function(c){a||(a=b.make("div",[b.make("ol")]).css({position:"absolute",top:10,left:10,zIndex:2E4,border:"1px solid #000",padding:"10px",backgroundColor:"#fff",fontFamily:"arial,helvetica,sans-serif",fontSize:"11px"}),b("body").append(a),a.draggable());a.find("ol").append(b.make("li",c).css({borderBottom:"1px solid #999999"}))}})})(jQuery);
(function(b){function a(a){return typeof a=="object"?a:{top:a,left:a}}var c=b.scrollTo=function(a,c,f){b(window).scrollTo(a,c,f)};c.defaults={axis:"xy",duration:parseFloat(b.fn.jquery)>=1.3?0:1,queue:!0};c.window=function(){return b(window).scrollable()};b.fn.scrollable=function(){return this.map(function(){if(this.nodeName&&b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return b.browser.safari||
a.compatMode=="BackCompat"?a.body:a.documentElement})};b.fn.scrollTo=function(d,e,f){typeof e=="object"&&(f=e,e=0);typeof f=="function"&&(f={onAfter:f});d=="max"&&(d=9E9);f=b.extend({},c.defaults,f);e=e||f.speed||f.duration;f.queue=f.queue&&f.axis.length>1;f.queue&&(e/=2);f.offset=a(f.offset);f.over=a(f.over);return this.scrollable().each(function(){function c(a){l.animate(n,{duration:e,easing:f.easing,complete:a&&function(){a.call(this,d,f)},queue:f.queue})}function j(a){var b="scroll"+a;if(!F)return k[b];
var a="client"+a,c=k.ownerDocument.documentElement,d=k.ownerDocument.body;return Math.max(c[b],d[b])-Math.min(c[a],d[a])}var k=this,l=b(k),m=d,u,n={},F=l.is("html,body");switch(typeof m){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px)?$/.test(m)){m=a(m);break}m=b(m,this);case "object":if(m.is||m.style)u=(m=b(m)).offset()}b.each(f.axis.split(""),function(a,b){var d=b=="x"?"Left":"Top",e=d.toLowerCase(),y="scroll"+d,P=k[y],K=b=="x"?"Width":"Height";u?(n[y]=u[e]+(F?0:P-l.offset()[e]),f.margin&&
(n[y]-=parseInt(m.css("margin"+d))||0,n[y]-=parseInt(m.css("border"+d+"Width"))||0),n[y]+=f.offset[e]||0,f.over[e]&&(n[y]+=m[K.toLowerCase()]()*f.over[e])):n[y]=m[e];/^\d+$/.test(n[y])&&(n[y]=n[y]<=0?0:Math.min(n[y],j(K)));!a&&f.queue&&(P!=n[y]&&c(f.onAfterFirst),delete n[y])});c(f.onAfter)}).end()}})(jQuery);
(function(b){function a(a){a=parseInt(a).toString(16);return a.length<2?"0"+a:a}function c(c){for(;c;){var d=b.css(c,"backgroundColor");if(d&&d!="transparent"&&d!="rgba(0, 0, 0, 0)")return d.indexOf("rgb")>=0?(c=d.match(/\d+/g),"#"+a(c[0])+a(c[1])+a(c[2])):d;c=c.parentNode}return"#ffffff"}function d(a,b,c){switch(a){case "round":return Math.round(c*(1-Math.cos(Math.asin(b/c))));case "cool":return Math.round(c*(1+Math.cos(Math.asin(b/c))));case "sharp":return Math.round(c*(1-Math.cos(Math.acos(b/c))));
case "bite":return Math.round(c*Math.cos(Math.asin((c-b-1)/c)));case "slide":return Math.round(c*Math.atan2(b,c/b));case "jut":return Math.round(c*Math.atan2(c,c-b-1));case "curl":return Math.round(c*Math.atan(b));case "tear":return Math.round(c*Math.cos(b));case "wicked":return Math.round(c*Math.tan(b));case "long":return Math.round(c*Math.sqrt(b));case "sculpt":return Math.round(c*Math.log(c-b-1,c));case "dogfold":case "dog":return b&1?b+1:c;case "dog2":return b&2?b+1:c;case "dog3":return b&3?b+
1:c;case "fray":return b%2*c;case "notch":return c;case "bevelfold":case "bevel":return b+1}}var e=document.createElement("div").style,f=e.MozBorderRadius!==void 0,g=e.WebkitBorderRadius!==void 0,j=e.borderRadius!==void 0||e.BorderRadius!==void 0,e=document.documentMode||0,k=b.browser.msie&&(b.browser.version<8&&!e||e<8),l=b.browser.msie&&function(){var a=document.createElement("div");try{a.style.setExpression("width","0+0"),a.style.removeExpression("width")}catch(b){return!1}return!0}();b.fn.corner=
function(a){if(this.length==0){if(!b.isReady&&this.selector){var e=this.selector,n=this.context;b(function(){b(e,n).corner(a)})}return this}return this.each(function(){var e=b(this),n=[e.attr(b.fn.corner.defaults.metaAttr)||"",a||""].join(" ").toLowerCase(),u=/keep/.test(n),N=(n.match(/cc:(#[0-9a-f]+)/)||[])[1],T=(n.match(/sc:(#[0-9a-f]+)/)||[])[1],y=parseInt((n.match(/(\d+)px/)||[])[1])||10,P=(n.match(/round|bevelfold|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dogfold|dog/)||
["round"])[0],K=/dogfold|bevelfold/.test(n),q={T:0,B:1},n={TL:/top|tl|left/.test(n),TR:/top|tr|right/.test(n),BL:/bottom|bl|left/.test(n),BR:/bottom|br|right/.test(n)};!n.TL&&!n.TR&&!n.BL&&!n.BR&&(n={TL:1,TR:1,BL:1,BR:1});if(b.fn.corner.defaults.useNative&&P=="round"&&(j||f||g)&&!N&&!T)n.TL&&e.css(j?"border-top-left-radius":f?"-moz-border-radius-topleft":"-webkit-border-top-left-radius",y+"px"),n.TR&&e.css(j?"border-top-right-radius":f?"-moz-border-radius-topright":"-webkit-border-top-right-radius",
y+"px"),n.BL&&e.css(j?"border-bottom-left-radius":f?"-moz-border-radius-bottomleft":"-webkit-border-bottom-left-radius",y+"px"),n.BR&&e.css(j?"border-bottom-right-radius":f?"-moz-border-radius-bottomright":"-webkit-border-bottom-right-radius",y+"px");else{e=document.createElement("div");b(e).css({overflow:"hidden",height:"1px",minHeight:"1px",fontSize:"1px",backgroundColor:T||"transparent",borderStyle:"solid"});var T=parseInt(b.css(this,"paddingTop"))||0,V=parseInt(b.css(this,"paddingRight"))||0,
I=parseInt(b.css(this,"paddingBottom"))||0,ea=parseInt(b.css(this,"paddingLeft"))||0;if(typeof this.style.zoom!=void 0)this.style.zoom=1;if(!u)this.style.border="none";e.style.borderColor=N||c(this.parentNode);var u=b(this).outerHeight(),na;for(na in q)if((N=q[na])&&(n.BL||n.BR)||!N&&(n.TL||n.TR)){e.style.borderStyle="none "+(n[na+"R"]?"solid":"none")+" none "+(n[na+"L"]?"solid":"none");var Z=document.createElement("div");b(Z).addClass("jquery-corner");var v=Z.style;N?this.appendChild(Z):this.insertBefore(Z,
this.firstChild);if(N&&u!="auto"){if(b.css(this,"position")=="static")this.style.position="relative";v.position="absolute";v.bottom=v.left=v.padding=v.margin="0";l?v.setExpression("width","this.parentNode.offsetWidth"):v.width="100%"}else if(!N&&b.browser.msie){if(b.css(this,"position")=="static")this.style.position="relative";v.position="absolute";v.top=v.left=v.right=v.padding=v.margin="0";if(l){var x=(parseInt(b.css(this,"borderLeftWidth"))||0)+(parseInt(b.css(this,"borderRightWidth"))||0);v.setExpression("width",
"this.parentNode.offsetWidth - "+x+'+ "px"')}else v.width="100%"}else v.position="relative",v.margin=!N?"-"+T+"px -"+V+"px "+(T-y)+"px -"+ea+"px":I-y+"px -"+V+"px -"+I+"px -"+ea+"px";for(v=0;v<y;v++){var x=Math.max(0,d(P,v,y)),p=e.cloneNode(!1);p.style.borderWidth="0 "+(n[na+"R"]?x:0)+"px 0 "+(n[na+"L"]?x:0)+"px";N?Z.appendChild(p):Z.insertBefore(p,Z.firstChild)}if(K&&b.support.boxModel&&(!N||!k))for(var h in n)if(n[h]&&(!N||!(h=="TL"||h=="TR")))if(N||!(h=="BL"||h=="BR")){v={position:"absolute",border:"none",
margin:0,padding:0,overflow:"hidden",backgroundColor:e.style.borderColor};x=b("<div/>").css(v).css({width:y+"px",height:"1px"});switch(h){case "TL":x.css({bottom:0,left:0});break;case "TR":x.css({bottom:0,right:0});break;case "BL":x.css({top:0,left:0});break;case "BR":x.css({top:0,right:0})}Z.appendChild(x[0]);v=b("<div/>").css(v).css({top:0,bottom:0,width:"1px",height:y+"px"});switch(h){case "TL":v.css({left:y});break;case "TR":v.css({right:y});break;case "BL":v.css({left:y});break;case "BR":v.css({right:y})}Z.appendChild(v[0])}}}})};
b.fn.uncorner=function(){if(j||f||g)this.css(j?"border-radius":f?"-moz-border-radius":"-webkit-border-radius",0);b("div.jquery-corner",this).remove();return this};b.fn.corner.defaults={useNative:!0,metaAttr:"data-corner"}})(jQuery);
NEWSBLUR.hotkeys={KEYS:{16:"shift",17:"control",91:"command",93:"command",224:"command"},initialize:function(){_.bindAll(this,"down","up","blur");$(document).bind("keydown",this.down);$(document).bind("keyup",this.up);$(window).bind("blur",this.blur)},down:function(b){(b=this.KEYS[b.keyCode])&&(this[b]=!0)},up:function(b){(b=this.KEYS[b.keyCode])&&(this[b]=!1)},blur:function(){for(var b in this.KEYS)this[this.KEYS[b]]=!1}};
(function(b){function a(a){if(typeof a.data==="string"){var d=a.handler,e=a.data.toLowerCase().split(" ");a.handler=function(a){if(!(this!==a.target&&(/textarea|select/i.test(a.target.nodeName)||a.target.type==="text"||a.target.type==="password"))){var c=a.type!=="keypress"&&b.hotkeys.specialKeys[a.which],j=String.fromCharCode(a.which).toLowerCase(),k="",l={};a.altKey&&c!=="alt"&&(k+="alt+");a.ctrlKey&&c!=="ctrl"&&(k+="ctrl+");a.metaKey&&!a.ctrlKey&&c!=="meta"&&(k+="meta+");a.shiftKey&&c!=="shift"&&
(k+="shift+");c?l[k+c]=!0:(l[k+j]=!0,l[k+b.hotkeys.shiftNums[j]]=!0,k==="shift+"&&(l[b.hotkeys.shiftNums[j]]=!0));c=0;for(j=e.length;c<j;c++)if(l[e[c]])return d.apply(this,arguments)}}}}b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",
105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:a}})})(jQuery);
jQuery.extend({createUploadIframe:function(b,a){var c="jUploadFrame"+b;if(window.ActiveXObject){var d=document.createElement('<iframe id="'+c+'" name="'+c+'" />');if(typeof a=="boolean")d.src="javascript:false";else if(typeof a=="string")d.src=a}else d=document.createElement("iframe"),d.id=c,d.name=c;d.style.position="absolute";d.style.top="-1000px";d.style.left="-1000px";document.body.appendChild(d);return d},createUploadForm:function(b,a){var c="jUploadForm"+b,d="jUploadFile"+b,c=$('<form  action="" method="POST" name="'+
c+'" id="'+c+'" enctype="multipart/form-data"></form>'),e=$("#"+a),f=$(e).clone();$(e).attr("id",d);$(e).before(f);$(e).appendTo(c);$(c).css("position","absolute");$(c).css("top","-1200px");$(c).css("left","-1200px");$(c).appendTo("body");return c},ajaxFileUpload:function(b){var b=jQuery.extend({},jQuery.ajaxSettings,b),a=(new Date).getTime(),c=jQuery.createUploadForm(a,b.fileElementId);jQuery.createUploadIframe(a,b.secureuri);var d="jUploadFrame"+a,a="jUploadForm"+a;b.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");
var e=!1,f={};b.global&&jQuery.event.trigger("ajaxSend",[f,b]);var g=function(a){var g=document.getElementById(d);try{if(g.contentWindow)f.responseText=g.contentWindow.document.body?g.contentWindow.document.body.innerHTML:null,f.responseXML=g.contentWindow.document.XMLDocument?g.contentWindow.document.XMLDocument:g.contentWindow.document;else if(g.contentDocument)f.responseText=g.contentDocument.document.body?g.contentDocument.document.body.innerHTML:null,f.responseXML=g.contentDocument.document.XMLDocument?
g.contentDocument.document.XMLDocument:g.contentDocument.document}catch(j){jQuery.handleError(b,f,null,j)}if(f||a=="timeout"){e=!0;var u;try{if(u=a!="timeout"?"success":"error",u!="error"){var n=jQuery.uploadHttpData(f,b.dataType);b.success&&b.success(n,u);b.global&&jQuery.event.trigger("ajaxSuccess",[f,b])}else jQuery.handleError(b,f,u)}catch(F){u="error",jQuery.handleError(b,f,u,F)}b.global&&jQuery.event.trigger("ajaxComplete",[f,b]);b.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop");
b.complete&&b.complete(f,u);jQuery(g).unbind();setTimeout(function(){try{$(g).remove(),$(c).remove()}catch(a){jQuery.handleError(b,f,null,a)}},100);f=null}};b.timeout>0&&setTimeout(function(){e||g("timeout")},b.timeout);try{c=$("#"+a),$(c).attr("action",b.url),$(c).attr("method","POST"),$(c).attr("target",d),c.encoding?c.encoding="multipart/form-data":c.enctype="multipart/form-data",$(c).submit()}catch(j){jQuery.handleError(b,f,null,j)}window.attachEvent?document.getElementById(d).attachEvent("onload",
g):document.getElementById(d).addEventListener("load",g,!1);return{abort:function(){}}},uploadHttpData:function(b,a){var c;c=a=="xml"||!a?b.responseXML:b.responseText;a=="script"&&jQuery.globalEval(c);a=="json"&&(c=c.replace(/<pre>/i,"").replace(/<\/pre>/i,""),c=eval("("+c+")"));a=="html"&&jQuery("<div>").html(c).evalScripts();return c}});
(function(b){var a={},c={};b.manageAjax=function(){return{create:function(c,e){a[c]=new b.manageAjax._manager(c,e);return a[c]},destroy:function(b){a[b]&&(a[b].clear(!0),delete a[b])}}}();b.manageAjax._manager=function(a,c){this.requests={};this.inProgress=0;this.qName=this.name=a;this.opts=b.extend({},b.manageAjax.defaults,c);if(c&&c.queue&&c.queue!==!0&&typeof c.queue==="string"&&c.queue!=="clear")this.qName=c.queue};b.manageAjax._manager.prototype={add:function(a,c){typeof a=="object"?c=a:typeof a==
"string"&&(c=b.extend(c||{},{url:a}));var c=b.extend({},this.opts,c),f=c.complete||b.noop,g=c.success||b.noop,j=c.beforeSend||b.noop,k=c.error||b.noop,l=typeof c.data=="string"?c.data:b.param(c.data||{}),m=c.type+c.url+l,u=this,n=this._createAjax(m,c,g,f);if(c.preventDoubleRequests&&c.queueDuplicateRequests){if(c.preventDoubleRequests)c.queueDuplicateRequests=!1;setTimeout(function(){throw"preventDoubleRequests and queueDuplicateRequests can't be both true";},0)}if(!this.requests[m]||!c.preventDoubleRequests){n.xhrID=
m;c.xhrID=m;c.beforeSend=function(a,b){var c=j.call(this,a,b);c===!1&&u._removeXHR(m);return c};c.complete=function(a,b){u._complete.call(u,this,f,a,b,m,c)};c.success=function(a,b,d){u._success.call(u,this,g,a,b,d,c)};c.error=function(a,b,d){var f="",g="";if(b!=="timeout"&&a)f=a.status,g=a.responseXML||a.responseText;k?k.call(this,a,b,d,c):setTimeout(function(){throw b+"| status: "+f+" | URL: "+c.url+" | data: "+l+" | thrown: "+d+" | response: "+g;},0);a=null};c.queue==="clear"&&b(document).clearQueue(this.qName);
return c.queue||c.queueDuplicateRequests&&this.requests[m]?(b.queue(document,this.qName,n),this.inProgress<c.maxRequests&&(!this.requests[m]||!c.queueDuplicateRequests)&&b.dequeue(document,this.qName),m):n()}},_createAjax:function(a,e,f,g){var j=this;return function(){if(e.beforeCreate.call(e.context||j,a,e)!==!1){j.inProgress++;j.inProgress===1&&b.event.trigger(j.name+"AjaxStart");e.cacheResponse&&c[a]&&(!c[a].cacheTTL||c[a].cacheTTL<0||(new Date).getTime()-c[a].timestamp<c[a].cacheTTL?(j.requests[a]=
{},setTimeout(function(){j._success.call(j,e.context||e,f,c[a]._successData,"success",c[a],e);j._complete.call(j,e.context||e,g,c[a],"success",a,e)},0)):delete c[a]);if(!e.cacheResponse||!c[a])e.async?j.requests[a]=b.ajax(e):b.ajax(e);return a}}},_removeXHR:function(a){(this.opts.queue||this.opts.queueDuplicateRequests)&&b.dequeue(document,this.qName);this.inProgress--;this.requests[a]=null;delete this.requests[a]},clearCache:function(){c={}},_isAbort:function(a,b,c){return!c.abortIsNoSuccess||!a&&
!b?!1:!(a&&!(a.readyState===0||this.lastAbort===c.xhrID))},_complete:function(a,c,f,g,j,k){this._isAbort(f,g,k)&&(g="abort",k.abort.call(a,f,g,k));c.call(a,f,g,k);b.event.trigger(this.name+"AjaxComplete",[f,g,k]);k.domCompleteTrigger&&b(k.domCompleteTrigger).trigger(this.name+"DOMComplete",[f,g,k]).trigger("DOMComplete",[f,g,k]);this._removeXHR(j);this.inProgress||b.event.trigger(this.name+"AjaxStop")},_success:function(a,e,f,g,j,k){var l=this;if(!this._isAbort(j,g,k)){k.abortOld&&b.each(this.requests,
function(a){if(a===k.xhrID)return!1;l.abort(a)});if(k.cacheResponse&&!c[k.xhrID]&&(j||(j={}),c[k.xhrID]={status:j.status,statusText:j.statusText,responseText:j.responseText,responseXML:j.responseXML,_successData:f,cacheTTL:k.cacheTTL,timestamp:(new Date).getTime()},"getAllResponseHeaders"in j)){var m=j.getAllResponseHeaders(),u,n=function(){u||(u={},b.each(m.split("\n"),function(a,b){var c=b.indexOf(":");u[b.substr(0,c)]=b.substr(c+2)}))};b.extend(c[k.xhrID],{getAllResponseHeaders:function(){return m},
getResponseHeader:function(a){n();return a in u?u[a]:null}})}e.call(a,f,g,j,k);b.event.trigger(this.name+"AjaxSuccess",[j,k,f]);k.domSuccessTrigger&&b(k.domSuccessTrigger).trigger(this.name+"DOMSuccess",[f,k]).trigger("DOMSuccess",[f,k])}j=null},getData:function(a){if(a){var c=this.requests[a];!c&&this.opts.queue&&(c=b.grep(b(document).queue(this.qName),function(b){return b.xhrID===a})[0]);return c}return{requests:this.requests,queue:this.opts.queue?b(document).queue(this.qName):[],inProgress:this.inProgress}},
abort:function(a){var c;if(a)(c=this.getData(a))&&c.abort?(this.lastAbort=a,c.abort(),this.lastAbort=!1):b(document).queue(this.qName,b.grep(b(document).queue(this.qName),function(a){return a!==c})),c=null;else{var f=this,g=[];b.each(this.requests,function(a){g.push(a)});b.each(g,function(a,b){f.abort(b)})}},clear:function(a){b(document).clearQueue(this.qName);a&&this.abort()}};b.manageAjax._manager.prototype.getXHR=b.manageAjax._manager.prototype.getData;b.manageAjax.defaults={beforeCreate:b.noop,
abort:b.noop,abortIsNoSuccess:!0,maxRequests:1,cacheResponse:!1,async:!0,domCompleteTrigger:!1,domSuccessTrigger:!1,preventDoubleRequests:!0,queueDuplicateRequests:!1,cacheTTL:-1,queue:!1};b.each(b.manageAjax._manager.prototype,function(c,e){c.indexOf("_")!==0&&b.isFunction(e)&&(b.manageAjax[c]=function(e,g){if(!a[e])if(c==="add")b.manageAjax.create(e,g);else return;var j=Array.prototype.slice.call(arguments,1);a[e][c].apply(a[e],j)})})})(jQuery);
(function(b){var a=b.browser.msie&&parseInt(b.browser.version)===6&&typeof window.XMLHttpRequest!=="object",c=null,d=[];b.modal=function(a,c){return b.modal.impl.init(a,c)};b.modal.close=function(a){b.modal.impl.close(a)};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=function(){b.modal.impl.setContainerDimensions()};b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,c){b.modal.impl.update(a,c)};b.fn.modal=function(a){return b.modal.impl.init(this,
a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!0,autoPosition:!0,zIndex:1E3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl=
{d:{},init:function(a,d){if(this.d.data)return!1;c=b.browser.msie&&!b.boxModel;this.o=b.extend({},b.modal.defaults,d);this.zIndex=this.o.zIndex;this.occb=!1;if(typeof a==="object"){if(a=a instanceof jQuery?a:b(a),this.d.placeholder=!1,a.parent().parent().size()>0&&(a.before(b("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist))this.d.orig=a.clone(!0)}else if(typeof a==="string"||typeof a==="number")a=b("<div></div>").html(a);
else return alert("SimpleModal Error: Unsupported data type: "+typeof a),this;this.create(a);this.open();b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(e){d=this.getDimensions();if(this.o.modal&&a)this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:d[0],width:d[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo);this.d.overlay=b("<div></div>").attr("id",
this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?d[0]:0,width:this.o.modal?d[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend(this.o.containerCss,{display:"none",position:"fixed",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):
"").appendTo(this.o.appendTo);this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=e.attr("id",e.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();this.d.data.appendTo(this.d.wrap);(a||c)&&this.fixIE()},bindEvents:function(){var e=this;b("."+e.o.closeClass).bind("click.simplemodal",function(a){a.preventDefault();
e.close()});e.o.modal&&e.o.close&&e.o.overlayClose&&e.d.overlay.bind("click.simplemodal",function(a){a.preventDefault();e.close()});b(document).bind("keydown.simplemodal",function(a){e.o.modal&&a.keyCode===9?e.watchTab(a):e.o.close&&e.o.escClose&&a.keyCode===27&&(a.preventDefault(),e.close())});b(window).bind("resize.simplemodal",function(){d=e.getDimensions();e.o.autoResize?e.setContainerDimensions():e.o.autoPosition&&e.setPosition();a||c?e.fixIE():e.o.modal&&(e.d.iframe&&e.d.iframe.css({height:d[0],
width:d[1]}),e.d.overlay.css({height:d[0],width:d[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal");b(document).unbind("keydown.simplemodal");b(window).unbind("resize.simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,this.d.container],function(b,c){if(c){var d=c[0].style;d.position="absolute";if(b<2)d.removeExpression("height"),d.removeExpression("width"),
d.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),d.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var k,l;a&&a.constructor===Array?(k=a[0]?typeof a[0]==="number"?a[0].toString():a[0].replace(/px/,""):c.css("top").replace(/px/,""),k=k.indexOf("%")===-1?k+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':
parseInt(k.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(l=typeof a[1]==="number"?a[1].toString():a[1].replace(/px/,""),l=l.indexOf("%")===-1?l+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(l.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):
(k='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',l='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');d.removeExpression("top");d.removeExpression("left");d.setExpression("top",
k);d.setExpression("left",l)}}})},focus:function(a){var c=this,a=a&&b.inArray(a,["first","last"])!==-1?a:"first",d=b(":input:enabled:visible:"+a,c.d.wrap);setTimeout(function(){d.length>0?d.focus():c.d.wrap.focus()},10)},getDimensions:function(){var a=b(window);return[b.browser.opera&&b.browser.version>"9.5"&&b.fn.jquery<"1.3"||b.browser.opera&&b.browser.version<"9.5"&&b.fn.jquery>"1.2.6"?a[0].innerHeight:a.height(),a.width()]},getVal:function(a,b){return a?typeof a==="number"?a:a==="auto"?0:a.indexOf("%")>
0?parseInt(a.replace(/%/,""))/100*(b==="h"?d[0]:d[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data)return!1;this.d.origHeight=this.getVal(a,"h");this.d.origWidth=this.getVal(b,"w");this.d.data.hide();a&&this.d.container.css("height",a);b&&this.d.container.css("width",b);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},resize:function(a){if(a)this.d.data=a;d=this.getDimensions();this.setContainerDimensions()},
setContainerDimensions:function(){var a=this.getVal(this.d.container.css("height"),"h"),b=this.getVal(this.d.container.css("width"),"w"),c=this.d.data.outerHeight(!0),j=this.d.data.outerWidth(!0),a=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,b=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,k=a&&a<d[0]-80?a:d[0]-80,l=b&&b<d[1]-80?b:d[1]-80,m=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",a=c>k?k:this.o.minHeight&&m!=="auto"&&c<a?m:c,k=this.o.minWidth?this.getVal(this.o.minWidth,
"w"):"auto",b=j>l?l:this.o.minWidth&&k!=="auto"&&j<b?k:j;this.d.container.css({height:a,width:b});this.d.wrap.css({overflow:c>a||j>b?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=d[0]/2-this.d.container.outerHeight(!0)/2;b=d[1]/2-this.d.container.outerWidth(!0)/2;this.o.position&&Object.prototype.toString.call(this.o.position)==="[object Array]"&&(a=this.o.position[0]||a,b=this.o.position[1]||b);this.d.container.css({left:b,top:a})},watchTab:function(a){if(b(a.target).parents(".simplemodal-container").length>
0){if(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||this.inputs.length===0)a.preventDefault(),this.focus(a.shiftKey?"last":"first")}else a.preventDefault(),this.focus()},open:function(){this.d.iframe&&this.d.iframe.show();b.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&
this.focus();this.bindEvents()},close:function(a){var c=this;if(!c.d.data)return!1;c.unbindEvents();if(b.isFunction(c.o.onClose)&&!c.occb)c.occb=!0,c.o.onClose.apply(c,[c.d,a]);else{if(c.d.placeholder){var d=b("#simplemodal-placeholder");c.o.persist?d.replaceWith(c.d.data.removeClass("simplemodal-data").css("display",c.display)):(c.d.data.hide().remove(),d.replaceWith(c.d.orig))}else c.d.data.hide().remove();c.d.container&&c.d.container.length&&c.d.container.hide().remove();c.d.overlay&&c.d.overlay.length&&
c.d.overlay.hide();c.d.iframe&&c.d.iframe.hide().remove();setTimeout(function(){c.d.overlay&&c.d.overlay.length&&c.d.overlay.remove();c.d={};b.isFunction(a)&&a()},10)}}}})(jQuery);
(function(b){function a(a){var e;return a&&a.constructor==Array&&a.length==3?a:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:
(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:c[b.trim(a).toLowerCase()]}b.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(c,e){b.fx.step[e]=function(c){if(c.state==0){var d;d=c.elem;var j=e,k;do{k=b.curCSS(d,j);if(k!=""&&k!="transparent"||b.nodeName(d,"body"))break;j="backgroundColor"}while(d=d.parentNode);d=a(k);c.start=d;c.end=a(c.end)}c.elem.style[e]=
"rgb("+[Math.max(Math.min(parseInt(c.pos*(c.end[0]-c.start[0])+c.start[0]),255),0),Math.max(Math.min(parseInt(c.pos*(c.end[1]-c.start[1])+c.start[1]),255),0),Math.max(Math.min(parseInt(c.pos*(c.end[2]-c.start[2])+c.start[2]),255),0)].join(",")+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,
0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,
203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
jQuery&&function(){$.extend($.fn,{rightClick:function(b){$(this).each(function(){$(this).mousedown(function(a){$(this).mouseup(function(){$(this).unbind("mouseup");return a.button==2?(b.call($(this),a),!1):!0})});$(this)[0].oncontextmenu=function(){return!1}});return $(this)},rightMouseDown:function(b){$(this).each(function(){$(this).mousedown(function(a){return a.button==2?(b.call($(this),a),!1):!0});$(this)[0].oncontextmenu=function(){return!1}});return $(this)},rightMouseUp:function(b){$(this).each(function(){$(this).mouseup(function(a){return a.button==
2?(b.call($(this),a),!1):!0});$(this)[0].oncontextmenu=function(){return!1}});return $(this)},noContext:function(){$(this).each(function(){$(this)[0].oncontextmenu=function(){return!1}});return $(this)}})}(jQuery);
(function(b,a){function c(a){return!b(a).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.9",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({_focus:b.fn.focus,focus:function(a,c){return typeof a==="number"?this.each(function(){var f=this;setTimeout(function(){b(f).focus();c&&c.call(f)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,
"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length)for(var c=b(this[0]),e;c.length&&c[0]!==document;){e=c.css("position");if(e===
"absolute"||e==="relative"||e==="fixed")if(e=parseInt(c.css("zIndex"),10),!isNaN(e)&&e!==0)return e;c=c.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(c,e){function f(a,c,d,e){b.each(g,function(){c-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;d&&(c-=parseFloat(b.curCSS(a,
"border"+this+"Width",!0))||0);e&&(c-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return c}var g=e==="Width"?["Left","Right"]:["Top","Bottom"],j=e.toLowerCase(),k={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+e]=function(c){return c===a?k["inner"+e].call(this):this.each(function(){b(this).css(j,f(this,c)+"px")})};b.fn["outer"+e]=function(a,c){return typeof a!=="number"?k["outer"+e].call(this,a):this.each(function(){b(this).css(j,
f(this,a,!0,c)+"px")})}}),b.extend(b.expr[":"],{data:function(a,c,f){return!!b.data(a,f[3])},focusable:function(a){var e=a.nodeName.toLowerCase(),f=b.attr(a,"tabindex");if("area"===e){e=a.parentNode;f=e.name;if(!a.href||!f||e.nodeName.toLowerCase()!=="map")return!1;a=b("img[usemap=#"+f+"]")[0];return!!a&&c(a)}return(/input|select|textarea|button|object/.test(e)?!a.disabled:"a"==e?a.href||!isNaN(f):!isNaN(f))&&c(a)},tabbable:function(a){var c=b.attr(a,"tabindex");return(isNaN(c)||c>=0)&&b(a).is(":focusable")}}),
b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=c.offsetHeight===100;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.extend(b.ui,{plugin:{add:function(a,c,f){var a=b.ui[a].prototype,g;for(g in f)a.plugins[g]=a.plugins[g]||[],a.plugins[g].push([c,f[g]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var g=0;g<b.length;g++)a.options[b[g][0]]&&
b[g][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,c){if(b(a).css("overflow")==="hidden")return!1;var f=c&&c==="left"?"scrollLeft":"scrollTop",g=!1;if(a[f]>0)return!0;a[f]=1;g=a[f]>0;a[f]=0;return g},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,c,f,g,j,k){return b.ui.isOverAxis(a,f,j)&&b.ui.isOverAxis(c,g,k)}}))})(jQuery);
(function(b,a){if(b.cleanData){var c=b.cleanData;b.cleanData=function(a){for(var d=0,g;(g=a[d])!=null;d++)b(g).triggerHandler("remove");c(a)}}else{var d=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){c||(!a||b.filter(a,[this]).length)&&b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return d.call(b(this),a,c)})}}b.widget=function(a,c,d){var j=a.split(".")[0],k,a=a.split(".")[1];k=j+"-"+a;if(!d)d=c,c=b.Widget;b.expr[":"][k]=function(c){return!!b.data(c,
a)};b[j]=b[j]||{};b[j][a]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=b.extend(!0,{},c.options);b[j][a].prototype=b.extend(!0,c,{namespace:j,widgetName:a,widgetEventPrefix:b[j][a].prototype.widgetEventPrefix||a,widgetBaseClass:k},d);b.widget.bridge(a,b[j][a])};b.widget.bridge=function(c,d){b.fn[c]=function(g){var j=typeof g==="string",k=Array.prototype.slice.call(arguments,1),l=this,g=!j&&k.length?b.extend.apply(null,[!0,g].concat(k)):g;if(j&&g.charAt(0)==="_")return l;
j?this.each(function(){var d=b.data(this,c),f=d&&b.isFunction(d[g])?d[g].apply(d,k):d;if(f!==d&&f!==a)return l=f,!1}):this.each(function(){var a=b.data(this,c);a?a.option(g||{})._init():b.data(this,c,new d(g,this))});return l}};b.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(!0,{},this.options,this._getCreateOptions(),
a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(c,d){var g=c;if(arguments.length===0)return b.extend({},this.options);if(typeof c==="string"){if(d===a)return this.options[c];g={};g[c]=d}this._setOptions(g);return this},_setOptions:function(a){var c=this;b.each(a,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var j=this.options[a],c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent)for(var a=b.event.props.length,k;a;)k=b.event.props[--a],c[k]=c.originalEvent[k];this.element.trigger(c,d);return!(b.isFunction(j)&&j.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);
(function(b){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(c){if(!0===b.data(c.target,a.widgetName+".preventClickEvent"))return b.removeData(c.target,a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=
a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,d=a.which==1,e=typeof this.options.cancel=="string"?b(a.target).parents().add(a.target).filter(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=
this._mouseStart(a)!==!1,!this._mouseStarted))return a.preventDefault(),!0;this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return a.originalEvent.mouseHandled=!0}},_mouseMove:function(a){if(b.browser.msie&&!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),
a.preventDefault();if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a);
return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.ui=b.ui||{};var a=/left|center|right/,c=/top|center|bottom/,d=b.fn.position,e=b.fn.offset;b.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);var e=b.extend({},e),g=b(e.of),j=g[0],k=(e.collision||"flip").split(" "),l=e.offset?e.offset.split(" "):[0,0],m,u,n;j.nodeType===9?(m=g.width(),u=g.height(),n={top:0,left:0}):j.setTimeout?(m=g.width(),u=g.height(),n={top:g.scrollTop(),left:g.scrollLeft()}):j.preventDefault?(e.at="left top",m=u=0,n={top:e.of.pageY,left:e.of.pageX}):
(m=g.outerWidth(),u=g.outerHeight(),n=g.offset());b.each(["my","at"],function(){var b=(e[this]||"").split(" ");b.length===1&&(b=a.test(b[0])?b.concat(["center"]):c.test(b[0])?["center"].concat(b):["center","center"]);b[0]=a.test(b[0])?b[0]:"center";b[1]=c.test(b[1])?b[1]:"center";e[this]=b});k.length===1&&(k[1]=k[0]);l[0]=parseInt(l[0],10)||0;l.length===1&&(l[1]=l[0]);l[1]=parseInt(l[1],10)||0;e.at[0]==="right"?n.left+=m:e.at[0]==="center"&&(n.left+=m/2);e.at[1]==="bottom"?n.top+=u:e.at[1]==="center"&&
(n.top+=u/2);n.left+=l[0];n.top+=l[1];return this.each(function(){var a=b(this),c=a.outerWidth(),d=a.outerHeight(),g=parseInt(b.curCSS(this,"marginLeft",!0))||0,j=parseInt(b.curCSS(this,"marginTop",!0))||0,y=c+g+(parseInt(b.curCSS(this,"marginRight",!0))||0),P=d+j+(parseInt(b.curCSS(this,"marginBottom",!0))||0),K=b.extend({},n),q;e.my[0]==="right"?K.left-=c:e.my[0]==="center"&&(K.left-=c/2);e.my[1]==="bottom"?K.top-=d:e.my[1]==="center"&&(K.top-=d/2);K.left=Math.round(K.left);K.top=Math.round(K.top);
q={left:K.left-g,top:K.top-j};b.each(["left","top"],function(a,g){if(b.ui.position[k[a]])b.ui.position[k[a]][g](K,{targetWidth:m,targetHeight:u,elemWidth:c,elemHeight:d,collisionPosition:q,collisionWidth:y,collisionHeight:P,offset:l,my:e.my,at:e.at})});b.fn.bgiframe&&a.bgiframe();a.offset(b.extend(K,{using:e.using}))})};b.ui.position={fit:{left:function(a,c){var d=b(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();a.left=d>0?a.left-d:Math.max(a.left-c.collisionPosition.left,
a.left)},top:function(a,c){var d=b(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();a.top=d>0?a.top-d:Math.max(a.top-c.collisionPosition.top,a.top)}},flip:{left:function(a,c){if(c.at[0]!=="center"){var d=b(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),e=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,l=c.at[0]==="left"?c.targetWidth:-c.targetWidth,m=-2*c.offset[0];a.left+=c.collisionPosition.left<0?e+l+m:d>0?e+l+m:0}},top:function(a,
c){if(c.at[1]!=="center"){var d=b(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),e=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,l=c.at[1]==="top"?c.targetHeight:-c.targetHeight,m=-2*c.offset[1];a.top+=c.collisionPosition.top<0?e+l+m:d>0?e+l+m:0}}}};if(!b.offset.setOffset)b.offset.setOffset=function(a,c){if(/static/.test(b.curCSS(a,"position")))a.style.position="relative";var d=b(a),e=d.offset(),l=parseInt(b.curCSS(a,"top",!0),10)||0,m=parseInt(b.curCSS(a,
"left",!0),10)||0,e={top:c.top-e.top+l,left:c.left-e.left+m};"using"in c?c.using.call(a,e):d.css(e)},b.fn.offset=function(a){var c=this[0];return!c||!c.ownerDocument?null:a?this.each(function(){b.offset.setOffset(this,a)}):e.call(this)}})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||b(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);return!this.handle?!1:!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(b.ui.ddmanager)b.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-
this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",a)===!1)return this._clear(),!1;this._cacheHelperProportions();b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");
this._mouseDrag(a,!0);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",a,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return!1},
_mouseStop:function(a){var c=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&(c=b.ui.ddmanager.drop(this,a));if(this.dropped)c=this.dropped,this.dropped=!1;if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,
10),function(){d._trigger("stop",a)!==!1&&d._clear()})}else this._trigger("stop",a)!==!1&&this._clear();return!1},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!b(this.options.handle,this.element).length?!0:!1;b(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=!0)});return c},_createHelper:function(a){var c=this.options,a=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],
[a])):c.helper=="clone"?this.element.clone():this.element;a.parents("body").length||a.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||0});if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-
a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),
10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=
[(a.containment=="document"?0:b(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(a.containment=="document"?0:b(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:b(window).scrollLeft())+b(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:b(window).scrollTop())+(b(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var c=b(a.containment)[0];if(c){var a=b(a.containment).offset(),d=b(c).css("overflow")!="hidden";this.containment=[a.left+(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(c.scrollWidth,
c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,c){if(!c)c=this.position;var d=
a=="absolute"?1:-1,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(b.browser.safari&&
b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(a){var c=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=a.pageX,g=a.pageY;this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+
this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid&&(g=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?
g:!(g-this.offset.click.top<this.containment[1])?g-c.grid[1]:g+c.grid[1]:g,f=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-c.grid[0]:f+c.grid[0]:f));return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition==
"fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,
c,d){d=d||this._uiHash();b.ui.plugin.call(this,a,[c,d]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return b.Widget.prototype._trigger.call(this,a,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.9"});b.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var d=b(this).data("draggable"),e=d.options,f=b.extend({},c,{item:d.element});
d.sortables=[];b(e.connectToSortable).each(function(){var c=b.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c._refreshItems(),c._trigger("activate",a,f))})},stop:function(a,c){var d=b(this).data("draggable"),e=b.extend({},c,{item:d.element});b.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=!0;this.instance.cancelHelperRemoval=!1;if(this.shouldRevert)this.instance.options.revert=!0;this.instance._mouseStop(a);
this.instance.options.helper=this.instance.options._helper;d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,e)})},drag:function(a,c){var d=b(this).data("draggable"),e=this;b.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver)this.instance.isOver=
1,this.instance.currentItem=b(e).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,
this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",a),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d;this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver)this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=
this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",a),d.dropped=!1})}});b.ui.plugin.add("draggable","cursor",{start:function(){var a=b("body"),c=b(this).data("draggable").options;if(a.css("cursor"))c._cursor=a.css("cursor");a.css("cursor",c.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","iframeFix",{start:function(){var a=
b(this).data("draggable").options;b(a.iframeFix===!0?"iframe":a.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")})},stop:function(){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});b.ui.plugin.add("draggable","opacity",{start:function(a,c){var d=b(c.helper),e=
b(this).data("draggable").options;if(d.css("opacity"))e._opacity=d.css("opacity");d.css("opacity",e.opacity)},stop:function(a,c){var d=b(this).data("draggable").options;d._opacity&&b(c.helper).css("opacity",d._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var a=b(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var c=b(this).data("draggable"),d=c.options,e=!1;if(c.scrollParent[0]!=
document&&c.scrollParent[0].tagName!="HTML"){if(!d.axis||d.axis!="x")if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity)c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed;else if(a.pageY-c.overflowOffset.top<d.scrollSensitivity)c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed;if(!d.axis||d.axis!="y")if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity)c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+
d.scrollSpeed;else if(a.pageX-c.overflowOffset.left<d.scrollSensitivity)c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed}else{if(!d.axis||d.axis!="x")a.pageY-b(document).scrollTop()<d.scrollSensitivity?e=b(document).scrollTop(b(document).scrollTop()-d.scrollSpeed):b(window).height()-(a.pageY-b(document).scrollTop())<d.scrollSensitivity&&(e=b(document).scrollTop(b(document).scrollTop()+d.scrollSpeed));if(!d.axis||d.axis!="y")a.pageX-b(document).scrollLeft()<d.scrollSensitivity?
e=b(document).scrollLeft(b(document).scrollLeft()-d.scrollSpeed):b(window).width()-(a.pageX-b(document).scrollLeft())<d.scrollSensitivity&&(e=b(document).scrollLeft(b(document).scrollLeft()+d.scrollSpeed))}e!==!1&&b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,a)}});b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),c=a.options;a.snapElements=[];b(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=b(this),
e=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:e.top,left:e.left})})},drag:function(a,c){for(var d=b(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,j=g+d.helperProportions.width,k=c.offset.top,l=k+d.helperProportions.height,m=d.snapElements.length-1;m>=0;m--){var u=d.snapElements[m].left,n=u+d.snapElements[m].width,F=d.snapElements[m].top,E=F+d.snapElements[m].height;if(u-f<g&&g<n+f&&F-f<k&&k<E+f||u-f<g&&g<n+f&&
F-f<l&&l<E+f||u-f<j&&j<n+f&&F-f<k&&k<E+f||u-f<j&&j<n+f&&F-f<l&&l<E+f){if(e.snapMode!="inner"){var aa=Math.abs(F-l)<=f,N=Math.abs(E-k)<=f,T=Math.abs(u-j)<=f,y=Math.abs(n-g)<=f;if(aa)c.position.top=d._convertPositionTo("relative",{top:F-d.helperProportions.height,left:0}).top-d.margins.top;if(N)c.position.top=d._convertPositionTo("relative",{top:E,left:0}).top-d.margins.top;if(T)c.position.left=d._convertPositionTo("relative",{top:0,left:u-d.helperProportions.width}).left-d.margins.left;if(y)c.position.left=
d._convertPositionTo("relative",{top:0,left:n}).left-d.margins.left}var P=aa||N||T||y;if(e.snapMode!="outer"){aa=Math.abs(F-k)<=f;N=Math.abs(E-l)<=f;T=Math.abs(u-g)<=f;y=Math.abs(n-j)<=f;if(aa)c.position.top=d._convertPositionTo("relative",{top:F,left:0}).top-d.margins.top;if(N)c.position.top=d._convertPositionTo("relative",{top:E-d.helperProportions.height,left:0}).top-d.margins.top;if(T)c.position.left=d._convertPositionTo("relative",{top:0,left:u}).left-d.margins.left;if(y)c.position.left=d._convertPositionTo("relative",
{top:0,left:n-d.helperProportions.width}).left-d.margins.left}!d.snapElements[m].snapping&&(aa||N||T||y||P)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[m].item}));d.snapElements[m].snapping=aa||N||T||y||P}else d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=
b(this).data("draggable").options,a=b.makeArray(b(a.stack)).sort(function(a,c){return(parseInt(b(a).css("zIndex"),10)||0)-(parseInt(b(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;b(a).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,c){var d=b(c.helper),e=b(this).data("draggable").options;if(d.css("zIndex"))e._zIndex=d.css("zIndex");d.css("zIndex",e.zIndex)},stop:function(a,c){var d=
b(this).data("draggable").options;d._zIndex&&b(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(b){b.widget("ui.sortable",b.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=
this.items.length?/left|right/.test(this.items[0].item.css("float")):!1;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,c){a==="disabled"?(this.options[a]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):b.Widget.prototype._setOption.apply(this,
arguments)},_mouseCapture:function(a,c){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(a);var d=null,e=this;b(a.target).parents().each(function(){if(b.data(this,"sortable-item")==e)return d=b(this),!1});b.data(a.target,"sortable-item")==e&&(d=b(a.target));if(!d)return!1;if(this.options.handle&&!c){var f=!1;b(this.options.handle,d).find("*").andSelf().each(function(){this==a.target&&(f=!0)});if(!f)return!1}this.currentItem=d;this._removeCurrentsFromItems();
return!0},_mouseStart:function(a,c,d){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");b.extend(this.offset,{click:{left:a.pageX-this.offset.left,
top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor){if(b("body").css("cursor"))this._storedCursor=
b("body").css("cursor");b("body").css("cursor",c.cursor)}if(c.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",c.opacity)}if(c.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",c.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();
if(!d)for(d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));if(b.ui.ddmanager)b.ui.ddmanager.current=this;b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var c=
this.options,d=!1;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-this.overflowOffset.top<c.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)this.scrollParent[0].scrollLeft=
d=this.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-this.overflowOffset.left<c.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed}else a.pageY-b(document).scrollTop()<c.scrollSensitivity?d=b(document).scrollTop(b(document).scrollTop()-c.scrollSpeed):b(window).height()-(a.pageY-b(document).scrollTop())<c.scrollSensitivity&&(d=b(document).scrollTop(b(document).scrollTop()+c.scrollSpeed)),a.pageX-b(document).scrollLeft()<c.scrollSensitivity?
d=b(document).scrollLeft(b(document).scrollLeft()-c.scrollSpeed):b(window).width()-(a.pageX-b(document).scrollLeft())<c.scrollSensitivity&&(d=b(document).scrollLeft(b(document).scrollLeft()+c.scrollSpeed));d!==!1&&b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=
this.position.top+"px";for(c=this.items.length-1;c>=0;c--){var d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d);if(f&&e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!b.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!b.ui.contains(this.element[0],e):1)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(d))this._rearrange(a,d);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);
b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,c){if(a){b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,a);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0;b(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+
(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(a)})}else this._clear(a,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--)if(this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over)this.containers[a]._trigger("out",
null,this._uiHash(this)),this.containers[a].containerCache.over=0}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var c=
this._getItemsAsjQuery(a&&a.connected),d=[],a=a||{};b(c).each(function(){var c=(b(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);c&&d.push((a.key||c[1]+"[]")+"="+(a.key&&a.expression?c[1]:c[2]))});!d.length&&a.key&&d.push(a.key+"=");return d.join("&")},toArray:function(a){var c=this._getItemsAsjQuery(a&&a.connected),d=[],a=a||{};c.each(function(){d.push(b(a.item||this).attr(a.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,
d=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,j=g+a.width,k=a.top,l=k+a.height,m=this.offset.click.top,u=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?e+m>k&&e+m<l&&b+u>g&&b+u<j:g<b+this.helperProportions.width/2&&d-this.helperProportions.width/2<j&&k<e+this.helperProportions.height/
2&&f-this.helperProportions.height/2<l},_intersectsWithPointer:function(a){var c=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),a=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),c=c&&a,a=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return!c?!1:this.floating?d&&d=="right"||a=="down"?2:1:a&&(a=="down"?2:1)},_intersectsWithSides:function(a){var c=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/
2,a.height),a=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:d&&(d=="down"&&c||d=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},
refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var c=[],d=[],e=this._connectWith();if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=b(e[a]),g=f.length-1;g>=0;g--){var j=b.data(f[g],"sortable");j&&j!=this&&!j.options.disabled&&d.push([b.isFunction(j.options.items)?j.options.items.call(j.element):b(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
j])}d.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=d.length-1;a>=0;a--)d[a][0].each(function(){c.push(this)});return b(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var d=0;d<a.length;d++)a[d]==this.items[b].item[0]&&this.items.splice(b,
1)},_refreshItems:function(a){this.items=[];this.containers=[this];var c=this.items,d=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):b(this.options.items,this.element),this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=b(e[f]),j=g.length-1;j>=0;j--){var k=b.data(g[j],"sortable");k&&k!=this&&!k.options.disabled&&(d.push([b.isFunction(k.options.items)?k.options.items.call(k.element[0],a,{item:this.currentItem}):b(k.options.items,
k.element),k]),this.containers.push(k))}for(f=d.length-1;f>=0;f--){a=d[f][1];e=d[f][0];j=0;for(g=e.length;j<g;j++)k=b(e[j]),k.data("sortable-item",a),c.push({item:k,instance:a,width:0,height:0,left:0,top:0})}},refreshPositions:function(a){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var c=this.items.length-1;c>=0;c--){var d=this.items[c],e=this.options.toleranceElement?b(this.options.toleranceElement,d.item):d.item;if(!a)d.width=e.outerWidth(),d.height=e.outerHeight();
e=e.offset();d.left=e.left;d.top=e.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)e=this.containers[c].element.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(a){var c=
a||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var a=b(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)a.style.visibility="hidden";return a},update:function(a,b){if(!e||d.forcePlaceholderSize)b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||
0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=b(d.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);d.placeholder.update(c,c.placeholder)},_contactContainers:function(a){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!b.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!c||
!b.ui.contains(this.containers[e].element[0],c.element[0]))c=this.containers[e],d=e}else if(this.containers[e].containerCache.over)this.containers[e]._trigger("out",a,this._uiHash(this)),this.containers[e].containerCache.over=0;if(c)if(this.containers.length===1)this.containers[d]._trigger("over",a,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var c=1E4,e=null,f=this.positionAbs[this.containers[d].floating?"left":"top"],g=this.items.length-
1;g>=0;g--)if(b.ui.contains(this.containers[d].element[0],this.items[g].item[0])){var j=this.items[g][this.containers[d].floating?"left":"top"];Math.abs(j-f)<c&&(c=Math.abs(j-f),e=this.items[g])}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[d],e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[d].element,!0),this._trigger("change",a,this._uiHash()),this.containers[d]._trigger("change",a,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,
this.placeholder),this.containers[d]._trigger("over",a,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(a){var c=this.options,a=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[a,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||b(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,
height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};(a[0].style.width==""||c.forceHelperSize)&&a.width(this.currentItem.width());(a[0].style.height==""||c.forceHelperSize)&&a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||0});if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in
a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=
this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),
left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;
if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var c=b(a.containment)[0],a=b(a.containment).offset(),
d=b(c).css("overflow")!="hidden";this.containment=[a.left+(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(c.scrollHeight,
c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,c){if(!c)c=this.position;var d=a=="absolute"?1:-1,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*
d-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(a){var c=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:
this.scrollParent,e=/(html|body)/i.test(d[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=a.pageX,g=a.pageY;this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>
this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid&&(g=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-c.grid[1]:g+c.grid[1]:g,f=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*
c.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-c.grid[0]:f+c.grid[0]:f));return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&
this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,d,e){d?d[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,c){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem[0].parentNode&&
this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||
this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!b.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)b.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[e])),d.push(function(a){return function(b){a._trigger("update",
b,this._uiHash(this))}}.call(this,this.containers[e])))}for(e=this.containers.length-1;e>=0;e--)if(c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over)d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0;this._storedCursor&&b("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",
this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}return!1}c||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(e=
0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){b.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(a){var c=a||this;return{helper:c.helper,placeholder:c.placeholder||b([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:a?a.element:null}}});b.extend(b.ui.sortable,{version:"1.8.9"})})(jQuery);
(function(b){b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,c=this.options;this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");c.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");
this.range=b([]);if(c.range){if(c.range===!0){this.range=b("<div></div>");if(!c.values)c.values=[this._valueMin(),this._valueMin()];if(c.values.length&&c.values.length!==2)c.values=[c.values[0],c.values[0]]}else this.range=b("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");(c.range==="min"||c.range==="max")&&this.range.addClass("ui-slider-range-"+c.range);this.range.addClass("ui-widget-header")}b(".ui-slider-handle",this.element).length===0&&b("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
if(c.values&&c.values.length)for(;b(".ui-slider-handle",this.element).length<c.values.length;)b("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){c.disabled||b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?
b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(a){b(this).data("index.ui-slider-handle",a)});this.handles.keydown(function(c){var e=!0,f=b(this).data("index.ui-slider-handle"),g,j,k;if(!a.options.disabled){switch(c.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(e=
!1,!a._keySliding&&(a._keySliding=!0,b(this).addClass("ui-state-active"),g=a._start(c,f),g===!1))return}k=a.options.step;g=a.options.values&&a.options.values.length?j=a.values(f):j=a.value();switch(c.keyCode){case b.ui.keyCode.HOME:j=a._valueMin();break;case b.ui.keyCode.END:j=a._valueMax();break;case b.ui.keyCode.PAGE_UP:j=a._trimAlignValue(g+(a._valueMax()-a._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:j=a._trimAlignValue(g-(a._valueMax()-a._valueMin())/5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(g===
a._valueMax())return;j=a._trimAlignValue(g+k);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(g===a._valueMin())return;j=a._trimAlignValue(g-k)}a._slide(c,f,j);return e}}).keyup(function(c){var e=b(this).data("index.ui-slider-handle");if(a._keySliding)a._keySliding=!1,a._stop(c,e),a._change(c,e),b(this).removeClass("ui-state-active")});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
this._mouseDestroy();return this},_mouseCapture:function(a){var c=this.options,d,e,f,g,j;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d=this._normValueFromMouse({x:a.pageX,y:a.pageY});e=this._valueMax()-this._valueMin()+1;g=this;this.handles.each(function(a){var c=Math.abs(d-g.values(a));e>c&&(e=c,f=b(this),j=a)});c.range===!0&&this.values(1)===c.min&&(j+=1,f=b(this.handles[j]));if(this._start(a,
j)===!1)return!1;this._mouseSliding=!0;g._handleIndex=j;f.addClass("ui-state-active").focus();c=f.offset();this._clickOffset=!b(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-c.left-f.width()/2,top:a.pageY-c.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,j,d);return this._animateOff=!0},_mouseStart:function(){return!0},
_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;this.orientation===
"horizontal"?(b=this.elementSize.width,a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;b>1&&(b=1);b<0&&(b=0);this.orientation==="vertical"&&(b=1-b);a=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+b*a)},_start:function(a,b){var d={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length)d.value=this.values(b),
d.values=this.values();return this._trigger("start",a,d)},_slide:function(a,b,d){var e;if(this.options.values&&this.options.values.length){e=this.values(b?0:1);if(this.options.values.length===2&&this.options.range===!0&&(b===0&&d>e||b===1&&d<e))d=e;d!==this.values(b)&&(e=this.values(),e[b]=d,a=this._trigger("slide",a,{handle:this.handles[b],value:d,values:e}),this.values(b?0:1),a!==!1&&this.values(b,d,!0))}else d!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:d}),a!==!1&&
this.value(d))},_stop:function(a,b){var d={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length)d.value=this.values(b),d.values=this.values();this._trigger("stop",a,d)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length)d.value=this.values(b),d.values=this.values();this._trigger("change",a,d)}},value:function(a){if(arguments.length)this.options.value=
this._trimAlignValue(a),this._refreshValue(),this._change(null,0);return this._value()},values:function(a,c){var d,e,f;arguments.length>1&&(this.options.values[a]=this._trimAlignValue(c),this._refreshValue(),this._change(null,a));if(arguments.length)if(b.isArray(arguments[0])){d=this.options.values;e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):this.value();
else return this._values()},_setOption:function(a,c){var d,e=0;if(b.isArray(this.options.values))e=this.options.values.length;b.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,d;if(arguments.length)b=this.options.values[a],
b=this._trimAlignValue(b);else{b=this.options.values.slice();for(d=0;d<b.length;d+=1)b[d]=this._trimAlignValue(b[d])}return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,d=(a-this._valueMin())%b;alignValue=a-d;Math.abs(d)*2>=b&&(alignValue+=d>0?b:-b);return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},
_refreshValue:function(){var a=this.options.range,c=this.options,d=this,e=!this._animateOff?c.animate:!1,f,g={},j,k,l,m;if(this.options.values&&this.options.values.length)this.handles.each(function(a){f=(d.values(a)-d._valueMin())/(d._valueMax()-d._valueMin())*100;g[d.orientation==="horizontal"?"left":"bottom"]=f+"%";b(this).stop(1,1)[e?"animate":"css"](g,c.animate);if(d.options.range===!0)if(d.orientation==="horizontal"){if(a===0)d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate);if(a===
1)d.range[e?"animate":"css"]({width:f-j+"%"},{queue:!1,duration:c.animate})}else{if(a===0)d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate);if(a===1)d.range[e?"animate":"css"]({height:f-j+"%"},{queue:!1,duration:c.animate})}j=f});else{k=this.value();l=this._valueMin();m=this._valueMax();f=m!==l?(k-l)/(m-l)*100:0;g[d.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[e?"animate":"css"](g,c.animate);if(a==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[e?
"animate":"css"]({width:f+"%"},c.animate);if(a==="max"&&this.orientation==="horizontal")this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate});if(a==="min"&&this.orientation==="vertical")this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate);if(a==="max"&&this.orientation==="vertical")this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate})}}});b.extend(b.ui.slider,{version:"1.8.9"})})(jQuery);
(function(b){b.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,c=this.element[0].ownerDocument,d;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!a.options.disabled&&!a.element.attr("readonly")){d=!1;var f=b.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:a._move("previousPage",
c);break;case f.PAGE_DOWN:a._move("nextPage",c);break;case f.UP:a._move("previous",c);c.preventDefault();break;case f.DOWN:a._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:a.menu.active&&(d=!0,c.preventDefault());case f.TAB:if(!a.menu.active)break;a.menu.select(c);break;case f.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){if(a.term!=a.element.val())a.selectedItem=null,a.search(null,c)},a.options.delay)}}}).bind("keypress.autocomplete",
function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(!a.options.disabled)a.selectedItem=null,a.previous=a.element.val()}).bind("blur.autocomplete",function(b){if(!a.options.disabled)clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b);a._change(b)},150)});this._initSource();this.response=function(){return a._response.apply(a,arguments)};this.menu=b("<ul></ul>").addClass("ui-autocomplete").appendTo(b(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=
a.menu.element[0];b(c.target).closest(".ui-menu-item").length||setTimeout(function(){b(document).one("mousedown",function(c){c.target!==a.element[0]&&c.target!==d&&!b.ui.contains(d,c.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,c){var d=c.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:d})&&/^key/.test(b.originalEvent.type)&&a.element.val(d.value)},selected:function(b,d){var g=d.item.data("item.autocomplete"),j=a.previous;if(a.element[0]!==
c.activeElement)a.element.focus(),a.previous=j,setTimeout(function(){a.previous=j;a.selectedItem=g},1);!1!==a._trigger("select",b,{item:g})&&a.element.val(g.value);a.term=a.element.val();a.close(b);a.selectedItem=g},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");b.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();a==="appendTo"&&this.menu.element.appendTo(b(c||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,c,d;b.isArray(this.options.source)?(c=this.options.source,this.source=function(a,d){d(b.ui.autocomplete.filter(c,a.term))}):typeof this.options.source==="string"?
(d=this.options.source,this.source=function(c,f){a.xhr&&a.xhr.abort();a.xhr=b.ajax({url:d,data:c,dataType:"json",success:function(b,c,d){d===a.xhr&&f(b);a.xhr=null},error:function(b){b===a.xhr&&f([]);a.xhr=null}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);return this._trigger("search",b)===!1?void 0:this._search(a)},_search:function(a){this.pending++;
this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&
this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:b.map(a,function(a){return typeof a==="string"?{label:a,value:a}:b.extend({label:a.label||a.value,value:a.value||a.label},a)})},_suggest:function(a){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,a);this.menu.deactivate();this.menu.refresh();c.show();this._resizeMenu();c.position(b.extend({of:this.element},this.options.position))},_resizeMenu:function(){var a=
this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,c){var d=this;b.each(c,function(b,c){d._renderItem(a,c)})},_renderItem:function(a,c){return b("<li></li>").data("item.autocomplete",c).append(b("<a></a>").text(c.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);
else this.search(null,b)},widget:function(){return this.menu.element}});b.extend(b.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,c){var d=RegExp(b.ui.autocomplete.escapeRegex(c),"i");return b.grep(a,function(a){return d.test(a.label||a.value||a)})}})})(jQuery);
(function(b){b.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){b(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),a.select(c))});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(c){a.activate(c,b(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var d=b.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),f=this.element.height();d<0?this.element.attr("scrollTop",e+d):d>=f&&this.element.attr("scrollTop",e+d-f+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){if(this.active)this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),
this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,d){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(d,a):this.activate(d,this.element.children(b))):this.activate(d,this.element.children(b))},
nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var a=b(this).offset().top-c-d+b(this).height();return a<10&&a>-10});e.length||(e=this.element.children(".ui-menu-item:last"));this.activate(a,e)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},
previousPage:function(a){if(this.hasScroll())if(!this.active||this.first())this.activate(a,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var a=b(this).offset().top-c+d-b(this).height();return a<10&&a>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(a,result)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);
(function(b,a){b.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();b.Widget.prototype.destroy.apply(this,arguments)},value:function(b){if(b===a)return this._value();this._setOption("value",b);return this},_setOption:function(a,d){if(a==="value")this.options.value=d,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete");b.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;typeof a!=="number"&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();if(this.oldValue!==a)this.oldValue=a,this._trigger("change");this.valueDiv.toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.8.9"})})(jQuery);
(function(b){var a=b.browser;b.layout={browser:{mozilla:!!a.mozilla,webkit:!!a.webkit||!!a.safari,msie:!!a.msie,isIE6:!!a.msie&&a.version==6,boxModel:!1},scrollbarWidth:function(){return window.scrollbarWidth||b.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||b.layout.getScrollbarSize("height")},getScrollbarSize:function(a){var d=b('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),
e={width:d.width()-d[0].clientWidth,height:d.height()-d[0].clientHeight};d.remove();window.scrollbarWidth=e.width;window.scrollbarHeight=e.height;return a.match(/^(width|height)$/i)?e[a]:e},showInvisibly:function(a,d){if(!a)return{};a.jquery||(a=b(a));var e={display:a.css("display"),visibility:a.css("visibility")};return d||e.display=="none"?(a.css({display:"block",visibility:"hidden"}),e):{}},getElemDims:function(a){var d={},e=d.css={},f={},g,j,k=a.offset();d.offsetLeft=k.left;d.offsetTop=k.top;
b.each("Left,Right,Top,Bottom".split(","),function(k,m){g=e["border"+m]=b.layout.borderWidth(a,m);j=e["padding"+m]=b.layout.cssNum(a,"padding"+m);f[m]=g+j;d["inset"+m]=j});d.offsetWidth=a.innerWidth();d.offsetHeight=a.innerHeight();d.outerWidth=a.outerWidth();d.outerHeight=a.outerHeight();d.innerWidth=d.outerWidth-f.Left-f.Right;d.innerHeight=d.outerHeight-f.Top-f.Bottom;e.width=a.width();e.height=a.height();return d},getElemCSS:function(a,b){var e={},f=a[0].style,g=b.split(","),j="Top,Bottom,Left,Right".split(","),
k="Color,Style,Width".split(","),l,m,u,n,F,E;for(n=0;n<g.length;n++)if(l=g[n],l.match(/(border|padding|margin)$/))for(F=0;F<4;F++)if(m=j[F],l=="border")for(E=0;E<3;E++)u=k[E],e[l+m+u]=f[l+m+u];else e[l+m]=f[l+m];else e[l]=f[l];return e},cssWidth:function(a,d){var e=b.layout.borderWidth,f=b.layout.cssNum;if(d<=0)return 0;if(!b.layout.browser.boxModel)return d;e=d-e(a,"Left")-e(a,"Right")-f(a,"paddingLeft")-f(a,"paddingRight");return Math.max(0,e)},cssHeight:function(a,d){var e=b.layout.borderWidth,
f=b.layout.cssNum;if(d<=0)return 0;if(!b.layout.browser.boxModel)return d;e=d-e(a,"Top")-e(a,"Bottom")-f(a,"paddingTop")-f(a,"paddingBottom");return Math.max(0,e)},cssNum:function(a,d){a.jquery||(a=b(a));var e=b.layout.showInvisibly(a),f=parseInt(b.curCSS(a[0],d,!0),10)||0;a.css(e);return f},borderWidth:function(a,d){a.jquery&&(a=a[0]);var e="border"+d.substr(0,1).toUpperCase()+d.substr(1);return b.curCSS(a,e+"Style",!0)=="none"?0:parseInt(b.curCSS(a,e+"Width",!0),10)||0},isMouseOverElem:function(a,
d){var e=b(d||this),f=e.offset(),g=f.top,f=f.left,j=f+e.outerWidth(),e=g+e.outerHeight(),k=a.pageX,l=a.pageY;return b.layout.browser.msie&&k<0&&l<0||k>=f&&k<=j&&l>=g&&l<=e}};b.fn.layout=function(a){var d,e,f,g,j,k,l;function m(a){if(!a)return!0;var c=a.keyCode;if(c<33)return!0;var d={38:"north",40:"south",37:"west",39:"east"},e=a.shiftKey,f=a.ctrlKey,g,j,k,l;f&&c>=37&&c<=40&&x[d[c]].enableCursorHotkey?l=d[c]:(f||e)&&b.each(r.borderPanes.split(","),function(a,b){g=x[b];j=g.customHotkey;k=g.customHotkeyModifier;
if(e&&k=="SHIFT"||f&&k=="CTRL"||f&&e)if(j&&c==(isNaN(j)||j<=9?j.toUpperCase().charCodeAt(0):j))return l=b,!1});if(!l||!H[l]||!x[l].closable||h[l].isHidden)return!0;Na(l);a.stopPropagation();return a.returnValue=!1}function u(a){this&&this.tagName&&(a=this);var c;ka(a)?c=H[a]:b(a).data("layoutRole")?c=b(a):b(a).parents().each(function(){if(b(this).data("layoutRole"))return c=b(this),!1});if(c&&c.length){var d=c.data("layoutEdge"),a=h[d];a.cssSaved&&n(d);if(a.isSliding||a.isResizing||a.isClosed)a.cssSaved=
!1;else{var e={zIndex:r.zIndex.pane_normal+2},f={},g=c.css("overflow"),j=c.css("overflowX"),k=c.css("overflowY");if(g!="visible")f.overflow=g,e.overflow="visible";if(j&&!j.match(/visible|auto/))f.overflowX=j,e.overflowX="visible";if(k&&!k.match(/visible|auto/))f.overflowY=j,e.overflowY="visible";a.cssSaved=f;c.css(e);b.each(r.allPanes.split(","),function(a,b){b!=d&&n(b)})}}}function n(a){this&&this.tagName&&(a=this);var c;ka(a)?c=H[a]:b(a).data("layoutRole")?c=b(a):b(a).parents().each(function(){if(b(this).data("layoutRole"))return c=
b(this),!1});if(c&&c.length){var a=c.data("layoutEdge"),a=h[a],d=a.cssSaved||{};!a.isSliding&&!a.isResizing&&c.css("zIndex",r.zIndex.pane_normal);c.css(d);a.cssSaved=!1}}function F(a,c,g){var h=b(a);if(h.length)if(r.borderPanes.indexOf(c)==-1)alert(d+f.toLowerCase()+": "+c);else return a=x[c].buttonClass+"-"+g,h.addClass(a+" "+a+"-"+c).data("layoutName",x.name),h;else alert(d+e+": "+a);return null}function E(a,b,c){switch(b.toLowerCase()){case "toggle":aa(a,c);break;case "open":N(a,c);break;case "close":T(a,
c);break;case "pin":y(a,c);break;case "toggle-slide":aa(a,c,!0);break;case "open-slide":N(a,c,!0)}}function aa(a,b,c){(a=F(a,b,"toggle"))&&a.click(function(a){Na(b,!!c);a.stopPropagation()})}function N(a,b,c){(a=F(a,b,"open"))&&a.attr("title",g).click(function(a){va(b,!!c);a.stopPropagation()})}function T(a,b){var c=F(a,b,"close");c&&c.attr("title",j).click(function(a){ha(b);a.stopPropagation()})}function y(a,c){var d=F(a,c,"pin");if(d){var e=h[c];d.click(function(a){K(b(this),c,e.isSliding||e.isClosed);
e.isSliding||e.isClosed?va(c):ha(c);a.stopPropagation()});K(d,c,!e.isClosed&&!e.isSliding);r[c].pins.push(a)}}function P(a,c){b.each(r[a].pins,function(d,e){K(b(e),a,c)})}function K(a,b,c){var d=a.attr("pin");if(!(d&&c==(d=="down"))){var d=x[b].buttonClass+"-pin",e=d+"-"+b,b=d+"-up "+e+"-up",d=d+"-down "+e+"-down";a.attr("pin",c?"down":"up").attr("title",c?k:l).removeClass(c?b:d).addClass(c?d:b)}}function q(a){for(var a=b.extend({},x.cookie,a||{}).name||x.name||"Layout",c=document.cookie,c=c?c.split(";"):
[],d,e=0,f=c.length;e<f;e++)if(d=b.trim(c[e]).split("="),d[0]==a)return v(decodeURIComponent(d[1]));return""}function V(a,c){var d=b.extend({},x.cookie,c||{}),e=d.name||x.name||"Layout",f="",g="",j=!1;d.expires.toUTCString?g=d.expires:typeof d.expires=="number"&&(g=new Date,d.expires>0?g.setDate(g.getDate()+d.expires):(g.setYear(1970),j=!0));g&&(f+=";expires="+g.toUTCString());d.path&&(f+=";path="+d.path);d.domain&&(f+=";domain="+d.domain);d.secure&&(f+=";secure");j?(h.cookie={},document.cookie=e+
"="+f):(h.cookie=na(a||d.keys),document.cookie=e+"="+encodeURIComponent(Z(h.cookie))+f);return b.extend({},h.cookie)}function I(a){if(a=q(a))h.cookie=b.extend({},a),ea(a);return a}function ea(a,c){b.extend(!0,x,a);if(h.initialized){var d,e,f=!c;b.each(r.allPanes.split(","),function(b,c){d=a[c];if(typeof d=="object")e=d.initHidden,e===!0&&Ua(c,f),e===!1&&Ma(c,!1,f),e=d.size,e>0&&ua(c,e),e=d.initClosed,e===!0&&ha(c,!1,f),e===!1&&va(c,!1,f)})}}function na(a){var c={},d={isClosed:"initClosed",isHidden:"initHidden"},
e,f,g;if(!a)a=x.cookie.keys;b.isArray(a)&&(a=a.join(","));for(var a=a.replace(/__/g,".").split(","),j=0,k=a.length;j<k;j++)e=a[j].split("."),f=e[0],e=e[1],r.allPanes.indexOf(f)<0||(g=h[f][e],g!=void 0&&(e=="isClosed"&&h[f].isSliding&&(g=!0),(c[f]||(c[f]={}))[d[e]?d[e]:e]=g));return c}function Z(a){function b(a){var c=[],d=0,e,f,g;for(e in a)f=a[e],g=typeof f,g=="string"?f='"'+f+'"':g=="object"&&(f=b(f)),c[d++]='"'+e+'":'+f;return"{"+c.join(",")+"}"}return b(a)}function v(a){try{return window.eval("("+
a+")")||{}}catch(b){return{}}}f="Pane";g="Open";j="Close";l="Pin";k="Un-Pin";e="selector";d="Error Adding Button \n\nInvalid ";var x={name:"",containerClass:"ui-layout-container",scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,autoBindCustomButtons:!1,zIndex:null,defaults:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,
initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:j,togglerTip_closed:g,togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,
autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskIframesOnResize:!0,resizeNestedLayout:!0,resizeWhileDragging:!1,resizeContentWhileDragging:!1,noRoomToOpenTip:"Not enough room to show this pane.",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:!(!b.browser.webkit&&!b.browser.safari),preventPrematureSlideClose:!1,showOverflowOnHover:!1,
enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,triggerEventsOnLoad:!1,triggerEventsWhileDragging:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",
resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0},useStateCookie:!1,cookie:{name:"",autoSave:!0,autoLoad:!0,domain:"",path:"",expires:"",secure:!1,keys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden"}},
p={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}},h={id:"layout"+(new Date).getTime(),initialized:!1,container:{},north:{},south:{},east:{},west:{},center:{},cookie:{}},r={allPanes:"north,south,west,east,center",borderPanes:"north,south,west,east",altSide:{north:"south",
south:"north",east:"west",west:"east"},hidden:{visibility:"hidden"},visible:{visibility:"visible"},zIndex:{pane_normal:1,resizer_normal:2,iframe_mask:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},
cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"Top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"},pins:[]},south:{side:"Bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"},pins:[]},
east:{side:"Right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"},pins:[]},west:{side:"Left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"},pins:[]},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},Q={data:{},set:function(a,b,c){Q.clear(a);Q.data[a]=setTimeout(b,c)},clear:function(a){var b=Q.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},ka=function(a){try{return typeof a==
"string"||typeof a=="object"&&a.constructor.toString().match(/string/i)!==null}catch(b){return!1}},X=function(a,b){return Math.max(a,b)},S=function(a){var c,d={cookie:{},defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}},a=a||{};a.effects||a.cookie||a.defaults||a.north||a.south||a.west||a.east||a.center?d=b.extend(!0,d,a):b.each(a,function(a,b){c=a.split("__");if(!c[1]||d[c[0]])d[c[1]?c[0]:"defaults"][c[1]?c[1]:c[0]]=
b});return d},A=function(a,c,d){function e(g){var h=r[g];h.doCallback?(f.push(g),g=h.callback.split(",")[1],g!=c&&!b.inArray(g,f)>=0&&e(g)):(h.doCallback=!0,h.callback=a+","+c+","+(d?1:0))}var f=[];b.each(r.borderPanes.split(","),function(a,b){if(r[b].isMoving)return e(b),!1})},wa=function(a){a=r[a];r.isLayoutBusy=!1;delete a.isMoving;if(a.doCallback&&a.callback){a.doCallback=!1;var b=a.callback.split(","),c=b[2]>0?!0:!1;b[0]=="open"?va(b[1],c):b[0]=="close"&&ha(b[1],c);if(!a.doCallback)a.callback=
null}},U=function(a,c){if(c){var d;try{if(typeof c=="function")d=c;else if(ka(c))if(c.match(/,/)){var e=c.split(",");d=eval(e[0]);if(typeof d=="function"&&e.length>1)return d(e[1])}else d=eval(c);else return;if(typeof d=="function")return a&&H[a]?d(a,H[a],b.extend({},h[a]),x[a],x.name):d(Fa,b.extend({},h),x,x.name)}catch(f){}}},G=function(a,c){if(!a)return{};a.jquery||(a=b(a));var d={display:a.css("display"),visibility:a.css("visibility")};return c||d.display=="none"?(a.css({display:"block",visibility:"hidden"}),
d):{}},w=function(a){if(!h.browser.mozilla){var b=H[a];h[a].tagName=="IFRAME"?b.css(r.hidden).css(r.visible):b.find("IFRAME").css(r.hidden).css(r.visible)}},W=function(a,c){a.jquery||(a=b(a));var d=G(a),e=parseInt(b.curCSS(a[0],c,!0),10)||0;a.css(d);return e},C=function(a,c){a.jquery&&(a=a[0]);var d="border"+c.substr(0,1).toUpperCase()+c.substr(1);return b.curCSS(a,d+"Style",!0)=="none"?0:parseInt(b.curCSS(a,d+"Width",!0),10)||0},D=function(a,c){var d=ka(a),e=d?H[a]:b(a);isNaN(c)&&(c=d?la(a):e.outerWidth());
if(c<=0)return 0;if(!h.browser.boxModel)return c;d=c-C(e,"Left")-C(e,"Right")-W(e,"paddingLeft")-W(e,"paddingRight");return X(0,d)},fa=function(a,c){var d=ka(a),e=d?H[a]:b(a);isNaN(c)&&(c=d?la(a):e.outerHeight());if(c<=0)return 0;if(!h.browser.boxModel)return c;d=c-C(e,"Top")-C(e,"Bottom")-W(e,"paddingTop")-W(e,"paddingBottom");return X(0,d)},qa=function(a){var b=r[a].dir,a={minWidth:1001-D(a,1E3),minHeight:1001-fa(a,1E3)};if(b=="horz")a.minSize=a.minHeight;if(b=="vert")a.minSize=a.minWidth;return a},
ra=function(a,c,d){var e=a;ka(a)?e=H[a]:a.jquery||(e=b(a));a=fa(e,c);e.css({height:a,visibility:"visible"});a>0&&e.innerWidth()>0?d&&e.data("autoHidden")&&(e.show().data("autoHidden",!1),h.browser.mozilla||e.css(r.hidden).css(r.visible)):d&&!e.data("autoHidden")&&e.hide().data("autoHidden",!0)},ja=function(a,b,c){if(!c)c=r[a].dir;ka(b)&&b.match(/%/)&&(b=parseInt(b,10)/100);if(b===0)return 0;else if(b>=1)return parseInt(b,10);else if(b>0){var a=x,d;c=="horz"?d=O.innerHeight-(H.north?a.north.spacing_open:
0)-(H.south?a.south.spacing_open:0):c=="vert"&&(d=O.innerWidth-(H.west?a.west.spacing_open:0)-(H.east?a.east.spacing_open:0));return Math.floor(d*b)}else if(a=="center")return 0;else{d=H[a];var c=c=="horz"?"height":"width",a=G(d),e=d.css(c);d.css(c,"auto");b=c=="height"?d.outerHeight():d.outerWidth();d.css(c,e).css(a);return b}},la=function(a,b){var c=H[a],d=x[a],e=h[a],f=b?d.spacing_open:0,d=b?d.spacing_closed:0;return!c||e.isHidden?0:e.isClosed||e.isSliding&&b?d:r[a].dir=="horz"?c.outerHeight()+
f:c.outerWidth()+f},Y=function(a,b){var c=x[a],d=h[a],e=r[a],f=e.dir;e.side.toLowerCase();e.sizeType.toLowerCase();var e=b!=void 0?b:d.isSliding,g=c.spacing_open,j=r.altSide[a],k=h[j],l=H[j],p=!l||k.isVisible===!1||k.isSliding?0:f=="horz"?l.outerHeight():l.outerWidth(),j=(!l||k.isHidden?0:x[j][k.isClosed!==!1?"spacing_closed":"spacing_open"])||0,k=f=="horz"?O.innerHeight:O.innerWidth,l=qa("center"),l=f=="horz"?X(x.center.minHeight,l.minHeight):X(x.center.minWidth,l.minWidth),e=k-g-(e?0:ja("center",
l,f)+p+j),f=d.minSize=X(ja(a,c.minSize),qa(a).minSize),g=c.maxSize?ja(a,c.maxSize):1E5,e=Math.min(g,e),e=d.maxSize=e,d=d.resizerPosition={},g=O.insetTop,p=O.insetLeft,j=O.innerWidth,k=O.innerHeight,c=c.spacing_open;switch(a){case "north":d.min=g+f;d.max=g+e;break;case "west":d.min=p+f;d.max=p+e;break;case "south":d.min=g+k-e-c;d.max=g+k-f-c;break;case "east":d.min=p+j-e-c,d.max=p+j-f-c}},oa=function(a){var c={},d=c.css={},e={},f,g,h=a.offset();c.offsetLeft=h.left;c.offsetTop=h.top;b.each("Left,Right,Top,Bottom".split(","),
function(b,h){f=d["border"+h]=C(a,h);g=d["padding"+h]=W(a,"padding"+h);e[h]=f+g;c["inset"+h]=g});c.offsetWidth=a.innerWidth();c.offsetHeight=a.innerHeight();c.outerWidth=a.outerWidth();c.outerHeight=a.outerHeight();c.innerWidth=c.outerWidth-e.Left-e.Right;c.innerHeight=c.outerHeight-e.Top-e.Bottom;d.width=a.width();d.height=a.height();return c},Ea=function(a,b){var c={},d=a[0].style,e=b.split(","),f="Top,Bottom,Left,Right".split(","),g="Color,Style,Width".split(","),h,j,k,l,p,m;for(l=0;l<e.length;l++)if(h=
e[l],h.match(/(border|padding|margin)$/))for(p=0;p<4;p++)if(j=f[p],h=="border")for(m=0;m<3;m++)k=g[m],c[h+j+k]=d[h+j+k];else c[h+j]=d[h+j];else c[h]=d[h];return c},M=function(a,c){var d=b(a),e=d.data("layoutRole"),f=d.data("layoutEdge"),g=x[f][e+"Class"],f="-"+f,h=d.hasClass(g+"-closed")?"-closed":"-open",j=h=="-closed"?"-open":"-closed",h=g+"-hover "+(g+f+"-hover ")+(g+h+"-hover ")+(g+f+h+"-hover ");c&&(h+=g+j+"-hover "+(g+f+j+"-hover "));e=="resizer"&&d.hasClass(g+"-sliding")&&(h+=g+"-sliding-hover "+
(g+f+"-sliding-hover "));return b.trim(h)},J=function(a,c){var d=b(c||this);a&&d.data("layoutRole")=="toggler"&&a.stopPropagation();d.addClass(M(d))},ga=function(a,c){var d=b(c||this);d.removeClass(M(d,!0))},ya=function(a){b("body").disableSelection();J(a,this)},ba=function(a,c){var d=c||this,e=b(d).data("layoutEdge"),f=e+"ResizerLeave";Q.clear(e+"_openSlider");Q.clear(f);c?h[e].isResizing||b("body").enableSelection():(ga(a,this),Q.set(f,function(){ba(a,d)},200))},Aa=function(){var a=Number(x.resizeWithWindowDelay)||
100;a>0&&(Q.clear("winResize"),Q.set("winResize",function(){Q.clear("winResize");Q.clear("winResizeRepeater");Ha()},a),Q.data.winResizeRepeater||hb())},hb=function(){var a=Number(x.resizeWithWindowMaxDelay);a>0&&Q.set("winResizeRepeater",function(){hb();Ha()},a)},Pa=function(){var a=x;h.cookie=na();U(null,a.onunload_start);a.useStateCookie&&a.cookie.autoSave&&V();U(null,a.onunload_end||a.onunload)},ib=function(a){if(!a||a=="all")a=r.borderPanes;b.each(a.split(","),function(a,c){var d=x[c];if(d.enableCursorHotkey||
d.customHotkey)return b(document).bind("keydown."+ia,m),!1})},eb=function(){function d(a){for(var b in e)a[b]!=void 0&&(a[e[b]]=a[b],delete a[b])}a=S(a);var e={applyDefaultStyles:"applyDemoStyles"};d(a.defaults);b.each(r.allPanes.split(","),function(b,e){d(a[e])});a.effects&&(b.extend(p,a.effects),delete a.effects);b.extend(x.cookie,a.cookie);b.each("name,containerClass,zIndex,scrollToBookmarkOnLoad,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end,autoBindCustomButtons,useStateCookie".split(","),
function(b,d){a[d]!==void 0?x[d]=a[d]:a.defaults[d]!==void 0&&(x[d]=a.defaults[d],delete a.defaults[d])});b.each("paneSelector,resizerCursor,customHotkey".split(","),function(b,d){delete a.defaults[d]});b.extend(!0,x.defaults,a.defaults);r.center=b.extend(!0,{},r.panes,r.center);var f=x.zIndex;if(f===0||f>0)r.zIndex.pane_normal=f,r.zIndex.resizer_normal=f+1,r.zIndex.iframe_mask=f+1;b.extend(x.center,a.center);var g=b.extend(!0,{},x.defaults,a.defaults,x.center),f="paneClass,contentSelector,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,onresize,onresize_start,onresize_end,resizeNestedLayout,resizeContentWhileDragging,onsizecontent,onsizecontent_start,onsizecontent_end".split(",");
b.each(f,function(a,b){x.center[b]=g[b]});var h,j=x.defaults;b.each(r.borderPanes.split(","),function(d,e){r[e]=b.extend(!0,{},r.panes,r[e]);h=x[e]=b.extend(!0,{},x.defaults,x[e],a.defaults,a[e]);if(!h.paneClass)h.paneClass="ui-layout-pane";if(!h.resizerClass)h.resizerClass="ui-layout-resizer";if(!h.togglerClass)h.togglerClass="ui-layout-toggler";b.each(["_open","_close",""],function(d,f){var g="fxName"+f,k="fxSpeed"+f,t="fxSettings"+f;h[g]=a[e][g]||a[e].fxName||a.defaults[g]||a.defaults.fxName||
h[g]||h.fxName||j[g]||j.fxName||"none";var l=h[g];if(l=="none"||!b.effects||!b.effects[l]||!p[l]&&!h[t]&&!h.fxSettings)l=h[g]="none";l=p[l]||{};g=l.all||{};l=l[e]||{};h[t]=b.extend({},g,l,j.fxSettings||{},j[t]||{},h.fxSettings,h[t],a.defaults.fxSettings,a.defaults[t]||{},a[e].fxSettings,a[e][t]||{});h[k]=a[e][k]||a[e].fxSpeed||a.defaults[k]||a.defaults.fxSpeed||h[k]||h[t].duration||h.fxSpeed||h.fxSettings.duration||j.fxSpeed||j.fxSettings.duration||l.duration||g.duration||"normal"})})},jb=function(a){a=
x[a].paneSelector;if(a.substr(0,1)==="#")return sa.find(a).eq(0);else{var b=sa.children(a).eq(0);return b.length?b:sa.children("form:first").children(a).eq(0)}},$a=function(){b.each(r.allPanes.split(","),function(a,b){ab(b)});Ta();b.each(r.borderPanes.split(","),function(a,b){H[b]&&h[b].isVisible&&(Y(b),Ca(b))});Ba("center");b.each(r.allPanes.split(","),function(a,b){var c=x[b];H[b]&&h[b].isVisible&&(c.triggerEventsOnLoad&&U(b,c.onresize_end||c.onresize),Ia(b))});sa.innerHeight()<2&&alert("UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!".replace(/CONTAINER/,
O.ref))},ab=function(a){var c=x[a],d=h[a],e=r[a],f=e.dir,g=a=="center",j={},k=H[a],l;k?bb(a):za[a]=!1;k=H[a]=jb(a);if(k.length){k.data("layoutCSS")||k.data("layoutCSS",Ea(k,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));k.data("parentLayout",Fa).data("layoutRole","pane").data("layoutEdge",a).css(e.cssReq).css("zIndex",r.zIndex.pane_normal).css(c.applyDemoStyles?e.cssDemo:{}).addClass(c.paneClass+" "+c.paneClass+"-"+a).bind("mouseenter."+
ia,J).bind("mouseleave."+ia,ga);kb(a,!1);if(!g)l=d.size=ja(a,c.size),e=ja(a,c.minSize)||1,g=ja(a,c.maxSize)||1E5,l>0&&(l=X(Math.min(l,g),e)),d.isClosed=!1,d.isSliding=!1,d.isResizing=!1,d.isHidden=!1;d.tagName=b.prop?k.prop("tagName"):k.attr("tagName");d.edge=a;d.noRoom=!1;d.isVisible=!0;switch(a){case "north":j.top=O.insetTop;j.left=O.insetLeft;j.right=O.insetRight;break;case "south":j.bottom=O.insetBottom;j.left=O.insetLeft;j.right=O.insetRight;break;case "west":j.left=O.insetLeft;break;case "east":j.right=
O.insetRight}if(f=="horz")j.height=X(1,fa(a,l));else if(f=="vert")j.width=X(1,D(a,l));k.css(j);f!="horz"&&Ba(a,!0);d.noRoom||k.css({visibility:"visible",display:"block"});c.initClosed&&c.closable?ha(a,!0,!0):(c.initHidden||c.initClosed)&&Ua(a);c.showOverflowOnHover&&k.hover(u,n);h.initialized&&(Ta(a),ib(a),Ha(),d.isVisible&&(c.triggerEventsOnLoad&&U(a,c.onresize_end||c.onresize),Ia(a)))}else H[a]=!1},Ta=function(a){if(!a||a=="all")a=r.borderPanes;b.each(a.split(","),function(a,c){var d=H[c];ca[c]=
!1;pa[c]=!1;if(d){var d=x[c],e=h[c],f=d.resizerClass,g=d.togglerClass;r[c].side.toLowerCase();var j="-"+c,k=ca[c]=b("<div></div>"),l=d.closable?pa[c]=b("<div></div>"):!1;!e.isVisible&&d.slidable&&k.attr("title",d.sliderTip).css("cursor",d.sliderCursor);k.attr("id",d.paneSelector.substr(0,1)=="#"?d.paneSelector.substr(1)+"-resizer":"").data("parentLayout",Fa).data("layoutRole","resizer").data("layoutEdge",c).css(r.resizers.cssReq).css("zIndex",r.zIndex.resizer_normal).css(d.applyDemoStyles?r.resizers.cssDemo:
{}).addClass(f+" "+f+j).appendTo(sa);l&&(l.attr("id",d.paneSelector.substr(0,1)=="#"?d.paneSelector.substr(1)+"-toggler":"").data("parentLayout",Fa).data("layoutRole","toggler").data("layoutEdge",c).css(r.togglers.cssReq).css(d.applyDemoStyles?r.togglers.cssDemo:{}).addClass(g+" "+g+j).appendTo(k),d.togglerContent_open&&b("<span>"+d.togglerContent_open+"</span>").data("layoutRole","togglerContent").data("layoutEdge",c).addClass("content content-open").css("display","none").appendTo(l),d.togglerContent_closed&&
b("<span>"+d.togglerContent_closed+"</span>").data("layoutRole","togglerContent").data("layoutEdge",c).addClass("content content-closed").css("display","none").appendTo(l),mb(c));sb(c);e.isVisible?db(c):(cb(c),Ga(c,!0))}});Oa("all")},kb=function(a,b){var c=x[a],d=c.contentSelector,e=H[a],f;d&&(f=za[a]=c.findNestedContent?e.find(d).eq(0):e.children(d).eq(0));f&&f.length?(f.data("layoutCSS")||f.data("layoutCSS",Ea(f,"height")),f.css(r.content.cssReq),c.applyDemoStyles&&(f.css(r.content.cssDemo),e.css(r.content.cssDemoPane)),
h[a].content={},b!==!1&&La(a)):za[a]=!1},rb=function(){var a;b.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(c,d){b.each(r.borderPanes.split(","),function(c,e){b(".ui-layout-button-"+d+"-"+e).each(function(){a=b(this).data("layoutName")||b(this).attr("layoutName");(a==void 0||a==x.name)&&E(this,d,e)})})})},sb=function(a){var c=typeof b.fn.draggable=="function",d;if(!a||a=="all")a=r.borderPanes;b.each(a.split(","),function(a,e){var f=x[e],g=h[e],j=r[e],k=j.dir=="horz"?"top":
"left",l,t;if(!c||!H[e]||!f.resizable)return f.resizable=!1,!0;var p=ca[e],m=f.resizerClass,M=m+"-drag",n=m+"-"+e+"-drag",J=m+"-dragging",ga=m+"-"+e+"-dragging",w=m+"-dragging-limit",q=m+"-"+e+"-dragging-limit",u=!1;g.isClosed||p.attr("title",f.resizerTip).css("cursor",f.resizerCursor);p.bind("mouseenter."+ia,ya).bind("mouseleave."+ia,ba);p.draggable({containment:sa[0],axis:j.dir=="horz"?"y":"x",delay:0,distance:1,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:r.zIndex.resizer_drag,
start:function(){f=x[e];g=h[e];t=f.resizeWhileDragging;if(!1===U(e,f.ondrag_start))return!1;r.isLayoutBusy=!0;g.isResizing=!0;Q.clear(e+"_closeSlider");Y(e);l=g.resizerPosition;p.addClass(M+" "+n);u=!1;d=b(f.maskIframesOnResize===!0?"iframe":f.maskIframesOnResize).filter(":visible");var a,c=0;d.each(function(){a="ui-layout-mask-"+ ++c;b(this).data("layoutMaskID",a);b('<div id="'+a+'" class="ui-layout-mask ui-layout-mask-'+e+'"/>').css({background:"#fff",opacity:"0.001",zIndex:r.zIndex.iframe_mask,
position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css(b(this).position()).appendTo(this.parentNode)});b("body").disableSelection()},drag:function(a,b){u||(b.helper.addClass(J+" "+ga).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),u=!0,g.isSliding&&H[e].css("zIndex",r.zIndex.pane_sliding));var c=0;if(b.position[k]<l.min)b.position[k]=l.min,c=-1;else if(b.position[k]>l.max)b.position[k]=l.max,c=1;c?(b.helper.addClass(w+" "+q),window.defaultStatus=
"Panel has reached its "+(c>0&&e.match(/north|west/)||c<0&&e.match(/south|east/)?"maximum":"minimum")+" size"):(b.helper.removeClass(w+" "+q),window.defaultStatus="");t&&C(a,b,e)},stop:function(a,c){b("body").enableSelection();window.defaultStatus="";p.removeClass(M+" "+n);g.isResizing=!1;r.isLayoutBusy=!1;C(a,c,e,!0)}});var C=function(a,c,e,g){var a=c.position,c=r[e],h;switch(e){case "north":h=a.top;break;case "west":h=a.left;break;case "south":h=O.offsetHeight-a.top-f.spacing_open;break;case "east":h=
O.offsetWidth-a.left-f.spacing_open}if(g){if(b("div.ui-layout-mask").each(function(){this.parentNode.removeChild(this)}),!1===U(e,f.ondrag_end||f.ondrag))return!1}else d.each(function(){b("#"+b(this).data("layoutMaskID")).css(b(this).position()).css({width:this.offsetWidth+"px",height:this.offsetHeight+"px"})});Ya(e,h-O["inset"+c.side])}})},bb=function(a,c,d){if(H[a]){var e=H[a],f=za[a],g=ca[a],j=pa[a],k=x[a].paneClass,l=k+"-"+a,k=[k,k+"-open",k+"-closed",k+"-sliding",l,l+"-open",l+"-closed",l+"-sliding"];
b.merge(k,M(e,!0));e&&e.length&&(c&&!e.data("layoutContainer")&&(!f||!f.length||!f.data("layoutContainer"))?e.remove():(e.removeClass(k.join(" ")).removeData("layoutParent").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+ia),e.data("layoutContainer")||e.css(e.data("layoutCSS")).removeData("layoutCSS"),f&&f.length&&!f.data("layoutContainer")&&f.css(f.data("layoutCSS")).removeData("layoutCSS")));j&&j.length&&j.remove();g&&g.length&&g.remove();H[a]=za[a]=ca[a]=
pa[a]=!1;d||(Ha(),h[a]={})}},Ua=function(a,b){var c=x[a],d=h[a],e=H[a],f=ca[a];if(e&&!d.isHidden&&!(h.initialized&&!1===U(a,c.onhide_start)))if(d.isSliding=!1,f&&f.hide(),!h.initialized||d.isClosed){if(d.isClosed=!0,d.isHidden=!0,d.isVisible=!1,e.hide(),Ba(r[a].dir=="horz"?"all":"center"),h.initialized||c.triggerEventsOnLoad)U(a,c.onhide_end||c.onhide)}else d.isHiding=!0,ha(a,!1,b)},Ma=function(a,b,c,d){var e=h[a];if(H[a]&&e.isHidden&&!1!==U(a,x[a].onshow_start))e.isSliding=!1,e.isShowing=!0,b===
!1?ha(a,!0):va(a,!1,c,d)},Na=function(a,c){ka(a)||(a.stopImmediatePropagation(),a=b(this).data("layoutEdge"));var d=h[ka(a)?b.trim(a):a==void 0||a==null?"":a];d.isHidden?Ma(a):d.isClosed?va(a,!!c):ha(a)},pb=function(a){var b=h[a];H[a].hide();b.isClosed=!0;b.isVisible=!1},ha=function(a,b,c,d){function e(){if(j.isClosed){Ga(a,!0);var b=r.altSide[a];h[b].noRoom&&(Y(b),Ca(b));if(!d&&(h.initialized||g.triggerEventsOnLoad))k||U(a,g.onclose_end||g.onclose),k&&U(a,g.onshow_end||g.onshow),l&&U(a,g.onhide_end||
g.onhide)}wa(a)}if(h.initialized){var f=H[a],g=x[a],j=h[a],c=!c&&!j.isClosed&&g.fxName_close!="none",k=j.isShowing,l=j.isHiding;delete j.isShowing;delete j.isHiding;if(f&&(g.closable||k||l)&&(b||!j.isClosed||k))if(r.isLayoutBusy)A("close",a,b);else if(k||!1!==U(a,g.onclose_start)){r[a].isMoving=!0;r.isLayoutBusy=!0;j.isClosed=!0;j.isVisible=!1;if(l)j.isHidden=!0;else if(k)j.isHidden=!1;j.isSliding?Qa(a,!1):Ba(r[a].dir=="horz"?"all":"center",!1);cb(a);c?(Wa(a,!0),f.hide(g.fxName_close,g.fxSettings_close,
g.fxSpeed_close,function(){Wa(a,!1);e()})):(f.hide(),e())}}else pb(a)},cb=function(a){var c=ca[a],d=pa[a],e=x[a],f=r[a].side.toLowerCase(),g=e.resizerClass,j=e.togglerClass,k="-"+a;c.css(f,O["inset"+r[a].side]).removeClass(g+"-open "+g+k+"-open").removeClass(g+"-sliding "+g+k+"-sliding").addClass(g+"-closed "+g+k+"-closed").unbind("dblclick."+ia);e.resizable&&typeof b.fn.draggable=="function"&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");d&&(d.removeClass(j+
"-open "+j+k+"-open").addClass(j+"-closed "+j+k+"-closed").attr("title",e.togglerTip_closed),d.children(".content-open").hide(),d.children(".content-closed").css("display","block"));P(a,!1);h.initialized&&Oa("all")},va=function(a,b,c,d){function e(){j.isVisible&&(w(a),j.isSliding||Ba(r[a].dir=="vert"?"center":"all",!1),db(a));wa(a)}var f=H[a],g=x[a],j=h[a],c=!c&&j.isClosed&&g.fxName_open!="none",k=j.isShowing;delete j.isShowing;if(f&&(g.resizable||g.closable||k)&&(!j.isVisible||j.isSliding))if(j.isHidden&&
!k)Ma(a,!0);else if(r.isLayoutBusy)A("open",a,b);else if(Y(a,b),!1!==U(a,g.onopen_start))if(j.minSize>j.maxSize)P(a,!1),!d&&g.noRoomToOpenTip&&alert(g.noRoomToOpenTip);else{r[a].isMoving=!0;r.isLayoutBusy=!0;b?Qa(a,!0):j.isSliding?Qa(a,!1):g.slidable&&Ga(a,!1);j.noRoom=!1;Ca(a);j.isVisible=!0;j.isClosed=!1;if(k)j.isHidden=!1;c?(Wa(a,!0),f.show(g.fxName_open,g.fxSettings_open,g.fxSpeed_open,function(){Wa(a,!1);e()})):(f.show(),e())}},db=function(a,c){var d=H[a],e=ca[a],f=pa[a],g=x[a],j=h[a],k=r[a].side.toLowerCase(),
l=g.resizerClass,p=g.togglerClass,m="-"+a;e.css(k,O["inset"+r[a].side]+la(a)).removeClass(l+"-closed "+l+m+"-closed").addClass(l+"-open "+l+m+"-open");j.isSliding?e.addClass(l+"-sliding "+l+m+"-sliding"):e.removeClass(l+"-sliding "+l+m+"-sliding");g.resizerDblClickToggle&&e.bind("dblclick",Na);ga(0,e);g.resizable&&typeof b.fn.draggable=="function"?e.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.resizerTip):j.isSliding||e.css("cursor","default");f&&(f.removeClass(p+"-closed "+p+
m+"-closed").addClass(p+"-open "+p+m+"-open").attr("title",g.togglerTip_open),ga(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));P(a,!j.isSliding);b.extend(j,oa(d));h.initialized&&(Oa("all"),La(a,!0));if(!c&&(h.initialized||g.triggerEventsOnLoad)&&d.is(":visible"))U(a,g.onopen_end||g.onopen),j.isShowing&&U(a,g.onshow_end||g.onshow),h.initialized&&(U(a,g.onresize_end||g.onresize),Ia(a))},lb=function(a){function c(){f.isClosed?r[e].isMoving||va(e,!0):Qa(e,
!0)}var d=ka(a)?null:a,e=d?b(this).data("layoutEdge"):a,f=h[e],a=x[e].slideDelay_open;d&&d.stopImmediatePropagation();f.isClosed&&d&&d.type=="mouseenter"&&a>0?Q.set(e+"_openSlider",c,a):c()},Va=function(a){function c(){f.isClosed?Qa(e,!1):r[e].isMoving||ha(e)}var d=ka(a)?null:a,e=d?b(this).data("layoutEdge"):a,a=x[e],f=h[e],g=r[e].isMoving?1E3:300;if(!f.isClosed&&!f.isResizing)if(a.slideTrigger_close=="click")c();else if(!a.preventQuickSlideClose||!r.isLayoutBusy)if(!a.preventPrematureSlideClose||
!d||!b.layout.isMouseOverElem(d,H[e]))d?Q.set(e+"_closeSlider",c,X(a.slideDelay_close,g)):c()},Wa=function(a,b){var c=H[a];if(b)c.css({zIndex:r.zIndex.pane_animate}),a=="south"?c.css({top:O.insetTop+O.innerHeight-c.outerHeight()}):a=="east"&&c.css({left:O.insetLeft+O.innerWidth-c.outerWidth()});else{c.css({zIndex:h[a].isSliding?r.zIndex.pane_sliding:r.zIndex.pane_normal});a=="south"?c.css({top:"auto"}):a=="east"&&c.css({left:"auto"});var d=x[a];h.browser.msie&&d.fxOpacityFix&&d.fxName_open!="slide"&&
c.css("filter")&&c.css("opacity")==1&&c[0].style.removeAttribute("filter")}},Ga=function(a,b){var c=x[a],d=ca[a],e=c.slideTrigger_open.toLowerCase();if(d&&(!b||c.slidable)){if(e.match(/mouseover/))e=c.slideTrigger_open="mouseenter";else if(!e.match(/click|dblclick|mouseenter/))e=c.slideTrigger_open="click";d[b?"bind":"unbind"](e+"."+ia,lb).css("cursor",b?c.sliderCursor:"default").attr("title",b?c.sliderTip:"")}},Qa=function(a,b){function c(b){Q.clear(a+"_closeSlider");b.stopPropagation()}var d=x[a],
e=h[a],f=r.zIndex,g=d.slideTrigger_close.toLowerCase(),j=b?"bind":"unbind",k=H[a],l=ca[a];e.isSliding=b;Q.clear(a+"_closeSlider");b&&Ga(a,!1);k.css("zIndex",b?f.pane_sliding:f.pane_normal);l.css("zIndex",b?f.pane_sliding:f.resizer_normal);if(!g.match(/click|mouseleave/))g=d.slideTrigger_close="mouseleave";l[j](g,Va);g=="mouseleave"&&(k[j]("mouseleave."+ia,Va),l[j]("mouseenter."+ia,c),k[j]("mouseenter."+ia,c));b?g=="click"&&!d.resizable&&(l.css("cursor",b?d.sliderCursor:"default"),l.attr("title",b?
d.togglerTip_open:"")):Q.clear(a+"_closeSlider")},Ca=function(a,b,c,d){var b=x[a],e=h[a],f=r[a],g=H[a],j=ca[a],k=f.dir=="vert",l=!1;if(a=="center"||k&&e.noVerticalRoom)if((l=e.maxHeight>0)&&e.noRoom){g.show();j&&j.show();e.isVisible=!0;e.noRoom=!1;if(k)e.noVerticalRoom=!1;w(a)}else if(!l&&!e.noRoom)g.hide(),j&&j.hide(),e.isVisible=!1,e.noRoom=!0;if(a!="center")if(e.minSize<=e.maxSize){if(e.size>e.maxSize?ua(a,e.maxSize,c,d):e.size<e.minSize?ua(a,e.minSize,c,d):j&&g.is(":visible")&&(c=f.side.toLowerCase(),
d=e.size+O["inset"+f.side],W(j,c)!=d&&j.css(c,d)),e.noRoom)e.wasOpen&&b.closable?b.autoReopen?va(a,!1,!0,!0):e.noRoom=!1:Ma(a,e.wasOpen,!0,!0)}else if(!e.noRoom)e.noRoom=!0,e.wasOpen=!e.isClosed&&!e.isSliding,e.isClosed||(b.closable?ha(a,!0,!0):Ua(a,!0))},Ya=function(a,b,c){var d=x[a],e=d.resizeWhileDragging&&!r.isLayoutBusy;d.autoResize=!1;ua(a,b,c,e)},ua=function(a,c,d,e){var f=x[a],g=h[a],j=H[a],k=ca[a],l=r[a].side.toLowerCase(),p="inset"+r[a].side,m=r.isLayoutBusy&&!f.triggerEventsWhileDragging,
M;Y(a);M=g.size;c=ja(a,c);c=X(c,ja(a,f.minSize));c=Math.min(c,g.maxSize);if(c<g.minSize)Ca(a,!1,d);else if(e||c!=M)!d&&h.initialized&&g.isVisible&&U(a,f.onresize_start),j.css(r[a].sizeType.toLowerCase(),X(1,r[a].dir=="horz"?fa(a,c):D(a,c))),g.size=c,b.extend(g,oa(j)),k&&j.is(":visible")&&k.css(l,c+O[p]),La(a),!d&&!m&&h.initialized&&g.isVisible&&(U(a,f.onresize_end||f.onresize),Ia(a)),d||(g.isSliding||Ba(r[a].dir=="horz"?"all":"center",m,e),Oa("all")),a=r.altSide[a],c<M&&h[a].noRoom&&(Y(a),Ca(a,!1,
d))},Ba=function(a,c,d){if(!a||a=="all")a="east,west,center";b.each(a.split(","),function(a,e){if(H[e]){var f=x[e],g=h[e],j=H[e],k=!0,l={},k={top:la("north",!0),bottom:la("south",!0),left:la("west",!0),right:la("east",!0),width:0,height:0};k.width=O.innerWidth-k.left-k.right;k.height=O.innerHeight-k.bottom-k.top;k.top+=O.insetTop;k.bottom+=O.insetBottom;k.left+=O.insetLeft;k.right+=O.insetRight;b.extend(g,oa(j));if(e=="center"){if(!d&&g.isVisible&&k.width==g.outerWidth&&k.height==g.outerHeight)return!0;
b.extend(g,qa(e),{maxWidth:k.width,maxHeight:k.height});l=k;l.width=D(e,k.width);l.height=fa(e,k.height);k=l.width>0&&l.height>0;if(!k&&!h.initialized&&f.minWidth>0){var p=f.minWidth-g.outerWidth,m=x.east.minSize||0,M=x.west.minSize||0,r=h.east.size,n=h.west.size,J=r,t=n;p>0&&h.east.isVisible&&r>m&&(J=X(r-m,r-p),p-=r-J);p>0&&h.west.isVisible&&n>M&&(t=X(n-M,n-p),p-=n-t);if(p==0){r!=m&&ua("east",J,!0);n!=M&&ua("west",t,!0);Ba("center",c,d);return}}}else{g.isVisible&&!g.noVerticalRoom&&b.extend(g,oa(j),
qa(e));if(!d&&!g.noVerticalRoom&&k.height==g.outerHeight)return!0;l.top=k.top;l.bottom=k.bottom;l.height=fa(e,k.height);g.maxHeight=X(0,l.height);k=g.maxHeight>0;if(!k)g.noVerticalRoom=!0}k?(!c&&h.initialized&&U(e,f.onresize_start),j.css(l),g.noRoom&&!g.isClosed&&!g.isHidden&&Ca(e),g.isVisible&&(b.extend(g,oa(j)),h.initialized&&La(e))):!g.noRoom&&g.isVisible&&Ca(e);if(!g.isVisible)return!0;if(e=="center")g=h.browser,g=g.isIE6||g.msie&&!g.boxModel,H.north&&(g||h.north.tagName=="IFRAME")&&H.north.css("width",
D(H.north,O.innerWidth)),H.south&&(g||h.south.tagName=="IFRAME")&&H.south.css("width",D(H.south,O.innerWidth));!c&&h.initialized&&(U(e,f.onresize_end||f.onresize),Ia(e))}})},Ha=function(){b.extend(h.container,oa(sa));if(O.outerHeight){if(!1===U(null,x.onresizeall_start))return!1;var a,c,d;b.each(["south","north","east","west"],function(a,b){H[b]&&(d=h[b],c=x[b],c.autoResize&&d.size!=c.size?ua(b,c.size,!0,!0):(Y(b),Ca(b,!1,!0,!0)))});Ba("all",!0,!0);Oa("all");c=x;b.each(r.allPanes.split(","),function(b,
d){if((a=H[d])&&h[d].isVisible)U(d,c[d].onresize_end||c[d].onresize),Ia(d)});U(null,c.onresizeall_end||c.onresizeall)}},Ia=function(a){var b=H[a],c=za[a];x[a].resizeNestedLayout&&(b.data("layoutContainer")?b.layout().resizeAll():c&&c.data("layoutContainer")&&c.layout().resizeAll())},La=function(a,c){if(!a||a=="all")a=r.allPanes;b.each(a.split(","),function(a,b){function d(a){return X(k.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function e(){var a=x[b].contentIgnoreSelector,a=f.nextAll().not(a||
":lt(0)"),c=a.filter(":visible"),g=c.filter(":last");l={top:f[0].offsetTop,height:f.outerHeight(),numFooters:a.length,hiddenFooters:a.length-c.length,spaceBelow:0};l.spaceAbove=l.top;l.bottom=l.top+l.height;l.spaceBelow=g.length?g[0].offsetTop+g.outerHeight()-l.bottom+d(g):d(f)}var g=H[b],f=za[b],j=x[b],k=h[b],l=k.content;if(!g||!f||!g.is(":visible"))return!0;if(!1!==U(null,j.onsizecontent_start)){if(!r.isLayoutBusy||l.top==void 0||c||j.resizeContentWhileDragging)e(),l.hiddenFooters>0&&g.css("overflow")==
"hidden"&&(g.css("overflow","visible"),e(),g.css("overflow","hidden"));g=k.innerHeight-(l.spaceAbove-k.css.paddingTop)-(l.spaceBelow-k.css.paddingBottom);if(!f.is(":visible")||l.height!=g)ra(f,g,!0),l.height=g;h.initialized&&(U(b,j.onsizecontent_end||j.onsizecontent),Ia(b))}})},Oa=function(a){if(!a||a=="all")a=r.borderPanes;b.each(a.split(","),function(a,c){var d=x[c],e=h[c],g=H[c],f=ca[c],j=pa[c],k;if(g&&f){var l=r[c].dir,p=e.isClosed?"_closed":"_open",m=d["spacing"+p],M=d["togglerAlign"+p],p=d["togglerLength"+
p],n;if(m==0)f.hide();else{!e.noRoom&&!e.isHidden&&f.show();l=="horz"?(n=g.outerWidth(),e.resizerLength=n,f.css({width:X(1,D(f,n)),height:X(0,fa(f,m)),left:W(g,"left")})):(n=g.outerHeight(),e.resizerLength=n,f.css({height:X(1,fa(f,n)),width:X(0,D(f,m)),top:O.insetTop+la("north",!0)}));ga(d,f);if(j){if(p==0||e.isSliding&&d.hideTogglerOnSlide){j.hide();return}else j.show();if(!(p>0)||p=="100%"||p>n)p=n,M=0;else if(ka(M))switch(M){case "top":case "left":M=0;break;case "bottom":case "right":M=n-p;break;
default:M=Math.floor((n-p)/2)}else g=parseInt(M,10),M=M>=0?g:n-p+g;if(l=="horz"){var J=D(j,p);j.css({width:X(0,J),height:X(1,fa(j,m)),left:M,top:0});j.children(".content").each(function(){k=b(this);k.css("marginLeft",Math.floor((J-k.outerWidth())/2))})}else{var w=fa(j,p);j.css({height:X(0,w),width:X(1,D(j,m)),top:M,left:0});j.children(".content").each(function(){k=b(this);k.css("marginTop",Math.floor((w-k.outerHeight())/2))})}ga(0,j)}if(!h.initialized&&(d.initHidden||e.noRoom))f.hide(),j&&j.hide()}}})},
mb=function(a){var b=pa[a],c=x[a];if(b)c.closable=!0,b.bind("click."+ia,function(b){b.stopPropagation();Na(a)}).bind("mouseenter."+ia,J).bind("mouseleave."+ia,ga).css("visibility","visible").css("cursor","pointer").attr("title",h[a].isClosed?c.togglerTip_closed:c.togglerTip_open).show()},sa=b(this).eq(0);if(!sa.length)return null;if(sa.data("layoutContainer")&&sa.data("layout"))return sa.data("layout");var H={},za={},ca={},pa={},O=h.container,ia=h.id,Fa={options:x,state:h,container:sa,panes:H,contents:za,
resizers:ca,togglers:pa,toggle:Na,hide:Ua,show:Ma,open:va,close:ha,slideOpen:lb,slideClose:Va,slideToggle:function(a){Na(a,!0)},initContent:kb,sizeContent:La,sizePane:Ya,swapPanes:function(a,c){function d(a){var c=H[a],e=za[a];return!c?!1:{pane:a,P:c?c[0]:!1,C:e?e[0]:!1,state:b.extend({},h[a]),options:b.extend({},x[a])}}function e(a,c){if(a){var d=a.P,g=a.C,f=a.pane,k=r[c],l=k.side.toLowerCase(),p="inset"+k.side,m=b.extend({},h[c]),M=x[c],n={resizerCursor:M.resizerCursor};b.each("fxName,fxSpeed,fxSettings".split(","),
function(a,b){n[b]=M[b];n[b+"_open"]=M[b+"_open"];n[b+"_close"]=M[b+"_close"]});H[c]=b(d).data("layoutEdge",c).css(r.hidden).css(k.cssReq);za[c]=g?b(g):!1;x[c]=b.extend({},a.options,n);h[c]=b.extend({},a.state);d.className=d.className.replace(RegExp(M.paneClass+"-"+f,"g"),M.paneClass+"-"+c);Ta(c);k.dir!=r[f].dir?(d=j[c]||0,Y(c),d=X(d,h[c].minSize),Ya(c,d,!0)):ca[c].css(l,O[p]+(h[c].isVisible?la(c):0));a.state.isVisible&&!m.isVisible?db(c,!0):(cb(c),Ga(c,!0));a=null}}h[a].edge=c;h[c].edge=a;var g=
!1;!1===U(a,x[a].onswap_start)&&(g=!0);!g&&!1===U(c,x[c].onswap_start)&&(g=!0);if(g)h[a].edge=a,h[c].edge=c;else{var g=d(a),f=d(c),j={};j[a]=g?g.state.size:0;j[c]=f?f.state.size:0;H[a]=!1;H[c]=!1;h[a]={};h[c]={};pa[a]&&pa[a].remove();pa[c]&&pa[c].remove();ca[a]&&ca[a].remove();ca[c]&&ca[c].remove();ca[a]=ca[c]=pa[a]=pa[c]=!1;e(g,c);e(f,a);g=f=j=null;H[a]&&H[a].css(r.visible);H[c]&&H[c].css(r.visible);Ha();U(a,x[a].onswap_end||x[a].onswap);U(c,x[c].onswap_end||x[c].onswap)}},resizeAll:Ha,destroy:function(){b(window).unbind("."+
ia);b(document).unbind("."+ia);b.each(r.allPanes.split(","),function(a,b){bb(b,!1,!0)});var a=sa.removeData("layout").removeData("layoutContainer").removeClass(x.containerClass);!a.data("layoutEdge")&&a.data("layoutCSS")&&a.css(a.data("layoutCSS")).removeData("layoutCSS");O.tagName=="BODY"&&(a=b("html")).data("layoutCSS")&&a.css(a.data("layoutCSS")).removeData("layoutCSS");Pa()},addPane:ab,removePane:bb,setSizeLimits:Y,bindButton:E,addToggleBtn:aa,addOpenBtn:N,addCloseBtn:T,addPinBtn:y,allowOverflow:u,
resetOverflow:n,encodeJSON:Z,decodeJSON:v,getState:na,getCookie:q,saveCookie:V,deleteCookie:function(){V("",{expires:-1})},loadCookie:I,loadState:ea,cssWidth:D,cssHeight:fa,enableClosable:mb,disableClosable:function(a,b){var c=pa[a];if(c)x[a].closable=!1,h[a].isClosed&&va(a,!1,!0),c.unbind("."+ia).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable:function(a){var b=ca[a];if(b&&b.data("draggable"))x[a].slidable=!0,s.isClosed&&Ga(a,!0)},disableSlidable:function(a){var b=
ca[a];if(b)x[a].slidable=!1,h[a].isSliding?ha(a,!1,!0):(Ga(a,!1),b.css("cursor","default").attr("title",""),ga(null,b[0]))},enableResizable:function(a){var b=ca[a],c=x[a];if(b&&b.data("draggable"))c.resizable=!0,b.draggable("enable").bind("mouseenter."+ia,ya).bind("mouseleave."+ia,ba),h[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.resizerTip)},disableResizable:function(a){var b=ca[a];if(b&&b.data("draggable"))x[a].resizable=!1,b.draggable("disable").unbind("."+ia).css("cursor","default").attr("title",
""),ga(null,b[0])}};(function(){eb();var a=x;if(!1===U(null,a.onload_start))return!1;if(!jb("center").length)return alert("UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element."),null;a.useStateCookie&&a.cookie.autoLoad&&I();h.browser={mozilla:b.browser.mozilla,webkit:b.browser.webkit||b.browser.safari,msie:b.browser.msie,isIE6:b.browser.msie&&b.browser.version==6,boxModel:b.support.boxModel};var c=sa,d=O.tagName=b.prop?c.prop("tagName"):
c.attr("tagName"),e=d=="BODY",g={};O.selector=c.selector.split(".slice")[0];O.ref=d+"/"+O.selector;c.data("layout",Fa).data("layoutContainer",ia).addClass(x.containerClass);c.data("layoutCSS")||(e?(g=b.extend(Ea(c,"position,margin,padding,border"),{height:c.css("height"),overflow:c.css("overflow"),overflowX:c.css("overflowX"),overflowY:c.css("overflowY")}),d=b("html"),d.data("layoutCSS",{height:"auto",overflow:d.css("overflow"),overflowX:d.css("overflowX"),overflowY:d.css("overflowY")})):g=Ea(c,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY"),
c.data("layoutCSS",g));try{if(e)b("html").css({height:"100%",overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}),b("body").css({position:"relative",height:"100%",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",margin:0,padding:0,border:"none"});else{var g={overflow:"hidden"},f=c.css("position");c.css("height");if(!c.data("layoutRole")&&(!f||!f.match(/fixed|absolute|relative/)))g.position="relative";c.css(g);c.is(":visible")&&c.innerHeight()<2&&alert("UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!".replace(/CONTAINER/,
O.ref))}}catch(j){}b.extend(h.container,oa(c));$a();La();if(a.scrollToBookmarkOnLoad)c=self.location,c.hash&&c.replace(c.hash);ib();a.autoBindCustomButtons&&rb();a.resizeWithWindow&&!sa.data("layoutRole")&&b(window).bind("resize."+ia,Aa);b(window).bind("unload."+ia,Pa);h.initialized=!0;U(null,a.onload_end||a.onload)})();return Fa}})(jQuery);
(function(b){function a(a){return(a=/^\s*?[\+-]?(\d*\.?\d*?)\s*?$/.exec(a))&&a.length>0?a[1]:!1}function c(a,c){var f=!1;b.each(a,function(a,b){f||(f=b==c)});return f}b.tinysort={id:"TinySort",version:"1.0.4",defaults:{order:"asc",attr:"",place:"start",returns:!1}};b.fn.extend({tinysort:function(d,e){d&&typeof d!="string"&&(e=d,d=null);var f=b.extend({},b.tinysort.defaults,e),g={};this.each(function(a){var c=!d||d==""?b(this):b(this).find(d),e=f.order=="rand"?""+Math.random():f.attr==""?c.text():
c.attr(f.attr),j=b(this).parent();g[j]||(g[j]={s:[],n:[]});c.length>0?g[j].s.push({s:e,e:b(this),n:a}):g[j].n.push({e:b(this),n:a})});for(var j in g){var k=g[j];k.s.sort(function(b,c){var d=b.s.toLowerCase?b.s.toLowerCase():b.s,e=c.s.toLowerCase?c.s.toLowerCase():c.s;a(b.s)&&a(c.s)&&(d=parseFloat(b.s),e=parseFloat(c.s));return(f.order=="asc"?1:-1)*(d<e?-1:d>e?1:0)})}var l=[];for(j in g){var k=g[j],m=[],u=b(this).length;switch(f.place){case "first":b.each(k.s,function(a,b){u=Math.min(u,b.n)});break;
case "org":b.each(k.s,function(a,b){m.push(b.n)});break;case "end":u=k.n.length;break;default:u=0}for(var n=[0,0],F=0;F<b(this).length;F++){var E=F>=u&&F<u+k.s.length;c(m,F)&&(E=!0);var aa=(E?k.s:k.n)[n[E?0:1]].e;aa.parent().append(aa);(E||!f.returns)&&l.push(aa.get(0));n[E?0:1]++}}return this.pushStack(l)}});b.fn.TinySort=b.fn.Tinysort=b.fn.tsort=b.fn.tinysort})(jQuery);
(function(){jQuery.each({getSelection:function(){var b=this.jquery?this[0]:this;return("selectionStart"in b&&function(){var a=b.selectionEnd-b.selectionStart;return{start:b.selectionStart,end:b.selectionEnd,length:a,text:b.value.substr(b.selectionStart,a)}}||document.selection&&function(){b.focus();var a=document.selection.createRange();if(a==null)return{start:0,end:b.value.length,length:0};var c=b.createTextRange(),d=c.duplicate();c.moveToBookmark(a.getBookmark());d.setEndPoint("EndToStart",c);return{start:d.text.length,
end:d.text.length+a.text.length,length:a.text.length,text:a.text}}||function(){return{start:0,end:b.value.length,length:0}})()},replaceSelection:function(b){var a=this.jquery?this[0]:this,c=b||"";return("selectionStart"in a&&function(){a.value=a.value.substr(0,a.selectionStart)+c+a.value.substr(a.selectionEnd,a.value.length);return this}||document.selection&&function(){a.focus();document.selection.createRange().text=c;return this}||function(){a.value+=c;return this})()}},function(b){jQuery.fn[b]=
this})})();
(function(){jQuery.color={};jQuery.color.make=function(a,b,d,e){var f={};f.r=a||0;f.g=b||0;f.b=d||0;f.a=e!=null?e:1;f.add=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]+=b;return f.normalize()};f.scale=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]*=b;return f.normalize()};f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"};f.normalize=function(){function a(b,c,d){return c<b?b:c>d?d:c}f.r=a(0,parseInt(f.r),255);f.g=a(0,
parseInt(f.g),255);f.b=a(0,parseInt(f.b),255);f.a=a(0,f.a,1);return f};f.clone=function(){return jQuery.color.make(f.r,f.b,f.g,f.a)};return f.normalize()};jQuery.color.extract=function(a,b){var d;do{d=a.css(b).toLowerCase();if(d!=""&&d!="transparent")break;a=a.parent()}while(!jQuery.nodeName(a.get(0),"body"));d=="rgba(0, 0, 0, 0)"&&(d="transparent");return jQuery.color.parse(d)};jQuery.color.parse=function(a){var c,d=jQuery.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return d(parseInt(c[1],
10),parseInt(c[2],10),parseInt(c[3],10));if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return d(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]));if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return d(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55);if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return d(parseFloat(c[1])*
2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55,parseFloat(c[4]));if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return d(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16));if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return d(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16));a=jQuery.trim(a).toLowerCase();return a=="transparent"?d(255,255,255,0):(c=b[a],d(c[0],c[1],c[2]))};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();
(function(b){function a(a,e,f,g){function j(a,b){for(var b=[Y].concat(b),c=0;c<a.length;++c)a[c].apply(this,b)}function k(a){for(var c=[],d=0;d<a.length;++d){var e=b.extend(!0,{},A.series);a[d].data?(e.data=a[d].data,delete a[d].data,b.extend(!0,e,a[d]),a[d].data=e.data):e.data=a[d];c.push(e)}S=c;c=S.length;d=[];e=[];for(a=0;a<S.length;++a){var g=S[a].color;g!=null&&(--c,typeof g=="number"?e.push(g):d.push(b.color.parse(S[a].color)))}for(a=0;a<e.length;++a)c=Math.max(c,e[a]+1);d=[];for(a=e=0;d.length<
c;)g=A.colors.length==a?b.color.make(100,100,100):b.color.parse(A.colors[a]),g.scale("rgb",1+(e%2==1?-1:1)*Math.ceil(e/2)*0.2),d.push(g),++a,a>=A.colors.length&&(a=0,++e);for(a=c=0;a<S.length;++a){e=S[a];if(e.color==null)e.color=d[c].toString(),++c;else if(typeof e.color=="number")e.color=d[e.color].toString();if(e.lines.show==null){var f,g=!0;for(f in e)if(e[f].show){g=!1;break}if(g)e.lines.show=!0}e.xaxis=l(e,"xaxis");e.yaxis=l(e,"yaxis")}m()}function l(a,b){var c=a[b];return!c||c==1?C[b]:typeof c==
"number"?C[b.charAt(0)+c+b.slice(1)]:c}function m(){function a(b,c,d){if(c<b.datamin)b.datamin=c;if(d>b.datamax)b.datamax=d}var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d,e,g,f,h,k,l,p,m,r,n;for(p in C)C[p].datamin=b,C[p].datamax=c,C[p].used=!1;for(d=0;d<S.length;++d)h=S[d],h.datapoints={points:[]},j(la.processRawData,[h,h.data,h.datapoints]);for(d=0;d<S.length;++d){h=S[d];var w=h.data,q=h.datapoints.format;if(!q)q=[],q.push({x:!0,number:!0,required:!0}),q.push({y:!0,number:!0,required:!0}),
h.bars.show&&q.push({y:!0,number:!0,required:!1,defaultValue:0}),h.datapoints.format=q;if(h.datapoints.pointsize==null){if(h.datapoints.pointsize==null)h.datapoints.pointsize=q.length;l=h.datapoints.pointsize;k=h.datapoints.points;insertSteps=h.lines.show&&h.lines.steps;h.xaxis.used=h.yaxis.used=!0;for(e=g=0;e<w.length;++e,g+=l){n=w[e];var u=n==null;if(!u)for(f=0;f<l;++f){m=n[f];if(r=q[f])if(r.number&&m!=null&&(m=+m,isNaN(m)&&(m=null)),m==null&&(r.required&&(u=!0),r.defaultValue!=null))m=r.defaultValue;
k[g+f]=m}if(u)for(f=0;f<l;++f)m=k[g+f],m!=null&&(r=q[f],r.x&&a(h.xaxis,m,m),r.y&&a(h.yaxis,m,m)),k[g+f]=null;else if(insertSteps&&g>0&&k[g-l]!=null&&k[g-l]!=k[g]&&k[g-l+1]!=k[g+1]){for(f=0;f<l;++f)k[g+l+f]=k[g+f];k[g+1]=k[g-l+1];g+=l}}}}for(d=0;d<S.length;++d)h=S[d],j(la.processDatapoints,[h,h.datapoints]);for(d=0;d<S.length;++d){h=S[d];k=h.datapoints.points;l=h.datapoints.pointsize;n=g=b;u=w=c;for(e=0;e<k.length;e+=l)if(k[e]!=null)for(f=0;f<l;++f)if(m=k[e+f],r=q[f])r.x&&(m<g&&(g=m),m>w&&(w=m)),r.y&&
(m<n&&(n=m),m>u&&(u=m));h.bars.show&&(e=h.bars.align=="left"?0:-h.bars.barWidth/2,h.bars.horizontal?(n+=e,u+=e+h.bars.barWidth):(g+=e,w+=e+h.bars.barWidth));a(h.xaxis,g,w);a(h.yaxis,n,u)}for(p in C){if(C[p].datamin==b)C[p].datamin=null;if(C[p].datamax==c)C[p].datamax=null}}function u(){function c(a,b){function d(a){return a}var e,f,g=b.transform||d,h=b.inverseTransform;a==C.xaxis||a==C.x2axis?(e=a.scale=ra/(g(a.max)-g(a.min)),f=g(a.min),a.p2c=g==d?function(a){return(a-f)*e}:function(a){return(g(a)-
f)*e},a.c2p=h?function(a){return h(f+a/e)}:function(a){return f+a/e}):(e=a.scale=ja/(g(a.max)-g(a.min)),f=g(a.max),a.p2c=g==d?function(a){return(f-a)*e}:function(a){return(f-g(a))*e},a.c2p=h?function(a){return h(f-a/e)}:function(a){return f-a/e})}function e(c,f){var g,h=[],j;c.labelWidth=f.labelWidth;c.labelHeight=f.labelHeight;if(c==C.xaxis||c==C.x2axis){if(c.labelWidth==null)c.labelWidth=fa/(c.ticks.length>0?c.ticks.length:1);if(c.labelHeight==null){h=[];for(g=0;g<c.ticks.length;++g)(j=c.ticks[g].label)&&
h.push('<div class="tickLabel" style="float:left;width:'+c.labelWidth+'px">'+j+"</div>");if(h.length>0)g=b('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+h.join("")+'<div style="clear:left"></div></div>').appendTo(a),c.labelHeight=g.height(),g.remove()}}else if(c.labelWidth==null||c.labelHeight==null){for(g=0;g<c.ticks.length;++g)(j=c.ticks[g].label)&&h.push('<div class="tickLabel">'+j+"</div>");if(h.length>0){g=b('<div style="position:absolute;top:-10000px;font-size:smaller">'+
h.join("")+"</div>").appendTo(a);if(c.labelWidth==null)c.labelWidth=g.width();if(c.labelHeight==null)c.labelHeight=g.find("div").height();g.remove()}}if(c.labelWidth==null)c.labelWidth=0;if(c.labelHeight==null)c.labelHeight=0}function g(){var a=A.grid.borderWidth;for(i=0;i<S.length;++i)a=Math.max(a,2*(S[i].points.radius+S[i].points.lineWidth/2));D.left=D.right=D.top=D.bottom=a;var b=A.grid.labelMargin+A.grid.borderWidth;if(C.xaxis.labelHeight>0)D.bottom=Math.max(a,C.xaxis.labelHeight+b);if(C.yaxis.labelWidth>
0)D.left=Math.max(a,C.yaxis.labelWidth+b);if(C.x2axis.labelHeight>0)D.top=Math.max(a,C.x2axis.labelHeight+b);if(C.y2axis.labelWidth>0)D.right=Math.max(a,C.y2axis.labelWidth+b);ra=fa-D.left-D.right;ja=qa-D.bottom-D.top}for(var f in C)n(C[f],A[f]);if(A.grid.show){for(f in C)F(C[f],A[f]),E(C[f],A[f]),e(C[f],A[f]);g()}else D.left=D.right=D.top=D.bottom=0,ra=fa,ja=qa;for(f in C)c(C[f],A[f]);A.grid.show&&y();ea()}function n(a,b){var c=+(b.min!=null?b.min:a.datamin),d=+(b.max!=null?b.max:a.datamax),e=d-
c;if(e==0){if(e=d==0?1:0.01,b.min==null&&(c-=e),b.max==null||b.min!=null)d+=e}else{var g=b.autoscaleMargin;g!=null&&(b.min==null&&(c-=e*g,c<0&&a.datamin!=null&&a.datamin>=0&&(c=0)),b.max==null&&(d+=e*g,d>0&&a.datamax!=null&&a.datamax<=0&&(d=0)))}a.min=c;a.max=d}function F(a,d){var e;e=typeof d.ticks=="number"&&d.ticks>0?d.ticks:a==C.xaxis||a==C.x2axis?0.3*Math.sqrt(fa):0.3*Math.sqrt(qa);var g=(a.max-a.min)/e,f,h;if(d.mode=="time"){var j={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,year:525949.2*
6E4};h=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];e=0;d.minTickSize!=null&&(e=typeof d.tickSize=="number"?d.tickSize:d.minTickSize[0]*j[d.minTickSize[1]]);for(f=0;f<h.length-1;++f)if(g<(h[f][0]*j[h[f][1]]+h[f+1][0]*j[h[f+1][1]])/2&&h[f][0]*
j[h[f][1]]>=e)break;e=h[f][0];f=h[f][1];f=="year"&&(h=Math.pow(10,Math.floor(Math.log(g/j.year)/Math.LN10)),g=g/j.year/h,e=g<1.5?1:g<3?2:g<7.5?5:10,e*=h);d.tickSize&&(e=d.tickSize[0],f=d.tickSize[1]);g=function(a){var b=[],d=a.tickSize[0],e=a.tickSize[1],g=new Date(a.min),f=d*j[e];e=="second"&&g.setUTCSeconds(c(g.getUTCSeconds(),d));e=="minute"&&g.setUTCMinutes(c(g.getUTCMinutes(),d));e=="hour"&&g.setUTCHours(c(g.getUTCHours(),d));e=="month"&&g.setUTCMonth(c(g.getUTCMonth(),d));e=="year"&&g.setUTCFullYear(c(g.getUTCFullYear(),
d));g.setUTCMilliseconds(0);f>=j.minute&&g.setUTCSeconds(0);f>=j.hour&&g.setUTCMinutes(0);f>=j.day&&g.setUTCHours(0);f>=j.day*4&&g.setUTCDate(1);f>=j.year&&g.setUTCMonth(0);var h=0,k=Number.NaN,l;do if(l=k,k=g.getTime(),b.push({v:k,label:a.tickFormatter(k,a)}),e=="month")if(d<1){g.setUTCDate(1);var p=g.getTime();g.setUTCMonth(g.getUTCMonth()+1);var m=g.getTime();g.setTime(k+h*j.hour+(m-p)*d);h=g.getUTCHours();g.setUTCHours(0)}else g.setUTCMonth(g.getUTCMonth()+d);else e=="year"?g.setUTCFullYear(g.getUTCFullYear()+
d):g.setTime(k+f);while(k<a.max&&k!=l);return b};h=function(a,c){var e=new Date(a);if(d.timeformat!=null)return b.plot.formatDate(e,d.timeformat,d.monthNames);var g=c.tickSize[0]*j[c.tickSize[1]],f=c.max-c.min,h=d.twelveHourClock?" %p":"";fmt=g<j.minute?"%h:%M:%S"+h:g<j.day?f<2*j.day?"%h:%M"+h:"%b %d %h:%M"+h:g<j.month?"%b %d":g<j.year?f<j.year?"%b":"%b %y":"%y";return b.plot.formatDate(e,fmt,d.monthNames)}}else{var k=d.tickDecimals,l=-Math.floor(Math.log(g)/Math.LN10);k!=null&&l>k&&(l=k);h=Math.pow(10,
-l);g/=h;if(g<1.5)e=1;else if(g<3){if(e=2,g>2.25&&(k==null||l+1<=k))e=2.5,++l}else e=g<7.5?5:10;e*=h;if(d.minTickSize!=null&&e<d.minTickSize)e=d.minTickSize;if(d.tickSize!=null)e=d.tickSize;a.tickDecimals=Math.max(0,k!=null?k:l);g=function(a){var b=[],d=c(a.min,a.tickSize),e=0,g=Number.NaN,f;do f=g,g=d+e*a.tickSize,b.push({v:g,label:a.tickFormatter(g,a)}),++e;while(g<a.max&&g!=f);return b};h=function(a,b){return a.toFixed(b.tickDecimals)}}a.tickSize=f?[e,f]:e;a.tickGenerator=g;a.tickFormatter=b.isFunction(d.tickFormatter)?
function(a,b){return""+d.tickFormatter(a,b)}:h}function E(a,c){a.ticks=[];if(a.used){if(c.ticks==null)a.ticks=a.tickGenerator(a);else if(typeof c.ticks=="number"){if(c.ticks>0)a.ticks=a.tickGenerator(a)}else if(c.ticks){var d=c.ticks;b.isFunction(d)&&(d=d({min:a.min,max:a.max}));var e,g;for(e=0;e<d.length;++e){var f=null,h=d[e];typeof h=="object"?(g=h[0],h.length>1&&(f=h[1])):g=h;f==null&&(f=a.tickFormatter(g,a));a.ticks[e]={v:g,label:f}}}if(c.autoscaleMargin!=null&&a.ticks.length>0){if(c.min==null)a.min=
Math.min(a.min,a.ticks[0].v);if(c.max==null&&a.ticks.length>1)a.max=Math.max(a.max,a.ticks[a.ticks.length-1].v)}}}function aa(){w.clearRect(0,0,fa,qa);var a=A.grid;a.show&&!a.aboveData&&T();for(var b=0;b<S.length;++b){var c=S[b];c.lines.show&&P(c);c.bars.show&&V(c);c.points.show&&K(c)}j(la.draw,[w]);a.show&&a.aboveData&&T()}function N(a,b){var c=b+"axis",d=b+"2axis",e,g;a[c]?(e=C[c],g=a[c].from,c=a[c].to):a[d]?(e=C[d],g=a[d].from,c=a[d].to):(e=C[c],g=a[b+"1"],c=a[b+"2"]);return g!=null&&c!=null&&
g>c?{from:c,to:g,axis:e}:{from:g,to:c,axis:e}}function T(){var a;w.save();w.translate(D.left,D.top);if(A.grid.backgroundColor)w.fillStyle=X(A.grid.backgroundColor,ja,0,"rgba(255, 255, 255, 0)"),w.fillRect(0,0,ra,ja);var c=A.grid.markings;if(c){b.isFunction(c)&&(c=c({xmin:C.xaxis.min,xmax:C.xaxis.max,ymin:C.yaxis.min,ymax:C.yaxis.max,xaxis:C.xaxis,yaxis:C.yaxis,x2axis:C.x2axis,y2axis:C.y2axis}));for(a=0;a<c.length;++a){var d=c[a],e=N(d,"x"),g=N(d,"y");if(e.from==null)e.from=e.axis.min;if(e.to==null)e.to=
e.axis.max;if(g.from==null)g.from=g.axis.min;if(g.to==null)g.to=g.axis.max;if(!(e.to<e.axis.min||e.from>e.axis.max||g.to<g.axis.min||g.from>g.axis.max))if(e.from=Math.max(e.from,e.axis.min),e.to=Math.min(e.to,e.axis.max),g.from=Math.max(g.from,g.axis.min),g.to=Math.min(g.to,g.axis.max),!(e.from==e.to&&g.from==g.to))e.from=e.axis.p2c(e.from),e.to=e.axis.p2c(e.to),g.from=g.axis.p2c(g.from),g.to=g.axis.p2c(g.to),e.from==e.to||g.from==g.to?(w.beginPath(),w.strokeStyle=d.color||A.grid.markingsColor,w.lineWidth=
d.lineWidth||A.grid.markingsLineWidth,w.moveTo(e.from,g.from),w.lineTo(e.to,g.to),w.stroke()):(w.fillStyle=d.color||A.grid.markingsColor,w.fillRect(e.from,g.to,e.to-e.from,g.from-g.to))}}w.lineWidth=1;w.strokeStyle=A.grid.tickColor;w.beginPath();d=C.xaxis;for(a=0;a<d.ticks.length;++a)c=d.ticks[a].v,c<=d.min||c>=C.xaxis.max||(w.moveTo(Math.floor(d.p2c(c))+w.lineWidth/2,0),w.lineTo(Math.floor(d.p2c(c))+w.lineWidth/2,ja));d=C.yaxis;for(a=0;a<d.ticks.length;++a)c=d.ticks[a].v,c<=d.min||c>=d.max||(w.moveTo(0,
Math.floor(d.p2c(c))+w.lineWidth/2),w.lineTo(ra,Math.floor(d.p2c(c))+w.lineWidth/2));d=C.x2axis;for(a=0;a<d.ticks.length;++a)c=d.ticks[a].v,c<=d.min||c>=d.max||(w.moveTo(Math.floor(d.p2c(c))+w.lineWidth/2,-5),w.lineTo(Math.floor(d.p2c(c))+w.lineWidth/2,5));d=C.y2axis;for(a=0;a<d.ticks.length;++a)c=d.ticks[a].v,c<=d.min||c>=d.max||(w.moveTo(ra-5,Math.floor(d.p2c(c))+w.lineWidth/2),w.lineTo(ra+5,Math.floor(d.p2c(c))+w.lineWidth/2));w.stroke();if(A.grid.borderWidth)a=A.grid.borderWidth,w.lineWidth=a,
w.strokeStyle=A.grid.borderColor,w.strokeRect(-a/2,-a/2,ra+a,ja+a);w.restore()}function y(){function b(a,d){for(var e=0;e<a.ticks.length;++e){var g=a.ticks[e];g.label&&!(g.v<a.min||g.v>a.max)&&c.push(d(g,a))}}a.find(".tickLabels").remove();var c=['<div class="tickLabels" style="font-size:smaller;color:'+A.grid.color+'">'],e=A.grid.labelMargin+A.grid.borderWidth;b(C.xaxis,function(a,b){return'<div style="position:absolute;top:'+(D.top+ja+e)+"px;left:"+Math.round(D.left+b.p2c(a.v)-b.labelWidth/2)+"px;width:"+
b.labelWidth+'px;text-align:center" class="tickLabel">'+a.label+"</div>"});b(C.yaxis,function(a,b){return'<div style="position:absolute;top:'+Math.round(D.top+b.p2c(a.v)-b.labelHeight/2)+"px;right:"+(D.right+ra+e)+"px;width:"+b.labelWidth+'px;text-align:right" class="tickLabel">'+a.label+"</div>"});b(C.x2axis,function(a,b){return'<div style="position:absolute;bottom:'+(D.bottom+ja+e)+"px;left:"+Math.round(D.left+b.p2c(a.v)-b.labelWidth/2)+"px;width:"+b.labelWidth+'px;text-align:center" class="tickLabel">'+
a.label+"</div>"});b(C.y2axis,function(a,b){return'<div style="position:absolute;top:'+Math.round(D.top+b.p2c(a.v)-b.labelHeight/2)+"px;left:"+(D.left+ra+e)+"px;width:"+b.labelWidth+'px;text-align:left" class="tickLabel">'+a.label+"</div>"});c.push("</div>");a.append(c.join(""))}function P(a){function b(a,c,d,e,g){var f=a.points,a=a.pointsize,h=null,j=null;w.beginPath();for(var k=a;k<f.length;k+=a){var l=f[k-a],p=f[k-a+1],m=f[k],r=f[k+1];if(!(l==null||m==null)){if(p<=r&&p<g.min){if(r<g.min)continue;
l=(g.min-p)/(r-p)*(m-l)+l;p=g.min}else if(r<=p&&r<g.min){if(p<g.min)continue;m=(g.min-p)/(r-p)*(m-l)+l;r=g.min}if(p>=r&&p>g.max){if(r>g.max)continue;l=(g.max-p)/(r-p)*(m-l)+l;p=g.max}else if(r>=p&&r>g.max){if(p>g.max)continue;m=(g.max-p)/(r-p)*(m-l)+l;r=g.max}if(l<=m&&l<e.min){if(m<e.min)continue;p=(e.min-l)/(m-l)*(r-p)+p;l=e.min}else if(m<=l&&m<e.min){if(l<e.min)continue;r=(e.min-l)/(m-l)*(r-p)+p;m=e.min}if(l>=m&&l>e.max){if(m>e.max)continue;p=(e.max-l)/(m-l)*(r-p)+p;l=e.max}else if(m>=l&&m>e.max){if(l>
e.max)continue;r=(e.max-l)/(m-l)*(r-p)+p;m=e.max}(l!=h||p!=j)&&w.moveTo(e.p2c(l)+c,g.p2c(p)+d);h=m;j=r;w.lineTo(e.p2c(m)+c,g.p2c(r)+d)}}w.stroke()}function c(a,b,d){var e=a.points,a=a.pointsize,g=Math.min(Math.max(0,d.min),d.max),f;f=0;for(var h=!1,j=a;j<e.length;j+=a){var k=e[j-a],l=e[j-a+1],p=e[j],m=e[j+1];if(h&&k!=null&&p==null)w.lineTo(b.p2c(f),d.p2c(g)),w.fill(),h=!1;else if(!(k==null||p==null)){if(k<=p&&k<b.min){if(p<b.min)continue;l=(b.min-k)/(p-k)*(m-l)+l;k=b.min}else if(p<=k&&p<b.min){if(k<
b.min)continue;m=(b.min-k)/(p-k)*(m-l)+l;p=b.min}if(k>=p&&k>b.max){if(p>b.max)continue;l=(b.max-k)/(p-k)*(m-l)+l;k=b.max}else if(p>=k&&p>b.max){if(k>b.max)continue;m=(b.max-k)/(p-k)*(m-l)+l;p=b.max}h||(w.beginPath(),w.moveTo(b.p2c(k),d.p2c(g)),h=!0);if(l>=d.max&&m>=d.max)w.lineTo(b.p2c(k),d.p2c(d.max)),w.lineTo(b.p2c(p),d.p2c(d.max)),f=p;else if(l<=d.min&&m<=d.min)w.lineTo(b.p2c(k),d.p2c(d.min)),w.lineTo(b.p2c(p),d.p2c(d.min)),f=p;else{var r=k,n=p;if(l<=m&&l<d.min&&m>=d.min)k=(d.min-l)/(m-l)*(p-k)+
k,l=d.min;else if(m<=l&&m<d.min&&l>=d.min)p=(d.min-l)/(m-l)*(p-k)+k,m=d.min;if(l>=m&&l>d.max&&m<=d.max)k=(d.max-l)/(m-l)*(p-k)+k,l=d.max;else if(m>=l&&m>d.max&&l<=d.max)p=(d.max-l)/(m-l)*(p-k)+k,m=d.max;k!=r&&(f=l<=d.min?d.min:d.max,w.lineTo(b.p2c(r),d.p2c(f)),w.lineTo(b.p2c(k),d.p2c(f)));w.lineTo(b.p2c(k),d.p2c(l));w.lineTo(b.p2c(p),d.p2c(m));p!=n&&(f=m<=d.min?d.min:d.max,w.lineTo(b.p2c(p),d.p2c(f)),w.lineTo(b.p2c(n),d.p2c(f)));f=Math.max(p,n)}}}h&&(w.lineTo(b.p2c(f),d.p2c(g)),w.fill())}w.save();
w.translate(D.left,D.top);w.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(d>0&&e>0){w.lineWidth=e;w.strokeStyle="rgba(0,0,0,0.1)";var g=Math.PI/18;b(a.datapoints,Math.sin(g)*(d/2+e/2),Math.cos(g)*(d/2+e/2),a.xaxis,a.yaxis);w.lineWidth=e/2;b(a.datapoints,Math.sin(g)*(d/2+e/4),Math.cos(g)*(d/2+e/4),a.xaxis,a.yaxis)}w.lineWidth=d;w.strokeStyle=a.color;if(e=I(a.lines,a.color,0,ja))w.fillStyle=e,c(a.datapoints,a.xaxis,a.yaxis);d>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis);w.restore()}function K(a){function b(a,
c,d,e,g,f,h){for(var j=a.points,a=a.pointsize,k=0;k<j.length;k+=a){var l=j[k],p=j[k+1];if(!(l==null||l<f.min||l>f.max||p<h.min||p>h.max)){w.beginPath();w.arc(f.p2c(l),h.p2c(p)+e,c,0,g,!1);if(d)w.fillStyle=d,w.fill();w.stroke()}}}w.save();w.translate(D.left,D.top);var c=a.lines.lineWidth,d=a.shadowSize,e=a.points.radius;if(c>0&&d>0)d/=2,w.lineWidth=d,w.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,d+d/2,Math.PI,a.xaxis,a.yaxis),w.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,d/2,Math.PI,
a.xaxis,a.yaxis);w.lineWidth=c;w.strokeStyle=a.color;b(a.datapoints,e,I(a.points,a.color),0,2*Math.PI,a.xaxis,a.yaxis);w.restore()}function q(a,b,c,d,e,g,f,h,j,k,l){var p,m,r,n;l?(n=m=r=!0,p=!1,l=c,c=b+d,e=b+e,a<l&&(b=a,a=l,l=b,p=!0,m=!1)):(p=m=r=!0,n=!1,l=a+d,a+=e,e=c,c=b,c<e&&(b=c,c=e,e=b,n=!0,r=!1));if(!(a<h.min||l>h.max||c<j.min||e>j.max)){if(l<h.min)l=h.min,p=!1;if(a>h.max)a=h.max,m=!1;if(e<j.min)e=j.min,n=!1;if(c>j.max)c=j.max,r=!1;l=h.p2c(l);e=j.p2c(e);a=h.p2c(a);c=j.p2c(c);if(f)k.beginPath(),
k.moveTo(l,e),k.lineTo(l,c),k.lineTo(a,c),k.lineTo(a,e),k.fillStyle=f(e,c),k.fill();if(p||m||r||n)k.beginPath(),k.moveTo(l,e+g),p?k.lineTo(l,c+g):k.moveTo(l,c+g),r?k.lineTo(a,c+g):k.moveTo(a,c+g),m?k.lineTo(a,e+g):k.moveTo(a,e+g),n?k.lineTo(l,e+g):k.moveTo(l,e+g),k.stroke()}}function V(a){w.save();w.translate(D.left,D.top);w.lineWidth=a.bars.lineWidth;w.strokeStyle=a.color;var b=a.bars.align=="left"?0:-a.bars.barWidth/2;(function(b,c,d,e,g,f,h){for(var j=b.points,b=b.pointsize,k=0;k<j.length;k+=b)j[k]!=
null&&q(j[k],j[k+1],j[k+2],c,d,e,g,f,h,w,a.bars.horizontal)})(a.datapoints,b,b+a.bars.barWidth,0,a.bars.fill?function(b,c){return I(a.bars,a.color,b,c)}:null,a.xaxis,a.yaxis);w.restore()}function I(a,c,d,e){var g=a.fill;if(!g)return null;if(a.fillColor)return X(a.fillColor,d,e,c);a=b.color.parse(c);a.a=typeof g=="number"?g:0.4;a.normalize();return a.toString()}function ea(){a.find(".legend").remove();if(A.legend.show){var c=[],e=!1,g=A.legend.labelFormatter,f,h;for(i=0;i<S.length;++i)if(f=S[i],h=
f.label)i%A.legend.noColumns==0&&(e&&c.push("</tr>"),c.push("<tr>"),e=!0),g&&(h=g(h,f)),c.push('<td class="legendColorBox"><div style="border:1px solid '+A.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+f.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h+"</td>");e&&c.push("</tr>");if(c.length!=0)if(e='<table style="font-size:smaller;color:'+A.grid.color+'">'+c.join("")+"</table>",A.legend.container!=null)b(A.legend.container).html(e);
else if(c="",g=A.legend.position,f=A.legend.margin,f[0]==null&&(f=[f,f]),g.charAt(0)=="n"?c+="top:"+(f[1]+D.top)+"px;":g.charAt(0)=="s"&&(c+="bottom:"+(f[1]+D.bottom)+"px;"),g.charAt(1)=="e"?c+="right:"+(f[0]+D.right)+"px;":g.charAt(1)=="w"&&(c+="left:"+(f[0]+D.left)+"px;"),e=b('<div class="legend">'+e.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(a),A.legend.backgroundOpacity!=0){g=A.legend.backgroundColor;if(g==null)g=(g=A.grid.backgroundColor)&&typeof g=="string"?b.color.parse(g):
b.color.extract(e,"background-color"),g.a=1,g=g.toString();f=e.children();b('<div style="position:absolute;width:'+f.width()+"px;height:"+f.height()+"px;"+c+"background-color:"+g+';"> </div>').prependTo(e).css("opacity",A.legend.backgroundOpacity)}}}function na(a){A.grid.hoverable&&v("plothover",a,function(a){return a.hoverable!=!1})}function Z(a){v("plotclick",a,function(a){return a.clickable!=!1})}function v(b,c,e){var g=G.offset(),f={pageX:c.pageX,pageY:c.pageY},j=c.pageX-g.left-D.left,c=c.pageY-
g.top-D.top;if(C.xaxis.used)f.x=C.xaxis.c2p(j);if(C.yaxis.used)f.y=C.yaxis.c2p(c);if(C.x2axis.used)f.x2=C.x2axis.c2p(j);if(C.y2axis.used)f.y2=C.y2axis.c2p(c);var k=A.grid.mouseActiveRadius,l=k*k+1,p=null,m,n;for(m=0;m<S.length;++m)if(e(S[m])){var w=S[m],q=w.xaxis,u=w.yaxis,Q=w.datapoints.points,E=w.datapoints.pointsize,W=q.c2p(j),v=u.c2p(c),x=k/q.scale,ka=k/u.scale;if(w.lines.show||w.points.show)for(n=0;n<Q.length;n+=E){var y=Q[n],F=Q[n+1];if(y!=null&&!(y-W>x||y-W<-x||F-v>ka||F-v<-ka))y=Math.abs(q.p2c(y)-
j),F=Math.abs(u.p2c(F)-c),F=y*y+F*F,F<=l&&(l=F,p=[m,n/E])}if(w.bars.show&&!p){q=w.bars.align=="left"?0:-w.bars.barWidth/2;w=q+w.bars.barWidth;for(n=0;n<Q.length;n+=E)if(y=Q[n],F=Q[n+1],u=Q[n+2],y!=null&&(S[m].bars.horizontal?W<=Math.max(u,y)&&W>=Math.min(u,y)&&v>=F+q&&v<=F+w:W>=y+q&&W<=y+w&&v>=Math.min(u,F)&&v<=Math.max(u,F)))p=[m,n/E]}}p?(m=p[0],n=p[1],E=S[m].datapoints.pointsize,e={datapoint:S[m].datapoints.points.slice(n*E,(n+1)*E),dataIndex:n,series:S[m],seriesIndex:m}):e=null;if(e)e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+
g.left+D.left),e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+g.top+D.top);if(A.grid.autoHighlight){for(g=0;g<oa.length;++g)j=oa[g],j.auto==b&&(!e||!(j.series==e.series&&j.point==e.datapoint))&&r(j.series,j.point);e&&h(e.series,e.datapoint,b)}a.trigger(b,[f,e])}function x(){Ea||(Ea=setTimeout(p,30))}function p(){Ea=null;W.save();W.clearRect(0,0,fa,qa);W.translate(D.left,D.top);var a,c;for(a=0;a<oa.length;++a)if(c=oa[a],c.series.bars.show)ka(c.series,c.point);else{var d=c.series,e=c.point;c=e[0];
var e=e[1],g=d.xaxis,f=d.yaxis;if(!(c<g.min||c>g.max||e<f.min||e>f.max)){var h=d.points.radius+d.points.lineWidth/2;W.lineWidth=h;W.strokeStyle=b.color.parse(d.color).scale("a",0.5).toString();d=1.5*h;W.beginPath();W.arc(g.p2c(c),f.p2c(e),d,0,2*Math.PI,!1);W.stroke()}}W.restore();j(la.drawOverlay,[W])}function h(a,b,c){typeof a=="number"&&(a=S[a]);typeof b=="number"&&(b=a.data[b]);var d=Q(a,b);if(d==-1)oa.push({series:a,point:b,auto:c}),x();else if(!c)oa[d].auto=!1}function r(a,b){a==null&&b==null&&
(oa=[],x());typeof a=="number"&&(a=S[a]);typeof b=="number"&&(b=a.data[b]);var c=Q(a,b);c!=-1&&(oa.splice(c,1),x())}function Q(a,b){for(var c=0;c<oa.length;++c){var d=oa[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function ka(a,c){W.lineWidth=a.bars.lineWidth;W.strokeStyle=b.color.parse(a.color).scale("a",0.5).toString();var d=b.color.parse(a.color).scale("a",0.5).toString(),e=a.bars.align=="left"?0:-a.bars.barWidth/2;q(c[0],c[1],c[2]||0,e,e+a.bars.barWidth,0,function(){return d},
a.xaxis,a.yaxis,W,a.bars.horizontal)}function X(a,c,d,e){if(typeof a=="string")return a;else{for(var c=w.createLinearGradient(0,d,0,c),d=0,g=a.colors.length;d<g;++d){var f=a.colors[d];typeof f!="string"&&(f=b.color.parse(e).scale("rgb",f.brightness),f.a*=f.opacity,f=f.toString());c.addColorStop(d/(g-1),f)}return c}}var S=[],A={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,
backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff"},lines:{lineWidth:2,fill:!1,fillColor:null,
steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,tickColor:"rgba(0,0,0,0.15)",labelMargin:5,borderWidth:2,borderColor:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},wa=null,U=null,G=null,w=null,W=null,C={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},D={left:0,right:0,top:0,bottom:0},fa=0,qa=
0,ra=0,ja=0,la={processOptions:[],processRawData:[],processDatapoints:[],draw:[],bindEvents:[],drawOverlay:[]},Y=this;Y.setData=k;Y.setupGrid=u;Y.draw=aa;Y.getPlaceholder=function(){return a};Y.getCanvas=function(){return wa};Y.getPlotOffset=function(){return D};Y.width=function(){return ra};Y.height=function(){return ja};Y.offset=function(){var a=G.offset();a.left+=D.left;a.top+=D.top;return a};Y.getData=function(){return S};Y.getAxes=function(){return C};Y.getOptions=function(){return A};Y.highlight=
h;Y.unhighlight=r;Y.triggerRedrawOverlay=x;Y.pointOffset=function(a){return{left:parseInt(l(a,"xaxis").p2c(+a.x)+D.left),top:parseInt(l(a,"yaxis").p2c(+a.y)+D.top)}};Y.hooks=la;(function(){for(var a=0;a<g.length;++a){var c=g[a];c.init(Y);c.options&&b.extend(!0,A,c.options)}})(Y);(function(a){b.extend(!0,A,a);if(A.grid.borderColor==null)A.grid.borderColor=A.grid.color;if(A.xaxis.noTicks&&A.xaxis.ticks==null)A.xaxis.ticks=A.xaxis.noTicks;if(A.yaxis.noTicks&&A.yaxis.ticks==null)A.yaxis.ticks=A.yaxis.noTicks;
if(A.grid.coloredAreas)A.grid.markings=A.grid.coloredAreas;if(A.grid.coloredAreasColor)A.grid.markingsColor=A.grid.coloredAreasColor;A.lines&&b.extend(!0,A.series.lines,A.lines);A.points&&b.extend(!0,A.series.points,A.points);A.bars&&b.extend(!0,A.series.bars,A.bars);if(A.shadowSize)A.series.shadowSize=A.shadowSize;for(var c in la)A.hooks[c]&&A.hooks[c].length&&(la[c]=la[c].concat(A.hooks[c]));j(la.processOptions,[A])})(f);(function(){function c(a,d){var e=document.createElement("canvas");e.width=
a;e.height=d;b.browser.msie&&(e=window.G_vmlCanvasManager.initElement(e));return e}fa=a.width();qa=a.height();a.html("");a.css("position")=="static"&&a.css("position","relative");if(fa<=0||qa<=0)throw"Invalid dimensions for plot, width = "+fa+", height = "+qa;b.browser.msie&&window.G_vmlCanvasManager.init_(document);wa=b(c(fa,qa)).appendTo(a).get(0);w=wa.getContext("2d");U=b(c(fa,qa)).css({position:"absolute",left:0,top:0}).appendTo(a).get(0);W=U.getContext("2d");W.stroke()})();k(e);u();aa();G=b([U,
wa]);A.grid.hoverable&&G.mousemove(na);A.grid.clickable&&G.click(Z);j(la.bindEvents,[G]);var oa=[],Ea=null}function c(a,b){return b*Math.floor(a/b)}b.plot=function(c,e,f){return new a(b(c),e,f,b.plot.plugins)};b.plot.plugins=[];b.plot.formatDate=function(a,b,c){var g=function(a){a=""+a;return a.length==1?"0"+a:a},j=[],k=!1,l=a.getUTCHours(),m=l<12;c==null&&(c="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","));b.search(/%p|%P/)!=-1&&(l>12?l-=12:l==0&&(l=12));for(var u=0;u<b.length;++u){var n=
b.charAt(u);if(k){switch(n){case "h":n=""+l;break;case "H":n=g(l);break;case "M":n=g(a.getUTCMinutes());break;case "S":n=g(a.getUTCSeconds());break;case "d":n=""+a.getUTCDate();break;case "m":n=""+(a.getUTCMonth()+1);break;case "y":n=""+a.getUTCFullYear();break;case "b":n=""+c[a.getUTCMonth()];break;case "p":n=m?"am":"pm";break;case "P":n=m?"AM":"PM"}j.push(n);k=!1}else n=="%"?k=!0:j.push(n)}return j.join("")}})(jQuery);
(function(b){function a(a,d){this.$element=b(a);this.options=d;this.enabled=!0;this.fixTitle()}a.prototype={show:function(){var a=this.getTitle();if(a&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](a);d[0].className="tipsy";d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var a=b.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),e=d[0].offsetWidth,f=d[0].offsetHeight,
g=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,j;switch(g.charAt(0)){case "n":j={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-e/2-this.options.offsetOpposite};break;case "s":j={top:a.top-f-this.options.offset,left:a.left+a.width/2-e/2-this.options.offsetOpposite};break;case "e":j={top:a.top+a.height/2-f/2-this.options.offsetOpposite,left:a.left-e-this.options.offset};break;case "w":j={top:a.top+a.height/2-f/2-this.options.offsetOpposite,
left:a.left+a.width+this.options.offset}}if(g.length==2)j.left=g.charAt(1)=="w"?a.left+a.width/2-15-this.options.offsetOpposite:a.left+a.width/2-e+15-this.options.offsetOpposite;d.css(j).addClass("tipsy-"+g);this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){b(this).remove()}):this.tip().remove()},
fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("original-title")!="string")a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,e=this.options;this.fixTitle();e=this.options;typeof e.title=="string"?a=b.attr(e.title=="title"?"original-title":e.title):typeof e.title=="function"&&(a=e.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||e.fallback},tip:function(){if(!this.$tip)this.$tip=b('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');
return this.$tip},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};b.fn.tipsy=function(c){function d(d){var e=b.data(d,"tipsy");e||(e=new a(d,b.fn.tipsy.elementOptions(d,c)),b.data(d,"tipsy",e));return e}function e(){var a=d(this);a.hoverState="in";c.delayIn==0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},
c.delayIn))}function f(){var a=d(this);a.hoverState="out";c.delayOut==0?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},c.delayOut)}if(c===!0)return this.data("tipsy");else if(typeof c=="string"){var g=this.data("tipsy");if(g)g[c]();return this}c=b.extend({},b.fn.tipsy.defaults,c);c.live||this.each(function(){d(this)});if(c.trigger!="manual"){var g=c.live?"live":"bind",j=c.trigger=="hover"?"mouseleave":"blur";this[g](c.trigger=="hover"?"mouseenter":"focus",e)[g](j,f)}return this};b.fn.tipsy.defaults=
{delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,offsetOpposite:0,opacity:0.8,title:"title",trigger:"hover"};b.fn.tipsy.elementOptions=function(a,d){return b.metadata?b.extend({},d,b(a).metadata()):d};b.fn.tipsy.autoNS=function(){return b(this).offset().top>b(document).scrollTop()+b(window).height()/2?"s":"n"};b.fn.tipsy.autoWE=function(){return b(this).offset().left>b(document).scrollLeft()+b(window).width()/2?"e":"w"}})(jQuery);
(function(b,a){b.version="0.8.7";b.protocol=1;b.transports=[];b.j=[];b.sockets={};b.connect=function(c,d){var e=b.util.parseUri(c),f,g;if(a&&a.location)e.protocol=e.protocol||a.location.protocol.slice(0,-1),e.host=e.host||(a.document?a.document.domain:a.location.hostname),e.port=e.port||a.location.port;f=b.util.uniqueUri(e);var j={host:e.host,secure:"https"==e.protocol,port:e.port||("https"==e.protocol?443:80),query:e.query||""};b.util.merge(j,d);if(j["force new connection"]||!b.sockets[f])g=new b.Socket(j);
!j["force new connection"]&&g&&(b.sockets[f]=g);g=g||b.sockets[f];return g.of(e.path.length>1?e.path:"")}})("object"===typeof module?module.exports:this.io={},this);
(function(b,a){var c=b.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e="source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(",");c.parseUri=function(a){for(var a=d.exec(a||""),b={},c=14;c--;)b[e[c]]=a[c]||"";return b};c.uniqueUri=function(b){var c=b.protocol,d=b.host,b=b.port;"document"in
a?(d=d||document.domain,b=b||(c=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(d=d||"localhost",!b&&c=="https"&&(b=443));return(c||"http")+"://"+d+":"+(b||80)};c.query=function(a,b){var d=c.chunkQuery(a||""),e=[];c.merge(d,c.chunkQuery(b||""));for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return e.length?"?"+e.join("&"):""};c.chunkQuery=function(a){for(var b={},a=a.split("&"),c=0,d=a.length,e;c<d;++c)e=a[c].split("="),e[0]&&(b[e[0]]=decodeURIComponent(e[1]));
return b};var f=!1;c.load=function(b){if("document"in a&&document.readyState==="complete"||f)return b();c.on(a,"load",b,!1)};c.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)};c.request=function(a){if(a&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!a||c.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}return null};"undefined"!=typeof window&&
c.load(function(){f=!0});c.defer=function(a){if(!c.ua.webkit||"undefined"!=typeof importScripts)return a();c.load(function(){setTimeout(a,100)})};c.merge=function(a,b,d,e){var e=e||[],d=typeof d=="undefined"?2:d,f;for(f in b)b.hasOwnProperty(f)&&c.indexOf(e,f)<0&&(typeof a[f]!=="object"||!d?(a[f]=b[f],e.push(b[f])):c.merge(a[f],b[f],d-1,e));return a};c.mixin=function(a,b){c.merge(a.prototype,b.prototype)};c.inherit=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c};c.isArray=Array.isArray||
function(a){return Object.prototype.toString.call(a)==="[object Array]"};c.intersect=function(a,b){for(var d=[],e=a.length>b.length?a:b,f=a.length>b.length?b:a,u=0,n=f.length;u<n;u++)~c.indexOf(e,f[u])&&d.push(f[u]);return d};c.indexOf=function(a,b,c){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b,c);for(var d=a.length,c=c<0?c+d<0?0:c+d:c||0;c<d&&a[c]!==b;c++);return d<=c?-1:c};c.toArray=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b};c.ua={};c.ua.hasCORS=
"undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(b){return!1}return a.withCredentials!=void 0}();c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);
(function(b,a){function c(){}b.EventEmitter=c;c.prototype.on=function(b,c){if(!this.$events)this.$events={};this.$events[b]?a.util.isArray(this.$events[b])?this.$events[b].push(c):this.$events[b]=[this.$events[b],c]:this.$events[b]=c;return this};c.prototype.addListener=c.prototype.on;c.prototype.once=function(a,b){function c(){g.removeListener(a,c);b.apply(this,arguments)}var g=this;c.listener=b;this.on(a,c);return this};c.prototype.removeListener=function(b,c){if(this.$events&&this.$events[b]){var f=
this.$events[b];if(a.util.isArray(f)){for(var g=-1,j=0,k=f.length;j<k;j++)if(f[j]===c||f[j].listener&&f[j].listener===c){g=j;break}if(g<0)return this;f.splice(g,1);f.length||delete this.$events[b]}else(f===c||f.listener&&f.listener===c)&&delete this.$events[b]}return this};c.prototype.removeAllListeners=function(a){this.$events&&this.$events[a]&&(this.$events[a]=null);return this};c.prototype.listeners=function(b){if(!this.$events)this.$events={};this.$events[b]||(this.$events[b]=[]);a.util.isArray(this.$events[b])||
(this.$events[b]=[this.$events[b]]);return this.$events[b]};c.prototype.emit=function(b){if(!this.$events)return!1;var c=this.$events[b];if(!c)return!1;var f=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,f);else if(a.util.isArray(c))for(var c=c.slice(),g=0,j=c.length;g<j;g++)c[g].apply(this,f);else return!1;return!0}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(b,a){function c(a){return a<10?"0"+a:a}function d(a){j.lastIndex=0;return j.test(a)?'"'+a.replace(j,function(a){var b=m[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var g,f,j,m,y=k,P,K=b[a];K instanceof Date&&(K=isFinite(a.valueOf())?a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z":null);typeof u==="function"&&(K=u.call(b,
a,K));switch(typeof K){case "string":return d(K);case "number":return isFinite(K)?String(K):"null";case "boolean":case "null":return String(K);case "object":if(!K)return"null";k+=l;P=[];if(Object.prototype.toString.apply(K)==="[object Array]"){m=K.length;for(g=0;g<m;g+=1)P[g]=e(g,K)||"null";j=P.length===0?"[]":k?"[\n"+k+P.join(",\n"+k)+"\n"+y+"]":"["+P.join(",")+"]";k=y;return j}if(u&&typeof u==="object"){m=u.length;for(g=0;g<m;g+=1)typeof u[g]==="string"&&(f=u[g],(j=e(f,K))&&P.push(d(f)+(k?": ":
":")+j))}else for(f in K)Object.prototype.hasOwnProperty.call(K,f)&&(j=e(f,K))&&P.push(d(f)+(k?": ":":")+j);j=P.length===0?"{}":k?"{\n"+k+P.join(",\n"+k)+"\n"+y+"}":"{"+P.join(",")+"}";k=y;return j}}if(a&&a.parse)return b.JSON={parse:a.parse,stringify:a.stringify};var f=b.JSON={},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k,l,m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u;f.stringify=function(a,b,c){var d;l=k="";if(typeof c==="number")for(d=0;d<c;d+=1)l+=" ";else typeof c==="string"&&(l=c);if((u=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return e("",{"":a})};f.parse=function(a,b){function c(a,d){var e,g,f=a[d];if(f&&typeof f==="object")for(e in f)Object.prototype.hasOwnProperty.call(f,e)&&(g=c(f,e),g!==void 0?
f[e]=g:delete f[e]);return b.call(a,d,f)}var d,a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof b==="function"?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,
typeof JSON!=="undefined"?JSON:void 0);
(function(b,a){var c=b.parser={},d=c.packets="disconnect,connect,heartbeat,message,json,event,ack,error,noop".split(","),e=c.reasons=["transport not supported","client not handshaken","unauthorized"],f=c.advice=["reconnect"],g=a.JSON,j=a.util.indexOf;c.encodePacket=function(a){var b=j(d,a.type),c=a.id||"",k=a.endpoint||"",F=a.ack,E=null;switch(a.type){case "error":var aa=a.reason?j(e,a.reason):"",a=a.advice?j(f,a.advice):"";if(aa!==""||a!=="")E=aa+(a!==""?"+"+a:"");break;case "message":if(a.data!==
"")E=a.data;break;case "event":E={name:a.name};if(a.args&&a.args.length)E.args=a.args;E=g.stringify(E);break;case "json":E=g.stringify(a.data);break;case "connect":if(a.qs)E=a.qs;break;case "ack":E=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}b=[b,c+(F=="data"?"+":""),k];E!==null&&E!==void 0&&b.push(E);return b.join(":")};c.encodePayload=function(a){var b="";if(a.length==1)return a[0];for(var c=0,d=a.length;c<d;c++)b+="\ufffd"+a[c].length+"\ufffd"+a[c];return b};var k=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
c.decodePacket=function(a){var b=a.match(k);if(!b)return{};var c=b[2]||"",a=b[5]||"",j={type:d[b[1]],endpoint:b[4]||""};if(c)j.id=c,j.ack=b[3]?"data":!0;switch(j.type){case "error":b=a.split("+");j.reason=e[b[0]]||"";j.advice=f[b[1]]||"";break;case "message":j.data=a||"";break;case "event":try{var F=g.parse(a);j.name=F.name;j.args=F.args}catch(E){}j.args=j.args||[];break;case "json":try{j.data=g.parse(a)}catch(aa){}break;case "connect":j.qs=a||"";break;case "ack":if(b=a.match(/^([0-9]+)(\+)?(.*)/))if(j.ackId=
b[1],j.args=[],b[3])try{j.args=b[3]?g.parse(b[3]):[]}catch(N){}}return j};c.decodePayload=function(a){if(a.charAt(0)=="\ufffd"){for(var b=[],d=1,e="";d<a.length;d++)a.charAt(d)=="\ufffd"?(b.push(c.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return b}else return[c.decodePacket(a)]}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(b,a){function c(a,b){this.socket=a;this.sessid=b}b.Transport=c;a.util.mixin(c,a.EventEmitter);c.prototype.onData=function(b){this.clearCloseTimeout();(this.connected||this.connecting||this.reconnecting)&&this.setCloseTimeout();if(b!==""&&(b=a.parser.decodePayload(b))&&b.length)for(var c=0,f=b.length;c<f;c++)this.onPacket(b[c]);return this};c.prototype.onPacket=function(a){if(a.type=="heartbeat")return this.onHeartbeat();if(a.type=="connect"&&a.endpoint=="")this.onConnect();this.socket.onPacket(a);
return this};c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};c.prototype.onDisconnect=function(){this.close&&this.open&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};c.prototype.onConnect=function(){this.socket.onConnect();return this};c.prototype.clearCloseTimeout=function(){if(this.closeTimeout)clearTimeout(this.closeTimeout),this.closeTimeout=null};c.prototype.clearTimeouts=
function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};c.prototype.packet=function(b){this.send(a.parser.encodePacket(b))};c.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})};c.prototype.onOpen=function(){this.open=!0;this.clearCloseTimeout();this.socket.onOpen()};c.prototype.onClose=function(){this.open=!1;this.socket.onClose();this.onDisconnect()};c.prototype.prepareUrl=function(){var b=this.socket.options;return this.scheme()+"://"+b.host+":"+
b.port+"/"+b.resource+"/"+a.protocol+"/"+this.name+"/"+this.sessid};c.prototype.ready=function(a,b){b.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(b,a,c){function d(b){this.options={port:80,secure:!1,document:"document"in c?document:!1,resource:"socket.io",transports:a.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843};a.util.merge(this.options,b);this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=
[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||a.util.ua.hasCORS)){var d=this;a.util.on(c,"beforeunload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function e(){}b.Socket=d;a.util.mixin(d,a.EventEmitter);d.prototype.of=function(b){this.namespaces[b]||(this.namespaces[b]=new a.SocketNamespace(this,b),b!==""&&this.namespaces[b].packet({type:"connect"}));return this.namespaces[b]};d.prototype.publish=function(){this.emit.apply(this,
arguments);var a,b;for(b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))};d.prototype.handshake=function(b){function c(a){if(a instanceof Error)d.onError(a.message);else b.apply(null,a.split(":"))}var d=this,k=this.options,k=["http"+(k.secure?"s":"")+":/",k.host+":"+k.port,k.resource,a.protocol,a.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!a.util.ua.hasCORS){var l=document.getElementsByTagName("script")[0],m=document.createElement("script");
m.src=k+"&jsonp="+a.j.length;l.parentNode.insertBefore(m,l);a.j.push(function(a){c(a);m.parentNode.removeChild(m)})}else{var u=a.util.request();u.open("GET",k,!0);u.onreadystatechange=function(){if(u.readyState==4)u.onreadystatechange=e,u.status==200?c(u.responseText):!d.reconnecting&&d.onError(u.responseText)};u.send(null)}};d.prototype.getTransport=function(b){for(var b=b||this.transports,c=0,d;d=b[c];c++)if(a.Transport[d]&&a.Transport[d].check(this)&&(!this.isXDomain()||a.Transport[d].xdomainCheck()))return new a.Transport[d](this,
this.sessionid);return null};d.prototype.connect=function(b){if(this.connecting)return this;var c=this;this.handshake(function(d,e,l,m){function u(a){c.transport&&c.transport.clearTimeouts();c.transport=c.getTransport(a);if(!c.transport)return c.publish("connect_failed");c.transport.ready(c,function(){c.connecting=!0;c.publish("connecting",c.transport.name);c.transport.open();if(c.options["connect timeout"])c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){if(!c.remainingTransports)c.remainingTransports=
c.transports.slice(0);for(var a=c.remainingTransports;a.length>0&&a.splice(0,1)[0]!=c.transport.name;);a.length?u(a):c.publish("connect_failed")}},c.options["connect timeout"])})}c.sessionid=d;c.closeTimeout=l*1E3;c.heartbeatTimeout=e*1E3;c.transports=a.util.intersect(m.split(","),c.options.transports);u();c.once("connect",function(){clearTimeout(c.connectTimeoutTimer);b&&typeof b=="function"&&b()})});return this};d.prototype.packet=function(a){this.connected&&!this.doBuffer?this.transport.packet(a):
this.buffer.push(a);return this};d.prototype.setBuffer=function(a){this.doBuffer=a;if(!a&&this.connected&&this.buffer.length)this.transport.payload(this.buffer),this.buffer=[]};d.prototype.disconnect=function(){this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted"));return this};d.prototype.disconnectSync=function(){a.util.request().open("GET",this.resource+"/"+a.protocol+"/"+this.sessionid,!0);this.onDisconnect("booted")};d.prototype.isXDomain=function(){var a=
c.location.port||("https:"==c.location.protocol?443:80);return this.options.host!==c.location.hostname||this.options.port!=a};d.prototype.onConnect=function(){if(!this.connected)this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect")};d.prototype.onOpen=function(){this.open=!0};d.prototype.onClose=function(){this.open=!1};d.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};d.prototype.onError=function(a){a&&a.advice&&a.advice==="reconnect"&&this.connected&&
(this.disconnect(),this.reconnect());this.publish("error",a&&a.reason?a.reason:a)};d.prototype.onDisconnect=function(a){var b=this.connected;this.open=this.connecting=this.connected=!1;b&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect())};d.prototype.reconnect=function(){function a(){if(c.connected){for(var d in c.namespaces)c.namespaces.hasOwnProperty(d)&&""!==d&&c.namespaces[d].packet({type:"connect"});
c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}c.removeListener("connect_failed",b);c.removeListener("connect",b);c.reconnecting=!1;delete c.reconnectionAttempts;delete c.reconnectionDelay;delete c.reconnectionTimer;delete c.redoTransports;c.options["try multiple transports"]=e}function b(){if(c.reconnecting){if(c.connected)return a();if(c.connecting&&c.reconnecting)return c.reconnectionTimer=setTimeout(b,1E3);c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),
a()):(c.on("connect_failed",b),c.options["try multiple transports"]=!0,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<m&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],e=this.options["try multiple transports"],
m=this.options["reconnection limit"];this.options["try multiple transports"]=!1;this.reconnectionTimer=setTimeout(b,this.reconnectionDelay);this.on("connect",b)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(b,a){function c(a,b){this.socket=a;this.name=b||"";this.flags={};this.json=new d(this,"json");this.ackPackets=0;this.acks={}}function d(a,b){this.namespace=a;this.name=b}b.SocketNamespace=c;a.util.mixin(c,a.EventEmitter);c.prototype.$emit=a.EventEmitter.prototype.emit;c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};c.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};c.prototype.send=function(a,b){var c={type:this.flags.json?
"json":"message",data:a};if("function"==typeof b)c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b;return this.packet(c)};c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};if("function"==typeof c)d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1);d.args=b;return this.packet(d)};c.prototype.disconnect=function(){this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));
return this};c.prototype.onPacket=function(b){function c(){d.packet({type:"ack",args:a.util.toArray(arguments),ackId:b.id})}var d=this;switch(b.type){case "connect":this.$emit("connect");break;case "disconnect":if(this.name==="")this.socket.onDisconnect(b.reason||"booted");else this.$emit("disconnect",b.reason);break;case "message":case "json":var j=["message",b.data];b.ack=="data"?j.push(c):b.ack&&this.packet({type:"ack",ackId:b.id});this.$emit.apply(this,j);break;case "event":j=[b.name].concat(b.args);
b.ack=="data"&&j.push(c);this.$emit.apply(this,j);break;case "ack":this.acks[b.ackId]&&(this.acks[b.ackId].apply(this,b.args),delete this.acks[b.ackId]);break;case "error":if(b.advice)this.socket.onError(b);else b.reason=="unauthorized"?this.$emit("connect_failed",b.reason):this.$emit("error",b.reason)}};d.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};d.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,
arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(b,a,c){function d(b){a.Transport.apply(this,arguments)}b.websocket=d;a.util.inherit(d,a.Transport);d.prototype.name="websocket";d.prototype.open=function(){var b=a.util.query(this.socket.options.query),d=this,g;g||(g=c.MozWebSocket||c.WebSocket);this.websocket=new g(this.prepareUrl()+b);this.websocket.onopen=function(){d.onOpen();d.socket.setBuffer(!1)};this.websocket.onmessage=function(a){d.onData(a.data)};this.websocket.onclose=function(){d.onClose();d.socket.setBuffer(!0)};this.websocket.onerror=
function(a){d.onError(a)};return this};d.prototype.send=function(a){this.websocket.send(a);return this};d.prototype.payload=function(a){for(var b=0,c=a.length;b<c;b++)this.packet(a[b]);return this};d.prototype.close=function(){this.websocket.close();return this};d.prototype.onError=function(a){this.socket.onError(a)};d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};d.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c};d.xdomainCheck=function(){return!0};
a.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(b,a){function c(){a.Transport.websocket.apply(this,arguments)}b.flashsocket=c;a.util.inherit(c,a.Transport.websocket);c.prototype.name="flashsocket";c.prototype.open=function(){var b=this,c=arguments;WebSocket.__addTask(function(){a.Transport.websocket.prototype.open.apply(b,c)});return this};c.prototype.send=function(){var b=this,c=arguments;WebSocket.__addTask(function(){a.Transport.websocket.prototype.send.apply(b,c)});return this};c.prototype.close=function(){WebSocket.__tasks.length=
0;a.Transport.websocket.prototype.close.call(this);return this};c.prototype.ready=function(b,e){function f(){var a=b.options,f=a["flash policy port"],l=["http"+(a.secure?"s":"")+":/",a.host+":"+a.port,a.resource,"static/flashsocket","WebSocketMain"+(b.isXDomain()?"Insecure":"")+".swf"];if(!c.loaded)typeof WEB_SOCKET_SWF_LOCATION==="undefined"&&(WEB_SOCKET_SWF_LOCATION=l.join("/")),f!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+a.host+":"+f),WebSocket.__initialize(),c.loaded=!0;e.call(g)}var g=
this;if(document.body)return f();a.util.load(f)};c.check=function(){return typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!swfobject?!1:swfobject.getFlashPlayerVersion().major>=10};c.xdomainCheck=function(){return!0};typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);a.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
if("undefined"!=typeof window)var swfobject=function(){function b(){if(!X){try{var a=I.getElementsByTagName("body")[0].appendChild(I.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}X=!0;for(var a=Z.length,c=0;c<a;c++)Z[c]()}}function a(a){X?a():Z[Z.length]=a}function c(a){if(typeof V.addEventListener!=y)V.addEventListener("load",a,!1);else if(typeof I.addEventListener!=y)I.addEventListener("load",a,!1);else if(typeof V.attachEvent!=y)F(V,"onload",a);else if(typeof V.onload=="function"){var b=
V.onload;V.onload=function(){b();a()}}else V.onload=a}function d(){var a=I.getElementsByTagName("body")[0],b=I.createElement(P);b.setAttribute("type",K);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=y){var g=c.GetVariable("$version");if(g)g=g.split(" ")[1].split(","),G.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}else if(d<10){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}function e(){var a=v.length;if(a>0)for(var b=0;b<
a;b++){var c=v[b].id,d=v[b].callbackFn,e={success:!1,id:c};if(G.pv[0]>0){var h=n(c);if(h)if(E(v[b].swfVersion)&&!(G.wk&&G.wk<312)){if(N(c,!0),d)e.success=!0,e.ref=f(c),d(e)}else if(v[b].expressInstall&&g()){e={};e.data=v[b].expressInstall;e.width=h.getAttribute("width")||"0";e.height=h.getAttribute("height")||"0";if(h.getAttribute("class"))e.styleclass=h.getAttribute("class");if(h.getAttribute("align"))e.align=h.getAttribute("align");for(var l={},h=h.getElementsByTagName("param"),p=h.length,m=0;m<
p;m++)h[m].getAttribute("name").toLowerCase()!="movie"&&(l[h[m].getAttribute("name")]=h[m].getAttribute("value"));j(e,l,c,d)}else k(h),d&&d(e)}else if(N(c,!0),d){if((c=f(c))&&typeof c.SetVariable!=y)e.success=!0,e.ref=c;d(e)}}}function f(a){var b=null;if((a=n(a))&&a.nodeName=="OBJECT")typeof a.SetVariable!=y?b=a:(a=a.getElementsByTagName(P)[0])&&(b=a);return b}function g(){return!S&&E("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function j(a,b,c,d){S=!0;Q=d||null;ka={success:!1,id:c};var e=n(c);if(e){e.nodeName==
"OBJECT"?(h=l(e),r=null):(h=e,r=c);a.id=q;if(typeof a.width==y||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==y||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";I.title=I.title.slice(0,47)+" - Flash Player Installation";d=G.ie&&G.win?"ActiveX":"PlugIn";d="MMredirectURL="+V.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+I.title;typeof b.flashvars!=y?b.flashvars+="&"+d:b.flashvars=d;if(G.ie&&G.win&&e.readyState!=4)d=I.createElement("div"),
c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}();m(a,b,c)}}function k(a){if(G.ie&&G.win&&a.readyState!=4){var b=I.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(l(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=
I.createElement("div");if(G.win&&G.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(P)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(a[d].nodeType==1&&a[d].nodeName=="PARAM")&&a[d].nodeType!=8&&b.appendChild(a[d].cloneNode(!0));return b}function m(a,b,c){var d,e=n(c);if(G.wk&&G.wk<312)return d;if(e){if(typeof a.id==y)a.id=c;if(G.ie&&G.win){var g="",f;for(f in a)if(a[f]!=Object.prototype[f])f.toLowerCase()=="data"?b.movie=a[f]:f.toLowerCase()=="styleclass"?g+=' class="'+a[f]+'"':
f.toLowerCase()!="classid"&&(g+=" "+f+'="'+a[f]+'"');f="";for(var h in b)b[h]!=Object.prototype[h]&&(f+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+f+"</object>";x[x.length]=a.id;d=n(a.id)}else{h=I.createElement(P);h.setAttribute("type",K);for(var j in a)a[j]!=Object.prototype[j]&&(j.toLowerCase()=="styleclass"?h.setAttribute("class",a[j]):j.toLowerCase()!="classid"&&h.setAttribute(j,a[j]));for(g in b)b[g]!=Object.prototype[g]&&
g.toLowerCase()!="movie"&&(a=h,f=g,j=b[g],c=I.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",j),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}}return d}function u(a){var b=n(a);if(b&&b.nodeName=="OBJECT")G.ie&&G.win?(b.style.display="none",function(){if(b.readyState==4){var c=n(a);if(c){for(var d in c)typeof c[d]=="function"&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function n(a){var b=null;try{b=I.getElementById(a)}catch(c){}return b}
function F(a,b,c){a.attachEvent(b,c);p[p.length]=[a,b,c]}function E(a){var b=G.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function aa(a,b,c,d){if(!G.ie||!G.mac){var e=I.getElementsByTagName("head")[0];if(e){c=c&&typeof c=="string"?c:"screen";d&&(wa=A=null);if(!A||wa!=c)d=I.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),A=e.appendChild(d),
G.ie&&G.win&&typeof I.styleSheets!=y&&I.styleSheets.length>0&&(A=I.styleSheets[I.styleSheets.length-1]),wa=c;G.ie&&G.win?A&&typeof A.addRule==P&&A.addRule(a,b):A&&typeof I.createTextNode!=y&&A.appendChild(I.createTextNode(a+" {"+b+"}"))}}}function N(a,b){if(U){var c=b?"visible":"hidden";X&&n(a)?n(a).style.visibility=c:aa("#"+a,"visibility:"+c)}}function T(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=y?encodeURIComponent(a):a}var y="undefined",P="object",K="application/x-shockwave-flash",
q="SWFObjectExprInst",V=window,I=document,ea=navigator,na=!1,Z=[function(){na?d():e()}],v=[],x=[],p=[],h,r,Q,ka,X=!1,S=!1,A,wa,U=!0,G=function(){var a=typeof I.getElementById!=y&&typeof I.getElementsByTagName!=y&&typeof I.createElement!=y,b=ea.userAgent.toLowerCase(),c=ea.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\u000b1",g=[0,0,0],f=null;if(typeof ea.plugins!=y&&typeof ea.plugins["Shockwave Flash"]==
P){if((f=ea.plugins["Shockwave Flash"].description)&&!(typeof ea.mimeTypes!=y&&ea.mimeTypes[K]&&!ea.mimeTypes[K].enabledPlugin))na=!0,e=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),g[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof V.ActiveXObject!=y)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(f=h.GetVariable("$version")))e=!0,f=f.split(" ")[1].split(","),
g=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}catch(j){}return{w3:a,pv:g,wk:b,ie:e,win:d,mac:c}}();(function(){G.w3&&((typeof I.readyState!=y&&I.readyState=="complete"||typeof I.readyState==y&&(I.getElementsByTagName("body")[0]||I.body))&&b(),X||(typeof I.addEventListener!=y&&I.addEventListener("DOMContentLoaded",b,!1),G.ie&&G.win&&(I.attachEvent("onreadystatechange",function(){I.readyState=="complete"&&(I.detachEvent("onreadystatechange",arguments.callee),b())}),V==top&&function(){if(!X){try{I.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}b()}}()),G.wk&&function(){X||(/loaded|complete/.test(I.readyState)?b():setTimeout(arguments.callee,0))}(),c(b)))})();(function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var a=p.length,b=0;b<a;b++)p[b][0].detachEvent(p[b][1],p[b][2]);a=x.length;for(b=0;b<a;b++)u(x[b]);for(var c in G)G[c]=null;G=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(G.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;v[v.length]=e;N(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(G.w3)return f(a)},embedSWF:function(b,c,d,e,f,h,k,l,p,r){var n={success:!1,id:c};G.w3&&!(G.wk&&G.wk<312)&&b&&c&&d&&e&&f?(N(c,!1),a(function(){d+="";e+="";var a={};if(p&&typeof p===P)for(var q in p)a[q]=p[q];a.data=b;a.width=d;a.height=e;q={};if(l&&typeof l===P)for(var u in l)q[u]=l[u];if(k&&typeof k===P)for(var Q in k)typeof q.flashvars!=y?q.flashvars+="&"+Q+"="+k[Q]:q.flashvars=Q+"="+k[Q];if(E(f))u=m(a,q,c),a.id==
c&&N(c,!0),n.success=!0,n.ref=u;else if(h&&g()){a.data=h;j(a,q,c,r);return}else N(c,!0);r&&r(n)})):r&&r(n)},switchOffAutoHideShow:function(){U=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:E,createSWF:function(a,b,c){if(G.w3)return m(a,b,c)},showExpressInstall:function(a,b,c,d){G.w3&&g()&&j(a,b,c,d)},removeSWF:function(a){G.w3&&u(a)},createCSS:function(a,b,c,d){G.w3&&aa(a,b,c,d)},addDomLoadEvent:a,addLoadEvent:c,getQueryParamValue:function(a){var b=
I.location.search||I.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return T(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return T(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=n(q);if(a&&h){a.parentNode.replaceChild(h,a);if(r&&(N(r,!0),G.ie&&G.win))h.style.display="block";Q&&Q(ka)}S=!1}}}}();
(function(){if(!("undefined"==typeof window||window.WebSocket)){var b=window.console;if(!b||!b.log||!b.error)b={log:function(){},error:function(){}};swfobject.hasFlashPlayerVersion("10.0.0")?(location.protocol=="file:"&&b.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,b,d,e,f){var g=this;g.__id=WebSocket.__nextId++;WebSocket.__instances[g.__id]=g;g.readyState=WebSocket.CONNECTING;
g.bufferedAmount=0;g.__events={};b?typeof b=="string"&&(b=[b]):b=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(g.__id,a,b,d||null,e||0,f||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));return a<0?!0:(this.bufferedAmount+=a,!1)},WebSocket.prototype.close=function(){if(!(this.readyState==WebSocket.CLOSED||
this.readyState==WebSocket.CLOSING))this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(a,b){a in this.__events||(this.__events[a]=[]);this.__events[a].push(b)},WebSocket.prototype.removeEventListener=function(a,b){if(a in this.__events)for(var d=this.__events[a],e=d.length-1;e>=0;--e)if(d[e]===b){d.splice(e,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],d=0;d<b.length;++d)b[d](a);(b=this["on"+
a.type])&&b(a)},WebSocket.prototype.__handleEvent=function(a){if("readyState"in a)this.readyState=a.readyState;if("protocol"in a)this.protocol=a.protocol;if(a.type=="open"||a.type=="error")a=this.__createSimpleEvent(a.type);else if(a.type=="close")a=this.__createSimpleEvent("close");else if(a.type=="message")a=this.__createMessageEvent("message",decodeURIComponent(a.message));else throw"unknown event type: "+a.type;this.dispatchEvent(a)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&
window.Event){var b=document.createEvent("Event");b.initEvent(a,!1,!1);return b}else return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,b){if(document.createEvent&&window.MessageEvent&&!window.opera){var d=document.createEvent("MessageEvent");d.initMessageEvent("message",!1,!1,b,null,null,window,null);return d}else return{type:a,data:b,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=
null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){var a=document.createElement("div");a.id="webSocketContainer";a.style.position="absolute";WebSocket.__isFlashLite()?(a.style.left="0px",a.style.top=
"0px"):(a.style.left="-100px",a.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";a.appendChild(c);document.body.appendChild(a);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||b.error("[WebSocket] swfobject.embedSWF failed")})}else b.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")}},WebSocket.__onFlashInitialized=
function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var a=WebSocket.__flash.receiveEvents(),c=0;c<a.length;++c)WebSocket.__instances[a[c].webSocketId].__handleEvent(a[c])}catch(d){b.error(d)}},0);return!0},
WebSocket.__log=function(a){b.log(decodeURIComponent(a))},WebSocket.__error=function(a){b.error(decodeURIComponent(a))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return!a||!a.enabledPlugin||!a.enabledPlugin.filename?!1:a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||
(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):b.error("Flash Player >= 10.0.0 is required.")}})();
(function(b,a,c){function d(b){if(b)a.Transport.apply(this,arguments),this.sendBuffer=[]}function e(){}b.XHR=d;a.util.inherit(d,a.Transport);d.prototype.open=function(){this.socket.setBuffer(!1);this.onOpen();this.get();this.setCloseTimeout();return this};d.prototype.payload=function(b){for(var c=[],d=0,e=b.length;d<e;d++)c.push(a.parser.encodePacket(b[d]));this.send(a.parser.encodePayload(c))};d.prototype.send=function(a){this.post(a);return this};d.prototype.post=function(a){function b(){if(this.readyState==
4)if(this.onreadystatechange=e,k.posting=!1,this.status==200)k.socket.setBuffer(!1);else k.onClose()}function d(){this.onload=e;k.socket.setBuffer(!1)}var k=this;this.socket.setBuffer(!0);this.sendXHR=this.request("POST");c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=b;this.sendXHR.send(a)};d.prototype.close=function(){this.onClose();return this};d.prototype.request=function(b){var c=a.util.request(this.socket.isXDomain()),
d=a.util.query(this.socket.options.query,"t="+ +new Date);c.open(b||"GET",this.prepareUrl()+d,!0);if(b=="POST")try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(e){}return c};d.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};d.check=function(b,c){try{if(a.util.request(c))return!0}catch(d){}return!1};d.xdomainCheck=function(){return d.check(null,!0)}})("undefined"!=typeof io?io.Transport:module.exports,
"undefined"!=typeof io?io:module.parent.exports,this);
(function(b,a){function c(b){a.Transport.XHR.apply(this,arguments)}b.htmlfile=c;a.util.inherit(c,a.Transport.XHR);c.prototype.name="htmlfile";c.prototype.get=function(){this.doc=new ActiveXObject("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var b=this.doc.createElement("div");b.className="socketio";this.doc.body.appendChild(b);this.iframe=this.doc.createElement("iframe");b.appendChild(this.iframe);var c=this,b=a.util.query(this.socket.options.query,
"t="+ +new Date);this.iframe.src=this.prepareUrl()+b;a.util.on(window,"unload",function(){c.destroy()})};c.prototype._=function(a,b){this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(g){}};c.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};c.prototype.close=function(){this.destroy();return a.Transport.XHR.prototype.close.call(this)};
c.check=function(){if("ActiveXObject"in window)try{return new ActiveXObject("htmlfile")&&a.Transport.XHR.check()}catch(b){}return!1};c.xdomainCheck=function(){return!1};a.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(b,a,c){function d(){a.Transport.XHR.apply(this,arguments)}function e(){}b["xhr-polling"]=d;a.util.inherit(d,a.Transport.XHR);a.util.merge(d,a.Transport.XHR);d.prototype.name="xhr-polling";d.prototype.open=function(){a.Transport.XHR.prototype.open.call(this);return!1};d.prototype.get=function(){function a(){if(this.readyState==4)if(this.onreadystatechange=e,this.status==200)d.onData(this.responseText),d.get();else d.onClose()}function b(){this.onload=e;d.onData(this.responseText);d.get()}
if(this.open){var d=this;this.xhr=this.request();c.XDomainRequest&&this.xhr instanceof XDomainRequest?this.xhr.onload=this.xhr.onerror=b:this.xhr.onreadystatechange=a;this.xhr.send(null)}};d.prototype.onClose=function(){a.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=e;try{this.xhr.abort()}catch(b){}this.xhr=null}};d.prototype.ready=function(b,c){var d=this;a.util.defer(function(){c.call(d)})};a.transports.push("xhr-polling")})("undefined"!=typeof io?
io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(b,a,c){function d(b){a.Transport["xhr-polling"].apply(this,arguments);this.index=a.j.length;var c=this;a.j.push(function(a){c._(a)})}var e=c.document&&"MozAppearance"in c.document.documentElement.style;b["jsonp-polling"]=d;a.util.inherit(d,a.Transport["xhr-polling"]);d.prototype.name="jsonp-polling";d.prototype.post=function(b){function c(){d();e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{F=document.createElement('<iframe name="'+e.iframeId+'">')}catch(a){F=
document.createElement("iframe"),F.name=e.iframeId}F.id=e.iframeId;e.form.appendChild(F);e.iframe=F}var e=this,l=a.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var m=document.createElement("form"),u=document.createElement("textarea"),n=this.iframeId="socketio_iframe_"+this.index,F;m.className="socketio";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";m.target=n;m.method="POST";m.setAttribute("accept-charset","utf-8");u.name="d";m.appendChild(u);
document.body.appendChild(m);this.form=m;this.area=u}this.form.action=this.prepareUrl()+l;d();this.area.value=a.JSON.stringify(b);try{this.form.submit()}catch(E){}this.iframe.attachEvent?F.onreadystatechange=function(){e.iframe.readyState=="complete"&&c()}:this.iframe.onload=c;this.socket.setBuffer(!0)};d.prototype.get=function(){var b=this,c=document.createElement("script"),d=a.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script)this.script.parentNode.removeChild(this.script),
this.script=null;c.async=!0;c.src=this.prepareUrl()+d;c.onerror=function(){b.onClose()};d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);this.script=c;e&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};d.prototype._=function(a){this.onData(a);this.open&&this.get();return this};d.prototype.ready=function(b,c){var d=this;if(!e)return c.call(this);a.util.load(function(){c.call(d)})};d.check=function(){return"document"in
c};d.xdomainCheck=function(){return!0};a.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
window.Inflector={small:"(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|v[.]?|via|vs[.]?)",punct:"([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]*)",titleize:function(b){for(var b=b.replace(/[-.\/_]/g," ").replace(/\s+/gm," "),a=this.capitalize,c=[],d=/[:.;?!] |(?: |^)["\u00d2]/g,e=0;;){var f=d.exec(b);c.push(b.substring(e,f?f.index:b.length).replace(/\b([A-Za-z][a-z.'\u00d5]*)\b/g,function(b){return/[A-Za-z]\.[A-Za-z]/.test(b)?b:a(b)}).replace(RegExp("\\b"+this.small+"\\b","ig"),this.lowercase).replace(RegExp("^"+
this.punct+this.small+"\\b","ig"),function(b,c,d){return c+a(d)}).replace(RegExp("\\b"+this.small+this.punct+"$","ig"),a));e=d.lastIndex;if(f)c.push(f[0]);else break}return c.join("").replace(/ V(s?)\. /ig," v$1. ").replace(/(['\u00d5])S\b/ig,"$1s").replace(/\b(AT&T|Q&A)\b/ig,function(a){return a.toUpperCase()})},trim:function(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")},trimExcerpt:function(b){b=b.replace(/^([^<>]{0,100}?[.,!]|[^<>\s]+)/g,"");b=b.replace(/(([.,!]\s?)[^<>]{0,100}?|[^<>\s]+)$/g,
"$2");return"&hellip;"+b+"&hellip;"},camelize:function(b){var a=b.split("-"),c=a.length;if(c==1)return a[0];for(var b=b.charAt(0)=="-"?a[0].charAt(0).toUpperCase()+a[0].substring(1):a[0],d=1;d<c;d++)b+=a[d].charAt(0).toUpperCase()+a[d].substring(1);return b},lowercase:function(b){return b.toLowerCase()},capitalize:function(b){return b.charAt(0).toUpperCase()+b.substring(1).toLowerCase()},underscore:function(b){return b.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,
"$1_$2").replace(/-/g,"_").toLowerCase()},spacify:function(b){return b.replace(/_/g," ")},dasherize:function(b){return b.replace(/_/g,"-")},singularize:function(b){return b.replace(/s$/,"")},pluralize:function(b,a){return a==1?b:b=="person"?"people":b.match(/y$/i)?b.replace(/y$/i,"ies"):b+"s"},classify:function(b){return this.camelize(this.capitalize(this.dasherize(this.singularize(b))))},possessivize:function(b){var a=b.charAt(b.length-1)=="s";return b+(a?"'":"'s")},truncate:function(b,a,c){a=a||
30;c=_.isUndefined(c)?"...":c;return b.length>a?b.slice(0,a-c.length)+c:b},sluggify:function(b){return $.trim(b.replace(/['"]+/g,"").replace(/\W+/g," ")).toLowerCase().replace(/\s+/g,"-")},commify:function(b,a){var c=[];_.each(b,function(d,e){a.quote&&(d='"'+d+'"');c.push(d);c.push(e==b.length-1?"":e==b.length-2&&a.conjunction?", "+a.conjunction+" ":", ")});return c.join("")},commas:function(b){var a=/(\d+)(\d{3})/;b+="";b=b.split(".");whole=b[0];for(decimal=b.length>1?"."+b[1]:"";a.test(whole);)whole=
whole.replace(a,"$1,$2");return whole+decimal},bytesToMB:function(b){var a=Math.round(b/1024*100)*0.01,b="KB";a>1E3&&(a=Math.round(a*0.1)*0.01,b="MB");a=a.toString().split(".");a=a[0]+(a.length>1?"."+a[1].substr(0,1):"");return a+" "+b},normalizeUrl:function(b){b=Inflector.trim(b);return!b?null:/^https?:\/\//.test(b)?b:"http://"+b},stripTags:function(b){return b.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},escapeRegExp:function(b){return b.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}};
(function(){function b(a,c,d){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a._chain)a=a._wrapped;if(c._chain)c=c._wrapped;if(q.isFunction(a.isEqual))return a.isEqual(c);if(q.isFunction(c.isEqual))return c.isEqual(a);var e=typeof a;if(e!=typeof c)return!1;if(!a!=!c)return!1;if(q.isNaN(a))return q.isNaN(c);var g=q.isString(a),f=q.isString(c);if(g||f)return g&&f&&String(a)==String(c);g=q.isNumber(a);f=q.isNumber(c);if(g||f)return g&&f&&+a==+c;g=q.isBoolean(a);f=q.isBoolean(c);
if(g||f)return g&&f&&+a==+c;g=q.isDate(a);f=q.isDate(c);if(g||f)return g&&f&&a.getTime()==c.getTime();g=q.isRegExp(a);f=q.isRegExp(c);if(g||f)return g&&f&&a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase;if(e!="object")return!1;if(a.length!==c.length)return!1;if(a.constructor!==c.constructor)return!1;for(e=d.length;e--;)if(d[e]==a)return!0;d.push(a);var e=0,g=!0,j;for(j in a)if(l.call(a,j)&&(e++,!(g=l.call(c,j)&&b(a[j],c[j],d))))break;if(g){for(j in c)if(l.call(c,
j)&&!e--)break;g=!e}d.pop();return g}var a=this,c=a._,d={},e=Array.prototype,f=Object.prototype,g=e.slice,j=e.unshift,k=f.toString,l=f.hasOwnProperty,m=e.forEach,u=e.map,n=e.reduce,F=e.reduceRight,E=e.filter,aa=e.every,N=e.some,T=e.indexOf,y=e.lastIndexOf,f=Array.isArray,P=Object.keys,K=Function.prototype.bind,q=function(a){return new Z(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=q;exports._=q}else typeof define==="function"&&define.amd?
define("underscore",function(){return q}):a._=q;q.VERSION="1.2.1";var V=q.each=q.forEach=function(a,b,c){if(a!=null)if(m&&a.forEach===m)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,g=a.length;e<g;e++){if(e in a&&b.call(c,a[e],e,a)===d)break}else for(e in a)if(l.call(a,e)&&b.call(c,a[e],e,a)===d)break};q.map=function(a,b,c){var d=[];if(a==null)return d;if(u&&a.map===u)return a.map(b,c);V(a,function(a,e,g){d[d.length]=b.call(c,a,e,g)});return d};q.reduce=q.foldl=q.inject=function(a,b,c,d){var e=
c!==void 0;a==null&&(a=[]);if(n&&a.reduce===n)return d&&(b=q.bind(b,d)),e?a.reduce(b,c):a.reduce(b);V(a,function(a,g,f){e?c=b.call(d,c,a,g,f):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};q.reduceRight=q.foldr=function(a,b,c,d){a==null&&(a=[]);if(F&&a.reduceRight===F)return d&&(b=q.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b);a=(q.isArray(a)?a.slice():q.toArray(a)).reverse();return q.reduce(a,b,c,d)};q.find=q.detect=function(a,b,c){var d;
I(a,function(a,e,g){if(b.call(c,a,e,g))return d=a,!0});return d};q.filter=q.select=function(a,b,c){var d=[];if(a==null)return d;if(E&&a.filter===E)return a.filter(b,c);V(a,function(a,e,g){b.call(c,a,e,g)&&(d[d.length]=a)});return d};q.reject=function(a,b,c){var d=[];if(a==null)return d;V(a,function(a,e,g){b.call(c,a,e,g)||(d[d.length]=a)});return d};q.every=q.all=function(a,b,c){var b=b||q.identity,e=!0;if(a==null)return e;if(aa&&a.every===aa)return a.every(b,c);V(a,function(a,g,f){if(!(e=e&&b.call(c,
a,g,f)))return d});return e};var I=q.some=q.any=function(a,b,c){var b=b||q.identity,e=!1;if(a==null)return e;if(N&&a.some===N)return a.some(b,c);V(a,function(a,g,f){if(e|=b.call(c,a,g,f))return d});return!!e};q.include=q.contains=function(a,b){var c=!1;if(a==null)return c;return T&&a.indexOf===T?a.indexOf(b)!=-1:c=I(a,function(a){if(a===b)return!0})};q.invoke=function(a,b){var c=g.call(arguments,2);return q.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})};q.pluck=function(a,b){return q.map(a,
function(a){return a[b]})};q.max=function(a,b,c){if(!b&&q.isArray(a))return Math.max.apply(Math,a);if(!b&&q.isEmpty(a))return-Infinity;var d={computed:-Infinity};V(a,function(a,e,g){e=b?b.call(c,a,e,g):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};q.min=function(a,b,c){if(!b&&q.isArray(a))return Math.min.apply(Math,a);if(!b&&q.isEmpty(a))return Infinity;var d={computed:Infinity};V(a,function(a,e,g){e=b?b.call(c,a,e,g):a;e<d.computed&&(d={value:a,computed:e})});return d.value};q.shuffle=
function(a){var b=[],c;V(a,function(a,d){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)});return b};q.sortBy=function(a,b,c){return q.pluck(q.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};q.groupBy=function(a,b){var c={},d=q.isFunction(b)?b:function(a){return a[b]};V(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});return c};q.sortedIndex=function(a,b,c){c||(c=q.identity);
for(var d=0,e=a.length;d<e;){var g=d+e>>1;c(a[g])<c(b)?d=g+1:e=g}return d};q.toArray=function(a){return!a?[]:a.toArray?a.toArray():q.isArray(a)?g.call(a):q.isArguments(a)?g.call(a):q.values(a)};q.size=function(a){return q.toArray(a).length};q.first=q.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]};q.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))};q.last=function(a,b,c){return b!=null&&!c?g.call(a,a.length-b):a[a.length-1]};q.rest=q.tail=function(a,b,c){return g.call(a,
b==null||c?1:b)};q.compact=function(a){return q.filter(a,function(a){return!!a})};q.flatten=function(a,b){return q.reduce(a,function(a,c){if(q.isArray(c))return a.concat(b?c:q.flatten(c));a[a.length]=c;return a},[])};q.without=function(a){return q.difference(a,g.call(arguments,1))};q.uniq=q.unique=function(a,b,c){var c=c?q.map(a,c):a,d=[];q.reduce(c,function(c,e,g){if(0==g||(b===!0?q.last(c)!=e:!q.include(c,e)))c[c.length]=e,d[d.length]=a[g];return c},[]);return d};q.union=function(){return q.uniq(q.flatten(arguments,
!0))};q.intersection=q.intersect=function(a){var b=g.call(arguments,1);return q.filter(q.uniq(a),function(a){return q.every(b,function(b){return q.indexOf(b,a)>=0})})};q.difference=function(a,b){return q.filter(a,function(a){return!q.include(b,a)})};q.zip=function(){for(var a=g.call(arguments),b=q.max(q.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=q.pluck(a,""+d);return c};q.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c)return c=q.sortedIndex(a,b),a[c]===b?c:-1;if(T&&a.indexOf===T)return a.indexOf(b);
for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};q.lastIndexOf=function(a,b){if(a==null)return-1;if(y&&a.lastIndexOf===y)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1};q.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,g=Array(d);e<d;)g[e++]=a,a+=c;return g};var ea=function(){};q.bind=function(a,b){var c,d;if(a.bind===K&&K)return K.apply(a,g.call(arguments,1));if(!q.isFunction(a))throw new TypeError;
d=g.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(g.call(arguments)));ea.prototype=a.prototype;var e=new ea,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}};q.bindAll=function(a){var b=g.call(arguments,1);b.length==0&&(b=q.functions(a));V(b,function(b){a[b]=q.bind(a[b],a)});return a};q.memoize=function(a,b){var c={};b||(b=q.identity);return function(){var d=b.apply(this,arguments);return l.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}};q.delay=
function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)};q.defer=function(a){return q.delay.apply(q,[a,1].concat(g.call(arguments,1)))};q.throttle=function(a,b){var c,d,e,g,f;f=q.debounce(function(){g=!1},b);return function(){d=this;e=arguments;var j;c||(c=setTimeout(function(){c=null;a.apply(d,e);f()},b));g||a.apply(d,e);f&&f();g=!0}};q.debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;a.apply(d,
e)},b)}};q.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};q.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}};q.compose=function(){var a=g.call(arguments);return function(){for(var b=g.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};q.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};q.keys=P||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],c;for(c in a)l.call(a,c)&&(b[b.length]=c);return b};q.values=function(a){return q.map(a,q.identity)};q.functions=q.methods=function(a){var b=[],c;for(c in a)q.isFunction(a[c])&&b.push(c);return b.sort()};q.extend=function(a){V(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])});return a};q.defaults=function(a){V(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])});return a};q.clone=function(a){return!q.isObject(a)?a:q.isArray(a)?a.slice():q.extend({},
a)};q.tap=function(a,b){b(a);return a};q.isEqual=function(a,c){return b(a,c,[])};q.isEmpty=function(a){if(q.isArray(a)||q.isString(a))return a.length===0;for(var b in a)if(l.call(a,b))return!1;return!0};q.isElement=function(a){return!!(a&&a.nodeType==1)};q.isArray=f||function(a){return k.call(a)=="[object Array]"};q.isObject=function(a){return a===Object(a)};q.isArguments=k.call(arguments)=="[object Arguments]"?function(a){return k.call(a)=="[object Arguments]"}:function(a){return!(!a||!l.call(a,
"callee"))};q.isFunction=function(a){return k.call(a)=="[object Function]"};q.isString=function(a){return k.call(a)=="[object String]"};q.isNumber=function(a){return k.call(a)=="[object Number]"};q.isNaN=function(a){return a!==a};q.isBoolean=function(a){return a===!0||a===!1||k.call(a)=="[object Boolean]"};q.isDate=function(a){return k.call(a)=="[object Date]"};q.isRegExp=function(a){return k.call(a)=="[object RegExp]"};q.isNull=function(a){return a===null};q.isUndefined=function(a){return a===void 0};
q.noConflict=function(){a._=c;return this};q.identity=function(a){return a};q.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};q.escape=function(a){return(""+a).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};q.mixin=function(a){V(q.functions(a),function(b){x(b,q[b]=a[b])})};var na=0;q.uniqueId=function(a){var b=na++;return a?a+b:b};q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,
interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};q.template=function(a,b){var c=q.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,
"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",c=new Function("obj",c);return b?c(b):c};var Z=function(a){this._wrapped=a};q.prototype=Z.prototype;var v=function(a,b){return b?q(a).chain():a},x=function(a,b){Z.prototype[a]=function(){var a=g.call(arguments);j.call(a,this._wrapped);return v(b.apply(q,a),this._chain)}};q.mixin(q);V("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=e[a];Z.prototype[a]=function(){b.apply(this._wrapped,arguments);return v(this._wrapped,
this._chain)}});V(["concat","join","slice"],function(a){var b=e[a];Z.prototype[a]=function(){return v(b.apply(this._wrapped,arguments),this._chain)}});Z.prototype.chain=function(){this._chain=!0;return this};Z.prototype.value=function(){return this._wrapped}})();
(function(b){if(typeof _!="undefined")var a=_().reverse,c=_.include;var d=String.prototype.trim,e=function(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")},f=function(a){return function(){for(var b=Array.prototype.slice.call(arguments),c=0;c<b.length;c++)b[c]=b[c]==null?"":""+b[c];return a.apply(null,b)}},g=function(){function a(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));
return b.format.call(null,b.cache[arguments[0]],arguments)};b.format=function(b,c){var d=1,f=b.length,j="",l=[],N,T,y,P;for(N=0;N<f;N++)if(j=a(b[N]),j==="string")l.push(b[N]);else if(j==="array"){y=b[N];if(y[2]){j=c[d];for(T=0;T<y[2].length;T++){if(!j.hasOwnProperty(y[2][T]))throw g('[_.sprintf] property "%s" does not exist',y[2][T]);j=j[y[2][T]]}}else j=y[1]?c[y[1]]:c[d++];if(/[^s]/.test(y[8])&&a(j)!="number")throw g("[_.sprintf] expecting number but found %s",a(j));switch(y[8]){case "b":j=j.toString(2);
break;case "c":j=String.fromCharCode(j);break;case "d":j=parseInt(j,10);break;case "e":j=y[7]?j.toExponential(y[7]):j.toExponential();break;case "f":j=y[7]?parseFloat(j).toFixed(y[7]):parseFloat(j);break;case "o":j=j.toString(8);break;case "s":j=(j=String(j))&&y[7]?j.substring(0,y[7]):j;break;case "u":j=Math.abs(j);break;case "x":j=j.toString(16);break;case "X":j=j.toString(16).toUpperCase()}j=/[def]/.test(y[8])&&y[3]&&j>=0?"+"+j:j;T=y[4]?y[4]=="0"?"0":y[4].charAt(1):" ";P=y[6]-String(j).length;T=
y[6]?e(T,P):"";l.push(y[5]?j+T:T+j)}return l.join("")};b.cache={};b.parse=function(a){for(var b=[],c=[],d=0;a;){if((b=/^[^\x25]+/.exec(a))!==null)c.push(b[0]);else if((b=/^\x25{2}/.exec(a))!==null)c.push("%");else if((b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))!==null){if(b[2]){d|=1;var e=[],g=b[2],f=[];if((f=/^([a-z_][a-z_\d]*)/i.exec(g))!==null)for(e.push(f[1]);(g=g.substring(f[0].length))!=="";)if((f=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null)e.push(f[1]);
else if((f=/^\[(\d+)\]/.exec(g))!==null)e.push(f[1]);else throw"[_.sprintf] huh?";else throw"[_.sprintf] huh?";b[2]=e}else d|=2;if(d===3)throw"[_.sprintf] mixing positional and named placeholders is not (yet) supported";c.push(b)}else throw"[_.sprintf] huh?";a=a.substring(b[0].length)}return c};return b}(),j={isBlank:f(function(a){return/^\s*$/.test(a)}),stripTags:f(function(a){return a.replace(/<\/?[^>]+>/ig,"")}),capitalize:f(function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()}),
chop:f(function(a,b){for(var b=b*1||0||a.length,c=[],d=0;d<a.length;)c.push(a.slice(d,d+b)),d+=b;return c}),clean:f(function(a){return j.strip(a.replace(/\s+/g," "))}),count:f(function(a,b){for(var c=0,d,e=0;e<a.length;)d=a.indexOf(b,e),d>=0&&c++,e=e+(d>=0?d:0)+b.length;return c}),chars:f(function(a){return a.split("")}),escapeHTML:f(function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}),unescapeHTML:f(function(a){return a.replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}),escapeRegExp:f(function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}),insert:f(function(a,b,c){a=a.split("");a.splice(b*1||0,0,c);return a.join("")}),includes:f(function(a,b){return a.indexOf(b)!==-1}),include:function(a,b){return!c||/string|number/.test(typeof a)?this.includes(a,b):c(a,b)},join:f(function(a){var b=Array.prototype.slice.call(arguments);return b.join(b.shift())}),lines:f(function(a){return a.split("\n")}),
reverse:function(b){return!a||/string|number/.test(typeof b)?Array.prototype.reverse.apply(String(b).split("")).join(""):a.call(_(b))},splice:f(function(a,b,c,d){a=a.split("");a.splice(b*1||0,c*1||0,d);return a.join("")}),startsWith:f(function(a,b){return a.length>=b.length&&a.substring(0,b.length)===b}),endsWith:f(function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)===b}),succ:f(function(a){var b=a.split("");b.splice(a.length-1,1,String.fromCharCode(a.charCodeAt(a.length-1)+1));
return b.join("")}),titleize:f(function(a){for(var a=a.split(" "),b,c=0;c<a.length;c++)b=a[c].split(""),typeof b[0]!=="undefined"&&(b[0]=b[0].toUpperCase()),c+1===a.length?a[c]=b.join(""):a[c]=b.join("")+" ";return a.join("")}),camelize:f(function(a){return j.trim(a).replace(/(\-|_|\s)+(.)?/g,function(a,b,c){return c?c.toUpperCase():""})}),underscored:function(a){return j.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(a){return j.trim(a).replace(/([a-z\d])([A-Z]+)/g,
"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},trim:f(function(a,b){if(!b&&d)return d.call(a);b=b?j.escapeRegExp(b):"\\s";return a.replace(RegExp("^["+b+"]+|["+b+"]+$","g"),"")}),ltrim:f(function(a,b){b=b?j.escapeRegExp(b):"\\s";return a.replace(RegExp("^["+b+"]+","g"),"")}),rtrim:f(function(a,b){b=b?j.escapeRegExp(b):"\\s";return a.replace(RegExp("["+b+"]+$","g"),"")}),truncate:f(function(a,b,c){b=b*1||0;return a.length>b?a.slice(0,b)+(c||"..."):a}),prune:f(function(a,
b,c){var c=c||"...",b=b*1||0,d="",d=a.substring(b-1,b+1).search(/^\w\w$/)===0?j.rtrim(a.slice(0,b).replace(/([\W][\w]*)$/,"")):j.rtrim(a.slice(0,b)),d=d.replace(/\W+$/,"");return d.length+c.length>a.length?a:d+c}),words:function(a,b){return String(a).split(b||" ")},pad:f(function(a,b,c,d){var g="",g=0,b=b*1||0;c?c.length>1&&(c=c.charAt(0)):c=" ";switch(d){case "right":g=b-a.length;g=e(c,g);a+=g;break;case "both":g=b-a.length;g={left:e(c,Math.ceil(g/2)),right:e(c,Math.floor(g/2))};a=g.left+a+g.right;
break;default:g=b-a.length,g=e(c,g),a=g+a}return a}),lpad:function(a,b,c){return j.pad(a,b,c)},rpad:function(a,b,c){return j.pad(a,b,c,"right")},lrpad:function(a,b,c){return j.pad(a,b,c,"both")},sprintf:g,vsprintf:function(a,b){b.unshift(a);return g.apply(null,b)},toNumber:function(a,b){var c;c=(a*1||0).toFixed(b*1||0)*1||0;return!(c===0&&a!=="0"&&a!==0)?c:Number.NaN},strRight:f(function(a,b){var c=!b?-1:a.indexOf(b);return c!=-1?a.slice(c+b.length,a.length):a}),strRightBack:f(function(a,b){var c=
!b?-1:a.lastIndexOf(b);return c!=-1?a.slice(c+b.length,a.length):a}),strLeft:f(function(a,b){var c=!b?-1:a.indexOf(b);return c!=-1?a.slice(0,c):a}),strLeftBack:f(function(a,b){var c=a.lastIndexOf(b);return c!=-1?a.slice(0,c):a})};j.strip=j.trim;j.lstrip=j.ltrim;j.rstrip=j.rtrim;j.center=j.lrpad;j.ljust=j.lpad;j.rjust=j.rpad;typeof module!=="undefined"&&module.exports?module.exports=j:typeof b._!=="undefined"?b._.mixin(j):b._=j})(this||window);
NEWSBLUR.utils={compute_story_score:function(b){var a=0,c=Math.max(b.intelligence.title,b.intelligence.author,b.intelligence.tags),d=Math.min(b.intelligence.title,b.intelligence.author,b.intelligence.tags);c>0?a=c:d<0&&(a=d);a==0&&(a=b.intelligence.feed);return a},generate_gradient:function(b,a){if(!b)return"";var c=b.favicon_color;if(!c)return"";var d=parseInt(c.substr(0,2),16),e=parseInt(c.substr(2,2),16),c=parseInt(c.substr(4,2),16);if(a=="border")return["1px solid rgb(",[parseInt(d*0.75,10),parseInt(e*
0.75,10),parseInt(c*0.75,10)].join(","),")"].join("");else if(a=="webkit")return["-webkit-gradient(linear,left bottom,left top,color-stop(0, rgba(",[d,e,c,255].join(","),")),color-stop(1, rgba(",[d+35,e+35,c+35,255].join(","),")))"].join("");else if(a=="moz")return["-moz-linear-gradient(center bottom,rgb(",[d,e,c].join(","),") 0%,rgb(",[d+35,e+35,c+35].join(","),") 100%)"].join("")},is_feed_floater_gradient_light:function(b){if(!b)return!1;var a=b.favicon_color;if(!a)return!1;var b=parseInt(a.substr(0,
2),16)/255,c=parseInt(a.substr(2,2),16)/255,a=parseInt(a.substr(4,2),16)/255;return $.textColor({r:b,g:c,b:a})!="white"},make_folders:function(b){var b=b.get_folders(),a=$.make("select",{className:"NB-folders"}),c=$.make("option",{value:""},"Top Level");a.append(c);return a=this.make_folder_options(a,b,"&nbsp;&nbsp;&nbsp;")},make_folder_options:function(b,a,c){for(var d in a){var e=a[d];if(typeof e=="object")for(var f in e){var g=e[f],j=$.make("option",{value:f},c+" "+f);b.append(j);b=this.make_folder_options(b,
g,c+"&nbsp;&nbsp;&nbsp;")}}return b}};NEWSBLUR.AssetModel=function(){var b=null;return{reader:function(){b||(b=new NEWSBLUR.AssetModel.Reader);b.init();return b}}}();NEWSBLUR.AssetModel.Reader=function(){this.defaults={classifiers:{titles:{},tags:{},authors:{},feeds:{}}};this.feeds={};this.favicons={};this.folders=[];this.stories={};this.story_keys={};this.queued_read_stories={};this.classifiers={};this.starred_stories=[];this.read_stories_river_count=this.starred_count=0;this.flags={favicons_fetching:!1}};
NEWSBLUR.AssetModel.Reader.prototype={init:function(){this.ajax={};this.ajax.queue=$.manageAjax.create("queue",{queue:!1});this.ajax.queue_clear=$.manageAjax.create("queue_clear",{queue:"clear"});this.ajax.feed=$.manageAjax.create("feed",{queue:"clear",abortOld:!0,domCompleteTrigger:!0});this.ajax.feed_page=$.manageAjax.create("feed_page",{queue:!1,abortOld:!0,abortIsNoSuccess:!1,domCompleteTrigger:!0});this.ajax.statistics=$.manageAjax.create("statistics",{queue:"clear",abortOld:!0});$.ajaxSettings.traditional=
!0},make_request:function(b,a,c,d,e){var e=$.extend({ajax_group:"queue",traditional:!0,domSuccessTrigger:!0,preventDoubleRequests:!1},e),f=e.request_type||"POST",g=!1;e.ajax_group=="feed"&&(g=!0);e.ajax_group=="statistics"&&(g=!0,f="GET");g&&this.ajax[e.ajax_group].clear(!0);this.ajax[e.ajax_group].add(_.extend({url:b,data:a,type:f,beforeSend:function(){$.isFunction(e.beforeSend)&&e.beforeSend();return!0},success:function(a){$.isFunction(c)&&c(a)},error:function(a,b,e){NEWSBLUR.log(["AJAX Error",
b,e]);e!="abort"&&($.isFunction(d)?d():$.isFunction(c)&&(a="Please create an account. Not much to do without an account.",NEWSBLUR.Globals.is_authenticated&&(a="Sorry, there was an unhandled error."),c({message:a})))}},e))},mark_story_as_read:function(b,a,c){var d=this,e=!1,f=this.get_story(b),e=f.read_status;f.read_status=1;!e&&NEWSBLUR.Globals.is_authenticated&&(a in this.queued_read_stories||(this.queued_read_stories[a]=[]),this.queued_read_stories[a].push(b),this.make_request("/reader/mark_story_as_read",
{story_id:this.queued_read_stories[a],feed_id:a},null,null,{ajax_group:"queue_clear",traditional:!0,beforeSend:function(){d.queued_read_stories[a]=[]}}));this.read_stories_river_count+=1;$.isFunction(c)&&c(e)},mark_story_as_unread:function(b,a,c){for(s in this.stories)if(this.stories[s].id==b){this.stories[s].read_status=0;break}NEWSBLUR.Globals.is_authenticated&&this.make_request("/reader/mark_story_as_unread",{story_id:b,feed_id:a},null,null,{});$.isFunction(c)&&c()},mark_story_as_starred:function(b,
a,c){this.starred_count+=1;this.get_story(b).starred=!0;this.make_request("/reader/mark_story_as_starred",{story_id:b,feed_id:a},c)},mark_story_as_unstarred:function(b,a){this.starred_count-=1;this.get_story(b).starred=!1;this.make_request("/reader/mark_story_as_unstarred",{story_id:b},a)},mark_feed_as_read:function(b,a){this.make_request("/reader/mark_feed_as_read",{feed_id:_.isArray(b)?_.select(b,function(a){return a}):[b]},a)},load_feeds:function(b,a){var c=this,d={};NEWSBLUR.Flags.start_import_from_google_reader&&
(d.include_favicons=!0);this.make_request("/reader/feeds",d,function(a){var d=function(a){a=_.flatten(_.map(a,_.values));return _.flatten(_.map(a,function(a){return!_.isNumber(a)&&a?d(a):a}))},g=d({root:a.folders});_.each(a.feeds,function(a,b){if(_.contains(g,parseInt(b,10)))c.feeds[b]=a,a.favicon_fetching&&(c.flags.favicons_fetching=!0)});c.folders=a.folders;c.starred_count=a.starred_count;_.isEqual(c.favicons,{})||_.each(c.feeds,function(a){if(c.favicons[a.id])a.favicon=c.favicons[a.id]});b()},
a,{request_type:"GET"})},load_feeds_flat:function(b,a){var c=this;this.make_request("/reader/feeds",{flat:!0,include_favicons:!0},function(a){var e=function(a){a=_.flatten(_.map(a,_.values));return _.flatten(_.map(a,function(a){return!_.isNumber(a)&&a?e(a):a}))},f=e({root:a.flat_folders});_.each(a.feeds,function(a,b){if(_.contains(f,parseInt(b,10)))c.feeds[b]=a,a.favicon_fetching&&(c.flags.favicons_fetching=!0)});c.folders=a.flat_folders;c.starred_count=a.starred_count;_.isEqual(c.favicons,{})||_.each(c.feeds,
function(a){if(c.favicons[a.id])a.favicon=c.favicons[a.id]});b()},a,{request_type:"GET"})},load_feed_favicons:function(b,a,c){var d=_.bind(function(a){this.favicons=a;_.isEqual(this.feeds,{})||_.each(this.feeds,_.bind(function(b){if(a[b.id])b.favicon=a[b.id]},this));b()},this),c={load_all:c};a&&(c.feed_ids=_.compact(_.map(this.feeds,function(a){return!a.favicon&&a.id})));this.make_request("/reader/favicons",c,d,d,{request_type:"GET"})},load_feed:function(b,a,c,d,e){var f=this;(this.feed_id=b)&&this.make_request("/reader/feed/"+
b,{page:a,feed_address:this.feeds[b].feed_address},function(a){return f.load_feed_precallback(a,b,d,c)},e,{ajax_group:a>1?"feed_page":"feed",request_type:"GET"})},load_feed_precallback:function(b,a,c,d){var e=this;if(b.dupe_feed_id&&this.feed_id==b.dupe_feed_id)a=b.dupe_feed_id;if(a==this.feed_id){if(b&&d){this.stories=b.stories;this.feed_tags=b.feed_tags||{};this.feed_authors=b.feed_authors||{};this.feed_id=a;_.includes(a,":")?_.extend(this.classifiers,b.classifiers):this.classifiers[a]=_.extend({},
this.defaults.classifiers,b.classifiers);this.starred_stories=b.starred_stories;this.story_keys={};for(var f in b.stories)this.story_keys[b.stories[f].id]=!0;if(b.feed_address)this.feeds[a].feed_address=b.feed_address}else if(b)b.stories=_.select(b.stories,function(a){if(!e.story_keys[a.id])return e.stories.push(a),e.story_keys[a.id]=!0});$.isFunction(c)&&c(b,d)}},load_canonical_feed:function(b,a){var c=_.bind(function(c){this.feeds[c.id]=c;this.feed_tags=c.feed_tags||{};this.feed_authors=c.feed_authors||
{};this.feed_id=b;this.classifiers[b]=c.classifiers||this.defaults.classifiers;a&&a()},this);this.make_request("/rss_feeds/feed/"+b,{},c,$.noop,{request_type:"GET"})},fetch_starred_stories:function(b,a,c,d){var e=this;this.feed_id="starred";this.make_request("/reader/starred_stories",{page:b},function(b){return e.load_feed_precallback(b,"starred",a,d)},c,{ajax_group:b?"feed_page":"feed",request_type:"GET"})},fetch_river_stories:function(b,a,c,d,e,f){var g=this;if(f||!c)this.read_stories_river_count=
0;this.feed_id=b;this.make_request("/reader/river_stories",{feeds:a,page:c,read_stories_count:this.read_stories_river_count,new_flag:!0},function(a){return g.load_feed_precallback(a,b,d,f)},e,{ajax_group:c?"feed_page":"feed",request_type:"GET"})},get_feeds_trainer:function(b,a){var c={};b&&(c.feed_id=b);this.make_request("/reader/feeds_trainer",c,a,null,{ajax_group:"feed",request_type:"GET"})},retrain_all_sites:function(b){var a={};NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/retrain_all_sites",
a,b,null):$.isFunction(b)&&b()},refresh_feeds:function(b,a,c){var d=this,e=function(a){d.post_refresh_feeds(a,b)},f={};a&&(f.check_fetch_status=a);if(this.flags.favicons_fetching)a=_.compact(_.map(this.feeds,function(a,b){if(a.favicon_fetching&&a.active)return b})),a.length&&(f.favicons_fetching=a);c&&(f.feed_id=c);(NEWSBLUR.Globals.is_authenticated||c)&&this.make_request("/reader/refresh_feeds",f,e)},post_refresh_feeds:function(b,a){var c=[],d;for(d in b.feeds)if(this.feeds[d]){var e=!1;d=parseInt(d,
10);var f=b.feeds[d];f.id&&d!=f.id&&(NEWSBLUR.log(["Dupe feed being refreshed",d,f.id,this.feeds[d]]),this.feeds[f.id]=this.feeds[d]);for(var g in f)this.feeds[d][g]!=f[g]&&(this.feeds[d][g]=f[g],NEWSBLUR.log(["Different",g,this.feeds[d],f]),e=!0);if(f.has_exception&&!this.feeds[d].has_exception||this.feeds[d].has_exception&&!f.has_exception)e=!0,this.feeds[d].has_exception=!!f.has_exception;if(f.favicon)this.feeds[d].favicon=f.favicon,this.feeds[d].favicon_color=f.favicon_color,this.feeds[d].favicon_fetching=
!1,e=!0;e&&!(d in c)&&c.push(d)}a(c)},refresh_feed:function(b,a){var c=this,d;b&&this.make_request("/reader/feed/"+b,{page:0,feed_address:this.feeds[b].feed_address},function(d){c.load_feed_precallback(d,b,a)},null,{ajax_group:"feed_page",request_type:"GET"})},count_unfetched_feeds:function(){var b={unfetched_feeds:0,fetched_feeds:0},a;for(a in this.feeds){var c=this.feeds[a];c.active&&(c.not_yet_fetched?b.unfetched_feeds+=1:b.fetched_feeds+=1)}return b},set_feed:function(b,a){return this.feeds[b]=
a},get_feed:function(b){return this.feeds[b]},get_feeds:function(){return this.feeds},get_folders:function(){return this.folders},get_feed_tags:function(){return this.feed_tags},get_feed_authors:function(){return this.feed_authors},get_story:function(b){for(s in this.stories)if(this.stories[s].id==b)return this.stories[s];return null},save_classifier:function(b,a){NEWSBLUR.Globals.is_authenticated?this.make_request("/classifier/save",b,a):$.isFunction(a)&&a()},get_feed_classifier:function(b,a){this.make_request("/classifier/"+
b,{},a,null,{ajax_group:"feed",request_type:"GET"})},delete_feed:function(b,a,c,d){d||delete this.feeds[b];NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/delete_feed",{feed_id:b,in_folder:a},c,null):$.isFunction(c)&&c()},delete_folder:function(b,a,c,d){NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/delete_folder",{folder_name:b,in_folder:a,feed_id:c},d,null):$.isFunction(d)&&d()},rename_feed:function(b,a,c){this.feeds[b].feed_title=a;NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/rename_feed",
{feed_id:b,feed_title:a},c,null):$.isFunction(c)&&c()},rename_folder:function(b,a,c,d){NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/rename_folder",{folder_name:b,new_folder_name:a,in_folder:c},d,null):$.isFunction(d)&&d()},save_add_url:function(b,a,c){this.make_request("/reader/add_url/",{url:b,folder:a},c,function(){c({message:NEWSBLUR.Globals.is_anonymous?"Please create an account. Not much to do without an account.":"There was a problem trying to add this site. Please try a different URL."})})},
save_add_folder:function(b,a,c){this.make_request("/reader/add_folder/",{folder:b,parent_folder:a},c,function(){c({message:NEWSBLUR.Globals.is_anonymous?"Please create an account. Not much to do without an account.":"There was a problem trying to add this folder. Please try a different URL."})})},move_feed_to_folder:function(b,a,c,d){var e=_.bind(function(a){this.folders=a.folders;return d()},this);this.make_request("/reader/move_feed_to_folder",{feed_id:b,in_folder:a,to_folder:c},e)},move_folder_to_folder:function(b,
a,c,d){var e=_.bind(function(a){this.folders=a.folders;return d()},this);this.make_request("/reader/move_folder_to_folder",{folder_name:b,in_folder:a,to_folder:c},e)},preference:function(b,a,c){if(typeof a=="undefined")return b=NEWSBLUR.Preferences[b],/\d+/.test(b)?parseInt(b,10):b;if(NEWSBLUR.Preferences[b]==a)return $.isFunction(c)&&c();NEWSBLUR.Preferences[b]=a;var d={};d[b]=a;this.make_request("/profile/set_preference",d,c,null)},save_preferences:function(b,a){_.each(b,function(a,b){NEWSBLUR.Preferences[b]=
a});this.make_request("/profile/set_preference",b,a,null)},save_account_settings:function(b,a){this.make_request("/profile/set_account_settings",b,a,null)},view_setting:function(b,a,c){if(typeof a=="undefined")return NEWSBLUR.Preferences.view_settings[b+""]||NEWSBLUR.Preferences.default_view;NEWSBLUR.Preferences.view_settings[b+""]=a;this.make_request("/profile/set_view_setting",{feed_id:b+"",feed_view_setting:a},c,null)},collapsed_folders:function(b,a,c){var d=NEWSBLUR.Preferences.collapsed_folders,
e=!1;if(a&&!_.contains(NEWSBLUR.Preferences.collapsed_folders,b))NEWSBLUR.Preferences.collapsed_folders.push(b),e=!0;else if(!a&&_.contains(NEWSBLUR.Preferences.collapsed_folders,b))NEWSBLUR.Preferences.collapsed_folders=_.without(d,b),e=!0;e&&this.make_request("/profile/set_collapsed_folders",{collapsed_folders:$.toJSON(NEWSBLUR.Preferences.collapsed_folders)},c,null)},save_mark_read:function(b,a){this.make_request("/reader/mark_all_as_read",{days:b},a)},get_features_page:function(b,a){this.make_request("/reader/features",
{page:b},a,a,{request_type:"GET"})},load_recommended_feed:function(b,a,c,d,e){this.make_request("/recommendations/load_recommended_feed",{page:b,refresh:a,unmoderated:c},d,e,{request_type:"GET"})},approve_feed_in_moderation_queue:function(b,a,c){this.make_request("/recommendations/approve_feed",{feed_id:b,date:a,unmoderated:!0},c,{request_type:"GET"})},decline_feed_in_moderation_queue:function(b,a){this.make_request("/recommendations/decline_feed",{feed_id:b,unmoderated:!0},a,{request_type:"GET"})},
load_dashboard_graphs:function(b,a){this.make_request("/statistics/dashboard_graphs",{},b,a,{request_type:"GET"})},save_feed_order:function(b,a){this.make_request("/reader/save_feed_order",{folders:$.toJSON(b)},a)},get_feed_statistics:function(b,a){this.make_request("/rss_feeds/statistics/"+b,{},a,a,{ajax_group:"statistics",requesst_type:"GET"})},get_feed_recommendation_info:function(b,a){this.make_request("/recommendations/load_feed_info/"+b,{},a,a,{ajax_group:"statistics",request_type:"GET"})},
get_feed_settings:function(b,a){this.make_request("/rss_feeds/feed_settings/"+b,{},a,a,{ajax_group:"statistics",request_type:"GET"})},start_import_from_google_reader:function(b){this.make_request("/import/import_from_google_reader/",{},b)},save_recommended_site:function(b,a){NEWSBLUR.Globals.is_authenticated?this.make_request("/recommendations/save_recommended_feed",b,a):$.isFunction(a)&&a()},save_exception_retry:function(b,a){var c=this;this.make_request("/rss_feeds/exception_retry",{feed_id:b,reset_fetch:!(!this.feeds[b].has_feed_exception&&
!this.feeds[b].has_page_exception)},function(b){c.post_refresh_feeds(b,a)})},save_exception_change_feed_link:function(b,a,c){var d=this;NEWSBLUR.Globals.is_authenticated?this.make_request("/rss_feeds/exception_change_feed_link",{feed_id:b,feed_link:a},function(a){d.post_refresh_feeds(a,c);NEWSBLUR.reader.force_feed_refresh(b)}):$.isFunction(c)&&c()},save_exception_change_feed_address:function(b,a,c){var d=this;NEWSBLUR.Globals.is_authenticated?this.make_request("/rss_feeds/exception_change_feed_address",
{feed_id:b,feed_address:a},function(a){d.post_refresh_feeds(a,c);NEWSBLUR.reader.force_feed_refresh(b)}):$.isFunction(c)&&c()},save_feed_chooser:function(b,a){NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/save_feed_chooser",{approved_feeds:_.select(b,function(a){return a})},a):$.isFunction(a)&&a()},send_story_email:function(b,a,c){NEWSBLUR.Globals.is_authenticated?this.make_request("/reader/send_story_email",b,a,c,{timeout:6E3}):a({code:-1,message:"You must be logged in to send a story over email."})},
load_tutorial:function(b,a){this.make_request("/reader/load_tutorial",b,a)},recalculate_story_scores:function(b){_.each(this.stories,_.bind(function(a,c){if(a.story_feed_id==b)this.stories[c].intelligence.title=0,_.each(this.classifiers[b].titles,_.bind(function(b,e){if(this.stories[c].intelligence.title<=0&&a.story_title&&a.story_title.indexOf(e)!=-1)this.stories[c].intelligence.title=b},this)),this.stories[c].intelligence.author=0,_.each(this.classifiers[b].authors,_.bind(function(b,e){if(this.stories[c].intelligence.author<=
0&&a.story_authors&&a.story_authors.indexOf(e)!=-1)this.stories[c].intelligence.author=b},this)),this.stories[c].intelligence.tags=0,_.each(this.classifiers[b].tags,_.bind(function(b,e){if(this.stories[c].intelligence.tags<=0&&a.story_tags&&_.contains(a.story_tags,e))this.stories[c].intelligence.tags=b},this)),this.stories[c].intelligence.feed=0,_.each(this.classifiers[b].feeds,_.bind(function(b,e){if(this.stories[c].intelligence.feed<=0&&a.story_feed_id==e)this.stories[c].intelligence.feed=b},this))},
this))}};
(function(b){NEWSBLUR.Reader=function(){this.model=NEWSBLUR.AssetModel.reader();this.story_view="page";this.$s={$body:b("body"),$feed_list:b("#feed_list"),$story_titles:b("#story_titles"),$content_pane:b(".content-pane"),$story_taskbar:b("#story_taskbar"),$story_pane:b("#story_pane .NB-story-pane-container"),$feed_view:b(".NB-feed-story-view"),$feed_stories:b(".NB-feed-stories"),$feed_iframe:b(".NB-feed-iframe"),$story_iframe:b(".NB-story-iframe"),$intelligence_slider:b(".NB-intelligence-slider"),$mouse_indicator:b("#mouse-indicator"),
$feed_link_loader:b("#NB-feeds-list-loader"),$feeds_progress:b("#NB-progress"),$dashboard:b(".NB-feeds-header-dashboard"),$river_header:b(".NB-feeds-header-river"),$starred_header:b(".NB-feeds-header-starred"),$tryfeed_header:b(".NB-feeds-header-tryfeed"),$taskbar:b(".taskbar_nav"),$feed_floater:b(".NB-feed-story-view-floater")};this.flags={feed_view_images_loaded:{},bouncing_callout:!1,has_unfetched_feeds:!1,count_unreads_after_import_working:!1,import_from_google_reader_working:!1,favicons_downloaded:!1};
this.locks={};this.counts={feature_page:0,unfetched_feeds:0,fetched_feeds:0,page_fill_outs:0,recommended_feed_page:0};this.cache={iframe_stories:{},feed_view_stories:{},iframe_story_positions:{},feed_view_story_positions:{},iframe_story_positions_keys:[],feed_view_story_positions_keys:[],river_feeds_with_unreads:[],mouse_position_y:parseInt(this.model.preference("lock_mouse_indicator"),10),$feed_in_feed_list:{},$feed_counts_in_feed_list:{}};this.layout={};this.constants={FEED_REFRESH_INTERVAL:6E4,
FILL_OUT_PAGES:8,RIVER_STORIES_FOR_STANDARD_ACCOUNT:12};b(window).bind("resize.reader",_.throttle(b.rescope(this.resize_window,this),1E3));this.$s.$body.bind("dblclick.reader",b.rescope(this.handle_dblclicks,this));this.$s.$body.bind("click.reader",b.rescope(this.handle_clicks,this));this.$s.$body.live("contextmenu.reader",b.rescope(this.handle_rightclicks,this));this.$s.$story_titles.scroll(b.rescope(this.handle_scroll_story_titles,this));this.$s.$feed_stories.scroll(b.rescope(this.handle_scroll_feed_view,
this));this.$s.$feed_stories.bind("mousemove",b.rescope(this.handle_mousemove_feed_view,this));this.handle_keystrokes();this.load_javascript_elements_on_page();this.unload_feed_iframe();this.unload_story_iframe();this.apply_resizable_layout();this.add_body_classes();NEWSBLUR.Flags.start_import_from_google_reader?this.start_import_from_google_reader():this.load_feeds();this.cornerize_buttons();this.setup_feed_page_iframe_load();this.load_intelligence_slider();this.handle_mouse_indicator_hover();this.position_mouse_indicator();
this.handle_login_and_signup_forms();this.iframe_buster_buster();this.apply_story_styling();this.apply_tipsy_titles();this.load_recommended_feeds();this.setup_dashboard_graphs();this.setup_howitworks_hovers();this.load_url_next_param()};NEWSBLUR.Reader.prototype={load_javascript_elements_on_page:function(){b(".NB-javascript").removeClass("NB-javascript")},resize_window:function(){var a,b=this.story_view;this.flags.page_view_showing_feed_view?(b="feed",a="page"):this.flags.feed_view_showing_story_view&&
(a=b="story");this.flags.scrolling_by_selecting_story_title=!0;clearTimeout(this.locks.scrolling);this.locks.scrolling=_.delay(_.bind(function(){this.flags.scrolling_by_selecting_story_title=!1},this),1E3);this.switch_taskbar_view(b,a);this.check_story_titles_last_story();this.flags.fetch_story_locations_in_feed_view=this.flags.fetch_story_locations_in_feed_view||_.throttle(_.bind(this.fetch_story_locations_in_feed_view,this),2E3);this.flags.fetch_story_locations_in_feed_view()},apply_resizable_layout:function(a){var c=
this.model.preference("story_pane_anchor"),d=!b(".right-pane").is(":visible");if(a){this.layout.contentLayout&&this.layout.contentLayout.destroy();this.layout.rightLayout&&this.layout.rightLayout.destroy();this.layout.leftCenterLayout&&this.layout.leftCenterLayout.destroy();this.layout.leftLayout&&this.layout.leftLayout.destroy();this.layout.outerLayout&&this.layout.outerLayout.destroy();var e=b.make("div").append(this.$s.$feed_stories.children()),f=b.make("div").append(this.$s.$story_titles.children())}b(".right-pane").removeClass("NB-story-pane-west").removeClass("NB-story-pane-north").removeClass("NB-story-pane-south").addClass("NB-story-pane-"+
c);this.layout.outerLayout=this.$s.$body.layout({closable:!0,center__paneSelector:".right-pane",west__paneSelector:".left-pane",west__size:this.model.preference("feed_pane_size"),west__onresize_end:b.rescope(this.save_feed_pane_size,this),spacing_open:4,resizerDragOpacity:0.6,resizeWhileDragging:!0,enableCursorHotkey:!1});this.layout.leftLayout=b(".left-pane").layout({closable:!1,resizeWhileDragging:!0,fxName:"scale",fxSettings:{duration:500,easing:"easeInOutQuint"},north__paneSelector:".left-north",
north__size:18,north__resizeable:!1,north__spacing_open:0,center__paneSelector:".left-center",center__resizable:!1,south__paneSelector:".left-south",south__size:31,south__resizable:!1,south__spacing_open:0,enableCursorHotkey:!1});this.layout.leftCenterLayout=b(".left-center").layout({closable:!1,slidable:!1,resizeWhileDragging:!0,center__paneSelector:".left-center-content",center__resizable:!1,south__paneSelector:".left-center-footer",south__size:"auto",south__resizable:!1,south__slidable:!0,south__spacing_open:0,
south__spacing_closed:0,south__closable:!0,south__initClosed:!0,fxName:"slide",fxSpeed:1E3,fxSettings:{duration:1E3,easing:"easeInOutQuint"},enableCursorHotkey:!1});var g={resizeWhileDragging:!0,center__paneSelector:".content-pane",spacing_open:c=="west"?4:10,resizerDragOpacity:0.6,enableCursorHotkey:!1};g[c+"__paneSelector"]=".right-north";g[c+"__size"]=this.model.preference("story_titles_pane_size");g[c+"__onresize_end"]=b.rescope(this.save_story_titles_pane_size,this);this.layout.rightLayout=b(".right-pane").layout(g);
g={resizeWhileDragging:!0,center__paneSelector:".content-center",spacing_open:0,resizerDragOpacity:0.6,enableCursorHotkey:!1};c=="west"?(g.north__paneSelector=".content-north",g.north__size=30):(g[c+"__paneSelector"]=".content-north",g[c+"__size"]=30);this.layout.contentLayout=this.$s.$content_pane.layout(g);a?(this.$s.$feed_stories.append(e.children()),this.$s.$story_titles.append(f.children()),this.resize_window(),d&&b(".right-pane").hide()):b(".right-pane").hide()},apply_tipsy_titles:function(){this.model.preference("show_tooltips")?
(b(".NB-taskbar-sidebar-toggle-close").tipsy({gravity:"se",delayIn:375}),b(".NB-taskbar-sidebar-toggle-open").tipsy({gravity:"sw",delayIn:375}),b(".NB-task-add").tipsy({gravity:"sw",delayIn:375}),b(".NB-task-manage").tipsy({gravity:"s",delayIn:375})):(b(".NB-taskbar-sidebar-toggle-close").tipsy("disable"),b(".NB-taskbar-sidebar-toggle-open").tipsy("disable"),b(".NB-task-add").tipsy("disable"),b(".NB-task-manage").tipsy("disable"))},save_feed_pane_size:function(a,c,d,e){a=e.size;b("#NB-splash").css("left",
a);this.flags.set_feed_pane_size=this.flags.set_feed_pane_size||_.debounce(_.bind(function(){this.model.preference("feed_pane_size",this.layout.outerLayout.state.west.size);this.flags.set_feed_pane_size=null},this),1E3);this.flags.set_feed_pane_size()},save_story_titles_pane_size:function(){this.flags.scrolling_by_selecting_story_title=!0;clearTimeout(this.locks.scrolling);var a=0;this.story_view=="feed"?a=this.$s.$feed_iframe.width():this.story_view=="story"&&(a=2*this.$s.$feed_iframe.width());this.$s.$story_pane.css("left",
-1*a);this.flags.set_story_titles_size=this.flags.set_story_titles_size||_.debounce(_.bind(function(){this.model.preference("story_titles_pane_size",this.layout.rightLayout.state[this.model.preference("story_pane_anchor")].size);this.flags.set_story_titles_size=null;this.locks.scrolling=_.delay(_.bind(function(){this.flags.scrolling_by_selecting_story_title=!1},this),100)},this),1E3);this.flags.set_story_titles_size();this.flags.resize_window=this.flags.resize_window||_.debounce(_.bind(function(){this.resize_window();
this.flags.resize_window=null},this),10);this.flags.resize_window()},cornerize_buttons:function(){b(".button").corner()},add_body_classes:function(){this.$s.$body.toggleClass("NB-is-premium",NEWSBLUR.Globals.is_premium);this.$s.$body.toggleClass("NB-is-anonymous",NEWSBLUR.Globals.is_anonymous);this.$s.$body.toggleClass("NB-is-authenticated",NEWSBLUR.Globals.is_authenticated)},hide_splash_page:function(){b(".right-pane").show();b("#NB-splash").hide();b(".NB-splash-info").hide();b("#NB-splash-overlay").hide();
this.$s.$body.layout().resizeAll();this.$s.$dashboard.addClass("NB-active");NEWSBLUR.Globals.is_anonymous&&this.setup_ftux_signup_callout()},show_splash_page:function(){this.reset_feed();this.unload_feed_iframe();this.unload_story_iframe();this.mark_feed_as_selected(null,null);b(".right-pane").hide();b(".NB-splash-info").show();b("#NB-splash").show();b("#NB-splash-overlay").show();this.$s.$dashboard.removeClass("NB-active")},iframe_buster_buster:function(){var a=this,c=0;window.onbeforeunload=function(){c++};
clearInterval(this.locks.iframe_buster_buster);this.locks.iframe_buster_buster=setInterval(function(){if(c>0&&(c-=2,!a.flags.iframe_view_loaded&&!a.flags.iframe_view_not_busting&&_.contains(["page","story"],a.story_view)&&a.active_feed))b(".task_view_feed").click(),b(".NB-feed-frame").attr("src",""),window.top.location="/reader/buster"},1)},add_url_from_querystring:function(){if(!this.flags.added_url_from_querystring){var a=b.getQueryString("url");this.flags.added_url_from_querystring=!0;a&&this.open_add_feed_modal({url:a})}},
load_url_next_param:function(){var a=b.getQueryString("next");a=="optout"?this.open_account_modal({animate_email:!0}):a=="goodies"?this.open_goodies_modal():a=="password"&&this.open_account_modal({change_password:!0});window.history.replaceState&&window.history.replaceState({},null,"/")},animate_progress_bar:function(a,b,d){var e=this,d=d||0,b=parseFloat(Math.max(1,parseInt(b,10)),10);time=d>90?b/5:d>80?b/12:d>70?b/30:d>60?b/80:d>50?b/120:d>40?b/160:d>30?b/200:d>20?b/300:d>10?b/400:b/500;d<=100&&
(this.locks.animate_progress_bar=setTimeout(function(){d+=1;a.progressbar({value:d});e.animate_progress_bar(a,b,d)},time*1E3))},get_current_story_from_story_titles:function(a){var c=this.$s.$feed_view,a=a||b(".NB-feed-story",c),d=this.active_story,e;d&&a.each(function(){if(b(this).data("story")==d.id)return e=b(this),!1});return e},get_current_story_id:function(){var a=this.get_current_story_from_story_titles();return a&&a.data("story_id")},find_feed_in_feed_list:function(a){if(_.contains(this.cache.$feed_in_feed_list,
a))return this.cache.$feed_in_feed_list[a];var c=this.$s.$feed_list,d=b([]);b(".feed",c).each(function(){parseInt(b(this).attr("data-id"),10)==a&&d.push(b(this).get(0))});return this.cache.$feed_in_feed_list[a]=d},find_folder_in_feed_list:function(a){var c=this.$s.$feed_list,d=b([]);b(".folder_title_text",c).each(function(){b(this).text()==a&&d.push(b(this).parents("li.folder").eq(0)[0])});return d},find_story_in_story_titles:function(a){var c=this.model.get_story(a),a=b(".story",this.$s.$story_titles),
d;c&&a.each(function(){var a=b(this);if(a.data("story_id")==c.id)return d=a,!1});return d},find_story_in_feed_view:function(a){if(a){for(var c=b(".NB-feed-story",this.$s.$feed_view),d,e=0,f=c.length;e<f;e++)if(c.eq(e).data("story")==a){d=c.eq(e);break}return d}},find_story_in_feed_iframe:function(a,c){if(!a)return b([]);var c=c||this.$s.$feed_iframe.contents(),d=b([]);if(this.flags.iframe_story_locations_fetched||a.id in this.cache.iframe_stories)return this.cache.iframe_stories[a.id];var e=a.story_title.replace(/&nbsp;|[^a-z0-9-,]/gi,
""),f=function(a,c){if(a&&a.nodeType==3)a.data.replace(/&nbsp;|[^a-z0-9-,]/gi,"").indexOf(c)>=0&&d.push(b(a).parent());else if(a&&a.nodeType==1&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var e=0;e<a.childNodes.length;++e)e+=f(a.childNodes[e],c);return 0};f(c.find("body")[0],e);d=d.filter(function(){return b(this).is(":visible")});if(!d.length)this.cache.iframe.headers=this.cache.iframe.headers||b("h1,h2,h3,h4,h5,h6",c).filter(":visible"),this.cache.iframe.headers.each(function(){pos=b(this).text().replace(/&nbsp;|[^a-z0-9-,]/gi,
"").indexOf(e);if(pos>=0)return d.push(b(this)),!1});if(!d.length)this.cache.iframe.posts=this.cache.iframe.posts||b(".entry,.post,.postProp,#postContent,.article",c).filter(":visible"),this.cache.iframe.posts.each(function(){pos=b(this).text().replace(/&nbsp;|[^a-z0-9-,]/gi,"").indexOf(e);if(pos>=0)return d.push(b(this)),!1});var g=0,j=b([]);d.each(function(){var a=b(this),c=parseInt(a.css("font-size"),10);c>g&&(g=c,j=b([]));c==g&&j.push(a)});var k=b([]);if(j.length>1){var l=100;j.each(function(){var c=
b(this),d=c.text(),d=Math.abs(d.length-a.story_title.length);d<l&&(l=d,k=c)})}k.length||(k=j[0]);if(k&&k.length){var m=this;this.cache.iframe_stories[a.id]=k;var u=parseInt(k.offset().top,10);this.cache.iframe_story_positions[u]=a;this.cache.iframe_story_positions_keys.push(u);if(!this.flags.iframe_view_not_busting){var n=this.active_feed;_.delay(function(){n==m.active_feed&&(m.flags.iframe_view_not_busting=!0)},1E3)}}return k},get_feed_ids_in_folder:function(a){var c=this,a=a||this.$s.$feed_list;
b(".feed:not(.NB-empty)",a);return _.compact(_.map(b(".feed:not(.NB-empty)",a),function(a){a=parseInt(b(a).attr("data-id"),10);if(c.model.get_feed(a).active)return a}))},show_next_story:function(a){var c=this.$s.$story_titles,d=b(".selected:first",c),e;d.length?a==1?e=d.nextAll(".story:visible").eq(0):a==-1&&(e=d.prevAll(".story:visible").eq(0)):e=d=b(".story:first",c);if(a=e.data("story_id"))a=this.model.get_story(a),this.push_current_story_on_history(),this.open_story(a,e),this.scroll_story_titles_to_show_selected_story_title(e)},
show_next_unread_story:function(){var a=this.$s.$story_titles,c=b(".selected",a);if(this.get_unread_count(!0))if(c.length?(a=c.nextAll(".story:not(.read):visible").eq(0),a.length||(a=c.prevAll(".story:not(.read):visible").eq(0))):a=b(".story:not(.read):visible:first",a),a&&a.length){if(this.counts.find_next_unread_on_page_of_feed_stories_load=0,c=a.data("story_id"))c=this.model.get_story(c),this.push_current_story_on_history(),this.open_story(c,a),this.scroll_story_titles_to_show_selected_story_title(a)}else this.counts.find_next_unread_on_page_of_feed_stories_load<
this.constants.FILL_OUT_PAGES&&(this.counts.find_next_unread_on_page_of_feed_stories_load+=1,this.load_page_of_feed_stories())},open_next_unread_story_across_feeds:function(){if(!this.active_feed||!this.get_unread_count(!0)){var a=this.get_next_unread_feed(1);this.open_feed(parseInt(a.attr("data-id"),10),!0,a)}this.show_next_unread_story()},show_last_unread_story:function(){var a=this.$s.$story_titles,c=b(".selected",a),d,e=this.get_unread_count(!0);NEWSBLUR.log(["show_last_unread_story",e,c]);if(e)if(b(".story:not(.read):visible",
a).length>=e&&(d=b(".story:not(.read):visible:last",a)),d&&d.length){if(this.counts.find_last_unread_on_page_of_feed_stories_load=0,a=d.data("story_id"))a=this.model.get_story(a),this.push_current_story_on_history(),this.open_story(a,d),this.scroll_story_titles_to_show_selected_story_title(d)}else this.counts.find_last_unread_on_page_of_feed_stories_load<this.constants.FILL_OUT_PAGES&&(this.counts.find_last_unread_on_page_of_feed_stories_load+=1,this.load_page_of_feed_stories())},show_previous_story:function(){if(this.cache.previous_stories_stack.length){var a=
this.cache.previous_stories_stack.pop();if(a.length&&!a.is(":visible"))this.show_previous_story();else{var b=a.data("story_id");b&&(this.open_story(this.model.get_story(b),a),this.scroll_story_titles_to_show_selected_story_title(a))}}},scroll_story_titles_to_show_selected_story_title:function(a){var b=this.$s.$story_titles;if(!b.isScrollVisible(a)){b.position();var a=a.position().top,d=b.scrollTop(),e=b.outerHeight();b.scrollTop(a+d-e/5)}},show_next_feed:function(a,b){var d=this.$s.$feed_list,e=this.get_next_feed(a,
b),f=parseInt(e.attr("data-id"),10);if(f&&f==this.active_feed)this.show_next_feed(a,e);else if(f){var g=d.scrollTop()+e.offset().top-e.outerHeight(),j=d.height()-100;scroll=g>j?g:0;d.scrollTop(scroll);this.open_feed(f,!1,e,350)}},get_next_feed:function(a,c){var d=this.$s.$feed_list,c=c||b(".selected",d),e=b(".feed:visible:not(.NB-empty)",d).add(".feed.selected");c.length?(e.each(function(a){if(this==c[0])return current_feed=a,!1}),d=e.eq((current_feed+a)%e.length)):d=c=b(".feed:visible:not(.NB-empty)",
d)[a==1?"first":"last"]();return d},get_next_unread_feed:function(a,c){var d=this.$s.$feed_list,c=c||b(".selected",d),e=this.get_unread_view_name(),d=b(".feed:visible:not(.NB-empty)",d).filter(function(){var a=b(this);if(e=="positive")return a.is(".unread_positive");else if(e=="neutral")return a.is(".unread_positive,.unread_neutral");else if(e=="negative")return a.is(".unread_positive,.unread_neutral,.unread_negative")}).add(".feed.selected");c.length?(d.each(function(a){if(this==c[0])return current_feed=
a,!1}),d=d.eq((current_feed+a)%d.length)):d=d.first();return d},get_current_folder:function(){var a=b(".folder.NB-selected",this.$s.$feed_list);return a.length?a.eq(0):this.$s.$feed_list},navigate_story_titles_to_story:function(a){if(a){var b=this.find_story_in_story_titles(a.id);if(b&&b.length&&b.is(":visible")&&!b.hasClass("selected")&&(this.scroll_story_titles_to_show_selected_story_title(b),this.active_story!=a))this.push_current_story_on_history(),this.active_story=a,this.mark_story_title_as_selected(b),
this.mark_story_as_read(a.id),this.mark_story_as_read_in_feed_view(a,{animate:this.story_view=="feed"})}},mark_story_as_read_in_feed_view:function(a){a&&($story=this.cache.feed_view_stories[a.id]||this.find_story_in_feed_view(a.id))&&$story.addClass("read")},page_in_story:function(a,b){var d=this.$s.$story_pane.height(),d=parseInt(d*a,10),e="+";b==-1&&(e="-");this.story_view=="page"?this.$s.$feed_iframe.scrollTo({top:e+"="+d,left:"+=0"},260):this.story_view=="feed"&&this.$s.$feed_stories.scrollTo({top:e+
"="+d,left:"+=0"},370)},push_current_story_on_history:function(){var a=b(".selected",this.$s.$story_titles);a.length&&this.cache.previous_stories_stack.push(a)},load_feeds:function(){if(b("#feed_list").length)b(".NB-callout-ftux .NB-callout-text").text("Loading feeds..."),this.$s.$feed_link_loader.css({display:"block"}),this.flags.favicons_downloaded=!1,this.model.load_feeds(b.rescope(this.make_feeds,this))},make_feeds:function(){var a=this.$s.$feed_list,c=this.model.folders;a.empty();this.$s.$story_taskbar.css({display:"block"});
this.flags.has_chosen_feeds=this.detect_all_inactive_feeds();var d=this.make_feeds_folder(c,0);a.css({display:"block",opacity:0});a.html(d);this.count_collapsed_unread_stories();a.animate({opacity:1},{duration:700});this.hover_over_feed_titles(a);this.$s.$feed_link_loader.fadeOut(250);c.length&&(b(".NB-task-manage").removeClass("NB-disabled"),b(".NB-callout-ftux").fadeOut(500));if(NEWSBLUR.Globals.is_authenticated&&this.flags.has_chosen_feeds)_.delay(_.bind(this.start_count_unreads_after_import,this),
1E3),this.force_feeds_refresh(b.rescope(this.finish_count_unreads_after_import,this),!0);else if(!this.flags.has_chosen_feeds&&this.flags.favicons_downloaded&&c.length){_.defer(_.bind(this.open_feedchooser_modal,this),100);return}else NEWSBLUR.Globals.is_authenticated&&!c.length&&this.setup_ftux_add_feed_callout();c.length&&(this.load_sortable_feeds(),this.update_header_counts(),_.delay(_.bind(this.update_starred_count,this),250));this.flags.showing_feed_in_tryfeed_view&&(this.hide_tryfeed_view(),
this.force_feed_refresh());this.add_url_from_querystring();_.defer(_.bind(function(){this.model.load_feed_favicons(b.rescope(this.make_feed_favicons,this),this.flags.favicons_downloaded,this.flags.has_chosen_feeds);this.setup_socket_realtime_unread_counts(NEWSBLUR.Globals.is_admin)},this))},make_feed_favicons:function(){var a=this.model;this.flags.favicons_downloaded=!0;b(".feed_favicon",this.$s.$feed_list).each(function(){var c=b(this),d=c.closest(".feed").attr("data-id");c.attr("src",b.favicon(a.get_feed(d).favicon))});
!this.flags.has_chosen_feeds&&this.model.folders.length&&_.defer(_.bind(this.open_feedchooser_modal,this),100)},sort_items:function(a){var b=this,d=this.model.preference("feed_order");if(d=="ALPHABETICAL"||!d)return a.sort(function(a,d){var g,j;_.isNumber(a)&&(g=b.model.get_feed(a));_.isNumber(d)&&(j=b.model.get_feed(d));if(g&&j)return g.feed_title.toLowerCase()>j.feed_title.toLowerCase()?1:-1;else if(g&&!j)return-1;else if(!g&&j)return 1;else if(!g&&!j&&!_.isNumber(a)&&!_.isNumber(d))return g=_.keys(a)[0],
j=_.keys(d)[0],g.toLowerCase()>j.toLowerCase()?1:-1});else if(d=="MOSTUSED")return a.sort(function(a,d){var g,j;_.isNumber(a)&&(g=b.model.get_feed(a));_.isNumber(d)&&(j=b.model.get_feed(d));if(g&&j)return g.feed_opens<j.feed_opens?1:g.feed_opens>j.feed_opens?-1:g.feed_title.toLowerCase()>j.feed_title.toLowerCase()?1:-1;else if(g&&!j)return-1;else if(!g&&j)return 1;else if(!g&&!j&&!_.isNumber(a)&&!_.isNumber(d))return g=_.keys(a)[0],j=_.keys(d)[0],g.toLowerCase()>j.toLowerCase()?1:-1})},sort_feeds:function(a){b(".feed",
a).tsort(".feed_title");b(".folder",a).tsort(".folder_title_text")},detect_all_inactive_feeds:function(){return _.any(this.model.feeds,function(a){return a.active})},make_feeds_folder:function(a,b){var d="",a=this.sort_items(a),e;for(e in a){var f=a[e];if(typeof f=="number"){if(f=this.model.get_feed(f)){var g=this.make_feed_title_template(f,"feed",b);d+=g;f.not_yet_fetched&&(this.flags.has_unfetched_feeds=!0)}}else if(typeof f=="object"&&f)for(var j in f){var g=_.contains(NEWSBLUR.Preferences.collapsed_folders,
j),k=f[j],l=_.template('                        <li class="folder">                          <div class="folder_title <% if (depth == 0) { %>NB-toplevel<% } %>">                            <div class="NB-folder-icon"></div>                            <div class="NB-feedlist-collapse-icon" title="<% if (is_collapsed) { %>Expand Folder<% } else {%>Collapse Folder<% } %>"></div>                            <div class="NB-feedlist-manage-icon"></div>                            <span class="folder_title_text"><%= folder_title %></span>                          </div>                          <ul class="folder" <% if (is_collapsed) { %>style="display: none"<% } %>>                        ',
{depth:b,folder_title:j,is_collapsed:g});d+=l+this.make_feeds_folder(k,b+1,g)+"</ul></li>"}}d+='<li class="feed NB-empty"></li>';return d},make_feed_title_template:function(a,b,d){var e="",f="";a.ps&&(e+=" unread_positive");a.nt&&(e+=" unread_neutral");a.ng&&(e+=" unread_negative");a.has_exception&&a.exception_type=="feed"&&(f+=" NB-feed-exception");a.not_yet_fetched&&!a.has_exception&&(f+=" NB-feed-unfetched");a.active||(f+=" NB-feed-inactive");var g=this.make_feed_counts_floater(a.ps,a.nt,a.ng,
!0);return _.template('            <<%= list_type %> class="feed <%= unread_class %> <%= exception_class %> <% if (toplevel) { %>NB-toplevel<% } %>" data-id="<%= feed.id %>">              <div class="feed_counts">                <%= feed_counts_floater %>              </div>              <img class="feed_favicon" src="<%= $.favicon(feed.favicon, true) %>">              <span class="feed_title">                <%= feed.feed_title %>                <% if (type == "story") { %>                  <span class="NB-feedbar-train-feed" title="Train Intelligence"></span>                  <span class="NB-feedbar-statistics" title="Statistics"></span>                <% } %>              </span>              <% if (type == "story") { %>                <div class="NB-feedbar-last-updated">                  <span class="NB-feedbar-last-updated-label">Updated:</span>                  <span class="NB-feedbar-last-updated-date">                    <% if (feed.updated) { %>                      <%= feed.updated %> ago                    <% } else { %>                      Loading...                    <% } %>                  </span>                </div>                <div class="NB-feedbar-mark-feed-read">Mark All as Read</div>              <% } %>              <div class="NB-feed-exception-icon"></div>              <div class="NB-feed-unfetched-icon"></div>              <div class="NB-feedlist-manage-icon"></div>            </<%= list_type %>>            ',
{feed:a,type:b,feed_counts_floater:g,unread_class:e,exception_class:f,toplevel:d==0,list_type:b=="feed"?"li":"div"})},make_feed_counts_floater:function(a,c,d,e){var f="";a&&(f+=" unread_positive");c&&(f+=" unread_neutral");d&&(f+=" unread_negative");a=_.template('            <div class="feed_counts_floater <%= unread_class %>">              <span class="unread_count unread_count_positive <% if (positive_count) { %>unread_count_full<% } else { %>unread_count_empty<% } %>">                <%= positive_count %>              </span>              <span class="unread_count unread_count_neutral <% if (neutral_count) { %>unread_count_full<% } else { %>unread_count_empty<% } %>">                <%= neutral_count %>              </span>              <span class="unread_count unread_count_negative <% if (negative_count) { %>unread_count_full<% } else { %>unread_count_empty<% } %>">                <%= negative_count %>              </span>            </div>            ',
{positive_count:a,neutral_count:c,negative_count:d,unread_class:f});e||(a=b(a));return a},load_sortable_feeds:function(){var a=this;this.$s.$feed_list.sortable({items:".feed,li.folder",connectWith:"ul.folder,.feed.NB-empty",placeholder:"NB-feeds-list-highlight",axis:"y",distance:4,cursor:"move",containment:".NB-feedlist",tolerance:"pointer",scrollSensitivity:35,start:function(b,d){a.flags.sorting_feed=!0;d.placeholder.attr("class",d.item.attr("class")+" NB-feeds-list-highlight");d.item.addClass("NB-feed-sorting");
a.$s.$feed_list.addClass("NB-feed-sorting");d.item.is(".folder")?(d.placeholder.html(d.item.children().clone()),d.item.data("previously_collapsed",d.item.data("collapsed")),a.collapse_folder(d.item.children(".folder_title"),!0),a.collapse_folder(d.placeholder.children(".folder_title"),!0),d.item.css("height",d.item.children(".folder_title").outerHeight(!0)+"px"),d.helper.css("height",d.helper.children(".folder_title").outerHeight(!0)+"px")):d.placeholder.html(d.item.children().clone())},change:function(b,
d){var e=d.placeholder.closest("ul.folder");a.sort_feeds(e)},stop:function(b,d){setTimeout(function(){a.flags.sorting_feed=!1},100);d.item.removeClass("NB-feed-sorting");a.$s.$feed_list.removeClass("NB-feed-sorting");a.sort_feeds(b.target);a.save_feed_order();d.item.css({backgroundColor:"#D7DDE6"}).animate({backgroundColor:"#F0F076"},{duration:800}).animate({backgroundColor:"#D7DDE6"},{duration:1E3});d.item.is(".folder")&&!d.item.data("previously_collapsed")&&(a.collapse_folder(d.item.children(".folder_title")),
a.collapse_folder(d.placeholder.children(".folder_title")))}})},save_feed_order:function(){var a=function(b){for(var d=[],b=b.children("li.folder, .feed"),e=0,f=b.length;e<f;e++){var g=b.eq(e);if(g.hasClass("feed"))(g=parseInt(g.attr("data-id"),10))&&d.push(g);else if(g.hasClass("folder")){var j=g.find(".folder_title_text").eq(0).text(),k={};k[j]=a(g.children("ul.folder").eq(0));d.push(k)}}return d};this.model.save_feed_order(a(this.$s.$feed_list))},count_collapsed_unread_stories:function(){var a=
this;_.each(NEWSBLUR.Preferences.collapsed_folders,_.bind(function(a){var d=b(".folder_title_text",this.$s.$feed_list).filter(function(){return b.trim(b(this).text())==b.trim(a)}).closest(".folder_title");this.collapse_folder(d,!0);var e=d.parent("li.folder").children("ul.folder");this.show_collapsed_folder_count(d,e,{skip_animation:!0})},this));this.model.preference("folder_counts")&&b(".folder_title",this.$s.$feed_list).each(function(){var c=b(this);if(!_.contains(NEWSBLUR.Preferences.collapsed_folders,
c.text())){var d=c.parent("li.folder").children("ul.folder");a.show_collapsed_folder_count(c,d,{skip_animation:!0})}})},collapse_folder:function(a,c){var d=this,e=a.parent("li.folder"),f=e.children("ul.folder");if(c||f.length&&f.eq(0).is(":visible")&&!e.data("collapsed"))this.model.collapsed_folders(b(".folder_title_text",a).text(),!0),e.data("collapsed",!0).addClass("NB-folder-collapsed"),f.animate({opacity:0},{queue:!1,duration:c?0:200,complete:function(){d.show_collapsed_folder_count(a,f);f.slideUp({duration:270,
easing:"easeOutQuart"})}});else if(f.length&&(e.data("collapsed")||!f.eq(0).is(":visible")))this.model.collapsed_folders(b(".folder_title_text",a).text(),!1),e.data("collapsed",!1).removeClass("NB-folder-collapsed"),this.model.preference("folder_counts")||this.hide_collapsed_folder_count(a),f.css({opacity:0}).slideDown({duration:240,easing:"easeInOutCubic",complete:function(){f.animate({opacity:1},{queue:!1,duration:200})}})},show_collapsed_folder_count:function(a,c,d){var d=d||{},e=b(".feed_counts_floater",
a);e.remove();var c=b("li.feed",c).not(".NB-feed-inactive"),f=b(".NB-feedlist-collapse-icon",a),g=0,j=0,k=0;b(".unread_count_positive.unread_count_full",c).each(function(){g+=parseInt(b(this).text(),10)});b(".unread_count_neutral.unread_count_full",c).each(function(){j+=parseInt(b(this).text(),10)});b(".unread_count_negative.unread_count_full",c).each(function(){k+=parseInt(b(this).text(),10)});a.hasClass("NB-hover")&&(f.animate({opacity:0},{duration:d.skip_animation?0:100}),a.addClass("NB-feedlist-folder-title-recently-collapsed"),
a.one("mouseover",function(){f.css({opacity:""});a.removeClass("NB-feedlist-folder-title-recently-collapsed")}));e=this.make_feed_counts_floater(g,j,k);a.prepend(e.css({opacity:0}));e.animate({opacity:1},{duration:d.skip_animation?0:400})},hide_collapsed_folder_count:function(a){var c=b(".feed_counts_floater",a),d=b(".NB-feedlist-collapse-icon",a);c.animate({opacity:0},{duration:300});d.animate({opacity:0.6},{duration:400});a.removeClass("NB-feedlist-folder-title-recently-collapsed");a.one("mouseover",
function(){d.css({opacity:""})})},hover_over_feed_titles:function(a){var c=this,a=a||this.$s.$feed_list,a=a.is(".feed")?a:b(".feed, .folder_title",a);a.unbind("mouseenter").unbind("mouseleave");a.hover(function(){if(!c.$s.$feed_list.hasClass("NB-feed-sorting")){var a=b(this);a.offset().top>b(window).height()-270&&a.addClass("NB-hover-inverse")}},function(){b(this).removeClass("NB-hover-inverse")})},show_feed_chooser_button:function(){var a=this.$s.$feeds_progress;b(".NB-progress-bar",a);b(".NB-progress-title",
a).text("Get Started");b(".NB-progress-counts",a).hide();b(".NB-progress-percentage",a).hide();a.addClass("NB-progress-error").addClass("NB-progress-big");b(".NB-progress-link",a).html(b.make("a",{href:"#",className:"NB-splash-link NB-menu-manage-feedchooser"},"Choose your 64"));this.show_progress_bar()},hide_feed_chooser_button:function(){var a=this.$s.$feeds_progress;b(".NB-progress-bar",a);a.removeClass("NB-progress-error").removeClass("NB-progress-big");this.hide_progress_bar()},check_feed_fetch_progress:function(){b.extend(this.counts,
{unfetched_feeds:0,fetched_feeds:0});if(this.flags.has_unfetched_feeds){var a=this.model.count_unfetched_feeds();this.counts.unfetched_feeds=a.unfetched_feeds;this.counts.fetched_feeds=a.fetched_feeds;this.counts.unfetched_feeds==0?(this.flags.has_unfetched_feeds=!1,this.hide_unfetched_feed_progress()):(this.flags.has_unfetched_feeds=!0,this.show_unfetched_feed_progress())}},show_progress_bar:function(){var a=this.$s.$feeds_progress.parents(".left-center").layout();if(!this.flags.showing_progress_bar)this.flags.showing_progress_bar=
!0,a.open("south");a.sizePane("south")},hide_progress_bar:function(a){a&&this.model.preference("hide_fetch_progress",!0);this.flags.showing_progress_bar=!1;this.$s.$feeds_progress.parents(".left-center").layout().close("south")},show_unfetched_feed_progress:function(){var a=this,c=this.$s.$feeds_progress,d=parseInt(this.counts.fetched_feeds/(this.counts.unfetched_feeds+this.counts.fetched_feeds)*100,10);b(".NB-progress-title",c).text("Fetching your feeds");b(".NB-progress-counts",c).show();b(".NB-progress-counts-fetched",
c).text(this.counts.fetched_feeds);b(".NB-progress-counts-total",c).text(this.counts.unfetched_feeds+this.counts.fetched_feeds);b(".NB-progress-percentage",c).show().text(d+"%");b(".NB-progress-bar",c).progressbar({value:d});!c.is(":visible")&&!this.model.preference("hide_fetch_progress")&&setTimeout(function(){a.show_progress_bar()},1E3);this.setup_feed_refresh(!0)},hide_unfetched_feed_progress:function(a){a&&this.model.preference("hide_fetch_progress",!0);this.setup_feed_refresh();this.hide_progress_bar()},
switch_preferences_hide_read_feeds:function(){var a=parseInt(this.model.preference("hide_read_feeds"),10),c=b(".NB-feeds-header-sites");this.model.preference("show_tooltips")&&(a?(c.tipsy("hide"),c.attr("title","Show only unread stories")):(c.tipsy("hide"),c.attr("title","Show all sites")),c.tipsy("show"));this.model.preference("hide_read_feeds",a?0:1);this.switch_feed_view_unread_view()},reset_feed:function(){b.extend(this.flags,{iframe_story_locations_fetched:!1,iframe_view_loaded:!1,iframe_view_not_busting:!1,
feed_view_images_loaded:{},feed_view_positions_calculated:!1,scrolling_by_selecting_story_title:!1,switching_to_feed_view:!1,page_view_showing_feed_view:!1,feed_view_showing_story_view:!1,iframe_fetching_story_locations:!1,story_titles_loaded:!1,iframe_prevented_from_loading:!1,pause_feed_refreshing:!1,feed_list_showing_manage_menu:!1,unread_threshold_temporarily:null,river_view:!1,non_premium_river_view:!1});b.extend(this.cache,{iframe:{},iframe_stories:{},feed_view_stories:{},iframe_story_positions:{},
feed_view_story_positions:{},iframe_story_positions_keys:[],feed_view_story_positions_keys:[],previous_stories_stack:[],river_feeds_with_unreads:[],mouse_position_y:parseInt(this.model.preference("lock_mouse_indicator"),10),prefetch_last_story:0,prefetch_iteration:0,feed_title_floater_feed_id:null,feed_title_floater_story_id:null,last_feed_view_story_feed_id:null,$feed_in_feed_list:{},$feed_counts_in_feed_list:{}});b.extend(this.counts,{page_fill_outs:0,find_next_unread_on_page_of_feed_stories_load:0,
find_last_unread_on_page_of_feed_stories_load:0});this.active_story=this.active_feed=null;this.$s.$story_titles.data("page",1);this.$s.$story_titles.data("feed_id",null);this.$s.$feed_stories.scrollTop(0);this.$s.$feed_stories.empty();this.$s.$story_titles.empty();this.$s.$starred_header.removeClass("NB-selected");this.$s.$river_header.removeClass("NB-selected");this.$s.$tryfeed_header.removeClass("NB-selected");b(".NB-selected",this.$s.$feed_list).removeClass("NB-selected");this.$s.$body.removeClass("NB-view-river");
b(".task_view_page",this.$s.$taskbar).removeClass("NB-disabled");b(".task_view_page",this.$s.$taskbar).removeClass("NB-task-return");this.hide_content_pane_feed_counter();this.flags.showing_feed_in_tryfeed_view&&this.hide_tryfeed_view()},open_feed:function(a,c,d,e){var f=this,g=this.$s.$story_titles;this.flags.opening_feed=!0;if(a!=this.active_feed||c)g.empty().scrollTop(0),this.reset_feed(),this.hide_splash_page(),this.next_feed=this.active_feed=a,this.show_stories_progress_bar(),g.data("page",1),
g.data("feed_id",a),this.iframe_scroll=null,this.set_correct_story_view_for_feed(a),d=d||b(".feed.selected",this.$s.$feed_list).eq(0),this.mark_feed_as_selected(a,d),this.show_feed_title_in_stories(a),this.show_feedbar_loading(),this.switch_taskbar_view(this.story_view),_.delay(_.bind(function(){(!e||a==f.next_feed)&&this.model.load_feed(a,1,!0,b.rescope(this.post_open_feed,this),_.bind(this.show_stories_error,this))},this),e||0),!this.story_view||this.story_view=="page"?_.delay(_.bind(function(){(!e||
a==this.next_feed)&&this.load_feed_iframe(a)},this),e||0):(this.unload_feed_iframe(),this.flags.iframe_prevented_from_loading=!0),this.setup_mousemove_on_views()},post_open_feed:function(a,c,d){if(!c)return this.open_feed(this.active_feed,!0);var e=c.stories,a=c.feed_id;if(c.dupe_feed_id&&this.active_feed==c.dupe_feed_id)this.active_feed=c.feed_id;if(this.active_feed==a)this.flags.opening_feed=!1,this.flags.feed_view_positions_calculated=!1,this.story_titles_clear_loading_endbar(),this.create_story_titles(e),
this.make_story_feed_entries(e,d),this.show_feed_hidden_story_title_indicator(!0),this.show_story_titles_above_intelligence_level({animate:!1}),this.fill_out_story_titles(),b(".NB-feedbar-last-updated-date").text(c.last_update+" ago"),this.counts.find_next_unread_on_page_of_feed_stories_load?this.show_next_unread_story(!0):this.counts.find_last_unread_on_page_of_feed_stories_load&&this.show_last_unread_story(!0),this.flags.story_titles_loaded=!0,d?this.story_view=="page"?this.flags.iframe_view_loaded?
(d=this.$s.$feed_iframe.contents(),this.fetch_story_locations_in_story_frame(0,!0,d)):_.delay(_.bind(function(){this.prefetch_story_locations_in_story_frame()},this),250):this.story_view=="feed"?this.prefetch_story_locations_in_feed_view():this.story_view=="story"&&this.show_next_story(1):(c=this.cache.iframe_story_positions_keys.length,this.flags.iframe_story_locations_fetched=!1,d=this.$s.$feed_iframe.contents(),this.fetch_story_locations_in_story_frame(c,!1,d),(this.story_view=="feed"||this.flags.page_view_showing_feed_view)&&
this.prefetch_story_locations_in_feed_view()),this.flags.open_unread_stories_in_tabs&&_.defer(_.bind(this.open_unread_stories_in_tabs,this)),this.hide_stories_progress_bar(),this.flags.showing_feed_in_tryfeed_view&&this.show_tryfeed_add_button(),this.make_content_pane_feed_counter(a)},setup_mousemove_on_views:function(){var a=this.$s.$feed_iframe.contents();a.unbind("scroll").scroll(b.rescope(this.handle_scroll_feed_iframe,this));this.hide_mouse_indicator();a.unbind("mousemove.reader").bind("mousemove.reader",
b.rescope(this.handle_mousemove_iframe_view,this));this.$s.$content_pane.unbind("mouseleave.reader").bind("mouseleave.reader",b.rescope(this.hide_mouse_indicator,this));this.$s.$content_pane.unbind("mouseenter.reader").bind("mouseenter.reader",b.rescope(this.show_mouse_indicator,this))},set_correct_story_view_for_feed:function(a,c){var d=this.model.get_feed(a),c=c||this.model.view_setting(a);d&&d.has_exception&&d.exception_type=="page"?(c=="page"&&(c="feed"),b(".task_view_page").addClass("NB-exception-page")):
b(".task_view_page").removeClass("NB-exception-page");this.story_view=c},update_header_counts:function(a,c){if(!a){var d=_.select(this.model.feeds,function(a){return a.active}).length;d&&b(".NB-feeds-header-right .NB-feeds-header-sites").text(d+Inflector.pluralize(" site",d))}var e=_.reduce(this.model.feeds,function(a,b){b.active&&(a.positive+=b.ps,a.neutral+=b.nt,a.negative+=b.ng);return a},{positive:0,negative:0,neutral:0});_(["positive","neutral","negative"]).each(function(a){var c=b(".NB-feeds-header-"+
a);c.text(e[a]);c.toggleClass("NB-empty",e[a]==0)});if(this.model.preference("show_unread_counts_in_title")){var d="(",f=[],c=_.isNumber(c)&&c||this.model.preference("unread_view");c<=-1&&f.push(e.negative);c<=0&&f.push(e.neutral);c<=1&&f.push(e.positive);d+=f.join("/")+") NewsBlur";document.title=d}},update_starred_count:function(){var a=this.model.starred_count,c=b(".NB-feeds-header-count",this.$s.$starred_header),d=this.$s.$starred_header.closest(".NB-feeds-header-container");a<=0?(this.$s.$starred_header.addClass("NB-empty"),
c.text(""),d.slideUp(350)):a>0&&(c.text(a),this.$s.$starred_header.removeClass("NB-empty"),d.slideDown(350))},open_starred_stories:function(){var a=this.$s.$story_titles;a.empty().scrollTop("0px");this.reset_feed();this.hide_splash_page();this.active_feed="starred";a.data("page",1);a.data("feed_id",null);this.iframe_scroll=null;this.mark_feed_as_selected(null,null);this.show_correct_feed_in_feed_title_floater();this.$s.$starred_header.addClass("NB-selected");this.$s.$body.addClass("NB-view-river");
this.flags.river_view=!0;b(".task_view_page",this.$s.$taskbar).addClass("NB-disabled");(a=NEWSBLUR.Preferences.view_settings[this.active_feed])||(a="feed");this.set_correct_story_view_for_feed(this.active_feed,a);this.show_feedbar_loading();this.switch_taskbar_view(this.story_view);this.setup_mousemove_on_views();this.model.fetch_starred_stories(1,_.bind(this.post_open_starred_stories,this),_.bind(this.show_stories_error,this),!0)},post_open_starred_stories:function(a,b){if(this.active_feed=="starred")this.flags.feed_view_positions_calculated=
!1,this.story_titles_clear_loading_endbar(),this.create_story_titles(a.stories,{river_stories:!0}),this.make_story_feed_entries(a.stories,b,{river_stories:!0}),this.show_story_titles_above_intelligence_level({animate:!1}),this.flags.story_titles_loaded=!0,this.prefetch_story_locations_in_feed_view(),this.fill_out_story_titles()},open_river_stories:function(a,c){var d=this.$s.$story_titles,a=a||this.$s.$feed_list;d.empty().scrollTop("0px");this.reset_feed();this.hide_splash_page();c?(this.active_feed=
"river:"+c,a.addClass("NB-selected")):(this.active_feed="river:",this.$s.$river_header.addClass("NB-selected"));d.data("page",1);d.data("feed_id",null);this.iframe_scroll=null;this.flags.opening_feed=!0;this.mark_feed_as_selected(null,null);this.show_correct_feed_in_feed_title_floater();this.$s.$body.addClass("NB-view-river");this.flags.river_view=!0;b(".task_view_page",this.$s.$taskbar).addClass("NB-disabled");(d=NEWSBLUR.Preferences.view_settings[this.active_feed])||(d="feed");this.set_correct_story_view_for_feed(this.active_feed,
d);this.show_feedbar_loading();this.switch_taskbar_view(this.story_view);this.setup_mousemove_on_views();d=this.list_feeds_with_unreads_in_folder(a,!1,!0);this.cache.river_feeds_with_unreads=d;this.show_stories_progress_bar(d.length);this.model.fetch_river_stories(this.active_feed,d,1,_.bind(this.post_open_river_stories,this),_.bind(this.show_stories_error,this),!0)},post_open_river_stories:function(a,b){if(!a)return this.show_stories_error();if(this.active_feed&&this.active_feed.indexOf("river:")!=
-1)!NEWSBLUR.Globals.is_premium&&NEWSBLUR.Globals.is_authenticated&&this.flags.river_view&&this.active_feed.indexOf("river:")!=-1&&(this.flags.non_premium_river_view=!0),this.flags.opening_feed=!1,this.flags.feed_view_positions_calculated=!1,this.story_titles_clear_loading_endbar(),this.create_story_titles(a.stories,{river_stories:!0}),this.make_story_feed_entries(a.stories,b,{river_stories:!0}),this.show_story_titles_above_intelligence_level({animate:!1}),this.flags.story_titles_loaded=!0,this.counts.find_next_unread_on_page_of_feed_stories_load?
this.show_next_unread_story(!0):this.counts.find_last_unread_on_page_of_feed_stories_load&&this.show_last_unread_story(!0),this.fill_out_story_titles(),this.prefetch_story_locations_in_feed_view(),this.hide_stories_progress_bar()},list_feeds_with_unreads_in_folder:function(a,c,d){var e=this.model,f=this.get_unread_view_name(),a=a||this.$s.$feed_list;b(".feed:not(.NB-empty)",a);return _.compact(_.map(b(".feed:not(.NB-empty)",a),function(a){var a=parseInt(b(a).attr("data-id"),10),j=e.get_feed(a);if(j)if(c&&
!d)return j.ps+j.nt+j.ng;else if(c&&d){if(f=="positive")return j.ps;if(f=="neutral")return j.ps+j.nt;if(f=="negative")return j.ps+j.nt+j.ng}else if(!c&&d){if(f=="positive")return j.ps&&a;if(f=="neutral")return(j.ps||j.nt)&&a;if(f=="negative")return(j.ps||j.nt||j.ng)&&a}else return(j.ps||j.nt||j.ng)&&a}))},show_stories_progress_bar:function(a){this.hide_stories_error();var c=b.make("div",{className:"NB-river-progress"},[b.make("div",{className:"NB-river-progress-text"}),b.make("div",{className:"NB-river-progress-bar"})]).css({opacity:0});
this.$s.$story_taskbar.append(c);c.animate({opacity:1},{duration:500,queue:!1});var d=b(".NB-river-progress-bar",c),a=a?a:this.get_unread_count(!1)/10;this.animate_progress_bar(d,a);b(".NB-river-progress-text",c).text("Fetching stories");d=c.width();d=this.$s.$story_taskbar.width()/2-d/2;c.css({left:d})},hide_stories_progress_bar:function(){var a=b(".NB-river-progress",this.$s.$story_taskbar);a.stop().animate({opacity:0},{duration:250,queue:!1,complete:function(){a.remove()}})},show_stories_error:function(){console.log(["show_stories_error",
arguments]);this.hide_stories_progress_bar();var a=b.make("div",{className:"NB-feed-error"},[b.make("div",{className:"NB-feed-error-icon"}),b.make("div",{className:"NB-feed-error-text"},"Oh no! There was an error!")]).css({opacity:0});this.$s.$story_taskbar.append(a);a.animate({opacity:1},{duration:500,queue:!1});var c=a.width(),c=this.$s.$story_taskbar.width()/2-c/2;a.css({left:c});this.story_titles_clear_loading_endbar();this.append_story_titles_endbar()},hide_stories_error:function(){var a=b(".NB-feed-error",
this.$s.$story_taskbar);a.animate({opacity:0},{duration:250,queue:!1,complete:function(){a.remove()}})},open_story:function(a,b){var d;if(this.active_story!=a){this.active_story=a;this.mark_story_title_as_selected(b);this.mark_story_as_read_in_feed_view(a,{animate:!0});this.unload_story_iframe();clearTimeout(this.locks.scrolling);_.contains(["feed","page"],this.story_view)&&(this.flags.scrolling_by_selecting_story_title=!0);d=this.find_story_in_feed_view(a.id);if(this.story_view=="page"){var e=this.find_story_in_feed_iframe(a);
!e||!e.length||!this.flags.story_titles_loaded?(this.switch_to_correct_view(!1),this.scroll_to_story_in_story_feed(a,d),this.show_stories_preference_in_feed_view(!0)):(d=this.scroll_to_story_in_iframe(a,e),this.switch_to_correct_view(d))}else this.story_view=="feed"?(this.switch_to_correct_view(),this.scroll_to_story_in_story_feed(a,d),this.show_stories_preference_in_feed_view(!0)):this.story_view=="story"&&this.open_story_in_story_view(a);_.defer(_.bind(this.mark_story_as_read,this,a.id))}},switch_to_correct_view:function(a){if(a===
!1){if(this.story_view=="page"&&!this.flags.page_view_showing_feed_view)this.flags.page_view_showing_feed_view=!0,this.flags.feed_view_showing_story_view=!1,this.switch_taskbar_view("feed","page"),this.show_stories_preference_in_feed_view()}else if(this.story_view=="page"&&this.flags.page_view_showing_feed_view)this.flags.page_view_showing_feed_view=!1,this.flags.feed_view_showing_story_view=!1,this.switch_taskbar_view("page");else if(this.flags.feed_view_showing_story_view)this.flags.page_view_showing_feed_view=
!1,this.flags.feed_view_showing_story_view=!1,this.switch_taskbar_view(this.story_view,!0)},scroll_to_story_in_story_feed:function(a,c,d){var e=this,f=this.$s.$feed_view,g=this.$s.$feed_stories;if(!a||!c||!c.length)c=b(".story:first",f),a=this.model.get_story(c.data("story"));if(a&&c&&c.length){this.model.preference("animations")||(d=!0);if(c&&c.length)if(d||this.story_view=="feed"&&this.model.preference("feed_view_single_story")||this.story_view=="page"&&!this.flags.page_view_showing_feed_view)this.locks.scrolling=
setTimeout(function(){e.flags.scrolling_by_selecting_story_title=!1},100),g.scrollTo(c,{duration:0,axis:"y",offset:0});else if(this.story_view=="feed"||this.flags.page_view_showing_feed_view)g.scrollable().stop(),g.scrollTo(c,{duration:340,axis:"y",easing:"easeInOutQuint",offset:0,queue:!1,onAfter:function(){e.locks.scrolling=setTimeout(function(){e.flags.scrolling_by_selecting_story_title=!1},100)}});a=c.parents(".NB-feed-story-view").scrollTop();return c.offset().top+a}},scroll_to_story_in_iframe:function(a,
b,d){var e=this,a=this.$s.$feed_iframe;this.model.preference("animations")||(d=!0);return b&&b.length?(d||this.story_view=="feed"||this.story_view=="story"||this.flags.page_view_showing_feed_view?(a.scrollTo(b,{duration:0,axis:"y",offset:-24}),e.locks.scrolling=setTimeout(function(){e.flags.scrolling_by_selecting_story_title=!1},100)):this.story_view=="page"&&(a.scrollable().stop(),a.scrollTo(b,{duration:380,axis:"y",easing:"easeInOutQuint",offset:-24,queue:!1,onAfter:function(){e.locks.scrolling=
setTimeout(function(){e.flags.scrolling_by_selecting_story_title=!1},100)}})),d=b.parents(".NB-feed-story-view").scrollTop(),b.offset().top+d):!1},prefetch_story_locations_in_story_frame:function(){var a=this,c=this.model.stories,d=this.$s.$feed_iframe.contents(),e=3;this.cache.prefetch_iteration+=1;if(!this.flags.iframe_fetching_story_locations&&!this.flags.iframe_story_locations_fetched){d.unbind("scroll").scroll(b.rescope(this.handle_scroll_feed_iframe,this));d.unbind("mousemove.reader").bind("mousemove.reader",
b.rescope(this.handle_mousemove_iframe_view,this));var f=this.cache.iframe_story_positions_keys.length,g=_.last(this.cache.iframe_story_positions_keys),j=this.cache.iframe_story_positions[g],k;j&&(k=this.find_story_in_feed_iframe(j,d));var l;k&&k.length&&((l=parseInt(k.offset().top,10)==g)||b.extend(this.cache,{iframe_stories:{},iframe_story_positions:{},iframe_story_positions_keys:[]}));for(var m in c)if(!(l&&parseInt(m,10)<f)&&(g=this.find_story_in_feed_iframe(c[m],d),!g||!g.length||this.flags.iframe_fetching_story_locations||
this.flags.iframe_story_locations_fetched||parseInt(g.offset().top,10)>this.cache.prefetch_iteration*2E3)){if(g&&g.length)break;if(e)e-=1;else break}}!this.flags.iframe_fetching_story_locations&&!this.flags.iframe_story_locations_fetched&&setTimeout(function(){!a.flags.iframe_fetching_story_locations&&!a.flags.iframe_story_locations_fetched&&a.prefetch_story_locations_in_story_frame()},1E3)},fetch_story_locations_in_story_frame:function(a,c,d){var e=this,f=this.model.stories;a||(a=0);var g=f[a];d||
(d=this.$s.$feed_iframe.contents());this.flags.iframe_fetching_story_locations=!0;this.flags.iframe_story_locations_fetched=!1;c&&b.extend(this.cache,{iframe_stories:{},iframe_story_positions:{},iframe_story_positions_keys:[]});g&&g.story_feed_id==this.active_feed?(this.find_story_in_feed_iframe(g,d),setTimeout(function(){f.length-1>=a+1&&(a<3||e.cache.iframe_stories[f[a].id]&&e.cache.iframe_stories[f[a].id].length||e.cache.iframe_stories[f[a-1].id]&&e.cache.iframe_stories[f[a-1].id].length||e.cache.iframe_stories[f[a-
2].id]&&e.cache.iframe_stories[f[a-2].id].length)?(e.fetch_story_locations_in_story_frame(a+1,!1,d),e.flags.iframe_story_locations_fetched=!1):(NEWSBLUR.log(["iFrame view entirely loaded",a-2+" stories",e.cache.iframe_stories]),e.flags.iframe_story_locations_fetched=!0,e.flags.iframe_fetching_story_locations=!1,clearInterval(e.flags.iframe_scroll_snapback_check))},20)):g&&g.story_feed_id!=this.active_feed&&NEWSBLUR.log(["Switched off iframe early"])},open_story_link:function(a){window.open(a.story_permalink,
"_blank");window.focus()},mark_story_title_as_selected:function(a){b(".selected",this.$s.$story_titles).removeClass("selected");a.addClass("selected")},mark_story_as_read:function(a){var b=this,d=this.find_story_in_story_titles(a),e=parseInt(d.data("feed_id"),10)||this.active_feed;this.model.mark_story_as_read(a,e,function(d){b.update_read_count(a,e,!1,d)})},mark_story_as_unread:function(a,b){var d=this,b=b||this.model.get_story(a).story_feed_id;this.model.mark_story_as_unread(a,b,function(){d.update_read_count(a,
b,!0)})},update_read_count:function(a,c,d,e){if(!e){var e=this.model.get_feed(c),f=this.find_feed_in_feed_list(c),g=this.cache.$feed_counts_in_feed_list[c]||b(".feed_counts_floater",f),j=this.find_story_in_story_titles(a),k=this.find_story_in_feed_view(a),l=this.$s.$content_pane,m=b(".feed_counts_floater",l),a=this.get_unread_view_name();this.cache.$feed_counts_in_feed_list[c]=g;j.toggleClass("read",!d);k.toggleClass("read",!d);if(j.is(".NB-story-positive"))c=Math.max(e.ps+(d?1:-1),0),e.ps=c,b(".unread_count_positive",
f).text(c),b(".unread_count_positive",l).text(c),c==0?(f.removeClass("unread_positive"),g.removeClass("unread_positive")):(f.addClass("unread_positive"),g.addClass("unread_positive"));else if(j.is(".NB-story-neutral"))c=Math.max(e.nt+(d?1:-1),0),e.nt=c,b(".unread_count_neutral",f).text(c),b(".unread_count_neutral",l).text(c),c==0?(f.removeClass("unread_neutral"),g.removeClass("unread_neutral")):(f.addClass("unread_neutral"),g.addClass("unread_neutral"));else if(j.is(".NB-story-negative"))c=Math.max(e.ng+
(d?1:-1),0),e.ng=c,b(".unread_count_negative",f).text(c),b(".unread_count_negative",l).text(c),c==0?(f.removeClass("unread_negative"),g.removeClass("unread_negative")):(f.addClass("unread_negative"),g.addClass("unread_negative"));_.defer(function(){m.animate({opacity:1},{duration:250,queue:!1});_.delay(function(){m.animate({opacity:0.1},{duration:250,queue:!1})},400)});if(this.model.preference("folder_counts")||!f.is(":visible"))c=f.closest("li.folder:visible").children(".folder_title"),d=c.closest("li.folder").children("ul.folder, .feed"),
this.show_collapsed_folder_count(c,d);(a=="positive"&&e.ps==0||a=="neutral"&&e.ps==0&&e.nt==0||a=="negative"&&e.ps==0&&e.nt==0&&e.ng==0)&&_.delay(function(){m.animate({top:b("#story_taskbar").height()},{duration:500,queue:!1,easing:"easeOutQuint"})},500);this.update_header_counts(!0)}},mark_feed_as_read:function(a){a=a||this.active_feed;this.mark_feed_as_read_update_counts(a);this.model.mark_feed_as_read([a]);this.update_header_counts(!0);if(this.model.preference("folder_counts")){var a=this.find_feed_in_feed_list(a).closest("li.folder:visible").children(".folder_title"),
b=a.closest("li.folder").children("ul.folder, .feed");this.show_collapsed_folder_count(a,b)}},mark_folder_as_read:function(a,c){var c=c||this.get_current_folder(),a=a||b(".folder_title_text",c).eq(0).text(),d=this.get_feed_ids_in_folder(c);_.each(d,_.bind(function(a){this.mark_feed_as_read_update_counts(a)},this));this.mark_feed_as_read_update_counts(null,c);this.model.mark_feed_as_read(d);this.update_header_counts(!0);_.includes(this.active_feed,a)&&(b(".story:not(.read)",this.$s.$story_titles).addClass("read"),
_.each(this.model.stories,_.bind(function(a){this.mark_story_as_read_in_feed_view(a)},this)))},mark_feed_as_read_update_counts:function(a,c){if(a){var d=this.model.get_feed(a);if(!d)return;var e=this.find_feed_in_feed_list(a),f=b(".feed_counts_floater",e),g=this.$s.$content_pane,j=this.$s.$story_titles;d.ps=0;d.nt=0;d.ng=0;b(".unread_count_neutral",e).text(0);b(".unread_count_positive",e).text(0);b(".unread_count_negative",e).text(0);a==this.active_feed&&(b(".unread_count_neutral",g).text(0),b(".unread_count_positive",
g).text(0),b(".unread_count_negative",g).text(0),b(".story:not(.read)",j).addClass("read"));e.removeClass("unread_neutral");e.removeClass("unread_positive");e.removeClass("unread_negative");f.removeClass("unread_neutral");f.removeClass("unread_positive");f.removeClass("unread_negative")}c&&(b(".unread_count_neutral",c).text(0),b(".unread_count_positive",c).text(0),b(".unread_count_negative",c).text(0),f=b(".feed_counts_floater",c),f.removeClass("unread_neutral"),f.removeClass("unread_positive"),f.removeClass("unread_negative"))},
open_story_trainer:function(a,b){a=a||this.get_current_story_id();b=b||a&&this.model.get_story(a).story_feed_id;if(a&&b)NEWSBLUR.classifier=new NEWSBLUR.ReaderClassifierStory(a,b,{feed_loaded:!this.flags.river_view})},mark_story_as_starred:function(a,c){var d=this.model.get_story(a),e=b(".NB-storytitles-star",c);c.addClass("NB-story-starred");e.attr({title:"Saved!"});e.tipsy({gravity:"sw",fade:!0,trigger:"manual",offsetOpposite:-1});e.tipsy("enable");e.tipsy("show");_.delay(function(){e.tipsy("hide");
e.tipsy("disable")},850);this.model.mark_story_as_starred(a,d.story_feed_id,function(){});this.update_starred_count()},mark_story_as_unstarred:function(a,c){var d=b(".NB-storytitles-star",c);c.one("mouseout",function(){c.removeClass("NB-unstarred")});d.attr({title:"Removed"});d.tipsy({gravity:"sw",fade:!0,trigger:"manual",offsetOpposite:-1});d.tipsy("enable");d.tipsy("show");_.delay(function(){d.tipsy("hide");d.tipsy("disable")},850);c.removeClass("NB-story-starred");this.model.mark_story_as_unstarred(a,
function(){});this.update_starred_count()},send_story_to_instapaper:function(a){var b=this.model.get_story(a),b=["http://www.instapaper.com/edit?url=",encodeURIComponent(b.story_permalink),"&title=",encodeURIComponent(b.story_title)].join("");window.open(b,"_blank");this.mark_story_as_read(a)},send_story_to_readitlater:function(a){var b=this.model.get_story(a),b=["https://readitlaterlist.com/save?url=",encodeURIComponent(b.story_permalink),"&title=",encodeURIComponent(b.story_title)].join("");window.open(b,
"_blank");this.mark_story_as_read(a)},send_story_to_readability:function(a){var b=this.model.get_story(a),b=["https://readability.com/save?url=",encodeURIComponent(b.story_permalink),"&title=",encodeURIComponent(b.story_title)].join("");window.open(b,"_blank");this.mark_story_as_read(a)},send_story_to_twitter:function(a){var b=this.model.get_story(a),b=["http://twitter.com/?status=",encodeURIComponent(b.story_title),": ",encodeURIComponent(b.story_permalink)].join("");window.open(b,"_blank");this.mark_story_as_read(a)},
send_story_to_facebook:function(a){var b=this.model.get_story(a),b=["http://www.facebook.com/sharer.php?src=newsblur&v=3.14159265&i=1.61803399&u=",encodeURIComponent(b.story_permalink),"&t=",encodeURIComponent(b.story_title)].join("");window.open(b,"_blank");this.mark_story_as_read(a)},send_story_to_pinboard:function(a){var b=this.model.get_story(a),b=["http://pinboard.in/add/?url=",encodeURIComponent(b.story_permalink),"&title=",encodeURIComponent(b.story_title),"&tags=",encodeURIComponent(b.story_tags.join(", "))].join("");
window.open(b,"_blank");this.mark_story_as_read(a)},send_story_to_googleplus:function(a){var b=this.model.get_story(a),b=["https://plusone.google.com/_/+1/confirm?hl=en&url=",encodeURIComponent(b.story_permalink),"&title=",encodeURIComponent(b.story_title),"&tags=",encodeURIComponent(b.story_tags.join(", "))].join("");window.open(b,"_blank");this.mark_story_as_read(a)},send_story_to_email:function(a){NEWSBLUR.reader_send_email=new NEWSBLUR.ReaderSendEmail(a);this.mark_story_as_read(a)},hide_content_pane_feed_counter:function(){b(".feed_counts_floater",
this.$s.$content_pane).remove()},make_content_pane_feed_counter:function(a){var c=this.$s.$content_pane,a=a||this.active_feed,a=this.model.get_feed(a),d=this.make_feed_counts_floater(a.ps,a.nt,a.ng);d.css({opacity:0});b(".feed_counts_floater",c).remove();this.$s.$story_taskbar.append(d);_.delay(function(){d.animate({opacity:0.1},{duration:1E3,queue:!1})},500);b(".unread_count",c).corner("4px");a=b(".feed_counts_floater",c).width();a=c.width()/2-a/2;b(".feed_counts_floater",c).css({left:a})},create_story_titles:function(a,
b){var d=this.$s.$story_titles,b=b||{};for(s in a){if(this.flags.non_premium_river_view&&d.children(":visible").length>=this.constants.RIVER_STORIES_FOR_STANDARD_ACCOUNT){this.append_story_titles_endbar();break}var e=this.make_story_title(a[s],b);d.append(e)}(!a||a.length==0)&&this.append_story_titles_endbar();this.hover_story_titles()},make_story_title:function(a,c){var d=this.model.preference("unread_view"),e=a.read_status?" read ":"",f=NEWSBLUR.utils.compute_story_score(a),g="neutral",j=a.starred?
" NB-story-starred ":"";if(c.river_stories)var k=this.model.get_feed(a.story_feed_id);f>0&&(g="positive");f<0&&(g="negative");var l=b.make("span",{className:"NB-storytitles-tags"}),m;for(m in a.story_tags){m=b.make("span",{className:"NB-storytitles-tag"},a.story_tags[m]).corner("4px");l.append(m);break}e=b.make("div",{className:"story "+e+j+"NB-story-"+g},[b.make("div",{className:"NB-storytitles-sentiment"}),b.make("a",{href:a.story_permalink,className:"story_title"},[c.river_stories&&k&&b.make("div",
{className:"NB-story-feed"},[b.make("img",{className:"feed_favicon",src:b.favicon(k.favicon)}),b.make("span",{className:"feed_title"},k.feed_title)]),b.make("div",{className:"NB-storytitles-star"}),b.make("span",{className:"NB-storytitles-title"},a.story_title),b.make("span",{className:"NB-storytitles-author"},a.story_authors),l]),b.make("span",{className:"story_date"},a.short_parsed_date),b.make("span",{className:"story_id"},""+a.id),b.make("div",{className:"NB-story-manage-icon"})]).data("story_id",
a.id).data("feed_id",a.story_feed_id);d>f&&e.css({display:"none"});this.model.preference("show_tooltips")&&b(".NB-story-sentiment",e).tipsy({delayIn:375,gravity:"s"});return e},hover_story_titles:function(){var a=b("#story_titles .story,.NB-feedbar .feed");a.unbind("mouseenter").unbind("mouseleave");a.hover(function(){var a=b(this),d=a.hasClass("story")?190:270;a.offset().top>b(window).height()-d&&a.addClass("NB-hover-inverse")},function(){b(this).removeClass("NB-hover-inverse")})},story_titles_clear_loading_endbar:function(){var a=
b(".NB-story-titles-end-stories-line",this.$s.$story_titles);a.length&&(a.remove(),clearInterval(this.feed_stories_loading))},recalculate_story_scores:function(a){a=a||this.active_feed;this.model.recalculate_story_scores(a);var c=_.bind(function(c,e){var f=this.model.get_story(e);if(f.story_feed_id==a){var g=NEWSBLUR.utils.compute_story_score(f);c.removeClass("NB-story-positive").removeClass("NB-story-neutral").removeClass("NB-story-negative");g>0?c.addClass("NB-story-positive"):g==0?c.addClass("NB-story-neutral"):
g<0&&c.addClass("NB-story-negative");NEWSBLUR.log(["story recalculation",f,f.read_status,c]);b(".NB-feed-story-tags",c).replaceWith(this.make_story_feed_tags(f));b(".NB-feed-story-author",c).replaceWith(this.make_story_feed_author(f));b(".NB-feed-story-title",c).replaceWith(this.make_story_feed_title(f));this.model.preference("new_window")==1&&b("a",c).attr("target","_blank")}},this);_.each(this.cache.feed_view_stories,_.bind(function(a,b){c(a,b)}));b(".story",this.$s.$story_titles).each(function(){var a=
b(this),e=a.data("story_id");c(a,e)})},unload_feed_iframe:function(){var a=this.$s.$feed_iframe,c=b(".NB-taskbar .task_view_page");c.removeClass("NB-disabled");c.removeClass("NB-task-return");this.flags.iframe_view_loaded=!1;this.flags.iframe_story_locations_fetched=!1;this.flags.iframe_prevented_from_loading=!1;b.extend(this.cache,{iframe_stories:{},iframe_story_positions:{},iframe_story_positions_keys:[]});a.removeAttr("src");a.empty();this.$s.$story_iframe.attr("src","");this.$s.$story_iframe.empty()},
load_feed_iframe:function(a){var a=a||this.active_feed,b=this,d=this.$s.$feed_iframe;this.unload_feed_iframe();a?d.data("feed_id",a):a=d.data("feed_id");this.flags.iframe_scroll_snap_back_prepared=!0;this.iframe_link_attacher_num_links=0;d.removeAttr("src").attr({src:"/reader/page/"+a});this.flags.iframe_view_loaded?this.fetch_story_locations_in_story_frame(0,!0,this.$s.$feed_iframe.contents()):_.delay(_.bind(function(){this.prefetch_story_locations_in_story_frame()},this),500);d.ready(function(){setTimeout(function(){d.load(function(){b.return_to_snapback_position(!0)})},
50);b.flags.iframe_scroll_snapback_check=setInterval(function(){b.iframe_scroll&&b.flags.iframe_scroll_snap_back_prepared?b.return_to_snapback_position():clearInterval(b.flags.iframe_scroll_snapback_check)},500);if(d.attr("src").indexOf("/reader/page/"+a)!=-1){var e=function(){var a=d.contents().find("a").length;if(b.iframe_link_attacher_num_links!=a)b.iframe_link_attacher_num_links=a,d.contents().find("a").unbind("click.NB-taskbar").bind("click.NB-taskbar",function(){b.taskbar_show_return_to_page()})};
clearInterval(b.iframe_link_attacher);b.iframe_link_attacher=setInterval(e,2E3);e();d.load(function(){clearInterval(b.iframe_link_attacher)})}})},return_to_snapback_position:function(a){var b=this.$s.$feed_iframe;if(this.iframe_scroll&&this.flags.iframe_scroll_snap_back_prepared&&b.contents().scrollTop()==0&&(b.contents().scrollTop(this.iframe_scroll),a))this.flags.iframe_scroll_snap_back_prepared=!1,clearInterval(self.flags.iframe_scroll_snapback_check)},setup_feed_page_iframe_load:function(){var a=
this,c=this.$s.$feed_iframe;c.removeAttr("src").load(function(){a.flags.iframe_view_loaded=!0;try{var d=c.contents();d.find("a").unbind("click.NB-taskbar").bind("click.NB-taskbar",function(c){var e=b(this).attr("href");if(e.indexOf("#")==0)return c.preventDefault(),c=b("a[name="+e.substr(1)+"], [id="+e.substr(1)+"]",d),d.scrollTo(c,{duration:600,axis:"y",easing:"easeInOutQuint",offset:0,queue:!1}),!1;a.taskbar_show_return_to_page()});d.unbind("scroll").scroll(b.rescope(a.handle_scroll_feed_iframe,
a));d.unbind("mousemove.reader").bind("mousemove.reader",b.rescope(a.handle_mousemove_iframe_view,a));a.flags.story_titles_loaded&&a.fetch_story_locations_in_story_frame(0,!0,d)}catch(e){}})},taskbar_show_return_to_page:function(){b(".NB-feed-frame");_.delay(function(){var a=b(".NB-feed-frame"),c=b(".NB-taskbar .task_view_page");try{if(NEWSBLUR.log(["return",a.contents().find("body")]),a.contents().find("body").length)return!1}catch(d){c.addClass("NB-task-return")}finally{c.addClass("NB-task-return")}},
1E3)},load_page_of_feed_stories:function(a){var c=this.$s.$story_titles,d=c.data("feed_id"),e=c.data("page");this.flags.opening_feed||(a||this.show_feedbar_loading(),c.data("page",e+1),this.active_feed=="starred"?this.model.fetch_starred_stories(e+1,_.bind(this.post_open_starred_stories,this),_.bind(this.show_stories_error,this),!1):this.flags.river_view?this.model.fetch_river_stories(this.active_feed,this.cache.river_feeds_with_unreads,e+1,_.bind(this.post_open_river_stories,this),_.bind(this.show_stories_error,
this),!1):this.model.load_feed(d,e+1,!1,b.rescope(this.post_open_feed,this),_.bind(this.show_stories_error,this)))},fill_out_story_titles:function(){var a=b(".story:visible:last",this.$s.$story_titles),c=this.$s.$story_titles.height();if(!b(".NB-story-titles-end-stories-line").length&&(a.length==0||b("#story_titles").scrollTop()==0&&a.position().top+a.height()-13<c))this.counts.page_fill_outs<this.constants.FILL_OUT_PAGES?(this.counts.page_fill_outs+=1,_.delay(_.bind(this.load_page_of_feed_stories,
this,!0),250)):this.append_story_titles_endbar()},show_feedbar_loading:function(){var a=this.$s.$story_titles,c=b(".NB-story-titles-end-stories-line");c.length||(c=b.make("div",{className:"NB-story-titles-end-stories-line"}));c.css({background:"#E1EBFF"});a.append(c);c.animate({backgroundColor:"#5C89C9"},{duration:750}).animate({backgroundColor:"#E1EBFF"},750);this.feed_stories_loading=setInterval(function(){c.animate({backgroundColor:"#5C89C9"},{duration:750}).animate({backgroundColor:"#E1EBFF"},
750)},1500)},show_feed_title_in_stories:function(a){var c=this.$s.$story_titles;if(a=this.model.get_feed(a))a=b.make("div",{className:"NB-feedbar"},[b(this.make_feed_title_template(a,"story")),b.make("span",{className:"feed_id"},""+a.id)]).hover(function(){b(this).addClass("NB-feedbar-hover")},function(){b(this).removeClass("NB-feedbar-hover")}),this.model.preference("show_tooltips")&&b(".NB-feedbar-train-feed, .NB-feedbar-statistics",a).tipsy({gravity:"s",delayIn:375}),c.prepend(a),b(".unread_count",
a).corner("4px")},show_feed_hidden_story_title_indicator:function(a){if(!a||!this.flags.unread_threshold_temporarily){this.flags.unread_threshold_temporarily=null;var c=this.$s.$story_titles,a=this.active_feed,d=this.model.get_feed(a),e=this.get_unread_view_name(),f=b(".NB-story-title-indicator",c);_.any(this.model.stories,_.bind(function(a){a=NEWSBLUR.utils.compute_story_score(a);if(e=="positive")return a<=0;else if(e=="neutral")return a<0},this))&&(f.length?(c=this.make_feed_counts_floater(d.ps,
d.nt,d.ng),b(".feed_counts_floater",f).replaceWith(c),this.cache.$feed_counts_in_feed_list[a]=null,f.css({opacity:1})):d&&(f=b.make("div",{className:"NB-story-title-indicator"},[this.make_feed_counts_floater(d.ps,d.nt,d.ng),b.make("span",{className:"NB-story-title-indicator-text"},"show hidden stories")]).css({opacity:0}),b(".NB-feedbar .feed .feed_title",this.$story_titles).prepend(f),_.delay(function(){f.animate({opacity:1},{duration:1E3,easing:"easeOutCubic"})},500)),f.removeClass("unread_threshold_positive").removeClass("unread_threshold_neutral").removeClass("unread_threshold_negative").addClass("unread_threshold_"+
e))}},check_story_titles_last_story:function(){var a=this.$s.$story_titles;if(!b(".NB-story-titles-end-stories-line",a).length){var c=b("#story_titles .story").last(),a=a.position().top,c=(c.offset()&&c.offset().top)+c.height()-a,a=b("#story_titles").height();b("#story_titles").scrollTop();a+13>=c&&this.load_page_of_feed_stories()}},show_hidden_story_titles:function(){this.model.get_feed(this.active_feed);var a=b(".NB-story-title-indicator",this.$s.$story_titles),c=a.hasClass("unread_threshold_positive")?
"positive":"neutral",d=_.any(this.model.stories,_.bind(function(a){a=NEWSBLUR.utils.compute_story_score(a);if(c=="positive")return a==0;else if(c=="neutral")return a<0},this)),e=c=="positive"&&_.any(this.model.stories,_.bind(function(a){return NEWSBLUR.utils.compute_story_score(a)<0},this));c=="positive"&&d&&e?(this.flags.unread_threshold_temporarily="neutral",this.show_story_titles_above_intelligence_level({unread_view_name:"neutral",animate:!0,follow:!0,temporary:!0}),a.removeClass("unread_threshold_positive").addClass("unread_threshold_neutral")):
(this.flags.unread_threshold_temporarily="negative",this.show_story_titles_above_intelligence_level({unread_view_name:"negative",animate:!0,follow:!0,temporary:!0}),a.removeClass("unread_threshold_positive").removeClass("unread_threshold_neutral").addClass("unread_threshold_negative"),a.animate({opacity:0},{duration:500}))},open_feed_link:function(a){if(!a)a=this.active_feed;this.mark_feed_as_read(a);a=this.model.get_feed(a);window.open(a.feed_link,"_blank")},open_story_in_new_tab:function(a){if(a=
a||this.get_current_story_id())a=this.model.get_story(a),window.open(a.story_permalink,"_blank"),window.focus()},open_unread_stories_in_tabs:function(a){a=a||this.active_feed;if(this.active_feed==a)this.flags.open_unread_stories_in_tabs=!1,_.each(this.model.stories,function(a){NEWSBLUR.log(["story",a,!a.read_status]);a.read_status||(window.open(a.story_permalink,"_blank"),window.focus())}),this.mark_feed_as_read(a);else{this.flags.open_unread_stories_in_tabs=!0;var b=this.find_feed_in_feed_list(a);
this.open_feed(a,!1,b)}},mark_feed_as_selected:function(a,c){c===void 0&&(c=b(".feed.selected",this.$feed_list).eq(0));b("#feed_list .selected").removeClass("selected");b("#feed_list .after_selected").removeClass("after_selected");c&&(c.addClass("selected"),c.parent(".feed").next(".feed").children("a").addClass("after_selected"))},open_feed_intelligence_modal:function(a,b,d){if(b=b||this.active_feed)NEWSBLUR.classifier=new NEWSBLUR.ReaderClassifierFeed(b,{score:a,feed_loaded:d})},open_trainer_modal:function(a){NEWSBLUR.classifier=
new NEWSBLUR.ReaderClassifierTrainer({score:a})},open_recommend_modal:function(a){NEWSBLUR.recommend_feed=new NEWSBLUR.ReaderRecommendFeed(a)},open_tutorial_modal:function(){NEWSBLUR.tutorial=new NEWSBLUR.ReaderTutorial},hide_tutorial:function(){var a=b(".NB-module-tutorial");this.model.preference("tutorial_finished",!0);a.animate({opacity:0},{duration:500,complete:function(){a.slideUp(350)}})},hide_mobile:function(){var a=b(".NB-module-mobile");this.model.preference("hide_mobile",!0);a.animate({opacity:0},
{duration:500,complete:function(){a.slideUp(350)}})},make_story_feed_entries:function(a,c,d){var e=this.$s.$feed_view,f=this.$s.$feed_stories,g=this;this.model.preference("unread_view");var j=this.model.get_feed(this.active_feed),d=d||{};c&&!d.refresh_load&&b(".NB-feed-story-endbar",e).remove();for(var k in a){if(this.flags.non_premium_river_view&&f.children(":visible").length>=this.constants.RIVER_STORIES_FOR_STANDARD_ACCOUNT){this.append_story_titles_endbar();this.append_river_premium_only_notification();
break}var e=a[k],l=!1;d.river_stories&&(j=this.model.get_feed(e.story_feed_id));var m=e.read_status?" read ":"",u=NEWSBLUR.utils.compute_story_score(e),n="neutral",F=d.river_stories?" NB-river-story ":"";u>0&&(n="positive");u<0&&(n="negative");e.story_content.indexOf("<ins")!=-1&&(l=!0);!l&&this.model.preference("hide_story_changes")&&e.story_content.indexOf("<del")!=-1&&(l=!0);m=b.make("li",{className:"NB-feed-story "+m+F+" NB-story-"+n},[b.make("div",{className:"NB-feed-story-header"},[b.make("div",
{className:"NB-feed-story-header-feed"},[d.river_stories&&j&&b.make("div",{className:"NB-feed-story-feed"},[b.make("img",{className:"feed_favicon",src:b.favicon(j.favicon)}),b.make("span",{className:"feed_title"},j.feed_title)])]).css("background-image",NEWSBLUR.utils.generate_gradient(j,"webkit")).css("background-image",NEWSBLUR.utils.generate_gradient(j,"moz")).css("borderBottom",NEWSBLUR.utils.generate_gradient(j,"border")).css("borderTop",NEWSBLUR.utils.generate_gradient(j,"border")).toggleClass("NB-inverse",
NEWSBLUR.utils.is_feed_floater_gradient_light(j)),b.make("div",{className:"NB-feed-story-header-info"},[e.story_authors&&this.make_story_feed_author(e),e.story_tags&&e.story_tags.length&&this.make_story_feed_tags(e),b.make("div",{className:"NB-feed-story-title-container"},[b.make("div",{className:"NB-feed-story-sentiment"}),b.make("div",{className:"NB-feed-story-manage-icon"}),this.make_story_feed_title(e)]),e.long_parsed_date&&b.make("span",{className:"NB-feed-story-date"},[l&&b.make("div",{className:"NB-feed-story-hide-changes",
title:(this.model.preference("hide_story_changes")?"Show":"Hide")+" story modifications"}),e.long_parsed_date]),e.starred_date&&b.make("span",{className:"NB-feed-story-starred-date"},e.starred_date)])]),b.make("div",{className:"NB-feed-story-content"},this.make_story_content(e.story_content))]).data("story",e.id).data("story_id",e.id).data("feed_id",e.story_feed_id);l&&this.model.preference("show_tooltips")&&b(".NB-feed-story-hide-changes",m).tipsy({delayIn:375});l&&this.model.preference("hide_story_changes")&&
(b("ins",m).css({"text-decoration":"none"}),b("del",m).css({display:"none"}));this.model.preference("new_window")==1&&b("a",m).attr("target","_blank");d.refresh_load?f.prepend(m):f.append(m);this.cache.last_feed_view_story_feed_id=e.story_feed_id;this.cache.feed_view_stories[e.id]=m;(l=b("img",m).length)?(this.flags.feed_view_images_loaded[e.id]=!1,function(a,c,d){b("img",a).load(function(){d==1?g.flags.feed_view_images_loaded[c.id]=!0:d--;return!0})}(m,e,l)):this.flags.feed_view_images_loaded[e.id]=
!0}(!a||!a.length)&&this.fetch_story_locations_in_feed_view();this.append_feed_view_story_endbar();this.hover_story_feed_titles();c&&this.show_stories_preference_in_feed_view(!0)},make_story_content:function(a){return b("<div>").html(a).autolink()},make_story_feed_title:function(a){var c=a.story_title;_.each(this.model.classifiers[a.story_feed_id]&&this.model.classifiers[a.story_feed_id].titles||[],function(a,b){c.indexOf(b)!=-1&&(c=c.replace(b,'<span class="NB-score-'+a+'">'+b+"</span>"))});return b.make("a",
{className:"NB-feed-story-title",href:a.story_permalink},c)},make_story_feed_author:function(a){var c=this.model.classifiers[a.story_feed_id]&&this.model.classifiers[a.story_feed_id].authors[a.story_authors];return b.make("div",{className:"NB-feed-story-author "+(!!c&&"NB-score-"+c||"")},a.story_authors).data("author",a.story_authors)},make_story_feed_tags:function(a){var c=this.model.classifiers[a.story_feed_id]&&this.model.classifiers[a.story_feed_id].tags||{};return b.make("div",{className:"NB-feed-story-tags"},
_.map(a.story_tags,function(a){var e=c[a];return b.make("div",{className:"NB-feed-story-tag "+(!!e&&"NB-score-"+e||"")},a).data("tag",a)}))},hover_story_feed_titles:function(){var a=b(".NB-feed-story-header-info");a.unbind("mouseenter").unbind("mouseleave");a.hover(function(){var a=b(this),d=a.hasClass("story")?150:270;a.offset().top>b(window).height()-d&&a.closest(".NB-feed-story").addClass("NB-hover-inverse")},function(){b(this).closest(".NB-feed-story").removeClass("NB-hover-inverse")})},preserve_classifier_color:function(a,
c,d,e){var f;b(".NB-feed-story-"+c,a).each(function(){if(b(this).data(c)==d)return f=b(this),!1});f.removeClass("NB-score-now-1").removeClass("NB-score-now--1").removeClass("NB-score-now-0").addClass("NB-score-now-"+e).one("mouseleave",function(){f.removeClass("NB-score-now-"+e)});_.defer(function(){f.one("mouseenter",function(){f.removeClass("NB-score-now-"+e)})})},save_classifier:function(a,b,d,e,f){var g={feed_id:e};d==0?g["remove_like_"+a]=b:d==1?g["like_"+a]=b:d==-1&&(g["dislike_"+a]=b);this.model.classifiers[e][a+
"s"][b]=d;this.model.save_classifier(g,_.bind(function(){this.force_feeds_refresh(f,!0,e)},this));this.recalculate_story_scores(e)},show_correct_feed_in_feed_title_floater:function(a){var c,d;if(a&&this.cache.feed_title_floater_feed_id!=a.story_feed_id){var e=this.$s.$feed_floater;c=this.find_story_in_feed_view(a.id);d=b(".NB-feed-story-header-feed",c);var f=d.clone();if(!f.find(".NB-feed-story-feed").length){var g=this.model.get_feed(a.story_feed_id);g&&f.append(b.make("div",{className:"NB-feed-story-feed"},
[b.make("img",{className:"feed_favicon",src:b.favicon(g.favicon)}),b.make("span",{className:"feed_title"},g.feed_title)]))}e.empty().append(f);this.cache.feed_title_floater_feed_id=a.story_feed_id;e.width(d.outerWidth())}else if(!a)this.$s.$feed_floater.empty(),this.cache.feed_title_floater_feed_id=null;if(a&&this.cache.feed_title_floater_story_id!=a.id)c=c||this.find_story_in_feed_view(a.id),d=d||b(".NB-feed-story-header-feed",c),b(".NB-floater").removeClass("NB-floater"),d.addClass("NB-floater"),
this.cache.feed_title_floater_story_id=a.id;else if(!a)this.cache.feed_title_floater_story_id=null},apply_story_styling:function(a){var b=this.$s.$body;b.removeClass("NB-theme-sans-serif");b.removeClass("NB-theme-serif");NEWSBLUR.Preferences.story_styling=="sans-serif"?b.addClass("NB-theme-sans-serif"):NEWSBLUR.Preferences.story_styling=="serif"&&b.addClass("NB-theme-serif");a&&this.show_story_titles_above_intelligence_level({animate:!0,follow:!0})},hide_story_changes:function(a){var c=b(".NB-feed-story-hide-changes",
a);this.model.preference("hide_story_changes")?(b("ins",a).css({"text-decoration":"underline"}),b("del",a).css({display:"inline"})):(b("ins",a).css({"text-decoration":"none"}),b("del",a).css({display:"none"}));c.css("opacity",1).fadeOut(400);c.tipsy("hide").tipsy("disable")},prefetch_story_locations_in_feed_view:function(){var a=this,c=this.model.stories;if(!this.flags.feed_view_positions_calculated){b.extend(this.cache,{feed_view_story_positions:{},feed_view_story_positions_keys:[]});for(var d in c){var e=
c[d],f=a.cache.feed_view_stories[e.id];this.determine_feed_view_story_position(f,e);if(!f||!f.length||this.flags.feed_view_positions_calculated)break}}_.all(this.flags.feed_view_images_loaded)&&(_.keys(this.flags.feed_view_images_loaded).length>0||this.cache.feed_view_story_positions_keys.length>0)&&this.fetch_story_locations_in_feed_view();this.flags.feed_view_positions_calculated||setTimeout(function(){a.flags.feed_view_positions_calculated||a.prefetch_story_locations_in_feed_view()},2E3)},fetch_story_locations_in_feed_view:function(){var a=
this.model.stories;if(a&&a.length){b.extend(this.cache,{feed_view_story_positions:{},feed_view_story_positions_keys:[]});for(var c in a){var d=a[c];this.determine_feed_view_story_position(this.cache.feed_view_stories[d.id],d)}this.flags.feed_view_positions_calculated=!0;NEWSBLUR.log(["Feed view entirely loaded",this.model.stories.length+" stories"])}},determine_feed_view_story_position:function(a,b){if(a&&a.is(":visible")){var d=parseInt(a.position().top,10),e=parseInt(a.offsetParent().scrollTop(),
10);d+=e;this.cache.feed_view_story_positions[d]=b;this.cache.feed_view_story_positions_keys.push(d);this.cache.feed_view_story_positions_keys.sort(function(a,b){return a-b})}},append_feed_view_story_endbar:function(){var a=this.$s.$feed_stories,c=b.make("div",{className:"NB-feed-story-endbar"});a.find(".NB-feed-story-endbar").remove();a.append(c)},append_story_titles_endbar:function(){var a=this.$s.$story_titles,c=b.make("div",{className:"NB-story-titles-end-stories-line"});b(".NB-story-titles-end-stories-line",
a).length||a.append(c)},append_river_premium_only_notification:function(){var a=this.$s.$story_titles,c=b.make("div",{className:"NB-feed-story-premium-only"},[b.make("div",{className:"NB-feed-story-premium-only-divider"}),b.make("div",{className:"NB-feed-story-premium-only-text"},["The full River of News is a ",b.make("a",{href:"#",className:"NB-splash-link"},"premium feature"),"."])]);b(".NB-feed-story-premium-only",a).remove();a.append(c)},switch_taskbar_view:function(a,c){var d=this,e=this.$s.$story_pane,
f=this.model.get_feed(this.active_feed);if(a=="page"&&f&&f.has_exception&&f.exception_type=="page")this.open_feed_exception_modal(this.active_feed);else if(!b(".task_button_view.task_view_"+a).hasClass("NB-disabled")){var f=b(".NB-taskbar .task_button_view"),g=this.$s.$feed_iframe,j=b(".NB-taskbar .NB-task-view-page-to-feed-arrow"),k=b(".NB-taskbar .NB-task-view-feed-to-story-arrow");!c&&this.story_view!=a&&this.model.view_setting(this.active_feed,a);j.hide();k.hide();this.flags.page_view_showing_feed_view=
!1;c=="page"?(j.show(),this.flags.page_view_showing_feed_view=!0):c=="story"?(k.show(),this.flags.feed_view_showing_story_view=!0):(f.removeClass("NB-active"),b(".task_button_view.task_view_"+a).addClass("NB-active"),this.story_view=a);a=="page"?(this.flags.iframe_prevented_from_loading&&this.load_feed_iframe(this.active_feed),this.scroll_to_story_in_iframe(this.active_story,this.find_story_in_feed_iframe(this.active_story),!0),e.animate({left:0},{easing:"easeInOutQuint",duration:this.model.preference("animations")?
550:0,queue:!1})):a=="feed"?(this.active_story&&this.scroll_to_story_in_story_feed(this.active_story,this.find_story_in_feed_view(this.active_story.id),!0),e.animate({left:-1*g.width()},{easing:"easeInOutQuint",duration:this.model.preference("animations")?550:0,queue:!1}),this.flags.switching_to_feed_view=!0,setTimeout(function(){d.flags.switching_to_feed_view=!1},100),this.show_stories_preference_in_feed_view(),this.flags.feed_view_positions_calculated||this.prefetch_story_locations_in_feed_view()):
a=="story"&&(e.animate({left:-2*g.width()},{easing:"easeInOutQuint",duration:this.model.preference("animations")?550:0,queue:!1}),this.load_story_iframe(),this.active_story||this.show_next_story(1))}},switch_taskbar_view_direction:function(a){var c=b(".taskbar_nav_view .NB-active"),d;a==-1?c.hasClass("task_view_page")||(c.hasClass("task_view_feed")?d="page":c.hasClass("task_view_story")&&(d="feed")):a==1&&(c.hasClass("task_view_page")?d="feed":c.hasClass("task_view_feed")?d="story":c.hasClass("task_view_story"));
d&&this.switch_taskbar_view(d)},show_stories_preference_in_feed_view:function(a){var c=b(".NB-feed-story",this.$s.$feed_view),d=this.$s.$feed_stories;this.active_story&&this.model.preference("feed_view_single_story")?(d.removeClass("NB-feed-view-feed").addClass("NB-feed-view-story"),c.css({display:"none"}),a&&this.$s.$feed_stories.scrollTop("0px"),(a=this.get_current_story_from_story_titles(c))&&a.length&&a.css({display:"block"}),this.flags.feed_view_positions_calculated=!1):(d.removeClass("NB-feed-view-story").addClass("NB-feed-view-feed"),
a||this.show_story_titles_above_intelligence_level({animate:!1}));this.cache.story_pane_position=null},open_story_in_story_view:function(a,b){if(!a)a=this.active_story;this.switch_taskbar_view("story",b?"story":!1);this.load_story_iframe(a,a.story_feed_id)},load_story_iframe:function(a,b){if(a=a||this.active_story){var b=b||this.active_feed,d=this.$s.$story_iframe;if(d.attr("src")!=a.story_permalink)this.unload_story_iframe(),b?d.data("feed_id",b):d.data("feed_id"),this.flags.iframe_scroll_snap_back_prepared=
!0,this.iframe_link_attacher_num_links=0,d.removeAttr("src").attr({src:a.story_permalink})}},unload_story_iframe:function(){var a=this.$s.$story_iframe;a.empty();a.removeAttr("src").attr({src:"about:blank"})},open_add_feed_modal:function(a){clearInterval(this.flags.bouncing_callout);b.modal.close();NEWSBLUR.add_feed=new NEWSBLUR.ReaderAddFeed(a)},open_manage_feed_modal:function(a){a=a||this.active_feed;NEWSBLUR.manage_feed=new NEWSBLUR.ReaderManageFeed(a)},open_mark_read_modal:function(){NEWSBLUR.mark_read=
new NEWSBLUR.ReaderMarkRead},open_keyboard_shortcuts_modal:function(){NEWSBLUR.keyboard=new NEWSBLUR.ReaderKeyboard},open_goodies_modal:function(){NEWSBLUR.goodies=new NEWSBLUR.ReaderGoodies},open_preferences_modal:function(){NEWSBLUR.preferences=new NEWSBLUR.ReaderPreferences},open_account_modal:function(a){NEWSBLUR.account=new NEWSBLUR.ReaderAccount(a)},open_feedchooser_modal:function(){NEWSBLUR.feedchooser=new NEWSBLUR.ReaderFeedchooser},open_feed_exception_modal:function(a){NEWSBLUR.feed_exception=
new NEWSBLUR.ReaderFeedException(a)},open_feed_statistics_modal:function(a){a=a||this.active_feed;NEWSBLUR.statistics=new NEWSBLUR.ReaderStatistics(a)},close_sidebar:function(){this.$s.$body.layout().close("west");this.resize_window();this.flags.sidebar_closed=!0;b(".NB-taskbar-sidebar-toggle-open").stop().animate({left:-1},{duration:1E3,easing:"easeOutQuint",queue:!1})},open_sidebar:function(){this.$s.$body.layout().open("west");this.resize_window();this.flags.sidebar_closed=!1;b(".NB-taskbar-sidebar-toggle-open").stop().css({left:-24})},
make_manage_menu:function(a,c,d,e,f){var g;if(a=="site")c=!NEWSBLUR.Globals.is_premium&&NEWSBLUR.Globals.is_authenticated,g=b.make("ul",{className:"NB-menu-manage"},[b.make("li",{className:"NB-menu-manage-site-info"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("span",{className:"NB-menu-manage-title"},"Manage NewsBlur")]).corner("tl tr 8px"),b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-account"},[b.make("div",{className:"NB-menu-manage-image"}),
b.make("div",{className:"NB-menu-manage-title"},"My Account")]),b.make("li",{className:"NB-menu-manage-preferences"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Preferences")]),b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-keyboard"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Keyboard shortcuts")]),b.make("li",{className:"NB-menu-manage-tutorial"},[b.make("div",
{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Tutorial")]),b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-mark-read NB-menu-manage-site-mark-read"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Mark everything as read"),b.make("div",{className:"NB-menu-manage-subtitle"},"Choose how many days back.")]),b.make("li",{className:"NB-menu-manage-trainer"},[b.make("div",{className:"NB-menu-manage-image"}),
b.make("div",{className:"NB-menu-manage-title"},"Intelligence Trainer"),b.make("div",{className:"NB-menu-manage-subtitle"},"Accurate filters are happy filters.")]),b.make("li",{className:"NB-menu-manage-goodies"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Goodies"),b.make("div",{className:"NB-menu-manage-subtitle"},"Extensions and extras.")]),c&&b.make("li",{className:"NB-menu-manage-feedchooser"},[b.make("div",{className:"NB-menu-manage-image"}),
b.make("div",{className:"NB-menu-manage-title"},"Choose Your 64"),b.make("div",{className:"NB-menu-manage-subtitle"},"Enable the sites you want.")])]),g.addClass("NB-menu-manage-notop");else if(a=="feed"){g=this.model.get_feed(c);if(!g)return;d=this.get_unread_count(!0,c);Math.min(25,d);g=b.make("ul",{className:"NB-menu-manage"},[b.make("li",{className:"NB-menu-separator-inverse"}),g.has_exception&&b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-feed-exception"},[b.make("div",{className:"NB-menu-manage-image"}),
b.make("div",{className:"NB-menu-manage-title"},"Fix this misbehaving site")]),g.has_exception&&b.make("li",{className:"NB-menu-separator-inverse"}),g.exception_type!="feed"&&b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-mark-read NB-menu-manage-feed-mark-read"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Mark as read")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-feed-reload"},[b.make("div",{className:"NB-menu-manage-image"}),
b.make("div",{className:"NB-menu-manage-title"},"Insta-fetch stories")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-feed-stats"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Statistics")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-feed-settings"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Site settings")]),b.make("li",{className:"NB-menu-separator"}),b.make("li",
{className:"NB-menu-manage-feed NB-menu-manage-feed-train"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Intelligence trainer"),b.make("div",{className:"NB-menu-manage-subtitle"},"What you like and dislike.")]),b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-feed-recommend"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Recommend this site")]),
b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-move NB-menu-manage-feed-move"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Move to folder")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-confirm NB-menu-manage-feed-move-confirm NB-modal-submit"},[b.make("div",{className:"NB-menu-manage-confirm-position"},[b.make("div",{className:"NB-menu-manage-move-save NB-menu-manage-feed-move-save NB-modal-submit-green NB-modal-submit-button"},
"Save"),b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-add-folders"},NEWSBLUR.utils.make_folders(this.model))])]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-rename NB-menu-manage-feed-rename"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Rename this site")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-confirm NB-menu-manage-feed-rename-confirm NB-modal-submit"},[b.make("div",{className:"NB-menu-manage-confirm-position"},
[b.make("div",{className:"NB-menu-manage-rename-save NB-menu-manage-feed-rename-save NB-modal-submit-green NB-modal-submit-button"},"Save"),b.make("div",{className:"NB-menu-manage-image"}),b.make("input",{name:"new_title",className:"NB-menu-manage-title",value:g.feed_title})])]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-delete NB-menu-manage-feed-delete"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Delete this site")]),b.make("li",
{className:"NB-menu-manage-feed NB-menu-manage-delete-confirm NB-menu-manage-feed-delete-confirm"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Really delete?")])]);g.data("feed_id",c);g.data("$feed",f);c&&d==0&&(b(".NB-menu-manage-feed-mark-read",g).addClass("NB-disabled"),b(".NB-menu-manage-feed-unreadtabs",g).addClass("NB-disabled"))}else if(a=="folder")g=b.make("ul",{className:"NB-menu-manage"},[b.make("li",{className:"NB-menu-separator-inverse"}),
b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-mark-read NB-menu-manage-folder-mark-read"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Mark folder as read")]),b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-move NB-menu-manage-folder-move"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Move to folder")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-confirm NB-menu-manage-folder-move-confirm NB-modal-submit"},
[b.make("div",{className:"NB-menu-manage-confirm-position"},[b.make("div",{className:"NB-menu-manage-move-save NB-menu-manage-folder-move-save NB-modal-submit-green NB-modal-submit-button"},"Save"),b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-add-folders"},NEWSBLUR.utils.make_folders(this.model))])]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-rename NB-menu-manage-folder-rename"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},
"Rename this folder")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-confirm NB-menu-manage-folder-rename-confirm NB-modal-submit"},[b.make("div",{className:"NB-menu-manage-confirm-position"},[b.make("div",{className:"NB-menu-manage-rename-save NB-menu-manage-folder-rename-save NB-modal-submit-green NB-modal-submit-button"},"Save"),b.make("div",{className:"NB-menu-manage-image"}),b.make("input",{name:"new_title",className:"NB-menu-manage-title",value:c})])]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-delete NB-menu-manage-folder-delete"},
[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Delete this folder")]),b.make("li",{className:"NB-menu-manage-feed NB-menu-manage-delete-confirm NB-menu-manage-folder-delete-confirm"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Really delete?")])]),g.data("folder_name",c),g.data("$folder",f);else if(a=="story"){g=this.model.get_feed(c);var j=this.model.get_story(d);g=j.starred?"Remove bookmark":
"Save This Story";g=b.make("ul",{className:"NB-menu-manage NB-menu-manage-story "+(j.starred?"NB-story-starred":"")},[b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-story-open"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Open")]),b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-story-star"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},
g)]),j.read_status&&b.make("li",{className:"NB-menu-manage-story-unread"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Mark as unread")]),b.make("li",{className:"NB-menu-manage-story-thirdparty"},[NEWSBLUR.Preferences.story_share_facebook&&b.make("div",{className:"NB-menu-manage-thirdparty-icon NB-menu-manage-thirdparty-facebook"}).bind("mouseenter",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Facebook").parent().addClass("NB-menu-manage-highlight-facebook")},
this)).bind("mouseleave",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Email story").parent().removeClass("NB-menu-manage-highlight-facebook")},this)),NEWSBLUR.Preferences.story_share_twitter&&b.make("div",{className:"NB-menu-manage-thirdparty-icon NB-menu-manage-thirdparty-twitter"}).bind("mouseenter",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Twitter").parent().addClass("NB-menu-manage-highlight-twitter")},this)).bind("mouseleave",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Email story").parent().removeClass("NB-menu-manage-highlight-twitter")},
this)),NEWSBLUR.Preferences.story_share_readitlater&&b.make("div",{className:"NB-menu-manage-thirdparty-icon NB-menu-manage-thirdparty-readitlater"}).bind("mouseenter",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Read It Later").parent().addClass("NB-menu-manage-highlight-readitlater")},this)).bind("mouseleave",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Email story").parent().removeClass("NB-menu-manage-highlight-readitlater")},this)),NEWSBLUR.Preferences.story_share_pinboard&&
b.make("div",{className:"NB-menu-manage-thirdparty-icon NB-menu-manage-thirdparty-pinboard"}).bind("mouseenter",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Pinboard").parent().addClass("NB-menu-manage-highlight-pinboard")},this)).bind("mouseleave",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Email story").parent().removeClass("NB-menu-manage-highlight-pinboard")},this)),NEWSBLUR.Preferences.story_share_googleplus&&b.make("div",{className:"NB-menu-manage-thirdparty-icon NB-menu-manage-thirdparty-googleplus"}).bind("mouseenter",
_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Google+").parent().addClass("NB-menu-manage-highlight-googleplus")},this)).bind("mouseleave",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Email story").parent().removeClass("NB-menu-manage-highlight-googleplus")},this)),NEWSBLUR.Preferences.story_share_instapaper&&b.make("div",{className:"NB-menu-manage-thirdparty-icon NB-menu-manage-thirdparty-instapaper"}).bind("mouseenter",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Instapaper").parent().addClass("NB-menu-manage-highlight-instapaper")},
this)).bind("mouseleave",_.bind(function(a){b(a.target).siblings(".NB-menu-manage-title").text("Email story").parent().removeClass("NB-menu-manage-highlight-instapaper")},this)),b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Email story")]).bind("click",_.bind(function(a){a.preventDefault();a.stopPropagation();a=b(a.target);a.hasClass("NB-menu-manage-thirdparty-facebook")?this.send_story_to_facebook(j.id):a.hasClass("NB-menu-manage-thirdparty-twitter")?
this.send_story_to_twitter(j.id):a.hasClass("NB-menu-manage-thirdparty-readitlater")?this.send_story_to_readitlater(j.id):a.hasClass("NB-menu-manage-thirdparty-readability")?this.send_story_to_readability(j.id):a.hasClass("NB-menu-manage-thirdparty-pinboard")?this.send_story_to_pinboard(j.id):a.hasClass("NB-menu-manage-thirdparty-googleplus")?this.send_story_to_googleplus(j.id):a.hasClass("NB-menu-manage-thirdparty-instapaper")?this.send_story_to_instapaper(j.id):this.send_story_to_email(j.id)},this)),
b.make("li",{className:"NB-menu-separator"}),b.make("li",{className:"NB-menu-manage-story-train"},[b.make("div",{className:"NB-menu-manage-image"}),b.make("div",{className:"NB-menu-manage-title"},"Intelligence trainer"),b.make("div",{className:"NB-menu-manage-subtitle"},"What you like and dislike.")])]);g.data("feed_id",c);g.data("story_id",d);g.data("$story",f)}e&&g.addClass("NB-inverse");return g},show_manage_menu:function(a,c,d){var e=this,d=_.extend({toplevel:!1,inverse:!1},d),f=b(".NB-menu-manage-container");
clearTimeout(this.flags.closed_manage_menu);if(c&&c[0]==f.data("item")&&parseInt(f.css("opacity"),10)==1)this.hide_manage_menu(a,c);else if(this.hide_manage_menu(a,c),!c.hasClass("NB-empty")){c.addClass("NB-showing-menu");var g,j,k;a=="folder"?(g=b(".folder_title_text",c).eq(0).text(),j=d.inverse||b(".folder_title",c).hasClass("NB-hover-inverse")):a=="feed"?(g=c&&parseInt(c.attr("data-id"),10),j=d.inverse||c.hasClass("NB-hover-inverse")):a=="story"?(k=c.data("story_id"),c.hasClass("NB-hover-inverse")&&
(j=!0)):a=="site"&&(b(".NB-task-manage").tipsy("hide"),b(".NB-task-manage").tipsy("disable"));d=d.toplevel||c.hasClass("NB-toplevel")||c.children(".folder_title").hasClass("NB-toplevel");g=this.make_manage_menu(a,g,k,j,c);f.empty().append(g);f.data("item",c&&c[0]);b(".NB-task-manage").parents(".NB-taskbar").css("z-index",2);if(a=="site")f.align(b(".NB-task-manage"),"-bottom -left",{top:-32,left:-2}),b(".NB-task-manage").addClass("NB-hover"),f.corner("tl tr 8px");else if(a=="feed"||a=="folder"||a==
"story"){var l,m;j?(g=c,a=="feed"?(l=d?0:-20,m=d?21:21):a=="folder"?(l=d?0:-20,m=d?24:24,g=b(".folder_title",c)):a=="story"&&(l=4,m=24,g=b(".NB-story-manage-icon,.NB-feed-story-manage-icon",c)),f.align(g,"-bottom -left",{top:-1*m,left:l}),f.corner("br 8px"),b("li",f).each(function(){b(this).prependTo(b(this).parent())})):(g=c,a=="feed"?(l=d?2:-18,m=d?21:21,g=b(".NB-feedlist-manage-icon",c)):a=="folder"?(l=d?2:-20,m=d?22:21):a=="story"&&(l=4,m=18,g=b(".NB-story-manage-icon,.NB-feed-story-manage-icon",
c)),f.align(g,"-top -left",{top:m,left:l}),f.corner("tr 8px"))}f.stop().css({display:"block",opacity:1});if(a=="feed"||a=="folder"||a=="story")l=b.make("div",{className:"NB-menu-manage-arrow"}),j?(l.corner("bl br 5px"),f.append(l),l.addClass("NB-inverse")):(l.corner("tl tr 5px"),f.prepend(l));_.defer(function(){b(document).bind("click.menu",function(b){b.button!=2&&e.hide_manage_menu(a,c,!1)})});f.hover(function(){clearTimeout(e.flags.closed_manage_menu)},function(){clearTimeout(e.flags.closed_manage_menu);
e.flags.closed_manage_menu=setTimeout(function(){e.flags.closed_manage_menu&&e.hide_manage_menu(a,c,!0)},1E3)});var u;this.flags.feed_list_showing_manage_menu=!0;a=="feed"?u=this.$s.$feed_list.parent():a=="story"&&(u=this.$s.$story_titles.add(this.$s.$feed_stories));u&&u.unbind("scroll.manage_menu").bind("scroll.manage_menu",function(){e.flags.feed_list_showing_manage_menu?e.hide_manage_menu(a,c,!0):u.unbind("scroll.manage_menu")})}},hide_manage_menu:function(a,c,d){var e=b(".NB-menu-manage-container");
e.outerHeight();if(!this.flags.showing_confirm_input_on_manage_menu||!d)clearTimeout(this.flags.closed_manage_menu),this.flags.feed_list_showing_manage_menu=!1,b(document).unbind("click.menu"),e.uncorner(),this.model.preference("show_tooltips")&&b(".NB-task-manage").tipsy("enable"),c&&c.removeClass("NB-showing-menu"),d?e.stop().animate({opacity:0},{duration:250,queue:!1,complete:function(){e.css({display:"none",opacity:0})}}):e.css({display:"none",opacity:0}),b(".NB-task-manage").removeClass("NB-hover")},
show_confirm_delete_menu_item:function(){var a=b(".NB-menu-manage-feed-delete,.NB-menu-manage-folder-delete"),c=b(".NB-menu-manage-feed-delete-confirm,.NB-menu-manage-folder-delete-confirm");a.addClass("NB-menu-manage-feed-delete-cancel");b(".NB-menu-manage-title",a).text("Cancel delete");c.slideDown(500)},hide_confirm_delete_menu_item:function(){var a=b(".NB-menu-manage-feed-delete,.NB-menu-manage-folder-delete"),c=b(".NB-menu-manage-feed-delete-confirm,.NB-menu-manage-folder-delete-confirm");a.removeClass("NB-menu-manage-feed-delete-cancel");
var d=a.hasClass("NB-menu-manage-folder-delete")?"Delete this folder":"Delete this site";b(".NB-menu-manage-title",a).text(d);c.slideUp(500)},manage_menu_delete_feed:function(a,b){var d=this,e=a||this.active_feed,b=b||this.find_feed_in_feed_list(e),f=b.parents("li.folder").eq(0).find(".folder_title_text").eq(0).text(),g=this.find_feed_in_feed_list(e).length>1;this.delete_feed(e,b);this.model.delete_feed(e,f,function(){d.delete_feed(e,b)},g)},manage_menu_delete_folder:function(a,b){var d=this,e="",
f=b.parents("li.folder"),g=this.get_feed_ids_in_folder(b);f.length&&(e=f.eq(0).find(".folder_title_text").eq(0).text());this.model.delete_folder(a,e,g,function(){d.delete_folder(a,b)})},delete_feed:function(a,b){b=b||this.find_feed_in_feed_list(a);b.slideUp(500);this.active_feed==parseInt(b.attr("data-id"),10)&&(this.reset_feed(),this.show_splash_page());this.update_header_counts()},delete_folder:function(a,b){var d=this,e=this.get_feed_ids_in_folder(b);b.length&&b.slideUp(500);_.each(e,_.bind(function(a){if(d.active_feed==
a)return this.reset_feed(),this.show_splash_page(),!1},this));this.update_header_counts()},show_confirm_move_menu_item:function(a,c){var d=b(".NB-menu-manage-feed-move,.NB-menu-manage-folder-move"),e=b(".NB-menu-manage-feed-move-confirm,.NB-menu-manage-folder-move-confirm"),f=b(".NB-menu-manage-confirm-position",e),g=b("select",e),j="";c.closest("li.folder").length&&(j=c.eq(0).closest("li.folder").find(".folder_title_text").eq(0).text());d.addClass("NB-menu-manage-feed-move-cancel");b(".NB-menu-manage-title",
d).text("Cancel move");f.css("position","relative");d=e.height();f.css("position","absolute");e.css({height:0,display:"block"}).animate({height:d},{duration:500,easing:"easeOutQuart"});b("select",e).focus().select();this.flags.showing_confirm_input_on_manage_menu=!0;console.log(["$select",g,b("option",g)]);b("option",g).each(function(){console.log(["show_confirm_move_menu_item",j,b(this).attr("value")]);if(b(this).attr("value")==j)return b(this).attr("selected","selected"),!1})},hide_confirm_move_menu_item:function(a){var c=
b(".NB-menu-manage-feed-move,.NB-menu-manage-folder-move"),d=b(".NB-menu-manage-feed-move-confirm,.NB-menu-manage-folder-move-confirm");c.removeClass("NB-menu-manage-feed-move-cancel");var e="Move to folder";a?(e="Moved",c.addClass("NB-active")):c.removeClass("NB-active");b(".NB-menu-manage-title",c).text(e);d.slideUp(500);this.flags.showing_confirm_input_on_manage_menu=!1},manage_menu_move_feed:function(a,c){var d=a||this.active_feed,c=c||this.find_feed_in_feed_list(d),e=c.closest("li.folder"),f=
"",g=b(".NB-menu-manage-feed-move-confirm select").val();e.length&&(f=c.eq(0).closest("li.folder").find(".folder_title_text").eq(0).text());if(g==f)return this.hide_confirm_move_menu_item();this.model.move_feed_to_folder(d,f,g,_.bind(function(){_.delay(_.bind(function(){this.$s.$feed_list.css("opacity",1).animate({opacity:0},{duration:100,complete:_.bind(function(){this.make_feeds()},this)})},this),250);this.hide_manage_menu("feed",c,!0)},this));this.hide_confirm_move_menu_item(!0)},manage_menu_move_folder:function(a,
c){var d="",e=c.parents("li.folder").eq(0),f=b(".NB-menu-manage-folder-move-confirm select").val(),g=c.find(".folder_title_text").eq(0).text(),j=c.find(".folder_title_text").map(function(){return b(this).text()}).get();e.length&&(d=e.find(".folder_title_text").eq(0).text());if(f==d||f==g||_.contains(j,f))return this.hide_confirm_move_menu_item();this.model.move_folder_to_folder(a,d,f,_.bind(function(){_.delay(_.bind(function(){this.$s.$feed_list.css("opacity",1).animate({opacity:0},{duration:100,
complete:_.bind(function(){this.make_feeds()},this)})},this),250);this.hide_manage_menu("folder",e,!0)},this));this.hide_confirm_move_menu_item(!0)},show_confirm_rename_menu_item:function(){var a=this,c=b(".NB-menu-manage-feed-rename,.NB-menu-manage-folder-rename"),d=b(".NB-menu-manage-feed-rename-confirm,.NB-menu-manage-folder-rename-confirm"),e=b(".NB-menu-manage-confirm-position",d);c.addClass("NB-menu-manage-feed-rename-cancel");b(".NB-menu-manage-title",c).text("Cancel rename");e.css("position",
"relative");c=d.height();e.css("position","absolute");d.css({height:0,display:"block"}).animate({height:c},{duration:500,easing:"easeOutQuart"});b("input",d).focus().select();this.flags.showing_confirm_input_on_manage_menu=!0;b(".NB-menu-manage-feed-rename-confirm input.NB-menu-manage-title").bind("keyup","return",function(c){var d=b(c.target),c=d.closest(".NB-menu-manage").data("feed_id"),d=d.closest(".NB-menu-manage").data("$feed");a.manage_menu_rename_feed(c,d)});b(".NB-menu-manage-folder-rename-confirm input.NB-menu-manage-title").bind("keyup",
"return",function(c){var d=b(c.target),c=d.parents(".NB-menu-manage").data("folder_name"),d=d.parents(".NB-menu-manage").data("$folder");a.manage_menu_rename_folder(c,d)})},hide_confirm_rename_menu_item:function(a){var c=b(".NB-menu-manage-feed-rename,.NB-menu-manage-folder-rename"),d=b(".NB-menu-manage-feed-rename-confirm,.NB-menu-manage-folder-rename-confirm");c.removeClass("NB-menu-manage-feed-rename-cancel");var e=c.hasClass("NB-menu-manage-folder-rename")?"Rename this folder":"Rename this site";
a?(e="Renamed",c.addClass("NB-active")):c.removeClass("NB-active");b(".NB-menu-manage-title",c).text(e);d.slideUp(500);this.flags.showing_confirm_input_on_manage_menu=!1},manage_menu_rename_feed:function(a,c){var d=a||this.active_feed,c=c||this.find_feed_in_feed_list(d),e=b(".NB-menu-manage-feed-rename-confirm .NB-menu-manage-title").val();if(e.length<=0)return this.hide_confirm_rename_menu_item();this.model.rename_feed(d,e,function(){});b(".feed_title",c).text(e);d==this.active_feed&&b(".feed_title",
this.$s.$story_titles).text(e);this.hide_confirm_rename_menu_item(!0)},manage_menu_rename_folder:function(a,c){var d="",e=c.parents("li.folder"),f=b(".NB-menu-manage-folder-rename-confirm .NB-menu-manage-title").val();if(f.length<=0)return this.hide_confirm_rename_menu_item();e.length&&(d=e.eq(0).find(".folder_title_text").eq(0).text());this.model.rename_folder(a,f,d,function(){});b(".folder_title_text",c).text(f);this.hide_confirm_rename_menu_item(!0);b(".NB-menu-manage-folder-rename").parents(".NB-menu-manage").data("folder_name",
f)},load_intelligence_slider:function(){var a=this,b=this.$s.$intelligence_slider,d=this.model.preference("unread_view");this.switch_feed_view_unread_view(d);b.slider({range:"max",min:-1,max:1,step:1,value:d,slide:function(b,c){a.switch_feed_view_unread_view(c.value)},stop:function(b,c){a.slide_intelligence_slider(c.value)}})},slide_intelligence_slider:function(a){this.model.preference("unread_view")!=a&&this.model.preference("unread_view",a);this.flags.feed_view_positions_calculated=!1;this.switch_feed_view_unread_view(a);
this.show_feed_hidden_story_title_indicator();this.show_story_titles_above_intelligence_level({animate:!0,follow:!0});this.update_header_counts(!0)},move_intelligence_slider:function(a){var b=this.$s.$intelligence_slider,a=this.model.preference("unread_view")+a;b.slider({value:a});this.slide_intelligence_slider(a)},switch_feed_view_unread_view:function(a){_.isNumber(a)||(a=this.model.preference("unread_view"));var c=this.$s.$feed_list,d=this.get_unread_view_name(a),e=b(".task_story_next_unread"),
f=b(".NB-story-title-indicator",this.$story_titles),g=b(".NB-feeds-header-sites");c.removeClass("unread_view_positive").removeClass("unread_view_neutral").removeClass("unread_view_negative").addClass("unread_view_"+d);NEWSBLUR.Preferences.hide_read_feeds==1?(g.attr("title","Show all sites"),this.$s.$body.addClass("NB-feedlist-hide-read-feeds")):(g.attr("title","Show only unread stories"),this.$s.$body.removeClass("NB-feedlist-hide-read-feeds"));this.model.preference("show_tooltips")&&g.tipsy({gravity:"n",
delayIn:375});e.removeClass("task_story_next_positive").removeClass("task_story_next_neutral").removeClass("task_story_next_negative").addClass("task_story_next_"+d);f.removeClass("unread_threshold_positive").removeClass("unread_threshold_neutral").removeClass("unread_threshold_negative").addClass("unread_threshold_"+d);this.update_header_counts(!0,a)},get_unread_view_name:function(a){typeof a=="undefined"&&(a=this.model.preference("unread_view"));return a>0?"positive":a<0?"negative":"neutral"},get_unread_count:function(a,
c){var d=0,c=c||this.active_feed;if(c!="starred")if(this.flags.river_view)return d=c=="river:"?this.$s.$feed_list:b("li.folder.NB-selected"),d=this.list_feeds_with_unreads_in_folder(d,!0,a),_.reduce(d,function(a,b){return a+b},0);else{var e=this.model.get_feed(c);if(a){var f=this.get_unread_view_name();f=="positive"?d=e.ps:f=="neutral"?d=e.ps+e.nt:f=="negative"&&(d=e.ps+e.nt+e.ng)}else d=e.ng+e.nt+e.ps;return d}},show_story_titles_above_intelligence_level:function(a){var a=b.extend({},{unread_view_name:null,
animate:!0,follow:!0,temporary:!1},a),c=this,d=a.unread_view_name||this.get_unread_view_name(),e,f;if(this.flags.unread_threshold_temporarily)d=this.flags.unread_threshold_temporarily,a.temporary=!0;d=="positive"?(e=b(".story,.NB-feed-story").filter(".NB-story-positive"),f=b(".story,.NB-feed-story").filter(".NB-story-neutral,.NB-story-negative")):d=="neutral"?(e=b(".story,.NB-feed-story").filter(".NB-story-positive,.NB-story-neutral"),f=b(".story,.NB-feed-story").filter(".NB-story-negative"),a.temporary?
e.filter(".NB-story-neutral").addClass("NB-story-hidden-visible"):e.filter(".NB-story-hidden-visible").removeClass("NB-story-hidden-visible")):d=="negative"&&(e=b(".story,.NB-feed-story").filter(".NB-story-positive,.NB-story-neutral,.NB-story-negative"),f=b(),a.temporary?e.filter(".NB-story-negative,.NB-story-neutral:not(:visible)").addClass("NB-story-hidden-visible"):e.filter(".NB-story-hidden-visible").removeClass("NB-story-hidden-visible"));if((this.story_view=="feed"||this.flags.page_view_showing_feed_view)&&
this.model.preference("feed_view_single_story")){var g=this.active_story;if((d=g&&b(".NB-feed-story").filter(function(){return b(this).data("story_id")==g.id}))&&d.length)e=e.not(".NB-feed-story").add(d),f=f.add(".NB-feed-story").not(e)}a.animate||(f.css({display:"none"}),e.css({display:"block"}),this.check_story_titles_last_story());this.story_view=="feed"&&!this.model.preference("feed_view_single_story")&&(e.filter(":visible").length!=e.length||f.filter(":visible").length!=0)&&setTimeout(function(){c.flags.feed_view_positions_calculated=
!1;c.prefetch_story_locations_in_feed_view()},500);a.animate&&a.follow&&(this.model.preference("animations")?(f.slideUp(500,function(){c.check_story_titles_last_story()}),e.slideDown(500)):(f.css({display:"none"}),e.css({display:"block"}),this.check_story_titles_last_story()),setTimeout(function(){if(c.active_story){var a=c.find_story_in_story_titles(c.active_story.id);if(a&&a.length&&a.is(":visible")){var b=c.active_story;c.active_story=null;c.open_story(b,a);c.scroll_story_titles_to_show_selected_story_title(a)}}},
this.model.preference("animations")?550:0))},force_instafetch_stories:function(a){var a=a||this.active_feed,b=this.find_feed_in_feed_list(a);b.addClass("NB-feed-unfetched").removeClass("NB-feed-exception");this.model.save_exception_retry(a,_.bind(this.force_feed_refresh,this,a,b))},setup_socket_realtime_unread_counts:function(a){if(a&&!this.socket)this.socket=this.socket||io.connect("http://"+window.location.hostname+":8888"),console.log(["Connecting to pubsub",this.socket]),this.socket.on("connect",
_.bind(function(){this.socket.emit("subscribe:feeds",_.keys(this.model.feeds));this.socket.on("feed:update",_.bind(function(a,b){console.log(["Feed update",a,b]);this.force_feeds_refresh(!1,!1,parseInt(a,10))},this));this.flags.feed_refreshing_in_realtime=!0;this.setup_feed_refresh()},this))},setup_feed_refresh:function(a){var b=this,d=this.constants.FEED_REFRESH_INTERVAL,e=_.size(this.model.feeds);NEWSBLUR.Globals.is_premium||(d*=2);e>250&&(d*=4);e>500&&(d*=1.5);this.flags.feed_refreshing_in_realtime&&
(d*=20);a&&e<250?d=6E3:a&&e<500&&(d=15E3);clearInterval(this.flags.feed_refresh);this.flags.feed_refresh=setInterval(function(){b.flags.pause_feed_refreshing||b.model.refresh_feeds(_.bind(function(a){b.post_feed_refresh(a)},b),b.flags.has_unfetched_feeds)},d)},force_feed_refresh:function(a,c){var d=this,a=a||this.active_feed,c=c||this.find_feed_in_feed_list(a);this.force_feeds_refresh(function(e){e=b(d.make_feed_title_template(e[a],"feed"));c.hasClass("NB-toplevel")&&e.addClass("NB-toplevel");c.replaceWith(e);
d.cache.$feed_in_feed_list[a]=null;d.hover_over_feed_titles(e);d.active_feed==a&&d.open_feed(a,!0,e)},!1,a)},force_feeds_refresh:function(a,b,d){a?this.cache.refresh_callback=a:delete this.cache.refresh_callback;this.flags.pause_feed_refreshing=!0;this.model.refresh_feeds(_.bind(function(a){this.post_feed_refresh(a,b,d)},this),this.flags.has_unfetched_feeds,d)},post_feed_refresh:function(a,c,d){var e=this.model.feeds;this.cache.refresh_callback&&b.isFunction(this.cache.refresh_callback)&&(this.cache.refresh_callback(e),
delete this.cache.refresh_callback);for(var f in a){var e=a[f],g=this.model.get_feed(e);if(g){var j=b(this.make_feed_title_template(g,"feed")),k=this.find_feed_in_feed_list(e);e==this.active_feed?(NEWSBLUR.log(["UPDATING INLINE",g.feed_title,j,k,c]),c?(k.hasClass("NB-toplevel")&&j.addClass("NB-toplevel"),k.replaceWith(j),this.cache.$feed_in_feed_list[e]=null,this.mark_feed_as_selected(this.active_feed,j),d||this.recalculate_story_scores(e),this.show_feed_hidden_story_title_indicator(),this.make_content_pane_feed_counter()):
(this.model.feeds[e].ps=parseInt(b(".unread_count_positive",k).text(),10),this.model.feeds[e].nt=parseInt(b(".unread_count_neutral",k).text(),10),this.model.feeds[e].ng=parseInt(b(".unread_count_negative",k).text(),10))):(this.flags.has_unfetched_feeds||NEWSBLUR.log(["UPDATING",g.feed_title,j,k]),k.hasClass("NB-toplevel")&&j.addClass("NB-toplevel"),k.replaceWith(j),this.cache.$feed_in_feed_list[e]=null,function(a){a.css({backgroundColor:"#D7DDE6"});a.animate({backgroundColor:"#F0F076"},{duration:800,
queue:!1,complete:function(){a.animate({backgroundColor:"#D7DDE6"},{duration:1E3,queue:!1})}})}(j));this.hover_over_feed_titles(j)}}this.check_feed_fetch_progress();this.update_header_counts();this.count_collapsed_unread_stories();this.flags.pause_feed_refreshing=!1},post_refresh_active_feed:function(a,c){var d=c.stories,e=this.active_feed,f=[],g=b(".story:first",this.$s.$story_titles),j;for(j in d){e=d[j].story_feed_id;break}if(this.active_feed==e){for(j in this.model.stories){var k=this.model.stories[j],
d=this.find_story_in_story_titles(k.id),e=this.find_story_in_feed_view(k.id);d&&d.length?(k=NEWSBLUR.utils.compute_story_score(k),d.removeClass("NB-story-neutral").removeClass("NB-story-negative").removeClass("NB-story-positive"),e.removeClass("NB-story-neutral").removeClass("NB-story-negative").removeClass("NB-story-positive"),k<0?(d.addClass("NB-story-negative"),e.addClass("NB-story-negative")):k>0?(d.addClass("NB-story-positive"),e.addClass("NB-story-positive")):k==0&&(d.addClass("NB-story-neutral"),
e.addClass("NB-story-neutral"))):(f.unshift(k),$new_story=this.make_story_title(k),$new_story.css({display:"none"}),g.before($new_story),NEWSBLUR.log(["New story",$new_story,g]))}if(f.length)this.make_story_feed_entries(f,!1,{refresh_load:!0}),this.flags.feed_view_positions_calculated=!1;this.show_story_titles_above_intelligence_level({animate:!0,follow:!1})}this.update_header_counts()},hide_mouse_indicator:function(){var a=this;if(!this.flags.mouse_indicator_hidden)this.flags.mouse_indicator_hidden=
!0,this.$s.$mouse_indicator.animate({opacity:0,left:-10},{duration:200,queue:!1,complete:function(){a.flags.mouse_indicator_hidden=!0}})},show_mouse_indicator:function(){var a=this;if(this.flags.mouse_indicator_hidden)this.flags.mouse_indicator_hidden=!1,this.$s.$mouse_indicator.animate({opacity:1,left:0},{duration:200,queue:!1,complete:function(){a.flags.mouse_indicator_hidden=!1}})},handle_mouse_indicator_hover:function(){var a=this,c=b(".NB-callout-mouse-indicator");b(".NB-callout-text",c).text("Lock");
c.corner("5px");this.$s.$mouse_indicator.hover(function(){parseInt(a.model.preference("lock_mouse_indicator"),10)?b(".NB-callout-text",c).text("Unlock"):b(".NB-callout-text",c).text("Lock");a.flags.still_hovering_on_mouse_indicator=!0;setTimeout(function(){a.flags.still_hovering_on_mouse_indicator&&c.css({display:"block"}).animate({opacity:1,left:"20px"},{duration:200,queue:!1})},50)},function(){a.flags.still_hovering_on_mouse_indicator=!1;c.animate({opacity:0,left:"-100px"},{duration:200,queue:!1})})},
lock_mouse_indicator:function(){var a=this,c=b(".NB-callout-mouse-indicator");parseInt(a.model.preference("lock_mouse_indicator"),10)?(a.model.preference("lock_mouse_indicator",0),b(".NB-callout-text",c).text("Unlocked")):(a.model.preference("lock_mouse_indicator",this.cache.mouse_position_y),b(".NB-callout-text",c).text("Locked"));setTimeout(function(){a.flags.still_hovering_on_mouse_indicator=!0;c.fadeOut(200)},500)},position_mouse_indicator:function(){var a=parseInt(this.model.preference("lock_mouse_indicator"),
10);a==0?a=50:a-=8;this.$s.$mouse_indicator.css("top",a)},handle_login_and_signup_forms:function(){var a=b(".NB-signup-hidden"),c=b("input[name=signup-username]");c.bind("focus",function(){a.slideDown(300)}).bind("blur",function(){c.val().length<1&&a.slideUp(300)})},load_feature_page:function(a){var c=this,d=b(".NB-module-features"),e=b(".NB-module-features .NB-module-next-page"),f=b(".NB-module-features .NB-module-previous-page");d.addClass("NB-loading");a==-1&&!this.counts.feature_page?d.removeClass("NB-loading"):
a==1&&this.flags.features_last_page?d.removeClass("NB-loading"):this.model.get_features_page(this.counts.feature_page+a,function(g){d.removeClass("NB-loading");c.counts.feature_page+=a;var j=b.make("table",{className:"NB-features",cellSpacing:0,cellPadding:0}),k;for(k in g){if(k==3)break;var l=g[k],l=b.make("tr",{className:"NB-module-feature"},[b.make("td",{className:"NB-module-feature-date"},l.date),b.make("td",{className:"NB-module-feature-description"},l.description)]);j.append(l)}b(".NB-module-features .NB-features").replaceWith(j);
g.length<4?(e.addClass("NB-disabled"),c.flags.features_last_page=!0):(e.removeClass("NB-disabled"),c.flags.features_last_page=!1);c.counts.feature_page>0?f.removeClass("NB-disabled"):f.addClass("NB-disabled")})},setup_howitworks_hovers:function(){b(".NB-module-howitworks .NB-module-page-indicator").bind("mouseenter",_.bind(function(a){this.load_howitworks_page(b(a.target).prevAll(".NB-module-page-indicator").length)},this))},load_howitworks_page:function(a){var c=b(".NB-module-howitworks .NB-module-next-page"),
d=b(".NB-module-howitworks .NB-module-previous-page"),e=b(".NB-howitworks-page"),f=b(".NB-module-howitworks .NB-module-page-indicator"),g=e.length;a!=-1&&!(a>=g)&&(e.removeClass("NB-active"),f.removeClass("NB-active"),e.eq(a).addClass("NB-active"),f.eq(a).addClass("NB-active"),a>=g-1?c.addClass("NB-disabled"):c.removeClass("NB-disabled"),a<=0?d.addClass("NB-disabled"):d.removeClass("NB-disabled"))},setup_ftux_add_feed_callout:function(){var a=this;b(".NB-callout-ftux .NB-callout-text").text("First things first...");
b(".NB-callout-ftux").corner("5px");b(".NB-callout-ftux").css({opacity:0,display:"block"}).animate({opacity:1,bottom:6},{duration:750,easing:"easeInOutQuint"}).each(function(){var c=b(this);a.flags.bouncing_callout=setInterval(function(){c.animate({bottom:"+=2px"},{duration:200,easing:"easeInOutQuint"}).animate({bottom:"+=0px"},{duration:50}).animate({bottom:"-=2px"},{duration:200,easing:"easeInOutQuint"})},1E3)})},setup_ftux_signup_callout:function(){var a=this;a.flags.bouncing_callout||(b(".NB-callout-ftux-signup .NB-callout-text").text("Signup"),
b(".NB-callout-ftux-signup").corner("5px"),b(".NB-callout-ftux-signup").css({opacity:0,display:"block"}).animate({opacity:1,bottom:36},{duration:750,easing:"easeInOutQuint"}).each(function(){var c=b(this);a.flags.bouncing_callout=setInterval(function(){c.animate({bottom:"+=2px"},{duration:200,easing:"easeInOutQuint"}).animate({bottom:"+=0px"},{duration:50}).animate({bottom:"-=2px"},{duration:200,easing:"easeInOutQuint"})},1E4)}))},start_import_from_google_reader:function(){var a=this.$s.$feeds_progress,
c=b(".NB-progress-bar",a);this.flags.import_from_google_reader_working=!0;b(".NB-progress-title",a).text("Importing from Google Reader");b(".NB-progress-counts",a).hide();b(".NB-progress-percentage",a).hide();c.progressbar({value:0});this.animate_progress_bar(c,4);this.model.start_import_from_google_reader(b.rescope(this.finish_import_from_google_reader,this));this.show_progress_bar()},finish_import_from_google_reader:function(a,c){var d=this.$s.$feeds_progress,e=b(".NB-progress-bar",d);this.flags.import_from_google_reader_working=
!1;clearTimeout(this.locks.animate_progress_bar);c.code>=1?(e.progressbar({value:100}),this.load_feeds()):(NEWSBLUR.log(["Import Error!",c]),this.$s.$feed_link_loader.fadeOut(250),d.addClass("NB-progress-error"),b(".NB-progress-title",d).text("Error importing Google Reader"),b(".NB-progress-link",d).html(b.make("a",{href:NEWSBLUR.URLs["google-reader-authorize"],className:"NB-splash-link"},"Try importing again")),b(".left-center-footer").css("height","auto"))},start_count_unreads_after_import:function(){var a=
this,c=this.$s.$feeds_progress,d=b(".NB-progress-bar",c),e=_.keys(this.model.feeds).length;if(this.flags.pause_feed_refreshing)this.flags.count_unreads_after_import_working=!0,b(".NB-progress-title",c).text("Counting is difficult"),b(".NB-progress-counts",c).hide(),b(".NB-progress-percentage",c).hide(),d.progressbar({value:0}),setTimeout(function(){a.flags.count_unreads_after_import_working&&(a.animate_progress_bar(d,e/10),a.show_progress_bar())},500)},finish_count_unreads_after_import:function(){b(".NB-progress-bar",
this.$s.$feeds_progress).progressbar({value:100});this.flags.count_unreads_after_import_working=!1;clearTimeout(this.locks.animate_progress_bar);this.$s.$feed_link_loader.fadeOut(250);this.setup_feed_refresh();this.flags.has_unfetched_feeds||this.hide_progress_bar()},load_recommended_feeds:function(){clearInterval(this.locks.load_recommended_feed);this.locks.load_recommended_feed=setInterval(_.bind(function(){this.load_recommended_feed(0,!0)},this),6E5)},load_feed_in_tryfeed_view:function(a,c){var c=
c||{},d=b(".NB-module-recommended"),e=this.$s.$tryfeed_header.closest(".NB-feeds-header-container"),c={feed_id:a,feed_title:c.feed_title||b(".NB-recommended-title",d).text(),favicon:c.favicon?b.favicon(c.favicon):b(".NB-recommended-favicon",d).attr("src"),feed_address:c.feed_address};this.reset_feed();this.model.set_feed(a,c);b(".NB-feeds-header-title",this.$s.$tryfeed_header).text(c.feed_title);b(".NB-feeds-header-icon",this.$s.$tryfeed_header).attr("src",c.favicon);e.slideDown(350,_.bind(function(){this.open_feed(a);
this.flags.showing_feed_in_tryfeed_view=!0;this.$s.$tryfeed_header.addClass("NB-selected")},this))},hide_tryfeed_view:function(){this.$s.$tryfeed_header.closest(".NB-feeds-header-container").slideUp(350);this.$s.$story_taskbar.find(".NB-tryfeed-add").remove();this.flags.showing_feed_in_tryfeed_view=!1},show_tryfeed_add_button:function(){if(!this.$s.$story_taskbar.find(".NB-tryfeed-add:visible").length){var a=b.make("div",{className:"NB-modal-submit"},[b.make("div",{className:"NB-tryfeed-add NB-modal-submit-green NB-modal-submit-button"},
"Add")]).css({opacity:0});this.$s.$story_taskbar.find(".NB-taskbar").append(a);a.animate({opacity:1},{duration:600})}},add_recommended_feed:function(a){this.open_add_feed_modal({url:this.model.get_feed(a?a:this.active_feed).feed_address})},approve_feed_in_moderation_queue:function(a){var c=this,d=b(".NB-module-recommended.NB-recommended-unmoderated");d.addClass("NB-loading");var e=b(".NB-recommended-moderation-date").val();this.model.approve_feed_in_moderation_queue(a,e,function(a){a&&(d.removeClass("NB-loading"),
d.replaceWith(a),c.load_javascript_elements_on_page())})},decline_feed_in_moderation_queue:function(a){var c=this,d=b(".NB-module-recommended.NB-recommended-unmoderated");d.addClass("NB-loading");this.model.decline_feed_in_moderation_queue(a,function(a){a&&(d.removeClass("NB-loading"),d.replaceWith(a),c.load_javascript_elements_on_page())})},load_recommended_feed:function(a,c,d){var e=this,f=d?b(".NB-module-recommended.NB-recommended-unmoderated"):b(".NB-module-recommended:not(.NB-recommended-unmoderated)");
f.addClass("NB-loading");a=a||0;this.model.load_recommended_feed(this.counts.recommended_feed_page+a,!!c,d,function(b){b&&(e.counts.recommended_feed_page+=a,f.removeClass("NB-loading"),f.replaceWith(b),e.load_javascript_elements_on_page())},b.noop)},setup_dashboard_graphs:function(){clearInterval(this.locks.load_dashboard_graphs);this.locks.load_dashboard_graphs=setInterval(_.bind(function(){this.load_dashboard_graphs()},this),6E5)},load_dashboard_graphs:function(){var a=this,c=b(".NB-module-stats");
c.addClass("NB-loading");this.model.load_dashboard_graphs(function(b){b&&(c.removeClass("NB-loading"),c.replaceWith(b),a.load_javascript_elements_on_page())},b.noop)},handle_clicks:function(a,c){var d=this,e=!1;b.targetIs(c,{tagSelector:"#feed_list .NB-feedlist-manage-icon"},function(a){c.preventDefault();d.flags.sorting_feed||(e=!0,a.parent().hasClass("feed")?d.show_manage_menu("feed",a.closest(".feed")):(a=a.closest(".folder"),d.show_manage_menu("folder",a),a.addClass("NB-hover")))});if(!e&&(b.targetIs(c,
{tagSelector:"#feed_list .feed.NB-feed-exception"},function(a){c.preventDefault();if(!d.flags.sorting_feed){var b=parseInt(a.attr("data-id"),10);e=!0;d.open_feed_exception_modal(b,a)}}),!e&&(b.targetIs(c,{tagSelector:"#feed_list .feed:not(.NB-empty)"},function(a){c.preventDefault();if(!d.flags.sorting_feed){var b=parseInt(a.attr("data-id"),10);NEWSBLUR.hotkeys.command?d.open_unread_stories_in_tabs(b):d.open_feed(b,!1,a)}}),b.targetIs(c,{tagSelector:"#feed_list .folder_title .NB-feedlist-collapse-icon"},
function(a){c.preventDefault();e=!0;a=a.closest(".folder_title");d.flags.sorting_feed||d.collapse_folder(a)}),!e))){b.targetIs(c,{tagSelector:"#feed_list .folder_title"},function(a){c.preventDefault();var b=a.closest("li.folder"),a=a.find(".folder_title_text").text();d.open_river_stories(b,a)});b.targetIs(c,{tagSelector:".NB-feedbar .NB-feedlist-manage-icon"},function(a){c.preventDefault();d.show_manage_menu("feed",a.closest(".feed"),{toplevel:!0})});b.targetIs(c,{tagSelector:".NB-feedbar-mark-feed-read"},
function(a){c.preventDefault();var b=parseInt(a.closest(".feed").attr("data-id"),10);d.mark_feed_as_read(b,a);a.fadeOut(400)});b.targetIs(c,{tagSelector:".NB-feedbar-statistics"},function(){d.open_feed_statistics_modal()});b.targetIs(c,{tagSelector:".NB-feedbar-train-feed"},function(){c.preventDefault();b(".NB-task-manage").hasClass("NB-disabled")||d.open_feed_intelligence_modal(1,this.active_feed,!0)});b.targetIs(c,{tagSelector:".NB-story-title-indicator"},function(){c.preventDefault();d.show_hidden_story_titles()});
b.targetIs(c,{tagSelector:".NB-feeds-header-starred"},function(){c.preventDefault();d.open_starred_stories()});b.targetIs(c,{tagSelector:".NB-feeds-header-river"},function(){c.preventDefault();d.open_river_stories()});b.targetIs(c,{tagSelector:".NB-feed-like"},function(){c.preventDefault();d.open_feed_intelligence_modal(1)});b.targetIs(c,{tagSelector:".NB-feed-dislike"},function(){c.preventDefault();d.open_feed_intelligence_modal(-1)});var f=!1;b.targetIs(c,{tagSelector:".NB-story-manage-icon"},function(a){c.preventDefault();
f=!0;d.show_manage_menu("story",a.closest(".story"))});b.targetIs(c,{tagSelector:".NB-feed-story-manage-icon"},function(a){c.preventDefault();f=!0;d.show_manage_menu("story",a.closest(".NB-feed-story"))});b.targetIs(c,{tagSelector:".NB-menu-manage-story-open"},function(a){c.preventDefault();a=a.closest(".NB-menu-manage-story").data("story_id");d.open_story_in_new_tab(a);f=!0});b.targetIs(c,{tagSelector:".NB-menu-manage-story-star"},function(a){c.preventDefault();var a=a.closest(".NB-menu-manage-story").data("story_id"),
b=d.find_story_in_story_titles(a);b.hasClass("NB-story-starred")?d.mark_story_as_unstarred(a,b):d.mark_story_as_starred(a,b);f=!0});b.targetIs(c,{tagSelector:".NB-feed-story-hide-changes"},function(a){c.preventDefault();a=a.closest(".NB-feed-story");d.hide_story_changes(a);f=!0});if(f)return!1;b.targetIs(c,{tagSelector:".NB-feed-story-tag"},function(a){c.preventDefault();var b=a.closest(".NB-feed-story"),e=b.data("feed_id"),f=a.data("tag"),a=a.hasClass("NB-score-1")?-1:a.hasClass("NB-score--1")?0:
1;d.save_classifier("tag",f,a,e);d.preserve_classifier_color(b,"tag",f,a)});b.targetIs(c,{tagSelector:".NB-feed-story-author"},function(a){c.preventDefault();var b=a.closest(".NB-feed-story"),e=b.data("feed_id"),f=a.data("author"),a=a.hasClass("NB-score-1")?-1:a.hasClass("NB-score--1")?0:1;d.save_classifier("author",f,a,e);d.preserve_classifier_color(b,"author",f,a)});b.targetIs(c,{tagSelector:".story"},function(a){c.preventDefault();var e=b(".story_id",a).text();d.push_current_story_on_history();
NEWSBLUR.hotkeys.command?d.open_story_in_new_tab(e,a):(e=d.model.get_story(e),d.open_story(e,a))});b.targetIs(c,{tagSelector:"a.mark_story_as_read"},function(a){c.preventDefault();a=a.attr("href").slice(1).split("/");d.mark_story_as_read(a)});b.targetIs(c,{tagSelector:".NB-feed-story-premium-only a"},function(){c.preventDefault();d.open_feedchooser_modal()});b.targetIs(c,{tagSelector:".NB-task-add"},function(){c.preventDefault();d.open_add_feed_modal()});b.targetIs(c,{tagSelector:".NB-task-manage"},
function(a){c.preventDefault();a.hasClass("NB-disabled")||d.show_manage_menu("site",a)});b.targetIs(c,{tagSelector:".NB-taskbar-sidebar-toggle-close"},function(){c.preventDefault();d.close_sidebar()});b.targetIs(c,{tagSelector:".NB-taskbar-sidebar-toggle-open"},function(){c.preventDefault();d.open_sidebar()});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-train"},function(a){c.preventDefault();a.hasClass("NB-disabled")||(a=a.parents(".NB-menu-manage").data("feed_id"),d.open_feed_intelligence_modal(1,
a,!1))});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-recommend"},function(a){c.preventDefault();a=a.parents(".NB-menu-manage").data("feed_id");d.open_recommend_modal(a)});b.targetIs(c,{tagSelector:".NB-menu-manage-story-train"},function(a){c.preventDefault();if(!a.hasClass("NB-disabled")){var b=a.closest(".NB-menu-manage").data("feed_id"),a=a.closest(".NB-menu-manage").data("story_id");d.open_story_trainer(a,b)}});b.targetIs(c,{tagSelector:".NB-menu-manage-trainer"},function(a){c.preventDefault();
a.hasClass("NB-disabled")||d.open_trainer_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-tutorial"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_tutorial_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-stats"},function(a){c.preventDefault();a.hasClass("NB-disabled")||(a=a.parents(".NB-menu-manage").data("feed_id"),NEWSBLUR.log(["statistics feed_id",a]),d.open_feed_statistics_modal(a))});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-settings"},function(a){c.preventDefault();
if(!a.hasClass("NB-disabled")){var b=a.parents(".NB-menu-manage").data("feed_id");d.open_feed_exception_modal(b,a)}});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-reload"},function(a){c.preventDefault();a.hasClass("NB-disabled")||(a=a.parents(".NB-menu-manage").data("feed_id"),d.force_instafetch_stories(a))});b.targetIs(c,{tagSelector:".NB-menu-manage-delete"},function(a){c.preventDefault();c.stopPropagation();a.hasClass("NB-menu-manage-feed-delete-cancel")||a.hasClass("NB-menu-manage-folder-delete-cancel")?
d.hide_confirm_delete_menu_item():d.show_confirm_delete_menu_item()});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-delete-confirm"},function(a){c.preventDefault();var b=a.parents(".NB-menu-manage").data("feed_id"),a=a.parents(".NB-menu-manage").data("$feed");d.manage_menu_delete_feed(b,a)});b.targetIs(c,{tagSelector:".NB-menu-manage-folder-delete-confirm"},function(a){c.preventDefault();var b=a.parents(".NB-menu-manage").data("folder_name"),a=a.parents(".NB-menu-manage").data("$folder");d.manage_menu_delete_folder(b,
a)});b.targetIs(c,{tagSelector:".NB-menu-manage-move"},function(a){c.preventDefault();c.stopPropagation();var b=a.parents(".NB-menu-manage").data("feed_id"),e=a.parents(".NB-menu-manage").data("$feed"),f=a.parents(".NB-menu-manage").data("folder_name"),m=a.parents(".NB-menu-manage").data("$folder");a.hasClass("NB-menu-manage-feed-move-cancel")||a.hasClass("NB-menu-manage-folder-move-cancel")?d.hide_confirm_move_menu_item():d.show_confirm_move_menu_item(b||f,e||m)});b.targetIs(c,{tagSelector:".NB-menu-manage-folder-move-save"},
function(a){c.preventDefault();c.stopPropagation();var b=a.parents(".NB-menu-manage").data("folder_name"),a=a.parents(".NB-menu-manage").data("$folder");d.manage_menu_move_folder(b,a)});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-move-save"},function(a){c.preventDefault();c.stopPropagation();var b=a.parents(".NB-menu-manage").data("feed_id"),a=a.parents(".NB-menu-manage").data("$feed");d.manage_menu_move_feed(b,a)});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-move-confirm"},function(){c.preventDefault();
c.stopPropagation()});b.targetIs(c,{tagSelector:".NB-menu-manage-folder-move-confirm"},function(){c.preventDefault();c.stopPropagation()});b.targetIs(c,{tagSelector:".NB-menu-manage-rename"},function(a){c.preventDefault();c.stopPropagation();a.hasClass("NB-menu-manage-feed-rename-cancel")||a.hasClass("NB-menu-manage-folder-rename-cancel")?d.hide_confirm_rename_menu_item():d.show_confirm_rename_menu_item()});b.targetIs(c,{tagSelector:".NB-menu-manage-folder-rename-save"},function(a){c.preventDefault();
c.stopPropagation();var b=a.parents(".NB-menu-manage").data("folder_name"),a=a.parents(".NB-menu-manage").data("$folder");d.manage_menu_rename_folder(b,a)});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-rename-save"},function(a){c.preventDefault();c.stopPropagation();var b=a.parents(".NB-menu-manage").data("feed_id"),a=a.parents(".NB-menu-manage").data("$feed");d.manage_menu_rename_feed(b,a)});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-rename-confirm"},function(){c.preventDefault();c.stopPropagation()});
b.targetIs(c,{tagSelector:".NB-menu-manage-folder-rename-confirm"},function(){c.preventDefault();c.stopPropagation()});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-mark-read"},function(a){c.preventDefault();a=a.parents(".NB-menu-manage").data("feed_id");d.mark_feed_as_read(a)});b.targetIs(c,{tagSelector:".NB-menu-manage-folder-mark-read"},function(a){c.preventDefault();var b=a.parents(".NB-menu-manage").data("folder_name"),a=a.parents(".NB-menu-manage").data("$folder");d.mark_folder_as_read(b,
a)});b.targetIs(c,{tagSelector:".NB-menu-manage-site-mark-read"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_mark_read_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-keyboard"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_keyboard_shortcuts_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-feed-exception"},function(a){c.preventDefault();var b=a.parents(".NB-menu-manage").data("feed_id");d.open_feed_exception_modal(b,a)});b.targetIs(c,{tagSelector:".NB-menu-manage-goodies"},
function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_goodies_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-preferences"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_preferences_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-account"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_account_modal()});b.targetIs(c,{tagSelector:".NB-menu-manage-feedchooser"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_feedchooser_modal()});
b.targetIs(c,{tagSelector:".NB-module-account-upgrade"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_feedchooser_modal()});b.targetIs(c,{tagSelector:".NB-module-account-train"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_trainer_modal()});b.targetIs(c,{tagSelector:".NB-module-launch-tutorial"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.open_tutorial_modal()});b.targetIs(c,{tagSelector:".NB-module-tutorial-hide"},function(a){c.preventDefault();
a.hasClass("NB-disabled")||d.hide_tutorial()});b.targetIs(c,{tagSelector:".NB-module-mobile-hide"},function(a){c.preventDefault();a.hasClass("NB-disabled")||d.hide_mobile()});b.targetIs(c,{tagSelector:".NB-menu-manage-story-unread"},function(a){c.preventDefault();var b=a.closest(".NB-menu-manage").data("feed_id"),a=a.closest(".NB-menu-manage").data("story_id");d.mark_story_as_unread(a,b)});b.targetIs(c,{tagSelector:".task_view_page:not(.NB-task-return)"},function(){c.preventDefault();d.switch_taskbar_view("page")});
b.targetIs(c,{tagSelector:".task_view_feed"},function(){c.preventDefault();d.switch_taskbar_view("feed")});b.targetIs(c,{tagSelector:".task_view_story"},function(){c.preventDefault();d.switch_taskbar_view("story")});b.targetIs(c,{tagSelector:".NB-task-return"},function(){c.preventDefault();d.load_feed_iframe()});b.targetIs(c,{tagSelector:".task_button_story.task_story_next_unread"},function(){c.preventDefault();d.open_next_unread_story_across_feeds()});b.targetIs(c,{tagSelector:".task_button_story.task_story_next"},
function(){c.preventDefault();d.show_next_story(1)});b.targetIs(c,{tagSelector:".task_button_story.task_story_previous"},function(){c.preventDefault();d.show_previous_story()});b.targetIs(c,{tagSelector:".task_button_signup"},function(){c.preventDefault();d.show_splash_page()});b.targetIs(c,{tagSelector:".NB-feeds-header-sites"},function(){c.preventDefault();e=!0;d.switch_preferences_hide_read_feeds()});e||(b.targetIs(c,{tagSelector:".NB-feeds-header-dashboard"},function(){c.preventDefault();d.show_splash_page()}),
b.targetIs(c,{tagSelector:".NB-recommended-statistics"},function(a){c.preventDefault();var e=a.closest(".NB-recommended").attr("data-feed-id");b(".NB-module-recommended").addClass("NB-loading");d.model.load_canonical_feed(e,function(){b(".NB-module-recommended").removeClass("NB-loading");d.open_feed_statistics_modal(e)})}),b.targetIs(c,{tagSelector:".NB-recommended-intelligence"},function(a){c.preventDefault();var e=a.closest(".NB-recommended").attr("data-feed-id");b(".NB-module-recommended").addClass("NB-loading");
d.model.load_canonical_feed(e,function(){b(".NB-module-recommended").removeClass("NB-loading");d.open_feed_intelligence_modal(1,e)})}),b.targetIs(c,{tagSelector:".NB-recommended-try"},function(a){c.preventDefault();a=a.closest(".NB-recommended").attr("data-feed-id");d.load_feed_in_tryfeed_view(a)}),b.targetIs(c,{tagSelector:".NB-recommended-add"},function(a){c.preventDefault();var e=a.closest(".NB-recommended").attr("data-feed-id");b(".NB-module-recommended").addClass("NB-loading");d.model.load_canonical_feed(e,
function(){b(".NB-module-recommended").removeClass("NB-loading");d.add_recommended_feed(e)})}),b.targetIs(c,{tagSelector:".NB-recommended-decline"},function(a){c.preventDefault();a=a.closest(".NB-recommended").attr("data-feed-id");d.decline_feed_in_moderation_queue(a)}),b.targetIs(c,{tagSelector:".NB-recommended-approve"},function(a){c.preventDefault();a=a.closest(".NB-recommended").attr("data-feed-id");d.approve_feed_in_moderation_queue(a)}),b.targetIs(c,{tagSelector:".NB-module-recommended .NB-module-next-page"},
function(a){c.preventDefault();a.hasClass("NB-disabled")||(console.log(["parent",a.closest(".NB-module-recommended"),a.closest(".NB-module-recommended").hasClass("NB-recommended-unmoderated")]),a=a.closest(".NB-module-recommended").hasClass("NB-recommended-unmoderated"),d.load_recommended_feed(1,!1,a))}),b.targetIs(c,{tagSelector:".NB-module-recommended .NB-module-previous-page"},function(a){c.preventDefault();if(!a.hasClass("NB-disabled")){var b=a.closest(".NB-module-recommended").hasClass("NB-recommended-unmoderated");
console.log(["parent",a.closest(".NB-module-recommended")]);d.load_recommended_feed(-1,!1,b)}}),b.targetIs(c,{tagSelector:".NB-tryfeed-add"},function(){c.preventDefault();d.add_recommended_feed(d.active_feed)}),b.targetIs(c,{tagSelector:"#mouse-indicator"},function(){c.preventDefault();d.lock_mouse_indicator()}),b.targetIs(c,{tagSelector:".NB-progress-close"},function(){c.preventDefault();d.hide_unfetched_feed_progress(!0)}),b.targetIs(c,{tagSelector:".NB-module-next-page",childOf:".NB-module-features"},
function(){c.preventDefault();d.load_feature_page(1)}),b.targetIs(c,{tagSelector:".NB-module-previous-page",childOf:".NB-module-features"},function(){c.preventDefault();d.load_feature_page(-1)}),b.targetIs(c,{tagSelector:".NB-module-next-page",childOf:".NB-module-howitworks"},function(){c.preventDefault();var a=b(".NB-howitworks-page.NB-active").prevAll(".NB-howitworks-page").length;d.load_howitworks_page(a+1)}),b.targetIs(c,{tagSelector:".NB-module-previous-page",childOf:".NB-module-howitworks"},
function(){c.preventDefault();var a=b(".NB-howitworks-page.NB-active").prevAll(".NB-howitworks-page").length;d.load_howitworks_page(a-1)}),b.targetIs(c,{tagSelector:".NB-module-page-indicator",childOf:".NB-module-howitworks"},function(a){c.preventDefault();a=a.prevAll(".NB-module-page-indicator").length;d.load_howitworks_page(a)}),b.targetIs(c,{tagSelector:".NB-splash-meta-about"},function(){c.preventDefault();NEWSBLUR.about=new NEWSBLUR.About}),b.targetIs(c,{tagSelector:".NB-splash-meta-faq"},function(){c.preventDefault();
NEWSBLUR.faq=new NEWSBLUR.Faq}))}},handle_dblclicks:function(a,c){var d=this,e=!1;b.targetIs(c,{tagSelector:"#feed_list .NB-feedlist-manage-icon"},function(){c.preventDefault();c.stopPropagation();e=!0});e||(b.targetIs(c,{tagSelector:"#feed_list .feed.NB-feed-exception"},function(){c.preventDefault();c.stopPropagation();exception=!0}),e||(b.targetIs(c,{tagSelector:"#story_titles .story"},function(a){c.preventDefault();c.stopPropagation();a=b(".story_id",a).text();a=d.model.get_story(a);d.open_story_in_story_view(a,
!0)}),b.targetIs(c,{tagSelector:"#feed_list .feed"},function(a){c.preventDefault();c.stopPropagation();var b=parseInt(a.attr("data-id"),10);d.open_feed_link(b,a)})))},handle_rightclicks:function(a,c){var d=this;b.targetIs(c,{tagSelector:".feed",childOf:"#feed_list"},function(a){c.preventDefault();d.show_manage_menu("feed",a)});b.targetIs(c,{tagSelector:".folder_title",childOf:"#feed_list"},function(a){c.preventDefault();d.show_manage_menu("folder",a.closest("li.folder"))});b.targetIs(c,{tagSelector:".story",
childOf:"#story_titles"},function(a){c.preventDefault();d.show_manage_menu("story",a)});b.targetIs(c,{tagSelector:".NB-feed-story-header",childOf:"#story_pane"},function(a){c.preventDefault();d.show_manage_menu("story",a.closest(".NB-feed-story"))});b.targetIs(c,{tagSelector:".NB-menu-manage"},function(){c.preventDefault()});b.targetIs(c,{tagSelector:".NB-menu-manage-arrow"},function(){c.preventDefault()})},handle_scroll_story_titles:function(){this.check_story_titles_last_story()},handle_scroll_feed_iframe:function(){if(this.story_view==
"page"&&!this.flags.page_view_showing_feed_view&&!this.flags.scrolling_by_selecting_story_title){var a=this.cache.mouse_position_y+this.$s.$feed_iframe.contents().scrollTop(),c=this.cache.iframe_story_positions_keys,d=b.closest(a,c);this.navigate_story_titles_to_story(this.cache.iframe_story_positions[c[d]]);if(!this.flags.iframe_scroll_snap_back_prepared)this.iframe_scroll=a-this.cache.mouse_position_y;this.flags.iframe_scroll_snap_back_prepared=!1}},handle_mousemove_iframe_view:function(a,c){var d=
this;this.show_mouse_indicator();if(!parseInt(this.model.preference("lock_mouse_indicator"),10)){var e=this.$s.$feed_iframe.contents().scrollTop();this.cache.mouse_position_y=c.pageY-e;this.$s.$mouse_indicator.css("top",this.cache.mouse_position_y-8);setTimeout(function(){d.flags.mousemove_timeout=!1},40);if(!this.flags.mousemove_timeout&&!this.flags.scrolling_by_selecting_story_title){var f=this.cache.iframe_story_positions_keys,e=b.closest(this.cache.mouse_position_y+e,f),f=this.cache.iframe_story_positions[f[e]];
this.flags.mousemove_timeout=!0;this.navigate_story_titles_to_story(f)}}},handle_mousemove_feed_view:function(a,c){var d=this;if(this.model.preference("feed_view_single_story"))return this.hide_mouse_indicator();else this.show_mouse_indicator();if(!parseInt(this.model.preference("lock_mouse_indicator"),10)){this.cache.mouse_position_y=c.pageY;if(this.cache.story_pane_position==null)this.cache.story_pane_position=this.$s.$feed_stories.offsetParent().offset().top;this.$s.$mouse_indicator.css("top",
this.cache.mouse_position_y-this.cache.story_pane_position-8);if(!this.flags.mousemove_timeout&&(setTimeout(function(){d.flags.mousemove_timeout=!1},40),!this.flags.mousemove_timeout&&!this.flags.switching_to_feed_view&&!this.flags.scrolling_by_selecting_story_title&&this.story_view!="story")){var e=this.cache.story_pane_position,f=this.cache.mouse_position_y+this.$s.$feed_stories.scrollTop()-e,e=this.cache.feed_view_story_positions_keys,f=b.closest(f,e),e=this.cache.feed_view_story_positions[e[f]];
this.flags.mousemove_timeout=!0;e!=this.active_story&&this.navigate_story_titles_to_story(e)}}},handle_scroll_feed_view:function(){if((this.story_view=="feed"||this.story_view=="page"&&this.flags.page_view_showing_feed_view)&&!this.flags.switching_to_feed_view&&!this.flags.scrolling_by_selecting_story_title&&!this.model.preference("feed_view_single_story")){var a=this.cache.mouse_position_y+this.$s.$feed_stories.scrollTop(),c=this.cache.feed_view_story_positions_keys,a=b.closest(a-this.cache.story_pane_position,
c),c=this.cache.feed_view_story_positions[c[a]];this.navigate_story_titles_to_story(c)}if(this.flags.river_view&&!this.model.preference("feed_view_single_story"))this.flags.scrolling_by_selecting_story_title?c=this.active_story:(a=Math.max(1,this.$s.$feed_stories.scrollTop()),c=this.cache.feed_view_story_positions_keys,a=b.closest(a,c),c=this.cache.feed_view_story_positions[c[a]]),this.show_correct_feed_in_feed_title_floater(c)},handle_keystrokes:function(){var a=this,c=b(document);NEWSBLUR.hotkeys.initialize();
c.bind("keydown","?",function(b){b.preventDefault();a.open_keyboard_shortcuts_modal()});c.bind("keydown","shift+/",function(b){b.preventDefault();a.open_keyboard_shortcuts_modal()});c.bind("keydown","down",function(b){b.preventDefault();a.show_next_story(1)});c.bind("keydown","up",function(b){b.preventDefault();a.show_next_story(-1)});c.bind("keydown","j",function(b){b.preventDefault();a.show_next_story(1)});c.bind("keydown","k",function(b){b.preventDefault();a.show_next_story(-1)});c.bind("keydown",
"shift+j",function(b){b.preventDefault();a.show_next_feed(1)});c.bind("keydown","shift+k",function(b){b.preventDefault();a.show_next_feed(-1)});c.bind("keydown","shift+down",function(b){b.preventDefault();a.show_next_feed(1)});c.bind("keydown","shift+up",function(b){b.preventDefault();a.show_next_feed(-1)});c.bind("keydown","left",function(b){b.preventDefault();a.switch_taskbar_view_direction(-1)});c.bind("keydown","right",function(b){b.preventDefault();a.switch_taskbar_view_direction(1)});c.bind("keydown",
"h",function(b){b.preventDefault();a.switch_taskbar_view_direction(-1)});c.bind("keydown","l",function(b){b.preventDefault();a.switch_taskbar_view_direction(1)});c.bind("keydown","r",function(b){b.preventDefault();a.open_river_stories()});c.bind("keydown","enter",function(b){b.preventDefault();a.open_story_in_story_view(null,!0)});c.bind("keydown","return",function(b){b.preventDefault();a.open_story_in_story_view(null,!0)});c.bind("keydown","space",function(b){b.preventDefault();a.page_in_story(0.4,
1)});c.bind("keydown","shift+space",function(b){b.preventDefault();a.page_in_story(0.6,-1)});c.bind("keydown","u",function(b){b.preventDefault();a.flags.sidebar_closed?a.open_sidebar():a.close_sidebar()});c.bind("keydown","n",function(b){b.preventDefault();a.open_next_unread_story_across_feeds()});c.bind("keydown","m",function(b){b.preventDefault();a.show_last_unread_story()});c.bind("keydown","b",function(b){b.preventDefault();a.show_previous_story()});c.bind("keydown","s",function(b){b.preventDefault();
if(a.active_story){var b=a.active_story.id,c=a.find_story_in_story_titles(b);c.hasClass("NB-story-starred")?a.mark_story_as_unstarred(b,c):a.mark_story_as_starred(b,c)}});c.bind("keypress","+",function(b){b.preventDefault();a.move_intelligence_slider(1)});c.bind("keypress","-",function(b){b.preventDefault();a.move_intelligence_slider(-1)});c.bind("keypress","d",function(b){b.preventDefault();a.show_splash_page()});c.bind("keypress","t",function(b){b.preventDefault();a.open_story_trainer()});c.bind("keypress",
"f",function(b){b.preventDefault();a.open_feed_intelligence_modal(1)});c.bind("keypress","o",function(b){b.preventDefault();a.open_story_in_new_tab()});c.bind("keydown","shift+a",function(b){b.preventDefault();a.flags.river_view?a.mark_folder_as_read():a.mark_feed_as_read()});c.bind("keydown","shift+e",function(b){b.preventDefault();a.open_river_stories()})}}})(jQuery);
NEWSBLUR.generate_bookmarklet=function(){return $.make("a",{className:"NB-goodies-bookmarklet-button",href:"javascript:function newsblur_bookmarklet() { var d=document,z=d.createElement('scr'+'ipt'),b=d.body,l=d.location; try{ if(!b) { throw(0); } d.title = '(Adding...) ' + d.title; z.setAttribute('src',l.protocol+'//"+NEWSBLUR.URLs.domain+"/api/add_site_load_script/"+NEWSBLUR.Globals.secret_token+"?url='+encodeURIComponent(l.href)+'&time='+(new Date().getTime())); b.appendChild(z); } catch(e) {alert('Please wait until the page has loaded.');}}newsblur_bookmarklet();void(0)"},
"Subscribe in NewsBlur")};NEWSBLUR.Modal=function(b){this.options=$.extend({},{},b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};
NEWSBLUR.Modal.prototype={runner:function(){},open_modal:function(){var b=this;this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,onOpen:function(a){a.overlay.fadeIn(200,function(){a.container.fadeIn(200);a.data.fadeIn(200,function(){if(b.options.onOpen)b.options.onOpen()});setTimeout(function(){$(window).resize()})})},onShow:function(){$("#simplemodal-container").corner("6px");if(b.options.onShow)b.options.onShow()},onClose:function(a,b){a.data.hide().empty().remove();a.container.hide().empty().remove();
a.overlay.fadeOut(200,function(){a.overlay.empty().remove();$.modal.close(b)});$(".NB-modal-holder").empty().remove()}})},resize:function(){$(window).trigger("resize.simplemodal")},close:function(b){$(".NB-modal-loading",this.$modal).removeClass("NB-active");$.modal.close(b)},make_feed_chooser:function(){var b=$.make("select",{name:"feed",className:"NB-modal-feed-chooser"});this.feeds=this.feeds||this.model.get_feeds();for(var a in this.feeds){var c=this.feeds[a],d=$.make("option",{value:c.id},c.feed_title);
d.appendTo(b);c.id==this.feed_id&&d.attr("selected",!0)}$("option",b).tsort();return b},initialize_feed:function(b){this.feed_id=b;this.feed=this.model.get_feed(b);$(".NB-modal-subtitle .NB-modal-feed-image",this.$modal).attr("src",$.favicon(this.feed.favicon));$(".NB-modal-subtitle .NB-modal-feed-title",this.$modal).html(this.feed.feed_title);$(".NB-modal-subtitle .NB-modal-feed-subscribers",this.$modal).html(Inflector.commas(this.feed.num_subscribers)+Inflector.pluralize(" subscriber",this.feed.num_subscribers))}};
NEWSBLUR.ReaderClassifierTrainer=function(b){this.flags={publisher:!0,story:!1,modal_loading:!1,modal_loaded:!1};this.cache={};this.trainer_iterator=-1;this.feed_id=null;this.options=$.extend({},{training:!0},b);this.model=NEWSBLUR.AssetModel.reader();this.runner_trainer()};
NEWSBLUR.ReaderClassifierFeed=function(b,a){this.flags={publisher:!0,story:!1,modal_loading:!1,modal_loaded:!1};this.cache={};this.feed_id=b;this.trainer_iterator=-1;this.options=$.extend({},{training:!1,feed_loaded:!0},a);this.model=NEWSBLUR.AssetModel.reader();this.runner_feed()};
NEWSBLUR.ReaderClassifierStory=function(b,a,c){this.flags={publisher:!1,story:!0,modal_loading:!1,modal_loaded:!1};this.cache={};this.story_id=b;this.feed_id=a;this.trainer_iterator=-1;this.options=$.extend({},{feed_loaded:!0},c);this.model=NEWSBLUR.AssetModel.reader();this.runner_story()};
var classifier_prototype={runner_trainer:function(b){if(!b)this.user_classifiers={};this.make_trainer_intro();this.get_feeds_trainer();this.handle_cancel();this.open_modal();this.$modal.parent().bind("click.reader_classifer",$.rescope(this.handle_clicks,this))},runner_feed:function(){this.model.classifiers[this.feed_id]||(this.model.classifiers[this.feed_id]=_.extend({},this.model.defaults.classifiers));this.user_classifiers=this.options.feed_loaded?this.model.classifiers[this.feed_id]:{};this.find_story_and_feed();
this.make_modal_feed();this.make_modal_title();this.handle_cancel();this.open_modal();this.$modal.parent().bind("click.reader_classifer",$.rescope(this.handle_clicks,this));this.options.feed_loaded||_.defer(_.bind(function(){this.load_single_feed_trainer()},this))},runner_story:function(){this.model.classifiers[this.feed_id]||(this.model.classifiers[this.feed_id]=_.extend({},this.model.defaults.classifiers));this.user_classifiers=this.options.feed_loaded?this.model.classifiers[this.feed_id]:{};this.find_story_and_feed();
this.make_modal_story();this.handle_text_highlight();this.make_modal_title();this.handle_cancel();this.open_modal();this.$modal.parent().bind("click.reader_classifer",$.rescope(this.handle_clicks,this));this.options.feed_loaded||_.defer(_.bind(function(){this.load_single_feed_trainer()},this))},load_previous_feed_in_trainer:function(){this.trainer_iterator-=1;var b=this.trainer_data[this.trainer_iterator];!b||this.trainer_iterator<0?(this.make_trainer_intro(),this.reload_modal()):(this.feed_id=b.feed_id,
this.load_feed(b))},load_next_feed_in_trainer:function(){var b=this.trainer_data.length;this.trainer_iterator+=1;var a=this.trainer_data[this.trainer_iterator];!a||this.trainer_iterator>=b?(this.make_trainer_outro(),this.reload_modal(),this.load_feeds_trainer(null,this.trainer_data)):(this.feed_id=a.feed_id,this.load_feed(a))},load_feed:function(b){this.feed_id=b.feed_id;this.feed=this.model.get_feed(this.feed_id);this.feed_tags=b.feed_tags;this.feed_authors=b.feed_authors;this.user_classifiers=b.classifiers;
this.feed.num_subscribers=b.num_subscribers;this.options.feed_loaded=!0;this.model.classifiers[this.feed_id]||(this.model.classifiers[this.feed_id]=_.extend({},this.model.defaults.classifiers));this.feed_id in this.cache?this.$modal=this.cache[this.feed_id]:(this.flags.story?(this.make_modal_story(),this.handle_text_highlight()):this.flags.publisher&&(this.make_modal_feed(),this.make_modal_trainer_count()),this.make_modal_title());this.reload_modal()},reload_modal:function(b){this.flags.modal_loading=
setInterval(_.bind(function(){if(this.flags.modal_loaded)clearInterval(this.flags.modal_loading),$(".NB-modal").empty().append(this.$modal.children()),this.$modal=$(".NB-modal"),$(window).trigger("resize.simplemodal"),this.handle_cancel(),this.$modal.parent().scrollTop(0),b&&b()},this),125)},get_feeds_trainer:function(){this.model.get_feeds_trainer(null,$.rescope(this.load_feeds_trainer,this))},load_feeds_trainer:function(b,a){var c=$(".NB-modal-submit-begin",this.$modal);this.trainer_data=a;!a||
!a.length?(this.make_trainer_outro(),this.reload_modal()):c.text("Begin Training").addClass("NB-modal-submit-green").removeClass("NB-modal-submit-close").removeClass("NB-disabled")},retrain_all_sites:function(){$(".NB-modal-submit-reset",this.$modal).text("Rewinding...").attr("disabled",!0).addClass("NB-disabled");this.model.retrain_all_sites(_.bind(function(b){this.load_feeds_trainer(null,b);this.load_next_feed_in_trainer()},this))},find_story_and_feed:function(){if(this.story_id)this.story=this.model.get_story(this.story_id);
this.feed=this.model.get_feed(this.feed_id);if(this.options.feed_loaded&&this.feed)this.feed_tags=this.model.get_feed_tags(),this.feed_authors=this.model.get_feed_authors(),$(".NB-modal-subtitle .NB-modal-feed-image",this.$modal).attr("src",$.favicon(this.feed.favicon)),$(".NB-modal-subtitle .NB-modal-feed-title",this.$modal).html(this.feed.feed_title),$(".NB-modal-subtitle .NB-modal-feed-subscribers",this.$modal).html(Inflector.commas(this.feed.num_subscribers*4852)+" subscribers")},load_single_feed_trainer:function(){var b=
this;$(".NB-modal-loading",this.$modal).addClass("NB-active");this.model.get_feeds_trainer(this.feed_id,function(a){(b.trainer_data=a)&&a.length&&b.load_feed(a[0])})},make_trainer_intro:function(){this.$modal=$.make("div",{className:"NB-modal-classifiers NB-modal NB-modal-trainer"},[$.make("h2",{className:"NB-modal-title"},"Intelligence Trainer"),$.make("h3",{className:"NB-modal-subtitle"},"Here's what to do:"),$.make("ol",{className:"NB-trainer-points"},[$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+
"/img/reader/sample_classifier_tag.png",style:"float: right;margin-top: 4px;",width:155,height:17}),$.make("b","You will see a bunch of tags and authors.")," Sites will be ordered by popularity. Click on what you like and don't like."]),$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/intelligence_slider_all.png",style:"float: right",width:127,height:92}),$.make("b","The intelligence slider filters stories."),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+
"/img/icons/silk/bullet_green.png"})," are stories you like",$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_yellow.png"})," are stories you have not yet rated",$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_red.png"})," are stories you don't like"]),$.make("li",[$.make("b","Stop any time you like.")," You can always come back to this trainer."]),$.make("li",[$.make("b",
"Don't worry if you don't know what you like right now.")," Just skip the site. You can train directly in the Feed view."])]),!NEWSBLUR.Globals.is_authenticated&&$.make("div",{className:"NB-trainer-not-authenticated"},"Please create an account and add sites you read. Then you can train them."),$.make("div",{className:"NB-modal-submit"},[!NEWSBLUR.Globals.is_authenticated&&$.make("a",{href:"#",className:"NB-modal-submit-close NB-modal-submit-button"},"Close"),NEWSBLUR.Globals.is_authenticated&&$.make("a",
{href:"#",className:"NB-modal-submit-begin NB-modal-submit-button NB-modal-submit-close NB-disabled"},"Loading Training...")])])},make_trainer_outro:function(){this.$modal=$.make("div",{className:"NB-modal-classifiers NB-modal NB-modal-trainer"},[$.make("h2",{className:"NB-modal-title"},"Congratulations! You're done."),$.make("h3",{className:"NB-modal-subtitle"},"Here's what happens next:"),$.make("ol",{className:"NB-trainer-points"},[$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/sample_classifier_tag.png",
style:"float: right",width:135,height:20}),$.make("b","You can change your opinions.")," You can click the ",$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/thumbs_up.png",style:"vertical-align: middle;padding: 0 8px 0 2px",width:14,height:20}),$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/thumbs_down.png",style:"vertical-align: top; padding: 0",width:14,height:20})," buttons next to stories as you read them."]),$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/intelligence_slider_positive.png",
style:"float: right",width:114,height:29}),$.make("b","As a reminder, use the intelligence slider to select a filter:"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_red.png"})," are stories you don't like",$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_yellow.png"})," are stories you have not yet rated",$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+
"/img/icons/silk/bullet_green.png"})," are stories you like"]),$.make("li",[$.make("b","You can also filter out stories you don't want to read.")," As great as finding good stuff is, you can just as easily ignore the stories you do not like."])]),$.make("div",{className:"NB-modal-submit"},[$.make("a",{href:"#",className:"NB-modal-submit-button NB-modal-submit-reset"},$.entity("&laquo;")+" Retrain all sites"),$.make("a",{href:"#",className:"NB-modal-submit-end NB-modal-submit-button"},"Close Training and Start Reading")])])},
make_modal_feed:function(){var b=this.feed;this.$modal=$.make("div",{className:"NB-modal-classifiers NB-modal "+(this.options.training&&"NB-modal-trainer")},[$.make("div",{className:"NB-modal-loading"}),$.make("h2",{className:"NB-modal-title"},""),$.make("h2",{className:"NB-modal-subtitle"},[this.options.training&&$.make("div",{className:"NB-classifier-trainer-counts"}),$.make("img",{className:"NB-modal-feed-image feed_favicon",src:$.favicon(this.feed.favicon)}),$.make("div",{className:"NB-modal-feed-heading"},
[$.make("span",{className:"NB-modal-feed-title"},this.feed.feed_title),$.make("span",{className:"NB-modal-feed-subscribers"},Inflector.commas(this.feed.num_subscribers)+Inflector.pluralize(" subscriber",this.feed.num_subscribers))])]),this.options.feed_loaded&&$.make("form",{method:"post",className:"NB-publisher"},[!_.isEmpty(this.user_classifiers.titles)&&$.make("div",{className:"NB-modal-field NB-fieldset NB-classifiers"},[$.make("h5","Titles and Phrases"),$.make("div",{className:"NB-classifier-titles NB-fieldset-fields NB-classifiers"},
this.make_user_titles())]),this.feed_authors.length&&$.make("div",{className:"NB-modal-field NB-fieldset NB-classifiers"},[$.make("h5","Authors"),$.make("div",{className:"NB-classifier-authors NB-fieldset-fields NB-classifiers"},this.make_authors(this.feed_authors).concat(this.make_user_authors()))]),this.feed_tags.length&&$.make("div",{className:"NB-modal-field NB-fieldset NB-classifiers"},[$.make("h5","Categories &amp; Tags"),$.make("div",{className:"NB-classifier-tags NB-fieldset-fields NB-classifiers"},
this.make_tags(this.feed_tags).concat(this.make_user_tags()))]),$.make("div",{className:"NB-modal-field NB-fieldset NB-classifiers"},[$.make("h5","Everything by This Publisher"),$.make("div",{className:"NB-fieldset-fields NB-classifiers"},this.make_publisher(b))]),this.options.training&&$.make("div",{className:"NB-modal-submit"},[$.make("input",{name:"feed_id",value:this.feed_id,type:"hidden"}),$.make("a",{href:"#",className:"NB-modal-submit-button NB-modal-submit-back"},$.entity("&laquo;")+" Back"),
$.make("a",{href:"#",className:"NB-modal-submit-button NB-modal-submit-green NB-modal-submit-next NB-modal-submit-save"},"Save & Next "+$.entity("&raquo;")),$.make("a",{href:"#",className:"NB-modal-submit-button NB-modal-submit-close"},"Close")]),!this.options.training&&$.make("div",{className:"NB-modal-submit"},[$.make("input",{name:"story_id",value:this.story_id,type:"hidden"}),$.make("input",{name:"feed_id",value:this.feed_id,type:"hidden"}),$.make("input",{type:"submit",disabled:"true",className:"NB-modal-submit-save NB-modal-submit-green NB-disabled",
value:"Check what you like above..."})," or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])])])},make_modal_story:function(){var b=this.story,a=this.feed;b.story_title=$("<div/>").html(b.story_title).text();this.$modal=$.make("div",{className:"NB-modal-classifiers NB-modal"},[$.make("h2",{className:"NB-modal-title"}),this.options.feed_loaded&&$.make("form",{method:"post"},[b.story_title&&$.make("div",{className:"NB-modal-field NB-fieldset"},[$.make("h5","Story Title"),$.make("div",
{className:"NB-fieldset-fields NB-classifiers"},[$.make("input",{type:"text",value:b.story_title,className:"NB-classifier-title-highlight"}),this.make_classifier('<span class="NB-classifier-title-placeholder">Highlight phrases to look for in future stories</span>',"","title"),$.make("span",this.make_user_titles(b.story_title))])]),b.story_authors&&$.make("div",{className:"NB-modal-field NB-fieldset"},[$.make("h5","Story Author"),$.make("div",{className:"NB-fieldset-fields NB-classifiers"},this.make_authors([b.story_authors]))]),
b.story_tags.length&&$.make("div",{className:"NB-modal-field NB-fieldset"},[$.make("h5","Story Categories &amp; Tags"),$.make("div",{className:"NB-classifier-tags NB-fieldset-fields NB-classifiers"},this.make_tags(b.story_tags))]),$.make("div",{className:"NB-modal-field NB-fieldset"},[$.make("h5","Everything by This Publisher"),$.make("div",{className:"NB-fieldset-fields NB-classifiers"},this.make_publisher(a))]),$.make("div",{className:"NB-modal-submit"},[$.make("input",{name:"story_id",value:this.story_id,
type:"hidden"}),$.make("input",{name:"feed_id",value:this.feed_id,type:"hidden"}),$.make("input",{type:"submit",disabled:"true",className:"NB-modal-submit-save NB-modal-submit-green NB-disabled",value:"Check what you like above..."})," or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])])])},make_modal_title:function(){var b=$(".NB-modal-title",this.$modal),a=$.make("div",["What do you ",$.make("b",{className:"NB-classifier-title-like"},"like")," and ",$.make("b",{className:"NB-classifier-title-dislike"},
"dislike")," about this ",this.flags.publisher&&"site",this.flags.story&&"story","?"]);b.html(a)},make_modal_trainer_count:function(){var b=this.trainer_iterator+1,a=this.trainer_data.length;$(".NB-classifier-trainer-counts",this.$modal).html(b+"/"+a)},make_user_titles:function(b){var a=[],c=_.keys(this.user_classifiers.titles);_.each(c,_.bind(function(c){if(!b||b.indexOf(c)!=-1)c=this.make_classifier(c,c,"title"),a.push(c)},this));return a},make_authors:function(b){var a=[],c;for(c in b){var d=b[c];
if(typeof d=="string")var e=d,f;else e=d[0],f=d[1];e&&(d=this.make_classifier(e,e,"author",f),a.push(d))}return a},make_user_authors:function(){var b=_.keys(this.user_classifiers.authors),a=_.map(this.feed_authors,function(a){return a[0]});return this.make_authors(_.reduce(b,function(b,d){return!_.contains(a,d)?b.concat(d):b},[]))},make_tags:function(b){var a=[],c;for(c in b){var d=b[c];if(typeof d=="string")var e=d,f;else e=d[0],f=d[1];e&&(d=this.make_classifier(e,e,"tag",f),a.push(d))}return a},
make_user_tags:function(){var b=_.keys(this.user_classifiers.tags),a=_.map(this.feed_tags,function(a){return a[0]});return this.make_tags(_.reduce(b,function(b,d){return!_.contains(a,d)?b.concat(d):b},[]))},make_publisher:function(b){return this.make_classifier(b.feed_title,this.feed_id,"feed")},make_classifier:function(b,a,c,d){var e=0;a in this.user_classifiers[c+"s"]&&(e=this.user_classifiers[c+"s"][a]);var f=Inflector.capitalize(c=="feed"?"publisher":c),g=$.make("span",{className:"NB-classifier-container"},
[$.make("span",{className:"NB-classifier NB-classifier-"+c},[$.make("input",{type:"checkbox",className:"NB-classifier-input-like",name:"like_"+c,value:a}),$.make("input",{type:"checkbox",className:"NB-classifier-input-dislike",name:"dislike_"+c,value:a}),$.make("div",{className:"NB-classifier-icon-like"}),$.make("div",{className:"NB-classifier-icon-dislike"},[$.make("div",{className:"NB-classifier-icon-dislike-inner"})]),$.make("label",[c=="feed"&&$.make("img",{className:"feed_favicon",src:$.favicon(this.feed.favicon)}),
$.make("b",f+": "),$.make("span",b)])]),d&&$.make("span",{className:"NB-classifier-count"},["&times;&nbsp;",d])]);e>0?($(".NB-classifier",g).addClass("NB-classifier-like"),$(".NB-classifier-input-like",g).attr("checked",!0)):e<0&&($(".NB-classifier",g).addClass("NB-classifier-dislike"),$(".NB-classifier-input-dislike",g).attr("checked",!0));$(".NB-classifier",g).bind("mouseenter",function(a){$(a.currentTarget).addClass("NB-classifier-hover-like")}).bind("mouseleave",function(a){$(a.currentTarget).removeClass("NB-classifier-hover-like")});
$(".NB-classifier-icon-dislike",g).bind("mouseenter",function(){$(".NB-classifier",g).addClass("NB-classifier-hover-dislike")}).bind("mouseleave",function(){$(".NB-classifier",g).removeClass("NB-classifier-hover-dislike")});return g},change_classifier:function(b,a){var c=$(".NB-classifier-input-like",b),d=$(".NB-classifier-input-dislike",b),e=$(".NB-modal-submit-save",this.$modal),f=$(".NB-modal-submit-close",this.$modal);$(".NB-modal-submit-back",this.$modal);a=="like"?b.is(".NB-classifier-like")?
(b.removeClass("NB-classifier-like"),d.attr("checked",!1),c.attr("checked",!1)):(b.removeClass("NB-classifier-dislike"),b.addClass("NB-classifier-like"),d.attr("checked",!1),c.attr("checked",!0)):a=="dislike"&&(b.is(".NB-classifier-dislike")?(b.removeClass("NB-classifier-dislike"),c.attr("checked",!1),d.attr("checked",!1)):(b.removeClass("NB-classifier-like"),b.addClass("NB-classifier-dislike"),c.attr("checked",!1),d.attr("checked",!0)));this.options.training?f.val("Save & Close"):e.removeClass("NB-disabled").removeAttr("disabled").attr("value",
"Save")},open_modal:function(){var b=this;this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,autoResize:!0,position:[this.options.training?40:0,0],onOpen:function(a){a.overlay.fadeIn(200,function(){a.container.fadeIn(200);a.data.fadeIn(200);setTimeout(function(){b.flags.modal_loaded=!0;$(window).trigger("resize.simplemodal")})})},onShow:function(){$("#simplemodal-container").corner("6px");$(".NB-classifier",b.$modal).corner("14px")},onClose:function(a){a.data.hide().empty().remove();a.container.hide().empty().remove();
a.overlay.fadeOut(200,function(){a.overlay.empty().remove();$.modal.close()});$(".NB-modal-holder").empty().remove()}})},update_homepage_counts:function(){$(".NB-module-account-trainer-count").text(_.size(this.model.get_feeds())-(this.trainer_data.length-this.trainer_iterator)-1)},end:function(){_.defer(function(){$(".NB-module-account-trainer").animate({opacity:0},{duration:1E3,complete:function(){$(".NB-module-account-trainer").slideUp(350)}})},1E3);$.modal.close()},handle_text_highlight:function(){var b=
this,a=$(".NB-classifier-title-highlight",this.$modal),c=$(".NB-classifier-title-placeholder",this.$modal),d=c.parents(".NB-classifier").eq(0),e=$(".NB-classifier-input-like, .NB-classifier-input-dislike",d),f=function(){var a=$.trim($(this).getSelection().text);a.length&&c.text()!=a&&(c.text(a),e.val(a),d.is(".NB-classifier-like,.NB-classifier-dislike")||b.change_classifier(d,"like"))};a.keydown(f).keyup(f).mousedown(f).mouseup(f).mousemove(f);e.val(a.val());c.parents(".NB-classifier").bind("click",
function(){a.val()==e.val()&&c.text(a.val())})},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})},handle_clicks:function(b,a){var c=this;this.options.training?($.targetIs(a,{tagSelector:".NB-modal-submit-begin"},function(){a.preventDefault();c.load_next_feed_in_trainer()}),$.targetIs(a,{tagSelector:".NB-modal-submit-save.NB-modal-submit-next"},function(){a.preventDefault();c.save(!0);c.load_next_feed_in_trainer();c.update_homepage_counts()}),
$.targetIs(a,{tagSelector:".NB-modal-submit-back"},function(){a.preventDefault();c.load_previous_feed_in_trainer()}),$.targetIs(a,{tagSelector:".NB-modal-submit-reset"},function(){a.preventDefault();c.retrain_all_sites()}),$.targetIs(a,{tagSelector:".NB-modal-submit-close"},function(){a.preventDefault();c.save()}),$.targetIs(a,{tagSelector:".NB-modal-submit-end"},function(){a.preventDefault();NEWSBLUR.reader.force_feed_refresh();c.end()})):$.targetIs(a,{tagSelector:".NB-modal-submit-save:not(.NB-modal-submit-next)"},
function(){a.preventDefault();c.save();return!1});var d=!1;$.targetIs(a,{tagSelector:".NB-classifier-icon-dislike"},function(b){a.preventDefault();d=!0;c.change_classifier(b.closest(".NB-classifier"),"dislike")});d||$.targetIs(a,{tagSelector:".NB-classifier"},function(b){a.preventDefault();c.change_classifier(b,"like")})},serialize_classifier:function(){var b={};$(".NB-classifier",this.$modal).each(function(){var a=$(".NB-classifier-input-like",this).val(),c=$(".NB-classifier-input-like, .NB-classifier-input-dislike",
this).is(":checked")?$("input:checked",this).attr("name"):"remove_"+$(".NB-classifier-input-like",this).attr("name");b[c]||(b[c]=[]);b[c].push(a)});b.feed_id=this.feed_id;if(this.story_id)b.story_id=this.story_id;return b},save:function(b){var a=$(".NB-modal-submit-save",this.$modal),c=this.serialize_classifier(),d=this.feed_id;this.options.training?(this.cache[this.feed_id]=this.$modal.clone(),a.text("Saving...")):a.val("Saving...");a.addClass("NB-disabled").attr("disabled",!0);this.update_opinions();
this.model.save_classifier(c,function(){b||(NEWSBLUR.reader.recalculate_story_scores(d),NEWSBLUR.reader.force_feeds_refresh(null,!0),$.modal.close())})},update_opinions:function(){var b=this,a=this.feed_id;$("input[type=checkbox]",this.$modal).each(function(){var c=$(this),d=c.attr("name").replace(/^(dis)?like_/,""),e=/^dislike/.test(c.attr("name"))?-1:1,f=c.val();c.attr("checked")?d=="tag"?b.model.classifiers[a].tags[f]=e:d=="title"?b.model.classifiers[a].titles[f]=e:d=="author"?b.model.classifiers[a].authors[f]=
e:d=="feed"&&(b.model.classifiers[a].feeds[a]=e):d=="tag"&&b.model.classifiers[a].tags[f]==e?delete b.model.classifiers[a].tags[f]:d=="title"&&b.model.classifiers[a].titles[f]==e?delete b.model.classifiers[a].titles[f]:d=="author"&&b.model.classifiers[a].authors[f]==e?delete b.model.classifiers[a].authors[f]:d=="feed"&&b.model.classifiers[a].feeds[a]==e&&delete b.model.classifiers[a].feeds[a]})}};NEWSBLUR.ReaderClassifierStory.prototype=classifier_prototype;
NEWSBLUR.ReaderClassifierFeed.prototype=classifier_prototype;NEWSBLUR.ReaderClassifierTrainer.prototype=classifier_prototype;NEWSBLUR.ReaderAddFeed=function(b){this.options=$.extend({},{},b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};
NEWSBLUR.ReaderAddFeed.prototype={runner:function(){this.make_modal();this.handle_cancel();this.open_modal();this.handle_keystrokes();this.setup_autocomplete();this.focus_add_feed();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){var b=this;this.$modal=$.make("div",{className:"NB-add NB-modal"},[$.make("h2",{className:"NB-modal-title"},"Add sites and folders"),$.make("div",{className:"NB-add-form"},[$.make("div",{className:"NB-fieldset NB-add-add-url NB-modal-submit"},
[$.make("h5",[$.make("div",{className:"NB-add-folders"},NEWSBLUR.utils.make_folders(this.model)),"Add a new site"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("div",[$.make("div",{className:"NB-loading"}),$.make("label",{"for":"NB-add-url"},"Website or RSS: "),$.make("input",{type:"text",id:"NB-add-url",className:"NB-input NB-add-url",name:"url",value:b.options.url}),$.make("input",{type:"submit",value:"Add site",className:"NB-modal-submit-green NB-add-url-submit"}),$.make("div",{className:"NB-error"})])])]),
$.make("div",{className:"NB-fieldset NB-add-add-folder NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-add-folders"},NEWSBLUR.utils.make_folders(this.model)),"Add a new folder"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("div",[$.make("div",{className:"NB-loading"}),$.make("label",{"for":"NB-add-folder"},[$.make("div",{className:"NB-folder-icon"})]),$.make("input",{type:"text",id:"NB-add-folder",className:"NB-input NB-add-folder",name:"url"}),$.make("input",{type:"submit",
value:"Add folder",className:"NB-add-folder-submit NB-modal-submit-green"}),$.make("div",{className:"NB-error"})])])]),$.make("div",{className:"NB-fieldset NB-anonymous-ok NB-modal-submit"},[$.make("h5",["Import feeds"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("a",{href:NEWSBLUR.URLs["google-reader-authorize"],className:"NB-google-reader-oauth NB-modal-submit-green NB-modal-submit-button"},["Import from Google Reader",$.make("img",{className:"NB-add-google-reader-arrow",src:NEWSBLUR.Globals.MEDIA_URL+
"img/icons/silk/arrow_right.png"})]),$.make("div",{className:"NB-add-danger"},NEWSBLUR.Globals.is_authenticated&&_.size(this.model.feeds)&&[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"img/icons/silk/server_go.png"}),"This will erase all existing feeds and folders."])])]),$.make("div",{className:"NB-fieldset NB-add-opml NB-modal-submit"},[$.make("h5",["Upload OPML",$.make("a",{className:"NB-right NB-splash-link",href:NEWSBLUR.URLs["opml-export"]},"Export OPML")]),$.make("div",{className:"NB-fieldset-fields"},
[$.make("form",{method:"post",enctype:"multipart/form-data",className:"NB-add-form"},[$.make("div",{className:"NB-loading"}),$.make("input",{type:"file",name:"file",id:"opml_file_input"}),$.make("input",{type:"submit",className:"NB-add-opml-button NB-modal-submit-green",value:"Upload OPML File"}).click(function(a){a.preventDefault();b.handle_opml_upload();return!1})]),$.make("div",{className:"NB-add-danger"},NEWSBLUR.Globals.is_authenticated&&_.size(this.model.feeds)&&[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+
"img/icons/silk/server_go.png"}),"This will erase all existing feeds and folders."]),$.make("div",{className:"NB-error"})])])])]);NEWSBLUR.Globals.is_anonymous&&this.$modal.addClass("NB-signed-out")},open_modal:function(){var b=this;this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,autoResize:!0,onOpen:function(a){a.overlay.fadeIn(200,function(){a.container.fadeIn(200);a.data.fadeIn(200,function(){b.focus_add_feed()})})},onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(a){a.data.hide().empty().remove();
a.container.hide().empty().remove();a.overlay.fadeOut(200,function(){a.overlay.empty().remove();$.modal.close()});$(".NB-modal-holder").empty().remove()}})},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})},focus_add_feed:function(){var b=$(".NB-add-url",this.$modal);NEWSBLUR.Globals.is_anonymous||_.delay(function(){b.focus()},200)},setup_autocomplete:function(){var b=this,a=$(".NB-add-url",this.$modal);a.autocomplete({minLength:1,source:"/rss_feeds/feed_autocomplete",
focus:function(b,d){a.val(d.item.value);return!1},select:function(c,d){a.val(d.item.value);b.save_add_url();return!1}}).data("autocomplete")._renderItem=function(a,b){return $.make("li",[$.make("a",[$.make("div",{className:"NB-add-autocomplete-subscribers"},b.num_subscribers+Inflector.pluralize(" subscriber",b.num_subscribers)),$.make("div",{className:"NB-add-autocomplete-title"},b.label),$.make("div",{className:"NB-add-autocomplete-address"},b.value)])]).data("item.autocomplete",b).appendTo(a)}},
handle_keystrokes:function(){var b=this;$(".NB-add-url",this.$modal).bind("keyup","return",function(a){a.preventDefault();b.save_add_url()});$(".NB-add-folder",this.$modal).bind("keyup","return",function(a){a.preventDefault();b.save_add_folder()})},handle_opml_upload:function(){var b=$(".NB-fieldset.NB-add-opml .NB-loading");b.addClass("NB-active");if(NEWSBLUR.Globals.is_anonymous){var a=$(".NB-error",".NB-fieldset.NB-add-opml");a.text("Please create an account. Not much to do without an account.");
a.slideDown(300);b.removeClass("NB-active");return!1}$.ajaxFileUpload({url:NEWSBLUR.URLs["opml-upload"],secureuri:!1,fileElementId:"opml_file_input",dataType:"text",success:function(){b.removeClass("NB-active");NEWSBLUR.reader.load_feeds();NEWSBLUR.reader.load_recommended_feed();$.modal.close()},error:function(a,d,e){b.removeClass("NB-active");NEWSBLUR.log(["Error",a,d,e])}});return!1},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-add-url-submit"},function(){a.preventDefault();
c.save_add_url()});$.targetIs(a,{tagSelector:".NB-add-folder-submit"},function(){a.preventDefault();c.save_add_folder()})},save_add_url:function(){var b=$(".NB-add-add-url input[type=submit]",this.$modal),a=$(".NB-error",".NB-fieldset.NB-add-add-url"),c=$(".NB-loading",".NB-fieldset.NB-add-add-url"),d=$(".NB-add-url").val(),e=$(".NB-add-url").parents(".NB-fieldset").find(".NB-folders").val();a.slideUp(300);c.addClass("NB-active");b.addClass("NB-disabled").val("Adding...");this.model.save_add_url(d,
e,$.rescope(this.post_save_add_url,this))},post_save_add_url:function(b,a){NEWSBLUR.log(["Data",a]);var c=$(".NB-add-add-url input[type=submit]",this.$modal);$(".NB-loading",".NB-fieldset.NB-add-add-url").removeClass("NB-active");c.removeClass("NB-disabled");if(a.code>0)NEWSBLUR.reader.load_feeds(),NEWSBLUR.reader.load_recommended_feed(),NEWSBLUR.reader.handle_mouse_indicator_hover(),$.modal.close(),c.val("Added!");else{var d=$(".NB-error",".NB-fieldset.NB-add-add-url");d.text(a.message);d.slideDown(300);
c.val("Add Site")}},save_add_folder:function(){var b=$(".NB-add-add-folder input[type=submit]",this.$modal),a=$(".NB-error",".NB-fieldset.NB-add-add-folder"),c=$(".NB-loading",".NB-fieldset.NB-add-add-folder"),d=$(".NB-add-folder").val(),e=$(".NB-add-folder").parents(".NB-fieldset").find(".NB-folders").val();a.slideUp(300);c.addClass("NB-active");b.addClass("NB-disabled").val("Adding...");this.model.save_add_folder(d,e,$.rescope(this.post_save_add_folder,this))},post_save_add_folder:function(b,a){var c=
$(".NB-add-add-folder input[type=submit]",this.$modal);$(".NB-loading",".NB-fieldset.NB-add-add-folder").removeClass("NB-active");c.removeClass("NB-disabled");if(a.code>0)NEWSBLUR.reader.load_feeds(),_.defer(function(){NEWSBLUR.reader.open_add_feed_modal()}),c.val("Added!");else{var d=$(".NB-error",".NB-fieldset.NB-add-add-folder");d.text(a.message);d.slideDown(300);c.val("Add Folder")}}};
NEWSBLUR.ReaderMarkRead=function(b){this.options=$.extend({},{days:1},b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};
NEWSBLUR.ReaderMarkRead.prototype={runner:function(){this.make_modal();this.load_slider();this.generate_explanation(this.options.days);this.handle_cancel();this.open_modal();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){var b=this;this.$modal=$.make("div",{className:"NB-modal-markread NB-modal"},[$.make("h2",{className:"NB-modal-title"},"Mark old stories as read"),$.make("form",{className:"NB-markread-form"},[$.make("div",{className:"NB-markread-slider"}),$.make("div",
{className:"NB-markread-explanation"}),$.make("div",{className:"NB-modal-submit"},[$.make("input",{type:"submit",className:"NB-modal-submit-save NB-modal-submit-green",value:"Do it"})," or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])]).bind("submit",function(a){a.preventDefault();b.save_mark_read();return!1})])},open_modal:function(){this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200)})},
onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b){b.data.hide().empty().remove();b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();$.modal.close()});$(".NB-modal-holder").empty().remove()}})},load_slider:function(){var b=this;$(".NB-markread-slider",this.$modal).slider({range:"min",min:0,max:7,step:1,value:this.options.days,slide:function(a,c){var d=c.value;b.update_dayofweek(d);b.generate_explanation(d)},stop:function(){}})},
update_dayofweek:function(){},generate_explanation:function(b){var a=$(".NB-markread-explanation",this.$modal),c;b==0?c="Mark <b>every story</b> as read.":b>=1&&(c="Mark all stories older than <b>"+b+" day"+(b==1?"":"s")+" old</b> as read.");a.html(c)},save_mark_read:function(){var b=$(".NB-modal input[type=submit]"),a=$(".NB-markread-slider",this.$modal).slider("option","value");b.attr("value","Marking as read...").addClass("NB-disabled").attr("disabled",!0);NEWSBLUR.Globals.is_authenticated?this.model.save_mark_read(a,
function(){NEWSBLUR.reader.start_count_unreads_after_import();$.modal.close();NEWSBLUR.reader.force_feeds_refresh(function(){NEWSBLUR.reader.finish_count_unreads_after_import()},!0)}):$.modal.close()},handle_click:function(b,a){$.targetIs(a,{tagSelector:".NB-add-url-submit"},function(){a.preventDefault()})},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})}};
NEWSBLUR.ReaderGoodies=function(b){this.options=$.extend({},{},b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};
NEWSBLUR.ReaderGoodies.prototype={runner:function(){this.make_modal();this.open_modal();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-goodies NB-modal"},[$.make("h2",{className:"NB-modal-title"},"Goodies &amp; Extras"),$.make("div",{className:"NB-goodies-group"},[NEWSBLUR.generate_bookmarklet(),$.make("div",{className:"NB-goodies-title"},"Add Site Bookmarklet")]),$.make("div",{className:"NB-goodies-group NB-modal-submit"},
[$.make("a",{className:"NB-goodies-firefox-link NB-modal-submit-button NB-modal-submit-green",href:"#"},"Add to Firefox"),$.make("div",{className:"NB-goodies-firefox"}),$.make("div",{className:"NB-goodies-title"},"Firefox: Register Newsblur as an RSS reader")]),$.make("div",{className:"NB-goodies-group NB-modal-submit"},[$.make("a",{className:"NB-goodies-chrome-link NB-modal-submit-button NB-modal-submit-green",href:"#"},"Add to Chrome"),$.make("div",{className:"NB-goodies-chrome"}),$.make("div",
{className:"NB-goodies-title"},"Google Chome: NewsBlur Chrome Web App")]),$.make("div",{className:"NB-goodies-group NB-modal-submit"},[$.make("a",{className:"NB-goodies-safari-link NB-modal-submit-button NB-modal-submit-green",href:"#"},"Add to Safari"),$.make("div",{className:"NB-goodies-safari"}),$.make("div",{className:"NB-goodies-title"},"Safari: Register Newsblur as an RSS reader"),$.make("div",{className:"NB-goodies-subtitle"},["To use this extension, extract and move the NewsBlur Safari Helper.app ",
"to your Applications folder. Then in ",$.make("b","Safari > Settings > RSS")," choose the new NewsBlur Safari Helper.app. Then clicking on the RSS button in ","Safari will open the feed in NewsBlur. Simple!"])]),$.make("div",{className:"NB-goodies-group NB-modal-submit"},[$.make("input",{className:"NB-goodies-custom-input",value:"http://www.newsblur.com/?url=BLOG_URL_GOES_HERE"}),$.make("div",{className:"NB-goodies-custom"}),$.make("div",{className:"NB-goodies-title"},"Custom Add Site URL")]),$.make("div",
{className:"NB-goodies-group NB-modal-submit"},[$.make("a",{className:"NB-goodies-mobile-link NB-modal-submit-button NB-modal-submit-green",href:"mailto:samuel@ofbrooklyn.com?subject=iPhone Beta! Yeah!&body=My username is: "+NEWSBLUR.Globals.username+", and my iTunes/iPhone UUID is: [http://www.ispeeddial.com/how-to-find-your-iphone-uuid/]"},"Request Beta"),$.make("div",{className:"NB-goodies-iphone"}),$.make("div",{className:"NB-goodies-title"},"Official NewsBlur iPhone App")]),$.make("div",{className:"NB-goodies-group NB-modal-submit"},
[$.make("a",{className:"NB-goodies-mobile-link NB-modal-submit-button NB-modal-submit-green",href:"https://market.android.com/details?id=bitwrit.Blar"},"View in Android Market"),$.make("div",{className:"NB-goodies-android"}),$.make("div",{className:"NB-goodies-title"},"Blar: User-Created Android App")])])},open_modal:function(){this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200);setTimeout(function(){$(window).resize()})})},
onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b){b.data.hide().empty().remove();b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();$.modal.close()});$(".NB-modal-holder").empty().remove()}})},handle_click:function(b,a){$.targetIs(a,{tagSelector:".NB-goodies-bookmarklet-button"},function(){a.preventDefault();alert("Drag this button to your bookmark toolbar.")});$.targetIs(a,{tagSelector:".NB-goodies-firefox-link"},function(){a.preventDefault();
navigator.registerContentHandler("application/vnd.mozilla.maybe.feed",document.location+"?url=%s","NewsBlur")});$.targetIs(a,{tagSelector:".NB-goodies-safari-link"},function(){a.preventDefault();window.location.href=NEWSBLUR.Globals.MEDIA_URL+"extensions/NewsBlur Safari Helper.app.zip"});$.targetIs(a,{tagSelector:".NB-goodies-chrome-link"},function(){a.preventDefault();window.location.href="https://chrome.google.com/webstore/detail/gchdledhagjbhhodjjhiclbnaioljomj"});$.targetIs(a,{tagSelector:".NB-goodies-custom-input"},
function(b){a.preventDefault();b.select()})}};NEWSBLUR.ReaderPreferences=function(b){this.options=$.extend({},{},b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};NEWSBLUR.ReaderPreferences.prototype=new NEWSBLUR.Modal;NEWSBLUR.ReaderPreferences.prototype.constructor=NEWSBLUR.ReaderPreferences;
_.extend(NEWSBLUR.ReaderPreferences.prototype,{runner:function(){this.options.onOpen=_.bind(function(){this.resize_modal()},this);this.make_modal();this.select_preferences();this.handle_change();this.open_modal();this.original_preferences=this.serialize_preferences();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){var b=this;this.$modal=$.make("div",{className:"NB-modal-preferences NB-modal"},[$.make("a",{href:"#preferences",className:"NB-link-account-preferences NB-splash-link"},
"Switch to Account"),$.make("h2",{className:"NB-modal-title"},"Preferences"),$.make("form",{className:"NB-preferences-form"},[$.make("div",{className:"NB-preferences-scroll"},[$.make("div",{className:"NB-preference"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("select",{id:"NB-preference-timezone-1",name:"timezone"},[$.make("option",{value:"Pacific/Midway"},"(GMT-11:00) Midway Island, Samoa"),$.make("option",{value:"America/Adak"},"(GMT-10:00) Hawaii-Aleutian"),$.make("option",
{value:"Etc/GMT+10"},"(GMT-10:00) Hawaii"),$.make("option",{value:"Pacific/Marquesas"},"(GMT-09:30) Marquesas Islands"),$.make("option",{value:"Pacific/Gambier"},"(GMT-09:00) Gambier Islands"),$.make("option",{value:"America/Anchorage"},"(GMT-09:00) Alaska"),$.make("option",{value:"America/Ensenada"},"(GMT-08:00) Tijuana, Baja California"),$.make("option",{value:"Etc/GMT+8"},"(GMT-08:00) Pitcairn Islands"),$.make("option",{value:"America/Los_Angeles"},"(GMT-08:00) Pacific Time (US & Canada)"),$.make("option",
{value:"America/Denver"},"(GMT-07:00) Mountain Time (US & Canada)"),$.make("option",{value:"America/Chihuahua"},"(GMT-07:00) Chihuahua, La Paz, Mazatlan"),$.make("option",{value:"America/Dawson_Creek"},"(GMT-07:00) Arizona"),$.make("option",{value:"America/Belize"},"(GMT-06:00) Saskatchewan, Central America"),$.make("option",{value:"America/Cancun"},"(GMT-06:00) Guadalajara, Mexico City"),$.make("option",{value:"Chile/EasterIsland"},"(GMT-06:00) Easter Island"),$.make("option",{value:"America/Chicago"},
"(GMT-06:00) Central Time (US & Canada)"),$.make("option",{value:"America/New_York"},"(GMT-05:00) Eastern Time (US & Canada)"),$.make("option",{value:"America/Havana"},"(GMT-05:00) Cuba"),$.make("option",{value:"America/Bogota"},"(GMT-05:00) Bogota, Lima, Quito, Rio Branco"),$.make("option",{value:"America/Caracas"},"(GMT-04:30) Caracas"),$.make("option",{value:"America/Santiago"},"(GMT-04:00) Santiago"),$.make("option",{value:"America/La_Paz"},"(GMT-04:00) La Paz"),$.make("option",{value:"Atlantic/Stanley"},
"(GMT-04:00) Faukland Islands"),$.make("option",{value:"America/Campo_Grande"},"(GMT-04:00) Brazil"),$.make("option",{value:"America/Goose_Bay"},"(GMT-04:00) Atlantic Time (Goose Bay)"),$.make("option",{value:"America/Glace_Bay"},"(GMT-04:00) Atlantic Time (Canada)"),$.make("option",{value:"America/St_Johns"},"(GMT-03:30) Newfoundland"),$.make("option",{value:"America/Araguaina"},"(GMT-03:00) UTC-3"),$.make("option",{value:"America/Montevideo"},"(GMT-03:00) Montevideo"),$.make("option",{value:"America/Miquelon"},
"(GMT-03:00) Miquelon, St. Pierre"),$.make("option",{value:"America/Godthab"},"(GMT-03:00) Greenland"),$.make("option",{value:"America/Argentina/Buenos_Aires"},"(GMT-03:00) Buenos Aires"),$.make("option",{value:"America/Sao_Paulo"},"(GMT-03:00) Brasilia"),$.make("option",{value:"America/Noronha"},"(GMT-02:00) Mid-Atlantic"),$.make("option",{value:"Atlantic/Cape_Verde"},"(GMT-01:00) Cape Verde Is."),$.make("option",{value:"Atlantic/Azores"},"(GMT-01:00) Azores"),$.make("option",{value:"Europe/Belfast"},
"(GMT) Greenwich Mean Time : Belfast"),$.make("option",{value:"Europe/Dublin"},"(GMT) Greenwich Mean Time : Dublin"),$.make("option",{value:"Europe/Lisbon"},"(GMT) Greenwich Mean Time : Lisbon"),$.make("option",{value:"Europe/London"},"(GMT) Greenwich Mean Time : London"),$.make("option",{value:"Africa/Abidjan"},"(GMT) Monrovia, Reykjavik"),$.make("option",{value:"Europe/Amsterdam"},"(GMT+01:00) Amsterdam, Berlin, Stockholm"),$.make("option",{value:"Europe/Belgrade"},"(GMT+01:00) Belgrade, Budapest, Prague"),
$.make("option",{value:"Europe/Brussels"},"(GMT+01:00) Brussels, Copenhagen, Paris"),$.make("option",{value:"Africa/Algiers"},"(GMT+01:00) West Central Africa"),$.make("option",{value:"Africa/Windhoek"},"(GMT+01:00) Windhoek"),$.make("option",{value:"Asia/Beirut"},"(GMT+02:00) Beirut"),$.make("option",{value:"Africa/Cairo"},"(GMT+02:00) Cairo"),$.make("option",{value:"Asia/Gaza"},"(GMT+02:00) Gaza"),$.make("option",{value:"Africa/Blantyre"},"(GMT+02:00) Harare, Pretoria"),$.make("option",{value:"Asia/Jerusalem"},
"(GMT+02:00) Jerusalem"),$.make("option",{value:"Europe/Minsk"},"(GMT+02:00) Minsk"),$.make("option",{value:"Asia/Damascus"},"(GMT+02:00) Syria"),$.make("option",{value:"Europe/Moscow"},"(GMT+03:00) Moscow, St. Petersburg"),$.make("option",{value:"Africa/Addis_Ababa"},"(GMT+03:00) Nairobi"),$.make("option",{value:"Asia/Tehran"},"(GMT+03:30) Tehran"),$.make("option",{value:"Asia/Dubai"},"(GMT+04:00) Abu Dhabi, Muscat"),$.make("option",{value:"Asia/Yerevan"},"(GMT+04:00) Yerevan"),$.make("option",{value:"Asia/Kabul"},
"(GMT+04:30) Kabul"),$.make("option",{value:"Asia/Yekaterinburg"},"(GMT+05:00) Ekaterinburg"),$.make("option",{value:"Asia/Tashkent"},"(GMT+05:00) Tashkent"),$.make("option",{value:"Asia/Kolkata"},"(GMT+05:30) Chennai, Mumbai, New Delhi"),$.make("option",{value:"Asia/Katmandu"},"(GMT+05:45) Kathmandu"),$.make("option",{value:"Asia/Dhaka"},"(GMT+06:00) Astana, Dhaka"),$.make("option",{value:"Asia/Novosibirsk"},"(GMT+06:00) Novosibirsk"),$.make("option",{value:"Asia/Rangoon"},"(GMT+06:30) Yangon (Rangoon)"),
$.make("option",{value:"Asia/Bangkok"},"(GMT+07:00) Bangkok, Hanoi, Jakarta"),$.make("option",{value:"Asia/Krasnoyarsk"},"(GMT+07:00) Krasnoyarsk"),$.make("option",{value:"Asia/Hong_Kong"},"(GMT+08:00) Beijing, Chongqing, Hong Kong"),$.make("option",{value:"Asia/Irkutsk"},"(GMT+08:00) Irkutsk, Ulaan Bataar"),$.make("option",{value:"Australia/Perth"},"(GMT+08:00) Perth"),$.make("option",{value:"Australia/Eucla"},"(GMT+08:45) Eucla"),$.make("option",{value:"Asia/Tokyo"},"(GMT+09:00) Osaka, Sapporo, Tokyo"),
$.make("option",{value:"Asia/Seoul"},"(GMT+09:00) Seoul"),$.make("option",{value:"Asia/Yakutsk"},"(GMT+09:00) Yakutsk"),$.make("option",{value:"Australia/Adelaide"},"(GMT+09:30) Adelaide"),$.make("option",{value:"Australia/Darwin"},"(GMT+09:30) Darwin"),$.make("option",{value:"Australia/Brisbane"},"(GMT+10:00) Brisbane"),$.make("option",{value:"Australia/Sydney"},"(GMT+10:00) Sydney, Hobart"),$.make("option",{value:"Asia/Vladivostok"},"(GMT+10:00) Vladivostok"),$.make("option",{value:"Australia/Lord_Howe"},
"(GMT+10:30) Lord Howe Island"),$.make("option",{value:"Etc/GMT-11"},"(GMT+11:00) Solomon Is., New Caledonia"),$.make("option",{value:"Asia/Magadan"},"(GMT+11:00) Magadan"),$.make("option",{value:"Pacific/Norfolk"},"(GMT+11:30) Norfolk Island"),$.make("option",{value:"Asia/Anadyr"},"(GMT+12:00) Anadyr, Kamchatka"),$.make("option",{value:"Pacific/Auckland"},"(GMT+12:00) Auckland, Wellington"),$.make("option",{value:"Etc/GMT-12"},"(GMT+12:00) Fiji, Kamchatka, Marshall Is."),$.make("option",{value:"Pacific/Chatham"},
"(GMT+12:45) Chatham Islands"),$.make("option",{value:"Pacific/Tongatapu"},"(GMT+13:00) Nuku'alofa"),$.make("option",{value:"Pacific/Kiritimati"},"(GMT+14:00) Kiritimati")])])]),$.make("div",{className:"NB-preference-label"},["Timezone"])]),$.make("div",{className:"NB-preference NB-preference-view"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-view-1",type:"radio",name:"default_view",value:"page"}),$.make("label",{"for":"NB-preference-view-1"},
[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/preferences_view_original.png"})])]),$.make("div",[$.make("input",{id:"NB-preference-view-2",type:"radio",name:"default_view",value:"feed"}),$.make("label",{"for":"NB-preference-view-2"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/preferences_view_feed.png"})])]),$.make("div",[$.make("input",{id:"NB-preference-view-3",type:"radio",name:"default_view",value:"story"}),$.make("label",{"for":"NB-preference-view-3"},[$.make("img",
{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/preferences_view_story.png"})])])]),$.make("div",{className:"NB-preference-label"},["Default view",$.make("div",{className:"NB-preference-sublabel"},"You can override this on a per-site basis.")])]),$.make("div",{className:"NB-preference NB-preference-story-pane-position"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-story-pane-position-1",type:"radio",name:"story_pane_anchor",value:"north"}),$.make("label",
{"for":"NB-preference-story-pane-position-1"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/layout_top.png"}),"Top"])]),$.make("div",[$.make("input",{id:"NB-preference-story-pane-position-2",type:"radio",name:"story_pane_anchor",value:"west"}),$.make("label",{"for":"NB-preference-story-pane-position-2"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/layout_left.png"}),"Left"])]),$.make("div",[$.make("input",{id:"NB-preference-story-pane-position-3",type:"radio",name:"story_pane_anchor",
value:"south"}),$.make("label",{"for":"NB-preference-story-pane-position-3"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/layout_bottom.png"}),"Bottom"])])]),$.make("div",{className:"NB-preference-label"},["Story titles pane"])]),$.make("div",{className:"NB-preference NB-preference-window"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-window-1",type:"radio",name:"new_window",value:0}),$.make("label",{"for":"NB-preference-window-1"},
[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/application_view_gallery.png"}),"In this window"])]),$.make("div",[$.make("input",{id:"NB-preference-window-2",type:"radio",name:"new_window",value:1}),$.make("label",{"for":"NB-preference-window-2"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/application_side_expand.png"}),"In a new window"])])]),$.make("div",{className:"NB-preference-label"},["Open links"])]),$.make("div",{className:"NB-preference NB-preference-hidereadfeeds"},
[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-hidereadfeeds-1",type:"radio",name:"hide_read_feeds",value:0}),$.make("label",{"for":"NB-preference-hidereadfeeds-1"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/text_list_bullets.png"}),"Show everything"])]),$.make("div",[$.make("input",{id:"NB-preference-hidereadfeeds-2",type:"radio",name:"hide_read_feeds",value:1}),$.make("label",{"for":"NB-preference-hidereadfeeds-2"},[$.make("img",
{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/text_list_bullets_single.png"}),"Hide sites with no unread stories"])])]),$.make("div",{className:"NB-preference-label"},["Site sidebar",$.make("div",{className:"NB-preference-sublabel"},this.make_site_sidebar_count())])]),$.make("div",{className:"NB-preference NB-preference-feedorder"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-feedorder-1",type:"radio",name:"feed_order",value:"ALPHABETICAL"}),
$.make("label",{"for":"NB-preference-feedorder-1"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/pilcrow.png"}),"Alphabetical"])]),$.make("div",[$.make("input",{id:"NB-preference-feedorder-2",type:"radio",name:"feed_order",value:"MOSTUSED"}),$.make("label",{"for":"NB-preference-feedorder-2"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/report_user.png"}),"Most used at top, then alphabetical"])])]),$.make("div",{className:"NB-preference-label"},["Site sidebar order"])]),
$.make("div",{className:"NB-preference NB-preference-showunreadcountsintitle"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-showunreadcountsintitle-1",type:"checkbox",name:"show_unread_counts_in_title",value:0}),$.make("label",{"for":"NB-preference-showunreadcountsintitle-1"},["Show unread counts in the window title"])])]),$.make("div",{className:"NB-preference-label"},["Window title"])]),$.make("div",{className:"NB-preference NB-preference-hidestorychanges"},
[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-hidestorychanges-1",type:"radio",name:"hide_story_changes",value:0}),$.make("label",{"for":"NB-preference-hidestorychanges-1"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/code_icon.png"}),"Show ",$.make("del","changes")," ",$.make("ins","revisions")," in stories"])]),$.make("div",[$.make("input",{id:"NB-preference-hidestorychanges-2",type:"radio",name:"hide_story_changes",value:1}),$.make("label",
{"for":"NB-preference-hidestorychanges-2"},["Hide changes and only show the final story"])])]),$.make("div",{className:"NB-preference-label"},["Story changes"])]),$.make("div",{className:"NB-preference NB-preference-singlestory"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-singlestory-1",type:"radio",name:"feed_view_single_story",value:0}),$.make("label",{"for":"NB-preference-singlestory-1"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/text_linespacing.png"}),
"Show all stories"])]),$.make("div",[$.make("input",{id:"NB-preference-singlestory-2",type:"radio",name:"feed_view_single_story",value:1}),$.make("label",{"for":"NB-preference-singlestory-2"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/text_horizontalrule.png"}),"Show a single story at a time"])])]),$.make("div",{className:"NB-preference-label"},["Feed view"])]),$.make("div",{className:"NB-preference NB-preference-animations"},[$.make("div",{className:"NB-preference-options"},[$.make("div",
[$.make("input",{id:"NB-preference-animations-1",type:"radio",name:"animations",value:"true"}),$.make("label",{"for":"NB-preference-animations-1"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/arrow_in.png"}),"Show all animations"])]),$.make("div",[$.make("input",{id:"NB-preference-animations-2",type:"radio",name:"animations",value:"false"}),$.make("label",{"for":"NB-preference-animations-2"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/arrow_right.png"}),"Jump immediately with no animations"])])]),
$.make("div",{className:"NB-preference-label"},["Animations"])]),$.make("div",{className:"NB-preference NB-preference-folder-counts"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-folder-counts-1",type:"radio",name:"folder_counts",value:"false"}),$.make("label",{"for":"NB-preference-folder-counts-1"},["Only show counts on collapsed folders"])]),$.make("div",[$.make("input",{id:"NB-preference-folder-counts-2",type:"radio",name:"folder_counts",value:"true"}),
$.make("label",{"for":"NB-preference-folder-counts-2"},["Always show unread counts on folders"])])]),$.make("div",{className:"NB-preference-label"},["Folder unread counts"])]),$.make("div",{className:"NB-preference NB-preference-story-styling"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-story-styling-1",type:"radio",name:"story_styling",value:"sans-serif"}),$.make("label",{"for":"NB-preference-story-styling-1",className:"NB-preference-story-styling-sans-serif"},
"Lucida Grande, sans serif")]),$.make("div",[$.make("input",{id:"NB-preference-story-styling-2",type:"radio",name:"story_styling",value:"serif"}),$.make("label",{"for":"NB-preference-story-styling-2",className:"NB-preference-story-styling-serif"},"Georgia, serif")])]),$.make("div",{className:"NB-preference-label"},["Feed view styling"])]),$.make("div",{className:"NB-preference NB-preference-tooltips"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-tooltips-1",
type:"radio",name:"show_tooltips",value:1}),$.make("label",{"for":"NB-preference-tooltips-1"},["Show tooltips"])]),$.make("div",[$.make("input",{id:"NB-preference-tooltips-2",type:"radio",name:"show_tooltips",value:0}),$.make("label",{"for":"NB-preference-tooltips-2"},["Don't bother showing tooltips"])])]),$.make("div",{className:"NB-preference-label"},["Tooltips",$.make("div",{className:"tipsy tipsy-n"},[$.make("div",{className:"tipsy-arrow"}),$.make("div",{className:"tipsy-inner"},"Tooltips like this")]).css({display:"block",
top:24,left:-5})])]),$.make("div",{className:"NB-preference NB-preference-story-share"},[$.make("div",{className:"NB-preference-options"},[$.make("div",{className:"NB-preference-option",title:"Twitter"},[$.make("input",{type:"checkbox",id:"NB-preference-story-share-twitter",name:"story_share_twitter"}),$.make("label",{"for":"NB-preference-story-share-twitter"})]),$.make("div",{className:"NB-preference-option",title:"Facebook"},[$.make("input",{type:"checkbox",id:"NB-preference-story-share-facebook",
name:"story_share_facebook"}),$.make("label",{"for":"NB-preference-story-share-facebook"})]),$.make("div",{className:"NB-preference-option",title:"Instapaper"},[$.make("input",{type:"checkbox",id:"NB-preference-story-share-instapaper",name:"story_share_instapaper"}),$.make("label",{"for":"NB-preference-story-share-instapaper"})]),$.make("div",{className:"NB-preference-option",title:"Pinboard.in"},[$.make("input",{type:"checkbox",id:"NB-preference-story-share-pinboard",name:"story_share_pinboard"}),
$.make("label",{"for":"NB-preference-story-share-pinboard"})]),$.make("div",{className:"NB-preference-option",title:"Google+"},[$.make("input",{type:"checkbox",id:"NB-preference-story-share-googleplus",name:"story_share_googleplus"}),$.make("label",{"for":"NB-preference-story-share-googleplus"})]),$.make("div",{className:"NB-preference-option",title:"Read It Later"},[$.make("input",{type:"checkbox",id:"NB-preference-story-share-readitlater",name:"story_share_readitlater"}),$.make("label",{"for":"NB-preference-story-share-readitlater"})])]),
$.make("div",{className:"NB-preference-label"},["Sharing services"])]),$.make("div",{className:"NB-preference NB-preference-opml"},[$.make("div",{className:"NB-preference-options"},[$.make("a",{className:"NB-splash-link",href:NEWSBLUR.URLs["opml-export"]},"Download OPML")]),$.make("div",{className:"NB-preference-label"},["Backup your sites",$.make("div",{className:"NB-preference-sublabel"},"Download this XML file as a backup")])])]),$.make("div",{className:"NB-modal-submit"},[$.make("input",{type:"submit",
disabled:"true",className:"NB-modal-submit-green NB-disabled",value:"Change what you like above..."})," or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])]).bind("submit",function(a){a.preventDefault();b.save_preferences();return!1})])},resize_modal:function(){var b=$(".NB-preferences-scroll",this.$modal),a=this.$modal,c=a.closest(".simplemodal-container");a.height()>c.height()-24&&(b.height(b.height()-5),this.resize_modal())},select_preferences:function(){NEWSBLUR.Preferences.timezone&&
$("select[name=timezone] option",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.timezone)return $(this).attr("selected",!0),!1});$("input[name=default_view]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.default_view)return $(this).attr("checked",!0),!1});$("input[name=story_pane_anchor]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.story_pane_anchor)return $(this).attr("checked",!0),!1});$("input[name=new_window]",this.$modal).each(function(){if($(this).val()==
NEWSBLUR.Preferences.new_window)return $(this).attr("checked",!0),!1});$("input[name=hide_read_feeds]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.hide_read_feeds)return $(this).attr("checked",!0),!1});$("input[name=feed_order]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.feed_order)return $(this).attr("checked",!0),!1});$("input[name=show_unread_counts_in_title]",this.$modal).each(function(){if(NEWSBLUR.Preferences.show_unread_counts_in_title)return $(this).attr("checked",
!0),!1});$("input[name=hide_story_changes]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.hide_story_changes)return $(this).attr("checked",!0),!1});$("input[name=feed_view_single_story]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.feed_view_single_story)return $(this).attr("checked",!0),!1});$("input[name=animations]",this.$modal).each(function(){if($(this).val()==""+NEWSBLUR.Preferences.animations)return $(this).attr("checked",!0),!1});$("input[name=folder_counts]",
this.$modal).each(function(){if($(this).val()==""+NEWSBLUR.Preferences.folder_counts)return $(this).attr("checked",!0),!1});$("input[name=show_tooltips]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.show_tooltips)return $(this).attr("checked",!0),!1});$("input[name=story_styling]",this.$modal).each(function(){if($(this).val()==NEWSBLUR.Preferences.story_styling)return $(this).attr("checked",!0),!1});var b=_.select(_.keys(NEWSBLUR.Preferences),function(a){return a.indexOf("story_share")!=
-1});_.each(b,_.bind(function(a){var b=a.match(/story_share_(.*)/)[1];$("input#NB-preference-story-share-"+b,this.$modal).attr("checked",NEWSBLUR.Preferences[a])},this))},serialize_preferences:function(){var b={};$("input[type=radio]:checked, select",this.$modal).each(function(){var a=$(this).attr("name"),c=b[a]=$(this).val();c=="true"?b[a]=!0:c=="false"&&(b[a]=!1)});$("input[type=checkbox]",this.$modal).each(function(){b[$(this).attr("name")]=$(this).is(":checked")});return b},save_preferences:function(){var b=
this,a=this.serialize_preferences();$(".NB-preference-error",this.$modal).text("");$("input[type=submit]",this.$modal).val("Saving...").attr("disabled",!0).addClass("NB-disabled");this.model.save_preferences(a,function(){NEWSBLUR.reader.switch_feed_view_unread_view();NEWSBLUR.reader.apply_story_styling(!0);NEWSBLUR.reader.apply_tipsy_titles();NEWSBLUR.reader.show_stories_preference_in_feed_view();NEWSBLUR.reader.update_header_counts();(b.original_preferences.feed_order!=a.feed_order||b.original_preferences.folder_counts!=
a.folder_counts)&&NEWSBLUR.reader.make_feeds();b.original_preferences.story_pane_anchor!=a.story_pane_anchor&&NEWSBLUR.reader.apply_resizable_layout(!0);b.close()})},make_site_sidebar_count:function(){var b=_.keys(this.model.feeds).length;return["Currently ",_.select(this.model.feeds,function(a){return a.ng||a.nt||a.ps}).length," out of ",b,Inflector.pluralize(" site",b)," would be shown."].join("")},close_and_load_account:function(){this.close(function(){NEWSBLUR.reader.open_account_modal()})},handle_click:function(b,
a){var c=this;$.targetIs(a,{tagSelector:".NB-add-url-submit"},function(){a.preventDefault();c.save_preferences()});$.targetIs(a,{tagSelector:".NB-link-account-preferences"},function(){a.preventDefault();c.close_and_load_account()});$.targetIs(a,{tagSelector:".NB-modal-cancel"},function(){a.preventDefault();c.close()})},handle_change:function(){$("input[type=radio],input[type=checkbox],select",this.$modal).bind("change",_.bind(this.enable_save,this))},enable_save:function(){$("input[type=submit]",
this.$modal).removeAttr("disabled").removeClass("NB-disabled").val("Save Preferences")},disable_save:function(){$("input[type=submit]",this.$modal).attr("disabled",!0).addClass("NB-disabled").val("Change what you like above...")}});NEWSBLUR.ReaderAccount=function(b){var a={animate_email:!1,change_password:!1,onOpen:_.bind(function(){this.animate_fields()},this)};this.options=$.extend({},a,b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};NEWSBLUR.ReaderAccount.prototype=new NEWSBLUR.Modal;
NEWSBLUR.ReaderAccount.prototype.constructor=NEWSBLUR.ReaderAccount;
_.extend(NEWSBLUR.ReaderAccount.prototype,{runner:function(){this.make_modal();this.open_modal();this.$modal.bind("click",$.rescope(this.handle_click,this));this.handle_change();this.select_preferences()},make_modal:function(){var b=this;this.$modal=$.make("div",{className:"NB-modal-preferences NB-modal-account NB-modal"},[$.make("a",{href:"#preferences",className:"NB-link-account-preferences NB-splash-link"},"Switch to Preferences"),$.make("h2",{className:"NB-modal-title"},"My Account"),$.make("form",
{className:"NB-preferences-form"},[$.make("div",{className:"NB-preference NB-preference-username"},[$.make("div",{className:"NB-preference-options"},[$.make("div",{className:"NB-preference-option"},[$.make("input",{id:"NB-preference-username",type:"text",name:"username",value:NEWSBLUR.Globals.username})])]),$.make("div",{className:"NB-preference-label"},[$.make("label",{"for":"NB-preference-username"},"Username"),$.make("div",{className:"NB-preference-error"})])]),$.make("div",{className:"NB-preference NB-preference-email"},
[$.make("div",{className:"NB-preference-options"},[$.make("div",{className:"NB-preference-option"},[$.make("input",{id:"NB-preference-email",type:"text",name:"email",value:NEWSBLUR.Globals.email})])]),$.make("div",{className:"NB-preference-label"},[$.make("label",{"for":"NB-preference-email"},"Email address"),$.make("div",{className:"NB-preference-error"})])]),$.make("div",{className:"NB-preference NB-preference-password"},[$.make("div",{className:"NB-preference-options"},[$.make("div",{className:"NB-preference-option",
style:this.options.change_password?"opacity: .2":""},[$.make("label",{"for":"NB-preference-password-old"},"Old password"),$.make("input",{id:"NB-preference-password-old",type:"password",name:"old_password",value:""})]),$.make("div",{className:"NB-preference-option"},[$.make("label",{"for":"NB-preference-password-new"},"New password"),$.make("input",{id:"NB-preference-password-new",type:"password",name:"new_password",value:""})])]),$.make("div",{className:"NB-preference-label"},["Change password",
$.make("div",{className:"NB-preference-error"})])]),$.make("div",{className:"NB-preference NB-preference-premium"},[$.make("div",{className:"NB-preference-options"},[!NEWSBLUR.Globals.is_premium&&$.make("a",{className:"NB-modal-submit-button NB-modal-submit-green NB-account-premium-modal"},"Go Premium!"),NEWSBLUR.Globals.is_premium&&$.make("div",["Thank you! You have a ",$.make("b","premium account"),"."])]),$.make("div",{className:"NB-preference-label"},["Premium"])]),$.make("div",{className:"NB-preference NB-preference-opml"},
[$.make("div",{className:"NB-preference-options"},[$.make("a",{className:"NB-splash-link",href:NEWSBLUR.URLs["opml-export"]},"Download OPML")]),$.make("div",{className:"NB-preference-label"},["Backup your sites",$.make("div",{className:"NB-preference-sublabel"},"Download this XML file as a backup")])]),$.make("div",{className:"NB-preference NB-preference-emails"},[$.make("div",{className:"NB-preference-options"},[$.make("div",[$.make("input",{id:"NB-preference-emails-1",type:"radio",name:"send_emails",
value:"true"}),$.make("label",{"for":"NB-preference-emails-1"},["Mail me the infrequent email"])]),$.make("div",[$.make("input",{id:"NB-preference-emails-2",type:"radio",name:"send_emails",value:"false"}),$.make("label",{"for":"NB-preference-emails-2"},["Never ever send me an email"])])]),$.make("div",{className:"NB-preference-label"},["Emails"])]),$.make("div",{className:"NB-modal-submit"},[$.make("input",{type:"submit",disabled:"true",className:"NB-modal-submit-green NB-disabled",value:"Change what you like above..."}),
" or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])]).bind("submit",function(a){a.preventDefault();b.save_account_settings();return!1})])},animate_fields:function(){this.options.animate_email?_.delay(_.bind(function(){var b=$(".NB-preference-emails",this.$modal),a=b.css("backgroundColor");b.css("backgroundColor",a).animate({backgroundColor:"orange"},{queue:!1,duration:1200,easing:"easeInQuad",complete:function(){b.animate({backgroundColor:a},{queue:!1,duration:650,easing:"easeOutQuad"})}})},
this),200):this.options.change_password&&_.delay(_.bind(function(){var b=$(".NB-preference-password",this.$modal),a=b.css("backgroundColor");b.css("backgroundColor",a).animate({backgroundColor:"orange"},{queue:!1,duration:1200,easing:"easeInQuad",complete:function(){b.animate({backgroundColor:a},{queue:!1,duration:650,easing:"easeOutQuad"})}})},this),200)},close_and_load_preferences:function(){this.close(function(){NEWSBLUR.reader.open_preferences_modal()})},close_and_load_premium:function(){this.close(function(){NEWSBLUR.reader.open_feedchooser_modal()})},
handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})},select_preferences:function(){var b=this.model.preference;$("input[name=send_emails]",this.$modal).each(function(){console.log(["pref",b("send_emails"),$(this).val()]);if($(this).val()==""+b("send_emails"))return $(this).attr("checked",!0),!1})},serialize_preferences:function(){var b={};$("input[type=radio]:checked, select, input[type=text], input[type=password]",this.$modal).each(function(){var a=
$(this).attr("name"),c=b[a]=$(this).val();c=="true"?b[a]=!0:c=="false"&&(b[a]=!1)});$("input[type=checkbox]",this.$modal).each(function(){b[$(this).attr("name")]=$(this).is(":checked")});return b},save_account_settings:function(){var b=this,a=this.serialize_preferences();$(".NB-preference-error",this.$modal).text("");$("input[type=submit]",this.$modal).val("Saving...").attr("disabled",!0).addClass("NB-disabled");console.log(["form['send_emails']",a.send_emails]);this.model.preference("send_emails",
a.send_emails);this.model.save_account_settings(a,function(a){if(a.code==-1)return $(".NB-preference-username .NB-preference-error",this.$modal).text(a.message),b.disable_save();else if(a.code==-2)return $(".NB-preference-email .NB-preference-error",this.$modal).text(a.message),b.disable_save();else if(a.code==-3)return $(".NB-preference-password .NB-preference-error",this.$modal).text(a.message),b.disable_save();NEWSBLUR.Globals.username=a.payload.username;NEWSBLUR.Globals.email=a.payload.email;
$(".NB-module-account-username").text(NEWSBLUR.Globals.username);b.close()})},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-account-premium-modal"},function(){a.preventDefault();c.close_and_load_premium()});$.targetIs(a,{tagSelector:".NB-link-account-preferences"},function(){a.preventDefault();c.close_and_load_preferences()});$.targetIs(a,{tagSelector:".NB-modal-cancel"},function(){a.preventDefault();c.close()})},handle_change:function(){$("input[type=radio],input[type=checkbox],select,input",
this.$modal).bind("change",_.bind(this.enable_save,this));$("input",this.$modal).bind("keydown",_.bind(this.enable_save,this))},enable_save:function(){$("input[type=submit]",this.$modal).removeAttr("disabled").removeClass("NB-disabled").val("Save My Account")},disable_save:function(){this.resize();$("input[type=submit]",this.$modal).attr("disabled",!0).addClass("NB-disabled").val("Change what you like above...")}});
NEWSBLUR.ReaderFeedchooser=function(b){this.options=$.extend({},{},b);this.model=NEWSBLUR.AssetModel.reader();this.runner()};
NEWSBLUR.ReaderFeedchooser.prototype={runner:function(){this.start=new Date;this.MAX_FEEDS=64;this.approve_list=[];this.make_modal();this.make_paypal_button();_.defer(_.bind(function(){this.open_modal()},this));this.find_feeds_in_feed_list();this.initial_load_feeds();this.choose_dollar_amount(2);this.flags={has_saved:!1};this.$modal.bind("mousedown",$.rescope(this.handle_click,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-feedchooser NB-modal"},[$.make("h2",{className:"NB-modal-title"},
"Choose Your "+this.MAX_FEEDS),$.make("h2",{className:"NB-modal-subtitle"},[$.make("b",["You have a ",$.make("span",{style:"color: #303060;"},"Standard Account"),", which can follow up to "+this.MAX_FEEDS+" sites."]),"You can always change these."]),$.make("div",{className:"NB-feedchooser-type"},[$.make("div",{className:"NB-feedchooser-info"},[$.make("div",{className:"NB-feedchooser-info-type"},[$.make("span",{className:"NB-feedchooser-subtitle-type-prefix"},"Free")," Standard Account"]),$.make("div",
{className:"NB-feedchooser-info-counts"}),$.make("div",{className:"NB-feedchooser-info-sort"},"Auto-Selected By Popularity")]),this.make_feeds(),$.make("form",{className:"NB-feedchooser-form"},[$.make("div",{className:"NB-modal-submit"},[$.make("input",{type:"submit",disabled:"true",className:"NB-disabled NB-modal-submit-save NB-modal-submit-green",value:"Check what you like above..."}),$.make("input",{type:"submit",className:"NB-modal-submit-add NB-modal-submit-green",value:"First, add sites"})])]).bind("submit",
function(b){b.preventDefault();return!1})]),$.make("div",{className:"NB-feedchooser-type NB-last"},[$.make("div",{className:"NB-feedchooser-info"},[$.make("div",{className:"NB-feedchooser-info-type"},[$.make("span",{className:"NB-feedchooser-subtitle-type-prefix"},"Super-Mega")," Premium Account"])]),$.make("ul",{className:"NB-feedchooser-premium-bullets"},[$.make("li",{className:"NB-1"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),"Sites are updated 10x more often."]),$.make("li",
{className:"NB-2"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),"Unlimited number of sites."]),$.make("li",{className:"NB-3"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),"Access to the premium-only River of News."]),$.make("li",{className:"NB-4"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),"Access to the future premium-only features like searching and visualizations."]),$.make("li",{className:"NB-5"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),
"You feed my poor, hungry dog for 6 days!",$.make("img",{className:"NB-feedchooser-premium-poor-hungry-dog",src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/shiloh.jpg"})]),$.make("li",{className:"NB-6"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),"You are supporting an indie developer."]),$.make("li",{className:"NB-7"},[$.make("div",{className:"NB-feedchooser-premium-bullet-image"}),"Choose how much you would like to pay.",$.make("div",{style:"color: #490567"},"The only difference is happiness.")])]),
$.make("div",{className:"NB-modal-submit NB-modal-submit-paypal"},[$.make("div",{className:"NB-feedchooser-paypal"}),$.make("div",{className:"NB-feedchooser-dollar"},[$.make("div",{className:"NB-feedchooser-dollar-value NB-1"},[$.make("div",{className:"NB-feedchooser-dollar-image"}),$.make("div",{className:"NB-feedchooser-dollar-month"},"$12/year"),$.make("div",{className:"NB-feedchooser-dollar-year"},"($1/month)")]),$.make("div",{className:"NB-feedchooser-dollar-value NB-2"},[$.make("div",{className:"NB-feedchooser-dollar-image"}),
$.make("div",{className:"NB-feedchooser-dollar-month"},"$24/year"),$.make("div",{className:"NB-feedchooser-dollar-year"},"($2/month)")]),$.make("div",{className:"NB-feedchooser-dollar-value NB-3"},[$.make("div",{className:"NB-feedchooser-dollar-image"}),$.make("div",{className:"NB-feedchooser-dollar-month"},"$36/year"),$.make("div",{className:"NB-feedchooser-dollar-year"},"($3/month)")])])])])])},make_paypal_button:function(){var b=this,a=$(".NB-feedchooser-paypal",this.$modal);$.get("/profile/paypal_form",
function(c){a.html(c);b.choose_dollar_amount(2)})},make_google_button:function(){return $('<script type="text/javascript" src="https://images-na.ssl-images-amazon.com/images/G/01/cba/js/widget/widget.js"><\/script><form method=POST action="https://payments.amazon.com/checkout/A215TOHXICT770"><input type="hidden" name="order-input" value="type:cba-signed-order/sha1-hmac/1;order:PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48T3JkZXIgeG1sbnM9J2h0dHA6Ly9wYXltZW50cy5hbWF6b24uY29tL2NoZWNrb3V0LzIwMDgtMTEtMzAvJz48Q2FydD48SXRlbXM+PEl0ZW0+PE1lcmNoYW50SWQ+QTIxNVRPSFhJQ1Q3NzA8L01lcmNoYW50SWQ+PFRpdGxlPk5ld3NCbHVyIFByZW1pdW0gLSAxIFllYXI8L1RpdGxlPjxEZXNjcmlwdGlvbj5UaGFuayB5b3UsIHRoYW5rIHlvdSwgdGhhbmsgeW91ITwvRGVzY3JpcHRpb24+PFByaWNlPjxBbW91bnQ+MTI8L0Ftb3VudD48Q3VycmVuY3lDb2RlPlVTRDwvQ3VycmVuY3lDb2RlPjwvUHJpY2U+PFF1YW50aXR5PjE8L1F1YW50aXR5PjxGdWxmaWxsbWVudE5ldHdvcms+TUVSQ0hBTlQ8L0Z1bGZpbGxtZW50TmV0d29yaz48L0l0ZW0+PC9JdGVtcz48L0NhcnQ+PC9PcmRlcj4=;signature:Zfg83JluKTIhItevtaGpspjdbfQ="><input alt="Checkout with Amazon Payments" src="https://payments.amazon.com/gp/cba/button?ie=UTF8&color=tan&background=white&cartOwnerId=A215TOHXICT770&size=large" type="image"></form>')},
make_feeds:function(){this.feed_count=_.size(this.model.feeds);var b=$("#feed_list").clone(!0).attr({id:"NB-feedchooser-feeds","class":"NB-feedlist NB-feedchooser unread_view_positive",style:""});b.data("sortable")&&b.data("sortable").disable();$(".folder",b).css({display:"block",opacity:1});$(".NB-feed-unfetched",b).removeClass("NB-feed-unfetched");$(".unread_count_positive",b).text("On");$(".unread_count_negative",b).text("Off");return b},resize_modal:function(b){var a=this.$modal.height()+16,c=
this.$modal.parent().height();a>c&&b!=a&&(b=$("#NB-feedchooser-feeds").height(),c=Math.max(4,a-c),$("#NB-feedchooser-feeds").css({"max-height":b-c}),_.defer(_.bind(function(){this.resize_modal(a)},this),1))},open_modal:function(){var b=this;this.$modal.modal({minWidth:780,maxWidth:780,overlayClose:!0,onOpen:function(a){a.overlay.fadeIn(200,function(){a.container.fadeIn(200);a.data.fadeIn(200,function(){_.defer(_.bind(b.resize_modal,b),10)})})},onShow:function(){$("#simplemodal-container").corner("6px")},
onClose:function(a,c){!b.flags.has_saved&&!NEWSBLUR.reader.flags.has_chosen_feeds&&NEWSBLUR.reader.show_feed_chooser_button();a.data.hide().empty().remove();a.container.hide().empty().remove();a.overlay.fadeOut(200,function(){a.overlay.empty().remove();$.modal.close(c)});$(".NB-modal-holder").empty().remove()}})},add_feed_to_decline:function(b,a){this.approve_list=_.without(this.approve_list,b);var c=this.$feeds[b];c.removeClass("NB-feedchooser-approve");c.addClass("NB-feedchooser-decline");a&&this.update_counts()},
add_feed_to_approve:function(b,a){_.contains(this.approve_list,b)||this.approve_list.push(b);var c=this.$feeds[b];c.removeClass("NB-feedchooser-decline");c.addClass("NB-feedchooser-approve");a&&this.update_counts()},find_feeds_in_feed_list:function(){var b=this,a=$(".NB-feedchooser",this.$modal),c={};$(".feed",a).each(function(){var a=parseInt($(this).attr("data-id"),10);a in c||(c[a]=$([]));c[a].push($(this).get(0))});var d=_.uniq(_.keys(c)).sort();_.each(b.model.feeds,function(a){_.contains(d,a)||
delete b.model.feeds[a]});this.$feeds=c},update_counts:function(){var b=$(".NB-feedchooser-info-counts"),a=this.approve_list.length,c=$(".NB-modal-submit-save",this.$modal),d=a-this.MAX_FEEDS;b.text(a+"/"+Inflector.commas(this.feed_count));b.toggleClass("NB-full",a==this.MAX_FEEDS);b.toggleClass("NB-error",a>this.MAX_FEEDS);$(".NB-feedchooser-info-sort",this.$modal).fadeOut(500);a>this.MAX_FEEDS?c.addClass("NB-disabled").attr("disabled",!0).val("Too many sites! Deselect "+(d==1?"1 site...":d+" sites...")):
c.removeClass("NB-disabled").attr("disabled",!1).val("Turn on these "+a+" sites, please")},initial_load_feeds:function(){var b=this,a=$(".feed",this.$modal),c=this.model.get_feeds();if(_.keys(c).length){var d=_.any(_.pluck(c,"active"));if(d)this.approve_list=d=_.pluck(_.select(c,function(a){if(a.active)return!0}),"id"),c=[],a.each(function(){var a=parseInt($(this).attr("data-id"),10);_.contains(d,a)?b.add_feed_to_approve(a):b.add_feed_to_decline(a)});else{var e=_.last(_.first(_.pluck(_.select(this.model.get_feeds(),
function(a){return!a.has_exception}),"subs").sort(function(a,b){return b-a}),this.MAX_FEEDS)),f=[];_.each(c,function(a,c){b.add_feed_to_decline(parseInt(c,10));a.subs>=e&&f.push(parseInt(c,10))});_.each(f,function(a){b.model.get_feed(a).subs>e&&b.approve_list.length<b.MAX_FEEDS&&!b.model.get_feed(a).has_exception&&b.add_feed_to_approve(a)});_.each(f,function(a){b.model.get_feed(a).subs==e&&b.approve_list.length<b.MAX_FEEDS&&b.add_feed_to_approve(a)})}_.defer(_.bind(function(){this.update_counts()},
this))}else _.defer(_.bind(function(){var a=$(".NB-feedchooser-info",this.$modal);$(".NB-feedchooser-info-counts",a).hide();$(".NB-feedchooser-info-sort",a).hide();$("#NB-feedchooser-feeds").hide();$(".NB-modal-submit-save").hide();$(".NB-modal-submit-add").show()},this))},save:function(){var b=this,a=this.approve_list;$(".NB-modal-submit-save",this.$modal).addClass("NB-disabled").val("Saving...");this.update_homepage_count();this.model.save_feed_chooser(a,function(){b.flags.has_saved=!0;NEWSBLUR.reader.hide_feed_chooser_button();
NEWSBLUR.reader.load_feeds();$.modal.close()})},close_and_add:function(){$.modal.close(function(){NEWSBLUR.add_feed=new NEWSBLUR.ReaderAddFeed})},update_homepage_count:function(){var b=$(".NB-module-account-feedcount"),a=$(".NB-module-account-upgrade");b.text(this.approve_list.length);a.removeClass("NB-modal-submit-green").addClass("NB-modal-submit-close");$(".NB-module-account-trainer").removeClass("NB-hidden").hide().slideDown(500)},choose_dollar_amount:function(b){var a=$(".NB-feedchooser-dollar-value",
this.$modal),c=$("input[name=a3]");a.removeClass("NB-selected");a.filter(".NB-"+b).addClass("NB-selected");b==1?c.val(12):b==2?c.val(24):b==3&&c.val(36)},handle_click:function(b,a){$.targetIs(a,{tagSelector:".feed"},_.bind(function(b){a.preventDefault();b=parseInt(b.attr("data-id"),10);_.contains(this.approve_list,b)?this.add_feed_to_decline(b,!0):this.add_feed_to_approve(b,!0)},this));$.targetIs(a,{tagSelector:".NB-modal-submit-save"},_.bind(function(){a.preventDefault();this.save()},this));$.targetIs(a,
{tagSelector:".NB-modal-submit-add"},_.bind(function(){a.preventDefault();this.close_and_add()},this));$.targetIs(a,{tagSelector:".NB-feedchooser-dollar-value"},_.bind(function(b){a.preventDefault();var d;b.hasClass("NB-1")?d=1:b.hasClass("NB-2")?d=2:b.hasClass("NB-3")&&(d=3);this.choose_dollar_amount(d)},this))},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})}};
NEWSBLUR.ReaderStatistics=function(b,a){this.options=$.extend({},{},a);this.model=NEWSBLUR.AssetModel.reader();this.feed_id=b;this.feed=this.model.get_feed(b);this.feeds=this.model.get_feeds();this.first_load=!0;this.runner()};NEWSBLUR.ReaderStatistics.prototype=new NEWSBLUR.Modal;NEWSBLUR.ReaderStatistics.prototype.constructor=NEWSBLUR.ReaderStatistics;
_.extend(NEWSBLUR.ReaderStatistics.prototype,{runner:function(){var b=this;this.make_modal();this.open_modal();setTimeout(function(){b.get_stats()},50);this.$modal.bind("change",$.rescope(this.handle_change,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-statistics NB-modal"},[$.make("div",{className:"NB-modal-feed-chooser-container"},[this.make_feed_chooser()]),$.make("div",{className:"NB-modal-loading"}),$.make("h2",{className:"NB-modal-title"},"Statistics &amp; History"),
$.make("h2",{className:"NB-modal-subtitle"},[$.make("img",{className:"NB-modal-feed-image feed_favicon",src:$.favicon(this.feed.favicon)}),$.make("div",{className:"NB-modal-feed-heading"},[$.make("span",{className:"NB-modal-feed-title"},this.feed.feed_title),$.make("span",{className:"NB-modal-feed-subscribers"},Inflector.commas(this.feed.num_subscribers)+Inflector.pluralize(" subscriber",this.feed.num_subscribers))])]),$.make("div",{className:"NB-modal-statistics-info"})]);var b=this.make_stats({last_update:"",
next_update:""});$(".NB-modal-statistics-info",this.$modal).replaceWith(b)},open_modal:function(){this.$modal.modal({minWidth:600,maxWidth:600,minHeight:425,overlayClose:!0,autoResize:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200)})},onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b){b.data.hide().empty().remove();b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();$.modal.close()});
$(".NB-modal-holder").empty().remove()}})},get_stats:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");this.model.get_feed_statistics(this.feed_id,$.rescope(this.populate_stats,this))},populate_stats:function(b,a){var c=this;NEWSBLUR.log(["Stats",a]);$(".NB-modal-loading",this.$modal).removeClass("NB-active");var d=a.update_interval_minutes,e=a.update_interval_minutes*1.25,f="";if(d<60)f=d+" to "+e+" minutes";else var f=parseInt(d/60,10),g=parseInt(e/60,10),f=f+(d%60>=30?".5":"")+
" to "+g+(e%60>=30||f==g?".5":"")+" hours";d=this.make_stats(a,f);$(".NB-modal-statistics-info",this.$modal).replaceWith(d);setTimeout(function(){c.make_charts(a)},this.first_load?500:50);setTimeout(function(){$.modal.impl.resize(c.$modal)},100)},make_stats:function(b,a){return $.make("div",{className:"NB-modal-statistics-info"},[$.make("div",{className:"NB-statistics-stat NB-statistics-updates"},[$.make("div",{className:"NB-statistics-update"},[$.make("div",{className:"NB-statistics-label"},"Last Update"),
$.make("div",{className:"NB-statistics-count"},"&nbsp;"+(b.last_update&&b.last_update+" ago"))]),$.make("div",{className:"NB-statistics-update"},[$.make("div",{className:"NB-statistics-label"},"Every"),$.make("div",{className:"NB-statistics-count"},a)]),$.make("div",{className:"NB-statistics-update"},[$.make("div",{className:"NB-statistics-label"},"Next Update"),$.make("div",{className:"NB-statistics-count"},"&nbsp;"+(b.next_update&&"in "+b.next_update))])]),$.make("div",{className:"NB-statistics-stat NB-statistics-history"},
[$.make("div",{className:"NB-statistics-history-stat"},[$.make("div",{className:"NB-statistics-label"},"Stories per month")]),$.make("div",{id:"NB-statistics-history-chart",className:"NB-statistics-history-chart"})]),b.classifier_counts&&$.make("div",{className:"NB-statistics-state NB-statistics-classifiers"},[this.make_classifier_count("tag",b.classifier_counts.tag),this.make_classifier_count("author",b.classifier_counts.author),this.make_classifier_count("title",b.classifier_counts.title),this.make_classifier_count("feed",
b.classifier_counts.feed)]),$.make("div",{className:"NB-statistics-stat NB-statistics-fetches"},[$.make("div",{className:"NB-statistics-fetches-half"},[$.make("div",{className:"NB-statistics-label"},"Feed"),$.make("div",this.make_history(b,"feed"))]),$.make("div",{className:"NB-statistics-fetches-half"},[$.make("div",{className:"NB-statistics-label"},"Page"),$.make("div",this.make_history(b,"page"))])])])},make_classifier_count:function(b,a){var c=this;if(a){var d=$.make("div",{className:"NB-statistics-facets"},
[$.make("div",{className:"NB-statistics-facet-title"},Inflector.pluralize(b,a.length))]),e=10;_.each(a,function(a){if(a.pos>e||a.neg>e)e=Math.max(a.pos,a.neg)});var f=100/parseFloat(e,10);_.each(a,function(a){var e=a.pos||0,k=a.neg||0,a=a[b];b=="feed"&&(a=[$.make("div",[$.make("img",{className:"NB-modal-feed-image feed_favicon",src:$.favicon(c.feed.favicon)}),$.make("span",{className:"NB-modal-feed-title"},c.feed.feed_title)])]);if(a&&(e||k))e=$.make("div",{className:"NB-statistics-facet"},[e&&$.make("div",
{className:"NB-statistics-facet-pos"},[$.make("div",{className:"NB-statistics-facet-bar"}).css("width",Math.max(1,f*e)),$.make("div",{className:"NB-statistics-facet-count"},e+Inflector.pluralize(" like",e)).css("margin-left",Math.max(1,f*e)+5)]),k&&$.make("div",{className:"NB-statistics-facet-neg"},[$.make("div",{className:"NB-statistics-facet-bar"}).css("width",Math.max(1,f*k)),$.make("div",{className:"NB-statistics-facet-count"},k+Inflector.pluralize(" dislike",k)).css("margin-right",Math.max(1,
f*k)+5)]),$.make("div",{className:"NB-statistics-facet-separator"}),$.make("div",{className:"NB-statistics-facet-name"},a)]),d.append(e)});return d}},make_history:function(b,a){var c=b[a+"_fetch_history"];if(c)return _.map(c,function(a){var b=_.contains([200,304],a.status_code);return $.make("div",{className:"NB-statistics-history-fetch"+(b?" NB-ok ":" NB-error "),title:b?"":a.exception},[$.make("div",{className:"NB-statistics-history-fetch-date"},a.fetch_date),$.make("div",{className:"NB-statistics-history-fetch-message"},
[a.message,$.make("div",{className:"NB-statistics-history-fetch-code"}," ("+a.status_code+")")])])})},make_charts:function(b){b.story_count_history=_.map(b.story_count_history,function(a){var b=a[0].match(/(\d{4})-(\d{1,2})/);return[(new Date(parseInt(b[1],10),parseInt(b[2],10)-1)).getTime(),a[1]]});var a=$(".NB-statistics-history-chart");$.plot(a,[{data:b.story_count_history,label:"Stories"}],{series:{lines:{show:!0},points:{show:!0}},average:b.average_stories_per_month,legend:{show:!1},grid:{hoverable:!0,
clickable:!0},yaxis:{tickDecimals:0,min:0},xaxis:{mode:"time",minTickSize:[1,"month"],timeformat:"%b %y"}})},handle_change:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-modal-feed-chooser"},function(a){a=a.val();c.first_load=!1;c.initialize_feed(a);c.get_stats()})}});NEWSBLUR.ReaderFeedException=function(b,a){this.options=$.extend({},{},a);this.model=NEWSBLUR.AssetModel.reader();this.feed_id=b;this.feed=this.model.get_feed(b);this.runner()};NEWSBLUR.ReaderFeedException.prototype=new NEWSBLUR.Modal;
NEWSBLUR.ReaderFeedException.prototype.constructor=NEWSBLUR.ReaderFeedException;
_.extend(NEWSBLUR.ReaderFeedException.prototype,{runner:function(){this.make_modal();this.show_recommended_options_meta();this.handle_cancel();this.open_modal();this.initialize_feed(this.feed_id);_.delay(_.bind(function(){this.get_feed_settings()},this),50);this.$modal.bind("click",$.rescope(this.handle_click,this));this.$modal.bind("change",$.rescope(this.handle_change,this))},initialize_feed:function(b){NEWSBLUR.Modal.prototype.initialize_feed.call(this,b);$("input[name=feed_link]",this.$modal).val(this.feed.feed_link);
$("input[name=feed_address]",this.$modal).val(this.feed.feed_address);this.feed.exception_type?this.$modal.removeClass("NB-modal-feed-settings"):this.$modal.addClass("NB-modal-feed-settings");this.resize()},get_feed_settings:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");this.model.get_feed_settings(this.feed_id,_.bind(this.populate_settings,this))},populate_settings:function(){$(".NB-modal-submit-save",this.$modal);$(".NB-modal-loading",this.$modal).removeClass("NB-active");
this.resize()},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-exception NB-modal"},[$.make("div",{className:"NB-modal-feed-chooser-container"},[this.make_feed_chooser()]),$.make("div",{className:"NB-modal-loading"}),$.make("h2",{className:"NB-modal-title NB-exception-block-only"},"Fix a misbehaving site"),$.make("h2",{className:"NB-modal-title"},"Site settings"),$.make("h2",{className:"NB-modal-subtitle"},[$.make("img",{className:"NB-modal-feed-image feed_favicon",src:$.favicon(this.feed.favicon)}),
$.make("div",{className:"NB-modal-feed-heading"},[$.make("span",{className:"NB-modal-feed-title"},this.feed.feed_title),$.make("span",{className:"NB-modal-feed-subscribers"},Inflector.commas(this.feed.num_subscribers)+Inflector.pluralize(" subscriber",this.feed.num_subscribers))])]),$.make("div",{className:"NB-fieldset NB-exception-option NB-exception-option-retry NB-modal-submit NB-exception-block-only"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",{className:"NB-exception-option-option NB-exception-only"},
"Option 1:"),"Retry"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("div",[$.make("div",{className:"NB-loading"}),$.make("input",{type:"submit",value:"Retry fetching and parsing",className:"NB-modal-submit-green NB-modal-submit-retry"}),$.make("div",{className:"NB-error"})])])]),$.make("div",{className:"NB-fieldset NB-exception-option NB-exception-option-feed NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",{className:"NB-exception-option-option NB-exception-only"},
"Option 2:"),"Change RSS Feed Address"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("div",{className:"NB-exception-input-wrapper"},[$.make("div",{className:"NB-loading"}),$.make("label",{"for":"NB-exception-input-address",className:"NB-exception-label"},[$.make("div",{className:"NB-folder-icon"}),"RSS/XML URL: "]),$.make("input",{type:"text",id:"NB-exception-input-address",className:"NB-exception-input-address NB-input",name:"feed_address",value:this.feed.feed_address})]),$.make("div",
{className:"NB-exception-submit-wrapper"},[$.make("input",{type:"submit",value:"Parse this RSS/XML Feed",className:"NB-modal-submit-green NB-modal-submit-address"}),$.make("div",{className:"NB-error"})])])]),$.make("div",{className:"NB-fieldset NB-exception-option NB-exception-option-page NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",{className:"NB-exception-option-option NB-exception-only"},"Option 3:"),"Change Website Address"]),$.make("div",
{className:"NB-fieldset-fields"},[$.make("div",{className:"NB-exception-input-wrapper"},[$.make("div",{className:"NB-loading"}),$.make("label",{"for":"NB-exception-input-link",className:"NB-exception-label"},[$.make("div",{className:"NB-folder-icon"}),"Website URL: "]),$.make("input",{type:"text",id:"NB-exception-input-link",className:"NB-exception-input-link NB-input",name:"feed_link",value:this.feed.feed_link})]),$.make("div",{className:"NB-exception-submit-wrapper"},[$.make("input",{type:"submit",
value:"Fetch Feed From Website",className:"NB-modal-submit-green NB-modal-submit-link"}),$.make("div",{className:"NB-error"})])])]),$.make("div",{className:"NB-fieldset NB-exception-option NB-exception-option-delete NB-modal-submit"},[$.make("h5",[$.make("span",{className:"NB-exception-option-option NB-exception-only"},"Option 4:"),"Just Delete This Feed"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("div",[$.make("div",{className:"NB-loading"}),$.make("input",{type:"submit",value:"Delete It. It Just Won't Work!",
className:"NB-modal-submit-red NB-modal-submit-delete"}),$.make("div",{className:"NB-error"})])])])])},show_recommended_options_meta:function(){var b=$(".NB-exception-option-retry .NB-exception-option-meta",this.$modal),a=$(".NB-exception-option-page .NB-exception-option-meta",this.$modal),c=$(".NB-exception-option-feed .NB-exception-option-meta",this.$modal),d=400<=this.feed.exception_code&&this.feed.exception_code<500;d?(this.feed.exception_type=="feed"&&(a.addClass("NB-exception-option-meta-recommended"),
a.text("Recommended")),this.feed.exception_type=="page"&&(d?(c.addClass("NB-exception-option-meta-recommended"),c.text("Recommended")):(a.addClass("NB-exception-option-meta-recommended"),a.text("Recommended")))):(b.addClass("NB-exception-option-meta-recommended"),b.text("Recommended"))},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})},save_retry_feed:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");$(".NB-modal-submit-retry",
this.$modal).addClass("NB-disabled").attr("value","Fetching...");this.model.save_exception_retry(this.feed_id,function(){$.modal.close()})},delete_feed:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");$(".NB-modal-submit-delete",this.$modal).addClass("NB-disabled").attr("value","Deleting...");NEWSBLUR.reader.manage_menu_delete_feed(this.feed_id);_.delay(function(){$.modal.close()},500)},change_feed_address:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");$(".NB-modal-submit-address",
this.$modal).addClass("NB-disabled").attr("value","Parsing...");var b=this.feed_id,a=$("input[name=feed_address]",this.$modal).val();a.length&&this.model.save_exception_change_feed_address(b,a,function(){$.modal.close()})},change_feed_link:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");$(".NB-modal-submit-link",this.$modal).addClass("NB-disabled").attr("value","Fetching...");var b=this.feed_id,a=$("input[name=feed_link]",this.$modal).val();a.length&&this.model.save_exception_change_feed_link(b,
a,function(){$.modal.close()})},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-modal-submit-retry"},function(){a.preventDefault();c.save_retry_feed()});$.targetIs(a,{tagSelector:".NB-modal-submit-delete"},function(){a.preventDefault();c.delete_feed()});$.targetIs(a,{tagSelector:".NB-modal-submit-address"},function(){a.preventDefault();c.change_feed_address()});$.targetIs(a,{tagSelector:".NB-modal-submit-link"},function(){a.preventDefault();c.change_feed_link()})},handle_change:function(b,
a){var c=this;$.targetIs(a,{tagSelector:".NB-modal-feed-chooser"},function(a){a=a.val();c.first_load=!1;c.initialize_feed(a);c.get_feed_settings()})}});NEWSBLUR.ReaderKeyboard=function(b){this.options=$.extend({},{},b);this.runner()};
NEWSBLUR.ReaderKeyboard.prototype={runner:function(){this.make_modal();this.handle_cancel();this.open_modal();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-keyboard NB-modal"},[$.make("h2",{className:"NB-modal-title"},"Keyboard shortcuts"),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Next story"),$.make("div",
{className:"NB-keyboard-shortcut-key"},["&#x2193;"]),$.make("div",{className:"NB-keyboard-shortcut-key"},["j"]),$.make("div",{className:"NB-keyboard-shortcut-image"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/keyboard_down.png",width:268,height:65})])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Previous story"),$.make("div",{className:"NB-keyboard-shortcut-key"},["&#x2191;"]),$.make("div",{className:"NB-keyboard-shortcut-key"},
["k"]),$.make("div",{className:"NB-keyboard-shortcut-image"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/keyboard_up.png",width:268,height:65})])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Next site"),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span","+"),"&#x2193;"]),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span",
"+"),"j"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Prev. site"),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span","+"),"&#x2191;"]),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span","+"),"k"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Switch views"),$.make("div",
{className:"NB-keyboard-shortcut-key"},["&#x2190;"]),$.make("div",{className:"NB-keyboard-shortcut-key"},["&#x2192;"]),$.make("div",{className:"NB-keyboard-shortcut-image"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/keyboard_leftright.png",width:268,height:29})])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Open Site"),$.make("div",{className:"NB-keyboard-shortcut-key"},["enter"]),$.make("div",{className:"NB-keyboard-shortcut-image"},
[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/keyboard_enter.png",width:268,height:29})])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Page down"),$.make("div",{className:"NB-keyboard-shortcut-key"},["space"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Page up"),$.make("div",{className:"NB-keyboard-shortcut-key"},
["shift",$.make("span","+"),"space"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Next Unread Story"),$.make("div",{className:"NB-keyboard-shortcut-key"},["n"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Hide Sidebar"),$.make("div",{className:"NB-keyboard-shortcut-key"},["u"])])]),$.make("div",{className:"NB-keyboard-group"},
[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Save/Unsave Story"),$.make("div",{className:"NB-keyboard-shortcut-key"},["s"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Change Intelligence"),$.make("div",{className:"NB-keyboard-shortcut-key"},["+"]),$.make("div",{className:"NB-keyboard-shortcut-key"},["-"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",
{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Open site/feed trainer"),$.make("div",{className:"NB-keyboard-shortcut-key"},["f"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Open story trainer"),$.make("div",{className:"NB-keyboard-shortcut-key"},["t"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},
"Open story in new window"),$.make("div",{className:"NB-keyboard-shortcut-key"},["o"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Mark site/folder as read"),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span","+"),"a"])])])])},open_modal:function(){this.$modal.modal({minWidth:620,maxWidth:620,overlayClose:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200);
$(window).resize()})},onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b){b.data.hide().empty().remove();b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();$.modal.close()});$(".NB-modal-holder").empty().remove()}})},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-add-url-submit"},function(){a.preventDefault();
c.save_add_url()})}};NEWSBLUR.ReaderRecommendFeed=function(b,a){this.options=$.extend({},{},a);this.model=NEWSBLUR.AssetModel.reader();this.feed_id=b;this.feed=this.model.get_feed(b);this.feeds=this.model.get_feeds();this.first_load=!0;this.runner()};NEWSBLUR.ReaderRecommendFeed.prototype=new NEWSBLUR.Modal;NEWSBLUR.ReaderRecommendFeed.prototype.constructor=NEWSBLUR.ReaderRecommendFeed;
_.extend(NEWSBLUR.ReaderRecommendFeed.prototype,{runner:function(){this.make_modal();this.open_modal();_.delay(_.bind(function(){this.get_tagline()},this),50);this.$modal.bind("click",$.rescope(this.handle_click,this));this.$modal.bind("change",$.rescope(this.handle_change,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-recommend NB-modal"},[$.make("div",{className:"NB-modal-feed-chooser-container"},[this.make_feed_chooser()]),$.make("div",{className:"NB-modal-loading"}),
$.make("h2",{className:"NB-modal-title"},"Recommend this Site"),$.make("h2",{className:"NB-modal-subtitle"},[$.make("img",{className:"NB-modal-feed-image feed_favicon",src:$.favicon(this.feed.favicon)}),$.make("div",{className:"NB-modal-feed-heading"},[$.make("span",{className:"NB-modal-feed-title"},this.feed.feed_title),$.make("span",{className:"NB-modal-feed-subscribers"},Inflector.commas(this.feed.num_subscribers)+Inflector.pluralize(" subscriber",this.feed.num_subscribers))])]),$.make("div",{className:"NB-modal-recommend-explanation"},
["Spruce up the site's tagline. If chosen, this site will enjoy a week on the NewsBlur dashboard."]),$.make("div",{className:"NB-modal-recommend-tagline-container"},[$.make("textarea",{className:"NB-modal-recommend-tagline"})]),$.make("div",{className:"NB-modal-recommend-credit"},["&raquo; Want credit? Enter your Twitter username: ",$.make("input",{className:"NB-input NB-modal-recommend-twitter"})]),$.make("form",{className:"NB-recommend-form"},[$.make("div",{className:"NB-modal-submit"},[$.make("input",
{type:"submit",className:"NB-modal-submit-save NB-modal-submit-green",value:"Recommend Site"})," or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])])])},get_tagline:function(){$(".NB-modal-loading",this.$modal).addClass("NB-active");this.model.get_feed_recommendation_info(this.feed_id,_.bind(this.populate_tagline,this))},populate_tagline:function(b){var a=$(".NB-modal-submit-save",this.$modal);$(".NB-modal-loading",this.$modal).removeClass("NB-active");$(".NB-modal-recommend-tagline",
this.$modal).val(b.tagline);b.previous_recommendation?a.addClass("NB-disabled").val("Previously Recommended on: "+b.previous_recommendation):a.removeClass("NB-disabled").val("Recommend Site")},open_modal:function(){this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200);setTimeout(function(){$(window).resize()})})},onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b){b.data.hide().empty().remove();
b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();$.modal.close()});$(".NB-modal-holder").empty().remove()}})},save:function(){$(".NB-modal-submit-save",this.$modal).addClass("NB-disabled").val("Saving...");this.model.save_recommended_site({feed_id:this.feed_id,tagline:$(".NB-modal-recommend-tagline").val(),twitter:$(".NB-modal-recommend-twitter").val()},function(){$.modal.close()})},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-modal-cancel"},
function(){a.preventDefault();$.modal.close()});$.targetIs(a,{tagSelector:".NB-modal-submit-save"},function(b){a.preventDefault();b.hasClass("NB-disabled")||c.save()})},handle_change:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-modal-feed-chooser"},function(a){a=a.val();c.first_load=!1;c.initialize_feed(a);c.get_tagline()})}});
NEWSBLUR.ReaderSendEmail=function(b,a){_.bindAll(this,"close","save_callback","error");this.options=$.extend({},{},a);this.model=NEWSBLUR.AssetModel.reader();this.story_id=b;this.story=this.model.get_story(b);this.feed_id=this.story.story_feed_id;this.feed=this.model.get_feed(this.feed_id);this.runner()};
NEWSBLUR.ReaderSendEmail.prototype=_.extend({},NEWSBLUR.Modal.prototype,{runner:function(){this.make_modal();this.open_modal();NEWSBLUR.Globals.is_authenticated||this.save_callback({code:-1,message:"You must be logged in to send a story over email."});this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-email NB-modal"},[$.make("span",{className:"NB-modal-loading NB-spinner"}),$.make("div",{className:"NB-modal-error"}),$.make("h2",
{className:"NB-modal-title"},"Send Story by Email"),$.make("h2",{className:"NB-modal-subtitle"},[$.make("div",{className:"NB-modal-email-feed"},[$.make("img",{className:"NB-modal-feed-image feed_favicon",src:$.favicon(this.feed.favicon)}),$.make("div",{className:"NB-modal-feed-title"},this.feed.feed_title)]),$.make("div",{className:"NB-modal-email-story-title"},this.story.story_title),$.make("div",{className:"NB-modal-email-story-permalink"},this.story.story_permalink)]),$.make("div",{className:"NB-modal-email-to-container"},
[$.make("label",{"for":"NB-send-email-to"},[$.make("span",{className:"NB-raquo"},"&raquo;")," Recipient's email: "]),$.make("input",{className:"NB-input NB-modal-to",name:"to",id:"NB-send-email-to",value:""})]),$.make("div",{className:"NB-modal-email-explanation"},["Add an optional comment to send with the story. The story will be sent below your comment."]),$.make("div",{className:"NB-modal-email-comments-container"},[$.make("textarea",{className:"NB-modal-email-comments"})]),$.make("div",{className:"NB-modal-email-from-container"},
[$.make("div",[$.make("label",{"for":"NB-send-email-from-name"},[$.make("span",{className:"NB-raquo"},"&raquo;")," Your name: "]),$.make("input",{className:"NB-input NB-modal-email-from",name:"from_name",id:"NB-send-email-from-name",value:this.model.preference("full_name")||NEWSBLUR.Globals.username||""})]),$.make("div",{style:"margin-top: 8px"},[$.make("label",{"for":"NB-send-email-from-email"},[$.make("span",{className:"NB-raquo"},"&raquo;")," Your email: "]),$.make("input",{className:"NB-input NB-modal-email-from",
name:"from_email",id:"NB-send-email-from-email",value:NEWSBLUR.Globals.email||this.model.preference("email")||""})])]),$.make("form",{className:"NB-recommend-form"},[$.make("div",{className:"NB-error"}),$.make("div",{className:"NB-modal-submit"},[$.make("input",{type:"submit",className:"NB-modal-submit-save NB-modal-submit-green",value:"Send this story"})," or ",$.make("a",{href:"#",className:"NB-modal-cancel"},"cancel")])])])},save:function(){var b=$("input[name=from_name]",this.$modal).val(),a=
$("input[name=from_email]",this.$modal).val(),c=$("input[name=to]",this.$modal).val(),d=$("textarea",this.$modal).val(),e=$("input[type=submit]",this.$modal);$(".NB-modal-error",this.$modal).hide();e.addClass("NB-disabled").val("Sending...");$(".NB-modal-loading",this.$modal).addClass("NB-active");this.model.preference("full_name",b);this.model.preference("email",a);$(".NB-error",this.$modal).fadeOut(500);this.model.send_story_email({story_id:this.story_id,feed_id:this.feed_id,from_name:b,from_email:a,
to:c,comments:d},this.save_callback,this.error)},save_callback:function(b){var a=$("input[type=submit]",this.$modal);!b||b.code<0?($(".NB-error",this.$modal).html(b.message).fadeIn(500),$(".NB-modal-loading",this.$modal).removeClass("NB-active"),a.removeClass("NB-disabled").val("Send this story")):(a.val("Sent!"),this.close())},error:function(){var b=$(".NB-modal-error",this.$modal);b.show();b.text("There was a issue on the backend with sending your email. Sorry about this! It has been noted and will be fixed soon. You should probably send this manually now.");
$(".NB-modal-loading",this.$modal).removeClass("NB-active")},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-modal-submit-save"},function(){a.preventDefault();c.save();return!1})}});NEWSBLUR.ReaderTutorial=function(b){_.bindAll(this,"close");this.options=$.extend({page_number:1},{},b);this.model=NEWSBLUR.AssetModel.reader();this.page_number=this.options.page_number;this.intervals={};this.runner()};NEWSBLUR.ReaderTutorial.prototype=new NEWSBLUR.Modal;
NEWSBLUR.ReaderTutorial.prototype.constructor=NEWSBLUR.ReaderTutorial;
_.extend(NEWSBLUR.ReaderTutorial.prototype,{TITLES:["Learn to use NewsBlur","Three Site Views","Training the Intelligence","Tips and Tricks","Feedback and Open Source"],runner:function(){this.make_modal();this.open_modal();this.page(1);this.load_newsblur_blog_info();this.load_intelligence_slider();this.load_tips();this.make_story_titles();this.rotate_slider();this.$modal.bind("click",$.rescope(this.handle_click,this))},load_newsblur_blog_info:function(){this.model.load_tutorial({},_.bind(function(b){this.newsblur_feed=
b.newsblur_feed;$(".NB-javascript",this.$modal).removeClass("NB-javascript")},this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-tutorial NB-modal"},[$.make("span",{className:"NB-modal-loading NB-spinner"}),$.make("div",{className:"NB-modal-page"}),$.make("h2",{className:"NB-modal-title"}),$.make("div",{className:"NB-page NB-page-1"},[$.make("h4","NewsBlur is a visual feed reader with intelligence."),$.make("div","You'll figure out much of NewsBlur by playing around and trying things out. This tutorial is here to quickly offer a foundation."),
$.make("h4","This tutorial covers:"),$.make("ul",[$.make("li",[$.make("div",{className:"NB-right"},"Page 2"),"Using the three views (Original, Feed, and Story)"]),$.make("li",[$.make("div",{className:"NB-right"},"Page 3"),"Training and filtering stories"]),$.make("li",[$.make("div",{className:"NB-right"},"Page 4"),"Tips and tricks that may not be obvious"]),$.make("li",[$.make("div",{className:"NB-right"},"Page 5"),"Feedback, open source, the blog, and twitter"])]),$.make("h4","Why you should use NewsBlur:"),
$.make("ul",[$.make("li",["This is a free service that is always getting better."]),$.make("li",["See the original site and read stories as the author intended."]),$.make("li",["Spend less time as NewsBlur filters the stories for you."])])]),$.make("div",{className:"NB-page NB-page-2"},[$.make("h4","Read your sites with three different views:"),$.make("div",{className:"NB-tutorial-view"},[$.make("div",{className:"NB-tutorial-view-title"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/application_view_tile.png"}),
"Original"]),$.make("img",{className:"NB-tutorial-view-image",src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_view_original.png"}),$.make("span","The site itself.")]),$.make("div",{className:"NB-tutorial-view"},[$.make("div",{className:"NB-tutorial-view-title"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/application_view_list.png"}),"Feed"]),$.make("img",{className:"NB-tutorial-view-image",src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_view_feed.png"}),$.make("span",
"All feed stories.")]),$.make("div",{className:"NB-tutorial-view"},[$.make("div",{className:"NB-tutorial-view-title"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/application_view_gallery.png"}),"Story"]),$.make("img",{className:"NB-tutorial-view-image",src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_view_story.png"}),$.make("span","Story click-through.")]),$.make("ul",[$.make("li",["The view you choose is saved per-site, so you can mix-and-match."]),$.make("li",["Double-click story titles to temporarily open a story in the Story view."]),
$.make("li",["In the Original view, if a story is not found, it will temporarily open in the Feed view."]),$.make("li",["Much about these views can be customized under Preferences."])])]),$.make("div",{className:"NB-page NB-page-3"},[$.make("h4","NewsBlur works best when you use intelligence classifiers."),$.make("ul",[$.make("li",{className:"NB-tutorial-train-1"},[$.make("b","First: Train stories and sites."),$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_train_feed.png"}),$.make("img",
{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_train_story.png"})]),$.make("li",[$.make("b","Second: The intelligence slider filters stories based on training."),$.make("div",{className:"NB-tutorial-stories",id:"story_titles"}),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_green.png"})," are stories you like",$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_yellow.png"})," are stories you have not yet rated",
$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_red.png"})," are stories you don't like",$.make("div",{className:"NB-taskbar-intelligence"},[$.make("div",{className:"NB-tutorial-slider"}),$.make("div",{className:"NB-taskbar-intelligence-indicator NB-taskbar-intelligence-negative"}),$.make("div",{className:"NB-taskbar-intelligence-indicator NB-taskbar-intelligence-neutral"}),$.make("div",{className:"NB-taskbar-intelligence-indicator NB-taskbar-intelligence-positive"}),
$.make("div",{className:"NB-intelligence-slider"})])])])]),$.make("div",{className:"NB-page NB-page-4"},[$.make("h4","Here are a few tricks that may enhance your experience:"),$.make("ul",[$.make("li",{className:"NB-tutorial-tips-sites"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_tips_sites.png"}),$.make("div",["Click on the sites count at the top of the sidebar to hide sites with no unread stories."])]),$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_tips_instafetch.png"}),
"Instantly refresh a site by right-clicking on it and selecting ",$.make("b","Insta-fetch stories.")]),$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_tips_stories.png"}),"Click the arrow next to sites and stories to open up a menu."]),$.make("li",{className:"NB-tutorial-tips-train"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_tips_train.png"}),$.make("div","Train sites in the Feed view by clicking directly on the tags and authors. The tags will rotate color between like and dislike.")]),
$.make("li",[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/tutorial_tips_folders.png"}),"Folders can be nested inside folders."]),$.make("li",["There are more than a dozen keyboard shortcuts you can use:",$.make("div",{className:"NB-modal-keyboard"},[$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Next story"),$.make("div",{className:"NB-keyboard-shortcut-key"},["&#x2193;"]),$.make("div",
{className:"NB-keyboard-shortcut-key"},["j"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Previous story"),$.make("div",{className:"NB-keyboard-shortcut-key"},["&#x2191;"]),$.make("div",{className:"NB-keyboard-shortcut-key"},["k"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Next site"),$.make("div",{className:"NB-keyboard-shortcut-key"},
["shift",$.make("span","+"),"&#x2193;"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Prev. site"),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span","+"),"&#x2191;"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Switch views"),$.make("div",{className:"NB-keyboard-shortcut-key"},["&#x2190;"]),
$.make("div",{className:"NB-keyboard-shortcut-key"},["&#x2192;"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Open Site"),$.make("div",{className:"NB-keyboard-shortcut-key"},["enter"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Page down"),$.make("div",{className:"NB-keyboard-shortcut-key"},["space"])]),$.make("div",
{className:"NB-keyboard-shortcut NB-last"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Page up"),$.make("div",{className:"NB-keyboard-shortcut-key"},["shift",$.make("span","+"),"space"])])]),$.make("div",{className:"NB-keyboard-group"},[$.make("div",{className:"NB-keyboard-shortcut"},[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Next Unread Story"),$.make("div",{className:"NB-keyboard-shortcut-key"},["n"])]),$.make("div",{className:"NB-keyboard-shortcut NB-last"},
[$.make("div",{className:"NB-keyboard-shortcut-explanation"},"Hide Sidebar"),$.make("div",{className:"NB-keyboard-shortcut-key"},["u"])])])])])])]),$.make("div",{className:"NB-page NB-page-5"},[$.make("h4","Stay connected to NewsBlur on Twitter"),$.make("div",{className:"NB-tutorial-twitter"},[$.make("a",{className:"NB-splash-link",href:"http://twitter.com/samuelclay",target:"_blank"},[$.make("img",{src:"http://img.tweetimag.es/i/samuelclay_n.png",style:"border-color: #505050;"}),$.make("span","@samuelclay")]),
$.make("a",{className:"NB-splash-link",href:"http://twitter.com/newsblur",target:"_blank"},[$.make("img",{src:"http://img.tweetimag.es/i/newsblur_n.png"}),$.make("span","@newsblur")])]),$.make("h4",{className:"NB-tutorial-feedback-header"},"Community Feedback"),$.make("ul",[$.make("li",[$.make("a",{href:"http://getsatisfaction.com/newsblur",className:"NB-splash-link"},["NewsBlur on ",$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/getsatisfaction.png",style:"vertical-align: middle;margin: -2px 0 0"}),
" Get Satisfaction"])])]),$.make("h4",{className:"NB-tutorial-feedback-header"},["Open Source Code"]),$.make("ul",[$.make("li",[$.make("a",{href:"http://github.com/samuelclay",className:"NB-splash-link"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/howitworks_github.png",style:"float: right;margin: -68px 12px 0 0"}),"NewsBlur on ",$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/github_icon.png",style:"vertical-align: middle;margin: -2px 0 0"})," GitHub"])])]),$.make("h4",{className:"NB-tutorial-feedback-header"},
"The NewsBlur Blog"),$.make("ul",[$.make("li",[$.make("div",{className:"NB-modal-submit-button NB-modal-submit-green NB-javascript NB-tutorial-finish-newsblur-blog",style:"float: right;margin-top: -2px"},["Finish Tutorial and Load",$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/favicon.png",style:"margin: -3px 0px 0px 4px; vertical-align: middle;"})," the NewsBlur Blog ",$.make("span",{className:"NB-raquo"},"&raquo;")]),"Monthly updates."])])]),$.make("div",{className:"NB-modal-submit"},[$.make("div",
{className:"NB-page-next NB-modal-submit-button NB-modal-submit-green NB-modal-submit-save"},[$.make("span",{className:"NB-tutorial-next-page-text"},"Next Page "),$.make("span",{className:"NB-raquo"},"&raquo;")]),$.make("div",{className:"NB-page-previous NB-modal-submit-button NB-modal-submit-close NB-modal-submit-save"},[$.make("span",{className:"NB-raquo"},"&laquo;")," Previous Page"])])])},set_title:function(){$(".NB-modal-title",this.$modal).text(this.TITLES[this.page_number-1])},load_tips:function(){},
make_story_titles:function(){var b=$(".NB-tutorial-stories",this.$modal);_.each([["Story about space travel","","space","neutral"],["NewsBlur becomes #1 feed reader","","","positive"],["Everyday news","Sam Clay","news","neutral"],["Another top 10 list","RSC","top 10","negative"],["Boring story about sports","Godzilla","","negative"],["New Strokes album!","P. Smith","music","positive"]],function(a){a=$.make("div",{className:"story NB-story-"+a[3]},[$.make("div",{className:"NB-storytitles-sentiment"}),
$.make("a",{href:"#",className:"story_title"},[$.make("span",{className:"NB-storytitles-title"},a[0]),a[1]&&$.make("span",{className:"NB-storytitles-author"},a[1]),a[2]&&$.make("span",{className:"NB-storytitles-tags"},[$.make("span",{className:"NB-storytitles-tag"},a[2]).corner("4px")])]),$.make("div",{className:"NB-story-manage-icon"})]);b.append(a)})},load_intelligence_slider:function(){var b=this,a=$(".NB-intelligence-slider",this.$modal),c=this.model.preference("unread_view");a.slider({range:"max",
min:-1,max:1,step:1,value:c,slide:function(){},stop:function(a,c){clearInterval(b.intervals.slider);b.show_story_titles_above_intelligence_level(c.value)}})},rotate_slider:function(){clearInterval(this.intervals.slider);this.slider_value=0;this.intervals.slider=setInterval(_.bind(function(){this.slider_value=(this.slider_value+1)%3;this.set_slider_value(this.slider_value-1);this.show_story_titles_above_intelligence_level(this.slider_value-1)},this),2E3)},set_slider_value:function(b){$(".NB-intelligence-slider",
this.$modal).slider("value",b)},show_story_titles_above_intelligence_level:function(b){var b=b||0,a,c;b>0?(a=$(".NB-story-positive",this.$modal),c=$(".NB-story-neutral,.NB-story-negative",this.$modal)):b==0?(a=$(".NB-story-positive,.NB-story-neutral",this.$modal),c=$(".NB-story-negative",this.$modal)):b<0&&(a=$(".NB-story-positive,.NB-story-neutral,.NB-story-negative",this.$modal),c=$(".NB-story-nothing",this.$modal));a.slideDown(500);c.slideUp(500)},next_page:function(){return this.page(this.page_number+
1)},previous_page:function(){return this.page(this.page_number-1)},page:function(b){if(b==null)return this.page_number;var a=$(".NB-page",this.$modal).length;this.page_number=b;if(b==a)$(".NB-tutorial-next-page-text",this.$modal).text("Finish Tutorial ");else if(b>a)return this.close();else $(".NB-tutorial-next-page-text",this.$modal).text("Next Page ");$(".NB-page-previous",this.$modal).toggle(b!=1);$(".NB-page",this.$modal).css({display:"none"});$(".NB-page-"+this.page_number,this.$modal).css({display:"block"});
$(".NB-modal-page",this.$modal).html($.make("div",["Page ",$.make("b",this.page_number)," of ",$.make("b",a)]));this.set_title()},close:function(){this.model.load_tutorial({finished:!0});_.delay(function(){NEWSBLUR.reader.hide_tutorial()},500);NEWSBLUR.Modal.prototype.close.call(this)},close_and_load_newsblur_blog:function(){this.close();NEWSBLUR.reader.load_feed_in_tryfeed_view(this.newsblur_feed.id,this.newsblur_feed)},handle_click:function(b,a){var c=this;$.targetIs(a,{tagSelector:".NB-page-next"},
function(){a.preventDefault();c.next_page()});$.targetIs(a,{tagSelector:".NB-page-previous"},function(){a.preventDefault();c.previous_page()});$.targetIs(a,{tagSelector:".NB-tutorial-finish-newsblur-blog"},function(){a.preventDefault();c.close_and_load_newsblur_blog()});$.targetIs(a,{tagSelector:".NB-story-manage-icon"},function(){a.preventDefault();a.stopPropagation()})}});NEWSBLUR.About=function(b){this.options=$.extend({},{},b);this.runner()};
NEWSBLUR.About.prototype={runner:function(){this.make_modal();this.open_modal();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-about NB-modal-exception NB-modal"},[$.make("a",{href:"#faq",className:"NB-link-about-faq"},"FAQ"),$.make("h2",{className:"NB-modal-title"},"About NewsBlur"),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",
{className:"NB-exception-option-option"},"What:"),"A Feed Reader with Intelligence"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-what"},[$.make("li","Read the original site or the RSS feed."),$.make("li","Automatically highlight stories you want to read."),$.make("li",{className:"last"},"Filter out stories you don't want to read.")])])]),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",
{className:"NB-exception-option-option"},"Who:"),"A Labor of Love"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-who"},[$.make("li",["Hand-crafted by: ",$.make("a",{href:"http://www.samuelclay.com"},"Samuel Clay")]),$.make("li",["Find him on Twitter: ",$.make("a",{href:"http://twitter.com/samuelclay"},"@samuelclay")]),$.make("li",["E-mail: ",$.make("a",{href:"mailto:samuel@ofbrooklyn.com"},"samuel@ofbrooklyn.com")]),$.make("li",{className:"last"},["Made in: ",$.make("a",
{href:"http://www.newyorkfieldguide.com"},"New York City")])])])]),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",{className:"NB-exception-option-option"},"How:"),"Server-side technologies"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-server"},[$.make("li",[$.make("a",{href:"http://www.djangoproject.com"},"Django"),": Web framework written in Python, used to serve all pages."]),
$.make("li",[$.make("a",{href:"http://ask.github.com/celery"},"Celery")," &amp; ",$.make("a",{href:"http://www.rabbitmq.com"},"RabbitMQ"),": Asynchronous queueing server, used to fetch and parse RSS feeds."]),$.make("li",[$.make("a",{href:"http://www.mongodb.com"},"MongoDB"),", ",$.make("a",{href:"http://www.mongodb.com/pymongo"},"Pymongo"),", &amp; ",$.make("a",{href:"http://www.github.com/hmarr/mongoengine"},"Mongoengine"),": Non-relational database, used to store stories, read stories, feed/page fetch histories, and proxied sites."]),
$.make("li",{className:"last"},[$.make("a",{href:"http://www.postgresql.com"},"PostgreSQL"),": Relational database, used to store feeds, subscriptions, and user accounts."])])])]),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",{className:"NB-exception-option-option"},"How:"),"Client-side and design"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-client"},[$.make("li",[$.make("a",
{href:"http://www.jquery.com"},"jQuery"),": Cross-browser compliant JavaScript code. IE works without effort."]),$.make("li",[$.make("a",{href:"http://documentcloud.github.com/underscore/"},"Underscore.js"),": Functional programming for JavaScript. Indispensible."]),$.make("li",[$.make("b","Miscellaneous jQuery Plugins:")," Everything from resizable layouts, to progress bars, sortables, date handling, colors, corners, JSON, animations. See the complete list on ",$.make("a",{href:"http://github.com/samuelclay/NewsBlur/"},
"NewsBlur's GitHub repository")])])])]),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",[$.make("div",{className:"NB-exception-option-meta"}),$.make("span",{className:"NB-exception-option-option"},"Why:"),"What's the point of another RSS feed reader?"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-why"},[$.make("li",["To learn how to build and scale the entire web stack: front-end JavaScript, HTML5 layout, back-end view processing, large dataset schema migrations, relational and non-relational database clusters across multiple servers, and getting multiple machines to talk to each other."]),
$.make("li",["All of this just to prove that I could do it."]),$.make("li",["But most importantly, to meet future co-founders."])])])])])},open_modal:function(){this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200)})},onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b,a){b.data.hide().empty().remove();b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();
$.modal.close(a)});$(".NB-modal-holder").empty().remove()}})},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();$.modal.close()})},handle_click:function(b,a){$.targetIs(a,{tagSelector:".NB-link-about-faq"},function(){a.preventDefault();$.modal.close(function(){NEWSBLUR.faq=new NEWSBLUR.Faq})})}};NEWSBLUR.Faq=function(b){this.options=$.extend({},{},b);this.runner()};
NEWSBLUR.Faq.prototype={runner:function(){$.modal.close();this.make_modal();this.open_modal();this.$modal.bind("click",$.rescope(this.handle_click,this))},make_modal:function(){this.$modal=$.make("div",{className:"NB-modal-about NB-modal-exception NB-modal"},[$.make("a",{href:"#faq",className:"NB-link-about-faq"},"About NewsBlur"),$.make("h2",{className:"NB-modal-title"},"Frequently Asked Questions"),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",["The Reader"]),$.make("div",
{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-what"},[$.make("li",[$.make("div",{className:"NB-faq-question"},"What is the difference between the three views: Original, Feed, and Story?"),$.make("div",{className:"NB-faq-answer"},"Original view is the original site. Feed view is the RSS feed from the site. And Story view is the original site for one story at a time. Original view is the blog site, whereas Story view is an individual blog post. It's all personal preference, really."),
$.make("div",{className:"NB-faq-answer"},"You can double-click a story to temporarily open it up in the Story view. The next story you open will transport you back to whichever view you were on before. Double-clicking a Feed will open up the feed in a new tab.")]),$.make("li",[$.make("div",{className:"NB-faq-question"},"Am I actually at the original site? Can NewsBlur see what I see?"),$.make("div",{className:"NB-faq-answer"},"In order to show you the original site, NewsBlur takes a snapshot of the page. You may have noticed that if you are logged into the original site, you are not logged into NewsBlur's snapshot of the page. This is because NewsBlur fetched the site for you.")]),
$.make("li",{className:"last"},[$.make("div",{className:"NB-faq-question"},"Why doesn't NewsBlur follow me when I click on links on the page?"),$.make("div",{className:"NB-faq-answer"},"When you click on a link, you are technically leaving NewsBlur, although only for a portion of the page in an iframe. In order to track what you're reading, you need to read NewsBlur's snapshot of the page, or switch to the Feed view."),$.make("div",{className:"NB-faq-answer last"},"This may change one day. There is a way to fix this behavior so it works like you would expect. It is not easy to do, however. One day.")])])])]),
$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",["The Intelligence"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-server"},[$.make("li",[$.make("div",{className:"NB-faq-question"},["What does the three-color slider do?"]),$.make("div",{className:"NB-faq-answer"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/intelligence_slider_positive.png",className:"NB-faq-image",width:114,height:29}),"This is called the intelligence slider. Slide it to the right to only show stories you like."]),
$.make("div",{className:"NB-faq-answer last"},[$.make("img",{src:NEWSBLUR.Globals.MEDIA_URL+"/img/reader/intelligence_slider_negative.png",className:"NB-faq-image",width:114,height:29}),"Slide it to the left to show stories you dislike. Stories all start off neutral, in the center of the slider."]),$.make("div",{className:"NB-faq-answer"},[$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_red.png"})," are stories you don't like",$.make("br"),
$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_yellow.png"})," are stories you have not yet rated",$.make("br"),$.make("img",{className:"NB-trainer-bullet",src:NEWSBLUR.Globals.MEDIA_URL+"/img/icons/silk/bullet_green.png"})," are stories you like"])]),$.make("li",{className:"last"},[$.make("div",{className:"NB-faq-question"},"How does NewsBlur know whether I like or dislike a story?"),$.make("div",{className:"NB-faq-answer"},"When you like or dislike a story, you mark a facet of that story by checking a tag, author, part of the title, or entire publisher. When these facets are found in future stories, the stories are then weighted with your preferences. It is a very simple, explicit process where you tell NewsBlur what you like and don't like."),
$.make("div",{className:"NB-faq-answer"},"The idea is that by explicitly telling NewsBlur what your story preferences are, there is increased likelihood that you will like what the intelligence slider does for you."),$.make("div",{className:"NB-faq-answer last"},"Currently, there is not an automated way of detecting stories you like or dislike without having to train NewsBlur. This implicit, automatic intelligence will come in the near-term future, but it will require an evolution to the interface that has not been easy to figure out how to make in a simple, clear, and effective manner. Soon.")])])])]),
$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",["What's Coming"]),$.make("div",{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-who"},[$.make("li",[$.make("div",{className:"NB-faq-answer"},"An iPhone app.")]),$.make("li",{className:"last"},[$.make("div",{className:"NB-faq-answer last"},"Sort sites alphabetically, by popularity, use, unread counts.")])])])]),$.make("div",{className:"NB-fieldset NB-modal-submit"},[$.make("h5",["Something's Wrong"]),$.make("div",
{className:"NB-fieldset-fields"},[$.make("ul",{className:"NB-about-client"},[$.make("li",[$.make("div",{className:"NB-faq-question"},"Help! All of the stories are several days old and new stories are not showing up."),$.make("div",{className:"NB-faq-answer"},"Sites that only have a single subscriber tend to get updated much less often than popular sites. Additionally, the frequency that a site publishes stories (once per month or several per day) has an impact on how often the site is refreshed.")]),
$.make("li",[$.make("div",{className:"NB-faq-question"},"Help! A bunch of my sites are misbehaving and they work in Google Reader."),$.make("div",{className:"NB-faq-answer"},"This is a known issue that is being addressed in a number of ways. About half of these misbehaving errors are errors that you really do need to address (like 404 Not Found errors). The other half are various edge cases, parser errors, uncaught exceptions, and bad code on NewsBlur's part."),$.make("div",{className:"NB-faq-answer"},
"But because this problem is so severe, various measures are taken every few weeks that fix a huge swath of misbheaving sites at once. You might find that this happens and it's quite nice when it does.")]),$.make("li",{className:"last"},[$.make("div",{className:"NB-faq-question"},"Help! I have an issue and it's not mentioned here."),$.make("div",{className:"NB-faq-answer last"},["Please, please, please e-mail ",$.make("a",{href:"mailto:samuel@ofbrooklyn.com"},"samuel@ofbrooklyn.com"),". If you have an issue it is entirely possible that other people do, too."])])])])])])},
open_modal:function(){this.$modal.modal({minWidth:600,maxWidth:600,overlayClose:!0,onOpen:function(b){b.overlay.fadeIn(200,function(){b.container.fadeIn(200);b.data.fadeIn(200)})},onShow:function(){$("#simplemodal-container").corner("6px")},onClose:function(b,a){b.data.hide().empty().remove();b.container.hide().empty().remove();b.overlay.fadeOut(200,function(){b.overlay.empty().remove();$.modal.close(a)});$(".NB-modal-holder").empty().remove()}})},handle_cancel:function(){$(".NB-modal-cancel",this.$modal).click(function(b){b.preventDefault();
$.modal.close()})},handle_click:function(b,a){$.targetIs(a,{tagSelector:".NB-link-about-faq"},function(){a.preventDefault();$.modal.close(function(){NEWSBLUR.about=new NEWSBLUR.About})})}};
